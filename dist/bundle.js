/*! For license information please see bundle.js.LICENSE.txt */
(() => {
  var t = {
      85: (t, e, n) => {
        "use strict";
        n.d(e, { Z: () => _ });
        var r,
          i,
          o = n(15),
          s = n(36),
          a = n(733),
          u = n(270),
          c =
            (((r = {})["no-app"] =
              "No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),
            (r["bad-app-name"] = "Illegal App name: '{$appName}"),
            (r["duplicate-app"] =
              "Firebase App named '{$appName}' already exists"),
            (r["app-deleted"] =
              "Firebase App named '{$appName}' already deleted"),
            (r["invalid-app-argument"] =
              "firebase.{$appName}() takes either no argument or a Firebase App instance."),
            (r["invalid-log-argument"] =
              "First argument to `onLog` must be null or a function."),
            r),
          h = new s.LL("app", "Firebase", c),
          l = "@firebase/app",
          f = "[DEFAULT]",
          p =
            (((i = {})[l] = "fire-core"),
            (i["@firebase/analytics"] = "fire-analytics"),
            (i["@firebase/auth"] = "fire-auth"),
            (i["@firebase/database"] = "fire-rtdb"),
            (i["@firebase/functions"] = "fire-fn"),
            (i["@firebase/installations"] = "fire-iid"),
            (i["@firebase/messaging"] = "fire-fcm"),
            (i["@firebase/performance"] = "fire-perf"),
            (i["@firebase/remote-config"] = "fire-rc"),
            (i["@firebase/storage"] = "fire-gcs"),
            (i["@firebase/firestore"] = "fire-fst"),
            (i["fire-js"] = "fire-js"),
            (i["firebase-wrapper"] = "fire-js-all"),
            i),
          d = new u.Yd("@firebase/app"),
          v = (function () {
            function t(t, e, n) {
              var r = this;
              (this.firebase_ = n),
                (this.isDeleted_ = !1),
                (this.name_ = e.name),
                (this.automaticDataCollectionEnabled_ =
                  e.automaticDataCollectionEnabled || !1),
                (this.options_ = (0, s.p$)(t)),
                (this.container = new a.H0(e.name)),
                this._addComponent(
                  new a.wA(
                    "app",
                    function () {
                      return r;
                    },
                    "PUBLIC"
                  )
                ),
                this.firebase_.INTERNAL.components.forEach(function (t) {
                  return r._addComponent(t);
                });
            }
            return (
              Object.defineProperty(
                t.prototype,
                "automaticDataCollectionEnabled",
                {
                  get: function () {
                    return (
                      this.checkDestroyed_(),
                      this.automaticDataCollectionEnabled_
                    );
                  },
                  set: function (t) {
                    this.checkDestroyed_(),
                      (this.automaticDataCollectionEnabled_ = t);
                  },
                  enumerable: !1,
                  configurable: !0,
                }
              ),
              Object.defineProperty(t.prototype, "name", {
                get: function () {
                  return this.checkDestroyed_(), this.name_;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(t.prototype, "options", {
                get: function () {
                  return this.checkDestroyed_(), this.options_;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.delete = function () {
                var t = this;
                return new Promise(function (e) {
                  t.checkDestroyed_(), e();
                })
                  .then(function () {
                    return (
                      t.firebase_.INTERNAL.removeApp(t.name_),
                      Promise.all(
                        t.container.getProviders().map(function (t) {
                          return t.delete();
                        })
                      )
                    );
                  })
                  .then(function () {
                    t.isDeleted_ = !0;
                  });
              }),
              (t.prototype._getService = function (t, e) {
                return (
                  void 0 === e && (e = f),
                  this.checkDestroyed_(),
                  this.container.getProvider(t).getImmediate({ identifier: e })
                );
              }),
              (t.prototype._removeServiceInstance = function (t, e) {
                void 0 === e && (e = f),
                  this.container.getProvider(t).clearInstance(e);
              }),
              (t.prototype._addComponent = function (t) {
                try {
                  this.container.addComponent(t);
                } catch (e) {
                  d.debug(
                    "Component " +
                      t.name +
                      " failed to register with FirebaseApp " +
                      this.name,
                    e
                  );
                }
              }),
              (t.prototype._addOrOverwriteComponent = function (t) {
                this.container.addOrOverwriteComponent(t);
              }),
              (t.prototype.toJSON = function () {
                return {
                  name: this.name,
                  automaticDataCollectionEnabled:
                    this.automaticDataCollectionEnabled,
                  options: this.options,
                };
              }),
              (t.prototype.checkDestroyed_ = function () {
                if (this.isDeleted_)
                  throw h.create("app-deleted", { appName: this.name_ });
              }),
              t
            );
          })();
        (v.prototype.name && v.prototype.options) ||
          v.prototype.delete ||
          console.log("dc");
        var g = (function t() {
            var e = (function (t) {
              var e = {},
                n = new Map(),
                r = {
                  __esModule: !0,
                  initializeApp: function (n, i) {
                    void 0 === i && (i = {}),
                      ("object" == typeof i && null !== i) || (i = { name: i });
                    var o = i;
                    void 0 === o.name && (o.name = f);
                    var a = o.name;
                    if ("string" != typeof a || !a)
                      throw h.create("bad-app-name", { appName: String(a) });
                    if ((0, s.r3)(e, a))
                      throw h.create("duplicate-app", { appName: a });
                    var u = new t(n, o, r);
                    return (e[a] = u), u;
                  },
                  app: i,
                  registerVersion: function (t, e, n) {
                    var r,
                      i = null !== (r = p[t]) && void 0 !== r ? r : t;
                    n && (i += "-" + n);
                    var s = i.match(/\s|\//),
                      u = e.match(/\s|\//);
                    if (s || u) {
                      var c = [
                        'Unable to register library "' +
                          i +
                          '" with version "' +
                          e +
                          '":',
                      ];
                      return (
                        s &&
                          c.push(
                            'library name "' +
                              i +
                              '" contains illegal characters (whitespace or "/")'
                          ),
                        s && u && c.push("and"),
                        u &&
                          c.push(
                            'version name "' +
                              e +
                              '" contains illegal characters (whitespace or "/")'
                          ),
                        void d.warn(c.join(" "))
                      );
                    }
                    o(
                      new a.wA(
                        i + "-version",
                        function () {
                          return { library: i, version: e };
                        },
                        "VERSION"
                      )
                    );
                  },
                  setLogLevel: u.Ub,
                  onLog: function (t, e) {
                    if (null !== t && "function" != typeof t)
                      throw h.create("invalid-log-argument");
                    (0, u.Am)(t, e);
                  },
                  apps: null,
                  SDK_VERSION: "8.3.0",
                  INTERNAL: {
                    registerComponent: o,
                    removeApp: function (t) {
                      delete e[t];
                    },
                    components: n,
                    useAsService: function (t, e) {
                      return "serverAuth" === e ? null : e;
                    },
                  },
                };
              function i(t) {
                if (((t = t || f), !(0, s.r3)(e, t)))
                  throw h.create("no-app", { appName: t });
                return e[t];
              }
              function o(o) {
                var a = o.name;
                if (n.has(a))
                  return (
                    d.debug(
                      "There were multiple attempts to register component " +
                        a +
                        "."
                    ),
                    "PUBLIC" === o.type ? r[a] : null
                  );
                if ((n.set(a, o), "PUBLIC" === o.type)) {
                  var u = function (t) {
                    if ((void 0 === t && (t = i()), "function" != typeof t[a]))
                      throw h.create("invalid-app-argument", { appName: a });
                    return t[a]();
                  };
                  void 0 !== o.serviceProps && (0, s.ZB)(u, o.serviceProps),
                    (r[a] = u),
                    (t.prototype[a] = function () {
                      for (var t = [], e = 0; e < arguments.length; e++)
                        t[e] = arguments[e];
                      return this._getService
                        .bind(this, a)
                        .apply(this, o.multipleInstances ? t : []);
                    });
                }
                for (var c = 0, l = Object.keys(e); c < l.length; c++) {
                  var f = l[c];
                  e[f]._addComponent(o);
                }
                return "PUBLIC" === o.type ? r[a] : null;
              }
              return (
                (r.default = r),
                Object.defineProperty(r, "apps", {
                  get: function () {
                    return Object.keys(e).map(function (t) {
                      return e[t];
                    });
                  },
                }),
                (i.App = t),
                r
              );
            })(v);
            return (
              (e.INTERNAL = (0, o.pi)((0, o.pi)({}, e.INTERNAL), {
                createFirebaseNamespace: t,
                extendNamespace: function (t) {
                  (0, s.ZB)(e, t);
                },
                createSubscribe: s.ne,
                ErrorFactory: s.LL,
                deepExtend: s.ZB,
              })),
              e
            );
          })(),
          m = (function () {
            function t(t) {
              this.container = t;
            }
            return (
              (t.prototype.getPlatformInfoString = function () {
                return this.container
                  .getProviders()
                  .map(function (t) {
                    if (
                      (function (t) {
                        var e = t.getComponent();
                        return "VERSION" === (null == e ? void 0 : e.type);
                      })(t)
                    ) {
                      var e = t.getImmediate();
                      return e.library + "/" + e.version;
                    }
                    return null;
                  })
                  .filter(function (t) {
                    return t;
                  })
                  .join(" ");
              }),
              t
            );
          })();
        if ((0, s.jU)() && void 0 !== self.firebase) {
          d.warn(
            "\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "
          );
          var y = self.firebase.SDK_VERSION;
          y &&
            y.indexOf("LITE") >= 0 &&
            d.warn(
              "\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "
            );
        }
        var b = g.initializeApp;
        g.initializeApp = function () {
          for (var t = [], e = 0; e < arguments.length; e++)
            t[e] = arguments[e];
          return (
            (0, s.UG)() &&
              d.warn(
                '\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '
              ),
            b.apply(void 0, t)
          );
        };
        var w = g;
        !(function (t, e) {
          t.INTERNAL.registerComponent(
            new a.wA(
              "platform-logger",
              function (t) {
                return new m(t);
              },
              "PRIVATE"
            )
          ),
            t.registerVersion(l, "0.6.16", void 0),
            t.registerVersion("fire-js", "");
        })(w);
        const _ = w;
      },
      733: (t, e, n) => {
        "use strict";
        n.d(e, { wA: () => o, H0: () => u, zt: () => a });
        var r = n(15),
          i = n(36),
          o = (function () {
            function t(t, e, n) {
              (this.name = t),
                (this.instanceFactory = e),
                (this.type = n),
                (this.multipleInstances = !1),
                (this.serviceProps = {}),
                (this.instantiationMode = "LAZY");
            }
            return (
              (t.prototype.setInstantiationMode = function (t) {
                return (this.instantiationMode = t), this;
              }),
              (t.prototype.setMultipleInstances = function (t) {
                return (this.multipleInstances = t), this;
              }),
              (t.prototype.setServiceProps = function (t) {
                return (this.serviceProps = t), this;
              }),
              t
            );
          })(),
          s = "[DEFAULT]",
          a = (function () {
            function t(t, e) {
              (this.name = t),
                (this.container = e),
                (this.component = null),
                (this.instances = new Map()),
                (this.instancesDeferred = new Map());
            }
            return (
              (t.prototype.get = function (t) {
                void 0 === t && (t = s);
                var e = this.normalizeInstanceIdentifier(t);
                if (!this.instancesDeferred.has(e)) {
                  var n = new i.BH();
                  this.instancesDeferred.set(e, n);
                  try {
                    var r = this.getOrInitializeService(e);
                    r && n.resolve(r);
                  } catch (t) {}
                }
                return this.instancesDeferred.get(e).promise;
              }),
              (t.prototype.getImmediate = function (t) {
                var e = (0, r.pi)({ identifier: s, optional: !1 }, t),
                  n = e.identifier,
                  i = e.optional,
                  o = this.normalizeInstanceIdentifier(n);
                try {
                  var a = this.getOrInitializeService(o);
                  if (!a) {
                    if (i) return null;
                    throw Error("Service " + this.name + " is not available");
                  }
                  return a;
                } catch (t) {
                  if (i) return null;
                  throw t;
                }
              }),
              (t.prototype.getComponent = function () {
                return this.component;
              }),
              (t.prototype.setComponent = function (t) {
                var e, n;
                if (t.name !== this.name)
                  throw Error(
                    "Mismatching Component " +
                      t.name +
                      " for Provider " +
                      this.name +
                      "."
                  );
                if (this.component)
                  throw Error(
                    "Component for " + this.name + " has already been provided"
                  );
                if (
                  ((this.component = t),
                  (function (t) {
                    return "EAGER" === t.instantiationMode;
                  })(t))
                )
                  try {
                    this.getOrInitializeService(s);
                  } catch (t) {}
                try {
                  for (
                    var i = (0, r.XA)(this.instancesDeferred.entries()),
                      o = i.next();
                    !o.done;
                    o = i.next()
                  ) {
                    var a = (0, r.CR)(o.value, 2),
                      u = a[0],
                      c = a[1],
                      h = this.normalizeInstanceIdentifier(u);
                    try {
                      var l = this.getOrInitializeService(h);
                      c.resolve(l);
                    } catch (t) {}
                  }
                } catch (t) {
                  e = { error: t };
                } finally {
                  try {
                    o && !o.done && (n = i.return) && n.call(i);
                  } finally {
                    if (e) throw e.error;
                  }
                }
              }),
              (t.prototype.clearInstance = function (t) {
                void 0 === t && (t = s),
                  this.instancesDeferred.delete(t),
                  this.instances.delete(t);
              }),
              (t.prototype.delete = function () {
                return (0, r.mG)(this, void 0, void 0, function () {
                  var t;
                  return (0, r.Jh)(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return (
                          (t = Array.from(this.instances.values())),
                          [
                            4,
                            Promise.all(
                              (0, r.ev)(
                                (0, r.ev)(
                                  [],
                                  (0, r.CR)(
                                    t
                                      .filter(function (t) {
                                        return "INTERNAL" in t;
                                      })
                                      .map(function (t) {
                                        return t.INTERNAL.delete();
                                      })
                                  )
                                ),
                                (0, r.CR)(
                                  t
                                    .filter(function (t) {
                                      return "_delete" in t;
                                    })
                                    .map(function (t) {
                                      return t._delete();
                                    })
                                )
                              )
                            ),
                          ]
                        );
                      case 1:
                        return e.sent(), [2];
                    }
                  });
                });
              }),
              (t.prototype.isComponentSet = function () {
                return null != this.component;
              }),
              (t.prototype.isInitialized = function (t) {
                return void 0 === t && (t = s), this.instances.has(t);
              }),
              (t.prototype.getOrInitializeService = function (t) {
                var e = this.instances.get(t);
                return (
                  !e &&
                    this.component &&
                    ((e = this.component.instanceFactory(
                      this.container,
                      (function (t) {
                        return t === s ? void 0 : t;
                      })(t)
                    )),
                    this.instances.set(t, e)),
                  e || null
                );
              }),
              (t.prototype.normalizeInstanceIdentifier = function (t) {
                return this.component
                  ? this.component.multipleInstances
                    ? t
                    : s
                  : t;
              }),
              t
            );
          })(),
          u = (function () {
            function t(t) {
              (this.name = t), (this.providers = new Map());
            }
            return (
              (t.prototype.addComponent = function (t) {
                var e = this.getProvider(t.name);
                if (e.isComponentSet())
                  throw new Error(
                    "Component " +
                      t.name +
                      " has already been registered with " +
                      this.name
                  );
                e.setComponent(t);
              }),
              (t.prototype.addOrOverwriteComponent = function (t) {
                this.getProvider(t.name).isComponentSet() &&
                  this.providers.delete(t.name),
                  this.addComponent(t);
              }),
              (t.prototype.getProvider = function (t) {
                if (this.providers.has(t)) return this.providers.get(t);
                var e = new a(t, this);
                return this.providers.set(t, e), e;
              }),
              (t.prototype.getProviders = function () {
                return Array.from(this.providers.values());
              }),
              t
            );
          })();
      },
      930: (t, e, n) => {
        "use strict";
        var r = n(85),
          i = n(15),
          o = n(36),
          s = n(270),
          a = n(733);
        t = n.hmd(t);
        var u,
          c = (function () {
            function t(t) {
              (this.domStorage_ = t), (this.prefix_ = "firebase:");
            }
            return (
              (t.prototype.set = function (t, e) {
                null == e
                  ? this.domStorage_.removeItem(this.prefixedName_(t))
                  : this.domStorage_.setItem(
                      this.prefixedName_(t),
                      (0, o.Pz)(e)
                    );
              }),
              (t.prototype.get = function (t) {
                var e = this.domStorage_.getItem(this.prefixedName_(t));
                return null == e ? null : (0, o.cI)(e);
              }),
              (t.prototype.remove = function (t) {
                this.domStorage_.removeItem(this.prefixedName_(t));
              }),
              (t.prototype.prefixedName_ = function (t) {
                return this.prefix_ + t;
              }),
              (t.prototype.toString = function () {
                return this.domStorage_.toString();
              }),
              t
            );
          })(),
          h = (function () {
            function t() {
              (this.cache_ = {}), (this.isInMemoryStorage = !0);
            }
            return (
              (t.prototype.set = function (t, e) {
                null == e ? delete this.cache_[t] : (this.cache_[t] = e);
              }),
              (t.prototype.get = function (t) {
                return (0, o.r3)(this.cache_, t) ? this.cache_[t] : null;
              }),
              (t.prototype.remove = function (t) {
                delete this.cache_[t];
              }),
              t
            );
          })(),
          l = function (t) {
            try {
              if ("undefined" != typeof window && void 0 !== window[t]) {
                var e = window[t];
                return (
                  e.setItem("firebase:sentinel", "cache"),
                  e.removeItem("firebase:sentinel"),
                  new c(e)
                );
              }
            } catch (t) {}
            return new h();
          },
          f = l("localStorage"),
          p = l("sessionStorage"),
          d = new s.Yd("@firebase/database"),
          v =
            ((u = 1),
            function () {
              return u++;
            }),
          g = function (t) {
            var e = (0, o.dS)(t),
              n = new o.gQ();
            n.update(e);
            var r = n.digest();
            return o.US.encodeByteArray(r);
          },
          m = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            for (var n = "", r = 0; r < t.length; r++) {
              var i = t[r];
              Array.isArray(i) ||
              (i && "object" == typeof i && "number" == typeof i.length)
                ? (n += m.apply(null, i))
                : (n += "object" == typeof i ? (0, o.Pz)(i) : i),
                (n += " ");
            }
            return n;
          },
          y = null,
          b = !0,
          w = function (t, e) {
            (0, o.hu)(
              !e || !0 === t || !1 === t,
              "Can't turn on custom loggers persistently."
            ),
              !0 === t
                ? ((d.logLevel = s.in.VERBOSE),
                  (y = d.log.bind(d)),
                  e && p.set("logging_enabled", !0))
                : "function" == typeof t
                ? (y = t)
                : ((y = null), p.remove("logging_enabled"));
          },
          _ = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            if (
              (!0 === b &&
                ((b = !1),
                null === y && !0 === p.get("logging_enabled") && w(!0)),
              y)
            ) {
              var n = m.apply(null, t);
              y(n);
            }
          },
          I = function (t) {
            return function () {
              for (var e = [], n = 0; n < arguments.length; n++)
                e[n] = arguments[n];
              _.apply(void 0, (0, i.ev)([t], (0, i.CR)(e)));
            };
          },
          E = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            var n =
              "FIREBASE INTERNAL ERROR: " +
              m.apply(void 0, (0, i.ev)([], (0, i.CR)(t)));
            d.error(n);
          },
          T = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            var n =
              "FIREBASE FATAL ERROR: " +
              m.apply(void 0, (0, i.ev)([], (0, i.CR)(t)));
            throw (d.error(n), new Error(n));
          },
          S = function () {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            var n =
              "FIREBASE WARNING: " +
              m.apply(void 0, (0, i.ev)([], (0, i.CR)(t)));
            d.warn(n);
          },
          C = function (t) {
            return (
              "number" == typeof t &&
              (t != t ||
                t === Number.POSITIVE_INFINITY ||
                t === Number.NEGATIVE_INFINITY)
            );
          },
          k = "[MIN_NAME]",
          N = "[MAX_NAME]",
          A = function (t, e) {
            if (t === e) return 0;
            if (t === k || e === N) return -1;
            if (e === k || t === N) return 1;
            var n = j(t),
              r = j(e);
            return null !== n
              ? null !== r
                ? n - r == 0
                  ? t.length - e.length
                  : n - r
                : -1
              : null !== r
              ? 1
              : t < e
              ? -1
              : 1;
          },
          P = function (t, e) {
            return t === e ? 0 : t < e ? -1 : 1;
          },
          D = function (t, e) {
            if (e && t in e) return e[t];
            throw new Error(
              "Missing required key (" + t + ") in object: " + (0, o.Pz)(e)
            );
          },
          x = function (t) {
            if ("object" != typeof t || null === t) return (0, o.Pz)(t);
            var e = [];
            for (var n in t) e.push(n);
            e.sort();
            for (var r = "{", i = 0; i < e.length; i++)
              0 !== i && (r += ","),
                (r += (0, o.Pz)(e[i])),
                (r += ":"),
                (r += x(t[e[i]]));
            return r + "}";
          },
          O = function (t, e) {
            var n = t.length;
            if (n <= e) return [t];
            for (var r = [], i = 0; i < n; i += e)
              i + e > n
                ? r.push(t.substring(i, n))
                : r.push(t.substring(i, i + e));
            return r;
          };
        function R(t, e) {
          for (var n in t) t.hasOwnProperty(n) && e(n, t[n]);
        }
        var M = function (t) {
            (0, o.hu)(!C(t), "Invalid JSON number");
            var e, n, r, i, s;
            0 === t
              ? ((n = 0), (r = 0), (e = 1 / t == -1 / 0 ? 1 : 0))
              : ((e = t < 0),
                (t = Math.abs(t)) >= Math.pow(2, -1022)
                  ? ((n =
                      (i = Math.min(Math.floor(Math.log(t) / Math.LN2), 1023)) +
                      1023),
                    (r = Math.round(t * Math.pow(2, 52 - i) - Math.pow(2, 52))))
                  : ((n = 0), (r = Math.round(t / Math.pow(2, -1074)))));
            var a = [];
            for (s = 52; s; s -= 1)
              a.push(r % 2 ? 1 : 0), (r = Math.floor(r / 2));
            for (s = 11; s; s -= 1)
              a.push(n % 2 ? 1 : 0), (n = Math.floor(n / 2));
            a.push(e ? 1 : 0), a.reverse();
            var u = a.join(""),
              c = "";
            for (s = 0; s < 64; s += 8) {
              var h = parseInt(u.substr(s, 8), 2).toString(16);
              1 === h.length && (h = "0" + h), (c += h);
            }
            return c.toLowerCase();
          },
          L = new RegExp("^-?(0*)\\d{1,10}$"),
          j = function (t) {
            if (L.test(t)) {
              var e = Number(t);
              if (e >= -2147483648 && e <= 2147483647) return e;
            }
            return null;
          },
          F = function (t) {
            try {
              t();
            } catch (t) {
              setTimeout(function () {
                var e = t.stack || "";
                throw (S("Exception was thrown by user callback.", e), t);
              }, Math.floor(0));
            }
          },
          U = function (t, e) {
            var n = setTimeout(t, e);
            return "object" == typeof n && n.unref && n.unref(), n;
          },
          V = (function () {
            function t(t, e) {
              if (void 0 === e) {
                this.pieces_ = t.split("/");
                for (var n = 0, r = 0; r < this.pieces_.length; r++)
                  this.pieces_[r].length > 0 &&
                    ((this.pieces_[n] = this.pieces_[r]), n++);
                (this.pieces_.length = n), (this.pieceNum_ = 0);
              } else (this.pieces_ = t), (this.pieceNum_ = e);
            }
            return (
              (t.prototype.toString = function () {
                for (
                  var t = "", e = this.pieceNum_;
                  e < this.pieces_.length;
                  e++
                )
                  "" !== this.pieces_[e] && (t += "/" + this.pieces_[e]);
                return t || "/";
              }),
              t
            );
          })();
        function q() {
          return new V("");
        }
        function B(t) {
          return t.pieceNum_ >= t.pieces_.length
            ? null
            : t.pieces_[t.pieceNum_];
        }
        function G(t) {
          return t.pieces_.length - t.pieceNum_;
        }
        function W(t) {
          var e = t.pieceNum_;
          return e < t.pieces_.length && e++, new V(t.pieces_, e);
        }
        function z(t) {
          return t.pieceNum_ < t.pieces_.length
            ? t.pieces_[t.pieces_.length - 1]
            : null;
        }
        function H(t) {
          for (var e = "", n = t.pieceNum_; n < t.pieces_.length; n++)
            "" !== t.pieces_[n] &&
              (e += "/" + encodeURIComponent(String(t.pieces_[n])));
          return e || "/";
        }
        function K(t, e) {
          return void 0 === e && (e = 0), t.pieces_.slice(t.pieceNum_ + e);
        }
        function J(t) {
          if (t.pieceNum_ >= t.pieces_.length) return null;
          for (var e = [], n = t.pieceNum_; n < t.pieces_.length - 1; n++)
            e.push(t.pieces_[n]);
          return new V(e, 0);
        }
        function Q(t, e) {
          for (var n = [], r = t.pieceNum_; r < t.pieces_.length; r++)
            n.push(t.pieces_[r]);
          if (e instanceof V)
            for (r = e.pieceNum_; r < e.pieces_.length; r++)
              n.push(e.pieces_[r]);
          else {
            var i = e.split("/");
            for (r = 0; r < i.length; r++) i[r].length > 0 && n.push(i[r]);
          }
          return new V(n, 0);
        }
        function Y(t) {
          return t.pieceNum_ >= t.pieces_.length;
        }
        function X(t, e) {
          var n = B(t),
            r = B(e);
          if (null === n) return e;
          if (n === r) return X(W(t), W(e));
          throw new Error(
            "INTERNAL ERROR: innerPath (" +
              e +
              ") is not within outerPath (" +
              t +
              ")"
          );
        }
        function Z(t, e) {
          for (
            var n = K(t, 0), r = K(e, 0), i = 0;
            i < n.length && i < r.length;
            i++
          ) {
            var o = A(n[i], r[i]);
            if (0 !== o) return o;
          }
          return n.length === r.length ? 0 : n.length < r.length ? -1 : 1;
        }
        function $(t, e) {
          if (G(t) !== G(e)) return !1;
          for (
            var n = t.pieceNum_, r = e.pieceNum_;
            n <= t.pieces_.length;
            n++, r++
          )
            if (t.pieces_[n] !== e.pieces_[r]) return !1;
          return !0;
        }
        function tt(t, e) {
          var n = t.pieceNum_,
            r = e.pieceNum_;
          if (G(t) > G(e)) return !1;
          for (; n < t.pieces_.length; ) {
            if (t.pieces_[n] !== e.pieces_[r]) return !1;
            ++n, ++r;
          }
          return !0;
        }
        var et = function (t, e) {
          (this.errorPrefix_ = e),
            (this.parts_ = K(t, 0)),
            (this.byteLength_ = Math.max(1, this.parts_.length));
          for (var n = 0; n < this.parts_.length; n++)
            this.byteLength_ += (0, o.ug)(this.parts_[n]);
          nt(this);
        };
        function nt(t) {
          if (t.byteLength_ > 768)
            throw new Error(
              t.errorPrefix_ +
                "has a key path longer than 768 bytes (" +
                t.byteLength_ +
                ")."
            );
          if (t.parts_.length > 32)
            throw new Error(
              t.errorPrefix_ +
                "path specified exceeds the maximum depth that can be written (32) or object contains a cycle " +
                rt(t)
            );
        }
        function rt(t) {
          return 0 === t.parts_.length
            ? ""
            : "in property '" + t.parts_.join(".") + "'";
        }
        var it =
            /(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,
          ot = "websocket",
          st = "long_polling",
          at = (function () {
            function t(t, e, n, r, i, o, s) {
              void 0 === i && (i = !1),
                void 0 === o && (o = ""),
                void 0 === s && (s = !1),
                (this.secure = e),
                (this.namespace = n),
                (this.webSocketOnly = r),
                (this.nodeAdmin = i),
                (this.persistenceKey = o),
                (this.includeNamespaceInQueryParams = s),
                (this._host = t.toLowerCase()),
                (this._domain = this._host.substr(this._host.indexOf(".") + 1)),
                (this.internalHost = f.get("host:" + t) || this._host);
            }
            return (
              (t.prototype.isCacheableHost = function () {
                return "s-" === this.internalHost.substr(0, 2);
              }),
              (t.prototype.isCustomHost = function () {
                return (
                  "firebaseio.com" !== this._domain &&
                  "firebaseio-demo.com" !== this._domain
                );
              }),
              Object.defineProperty(t.prototype, "host", {
                get: function () {
                  return this._host;
                },
                set: function (t) {
                  t !== this.internalHost &&
                    ((this.internalHost = t),
                    this.isCacheableHost() &&
                      f.set("host:" + this._host, this.internalHost));
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.toString = function () {
                var t = this.toURLString();
                return (
                  this.persistenceKey && (t += "<" + this.persistenceKey + ">"),
                  t
                );
              }),
              (t.prototype.toURLString = function () {
                var t = this.secure ? "https://" : "http://",
                  e = this.includeNamespaceInQueryParams
                    ? "?ns=" + this.namespace
                    : "";
                return "" + t + this.host + "/" + e;
              }),
              t
            );
          })();
        function ut(t, e, n) {
          var r;
          if (
            ((0, o.hu)("string" == typeof e, "typeof type must == string"),
            (0, o.hu)("object" == typeof n, "typeof params must == object"),
            e === ot)
          )
            r = (t.secure ? "wss://" : "ws://") + t.internalHost + "/.ws?";
          else {
            if (e !== st) throw new Error("Unknown connection type: " + e);
            r = (t.secure ? "https://" : "http://") + t.internalHost + "/.lp?";
          }
          (function (t) {
            return (
              t.host !== t.internalHost ||
              t.isCustomHost() ||
              t.includeNamespaceInQueryParams
            );
          })(t) && (n.ns = t.namespace);
          var i = [];
          return (
            R(n, function (t, e) {
              i.push(t + "=" + e);
            }),
            r + i.join("&")
          );
        }
        var ct,
          ht,
          lt,
          ft,
          pt,
          dt,
          vt,
          gt = function (t, e) {
            var n = mt(t),
              r = n.namespace;
            "firebase.com" === n.domain &&
              T(
                n.host +
                  " is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"
              ),
              (r && "undefined" !== r) ||
                "localhost" === n.domain ||
                T(
                  "Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"
                ),
              n.secure ||
                ("undefined" != typeof window &&
                  window.location &&
                  window.location.protocol &&
                  -1 !== window.location.protocol.indexOf("https:") &&
                  S(
                    "Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."
                  ));
            var i = "ws" === n.scheme || "wss" === n.scheme;
            return {
              repoInfo: new at(
                n.host,
                n.secure,
                r,
                e,
                i,
                "",
                r !== n.subdomain
              ),
              path: new V(n.pathString),
            };
          },
          mt = function (t) {
            var e = "",
              n = "",
              r = "",
              o = "",
              s = "",
              a = !0,
              u = "https",
              c = 443;
            if ("string" == typeof t) {
              var h = t.indexOf("//");
              h >= 0 && ((u = t.substring(0, h - 1)), (t = t.substring(h + 2)));
              var l = t.indexOf("/");
              -1 === l && (l = t.length);
              var f = t.indexOf("?");
              -1 === f && (f = t.length),
                (e = t.substring(0, Math.min(l, f))),
                l < f &&
                  (o = (function (t) {
                    for (var e = "", n = t.split("/"), r = 0; r < n.length; r++)
                      if (n[r].length > 0) {
                        var i = n[r];
                        try {
                          i = decodeURIComponent(i.replace(/\+/g, " "));
                        } catch (t) {}
                        e += "/" + i;
                      }
                    return e;
                  })(t.substring(l, f)));
              var p = (function (t) {
                var e,
                  n,
                  r = {};
                "?" === t.charAt(0) && (t = t.substring(1));
                try {
                  for (
                    var o = (0, i.XA)(t.split("&")), s = o.next();
                    !s.done;
                    s = o.next()
                  ) {
                    var a = s.value;
                    if (0 !== a.length) {
                      var u = a.split("=");
                      2 === u.length
                        ? (r[decodeURIComponent(u[0])] = decodeURIComponent(
                            u[1]
                          ))
                        : S(
                            "Invalid query segment '" +
                              a +
                              "' in query '" +
                              t +
                              "'"
                          );
                    }
                  }
                } catch (t) {
                  e = { error: t };
                } finally {
                  try {
                    s && !s.done && (n = o.return) && n.call(o);
                  } finally {
                    if (e) throw e.error;
                  }
                }
                return r;
              })(t.substring(Math.min(t.length, f)));
              (h = e.indexOf(":")) >= 0
                ? ((a = "https" === u || "wss" === u),
                  (c = parseInt(e.substring(h + 1), 10)))
                : (h = e.length);
              var d = e.slice(0, h);
              if ("localhost" === d.toLowerCase()) n = "localhost";
              else if (d.split(".").length <= 2) n = d;
              else {
                var v = e.indexOf(".");
                (r = e.substring(0, v).toLowerCase()),
                  (n = e.substring(v + 1)),
                  (s = r);
              }
              "ns" in p && (s = p.ns);
            }
            return {
              host: e,
              port: c,
              domain: n,
              subdomain: r,
              secure: a,
              scheme: u,
              pathString: o,
              namespace: s,
            };
          },
          yt = /[\[\].#$\/\u0000-\u001F\u007F]/,
          bt = /[\[\].#$\u0000-\u001F\u007F]/,
          wt = 10485760,
          _t = function (t) {
            return "string" == typeof t && 0 !== t.length && !yt.test(t);
          },
          It = function (t) {
            return "string" == typeof t && 0 !== t.length && !bt.test(t);
          },
          Et = function (t) {
            return (
              null === t ||
              "string" == typeof t ||
              ("number" == typeof t && !C(t)) ||
              (t && "object" == typeof t && (0, o.r3)(t, ".sv"))
            );
          },
          Tt = function (t, e, n, r, i) {
            (i && void 0 === n) || St((0, o.gK)(t, e, i), n, r);
          },
          St = function (t, e, n) {
            var r = n instanceof V ? new et(n, t) : n;
            if (void 0 === e)
              throw new Error(t + "contains undefined " + rt(r));
            if ("function" == typeof e)
              throw new Error(
                t +
                  "contains a function " +
                  rt(r) +
                  " with contents = " +
                  e.toString()
              );
            if (C(e))
              throw new Error(t + "contains " + e.toString() + " " + rt(r));
            if ("string" == typeof e && e.length > wt / 3 && (0, o.ug)(e) > wt)
              throw new Error(
                t +
                  "contains a string greater than 10485760 utf8 bytes " +
                  rt(r) +
                  " ('" +
                  e.substring(0, 50) +
                  "...')"
              );
            if (e && "object" == typeof e) {
              var i = !1,
                s = !1;
              if (
                (R(e, function (e, n) {
                  if (".value" === e) i = !0;
                  else if (
                    ".priority" !== e &&
                    ".sv" !== e &&
                    ((s = !0), !_t(e))
                  )
                    throw new Error(
                      t +
                        " contains an invalid key (" +
                        e +
                        ") " +
                        rt(r) +
                        '.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"'
                    );
                  var a, u;
                  (u = e),
                    (a = r).parts_.length > 0 && (a.byteLength_ += 1),
                    a.parts_.push(u),
                    (a.byteLength_ += (0, o.ug)(u)),
                    nt(a),
                    St(t, n, r),
                    (function (t) {
                      var e = t.parts_.pop();
                      (t.byteLength_ -= (0, o.ug)(e)),
                        t.parts_.length > 0 && (t.byteLength_ -= 1);
                    })(r);
                }),
                i && s)
              )
                throw new Error(
                  t +
                    ' contains ".value" child ' +
                    rt(r) +
                    " in addition to actual children."
                );
            }
          },
          Ct = function (t, e, n, r, i) {
            if (!i || void 0 !== n) {
              var s = (0, o.gK)(t, e, i);
              if (!n || "object" != typeof n || Array.isArray(n))
                throw new Error(
                  s + " must be an object containing the children to replace."
                );
              var a = [];
              R(n, function (t, e) {
                var n = new V(t);
                if ((St(s, e, Q(r, n)), ".priority" === z(n) && !Et(e)))
                  throw new Error(
                    s +
                      "contains an invalid value for '" +
                      n.toString() +
                      "', which must be a valid Firebase priority (a string, finite number, server value, or null)."
                  );
                a.push(n);
              }),
                (function (t, e) {
                  var n, r;
                  for (n = 0; n < e.length; n++)
                    for (var i = K((r = e[n])), o = 0; o < i.length; o++)
                      if (".priority" === i[o] && o === i.length - 1);
                      else if (!_t(i[o]))
                        throw new Error(
                          t +
                            "contains an invalid key (" +
                            i[o] +
                            ") in path " +
                            r.toString() +
                            '. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"'
                        );
                  e.sort(Z);
                  var s = null;
                  for (n = 0; n < e.length; n++) {
                    if (((r = e[n]), null !== s && tt(s, r)))
                      throw new Error(
                        t +
                          "contains a path " +
                          s.toString() +
                          " that is ancestor of another path " +
                          r.toString()
                      );
                    s = r;
                  }
                })(s, a);
            }
          },
          kt = function (t, e, n, r) {
            if (!r || void 0 !== n) {
              if (C(n))
                throw new Error(
                  (0, o.gK)(t, e, r) +
                    "is " +
                    n.toString() +
                    ", but must be a valid Firebase priority (a string, finite number, server value, or null)."
                );
              if (!Et(n))
                throw new Error(
                  (0, o.gK)(t, e, r) +
                    "must be a valid Firebase priority (a string, finite number, server value, or null)."
                );
            }
          },
          Nt = function (t, e, n, r) {
            if (!r || void 0 !== n)
              switch (n) {
                case "value":
                case "child_added":
                case "child_removed":
                case "child_changed":
                case "child_moved":
                  break;
                default:
                  throw new Error(
                    (0, o.gK)(t, e, r) +
                      'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".'
                  );
              }
          },
          At = function (t, e, n, r) {
            if (!((r && void 0 === n) || _t(n)))
              throw new Error(
                (0, o.gK)(t, e, r) +
                  'was an invalid key = "' +
                  n +
                  '".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").'
              );
          },
          Pt = function (t, e, n, r) {
            if (!((r && void 0 === n) || It(n)))
              throw new Error(
                (0, o.gK)(t, e, r) +
                  'was an invalid path = "' +
                  n +
                  '". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"'
              );
          },
          Dt = function (t, e, n, r) {
            n && (n = n.replace(/^\/*\.info(\/|$)/, "/")), Pt(t, e, n, r);
          },
          xt = function (t, e) {
            if (".info" === B(e))
              throw new Error(t + " failed = Can't modify data under /.info/");
          },
          Ot = function (t, e, n) {
            var r = n.path.toString();
            if (
              "string" != typeof n.repoInfo.host ||
              0 === n.repoInfo.host.length ||
              (!_t(n.repoInfo.namespace) &&
                "localhost" !== n.repoInfo.host.split(":")[0]) ||
              (0 !== r.length &&
                !(function (t) {
                  return t && (t = t.replace(/^\/*\.info(\/|$)/, "/")), It(t);
                })(r))
            )
              throw new Error(
                (0, o.gK)(t, e, !1) +
                  'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".'
              );
          },
          Rt = function (t, e, n, r) {
            if ((!r || void 0 !== n) && "boolean" != typeof n)
              throw new Error((0, o.gK)(t, e, r) + "must be a boolean.");
          },
          Mt = function (t) {
            return "number" == typeof t ? "number:" + M(t) : "string:" + t;
          },
          Lt = function (t) {
            if (t.isLeafNode()) {
              var e = t.val();
              (0, o.hu)(
                "string" == typeof e ||
                  "number" == typeof e ||
                  ("object" == typeof e && (0, o.r3)(e, ".sv")),
                "Priority must be a string or number."
              );
            } else
              (0, o.hu)(
                t === ct || t.isEmpty(),
                "priority of unexpected type."
              );
            (0, o.hu)(
              t === ct || t.getPriority().isEmpty(),
              "Priority nodes can't have a priority of their own."
            );
          },
          jt = (function () {
            function t(e, n) {
              void 0 === n && (n = t.__childrenNodeConstructor.EMPTY_NODE),
                (this.value_ = e),
                (this.priorityNode_ = n),
                (this.lazyHash_ = null),
                (0, o.hu)(
                  void 0 !== this.value_ && null !== this.value_,
                  "LeafNode shouldn't be created with null/undefined value."
                ),
                Lt(this.priorityNode_);
            }
            return (
              Object.defineProperty(t, "__childrenNodeConstructor", {
                get: function () {
                  return ht;
                },
                set: function (t) {
                  ht = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.isLeafNode = function () {
                return !0;
              }),
              (t.prototype.getPriority = function () {
                return this.priorityNode_;
              }),
              (t.prototype.updatePriority = function (e) {
                return new t(this.value_, e);
              }),
              (t.prototype.getImmediateChild = function (e) {
                return ".priority" === e
                  ? this.priorityNode_
                  : t.__childrenNodeConstructor.EMPTY_NODE;
              }),
              (t.prototype.getChild = function (e) {
                return Y(e)
                  ? this
                  : ".priority" === B(e)
                  ? this.priorityNode_
                  : t.__childrenNodeConstructor.EMPTY_NODE;
              }),
              (t.prototype.hasChild = function () {
                return !1;
              }),
              (t.prototype.getPredecessorChildName = function (t, e) {
                return null;
              }),
              (t.prototype.updateImmediateChild = function (e, n) {
                return ".priority" === e
                  ? this.updatePriority(n)
                  : n.isEmpty() && ".priority" !== e
                  ? this
                  : t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(
                      e,
                      n
                    ).updatePriority(this.priorityNode_);
              }),
              (t.prototype.updateChild = function (e, n) {
                var r = B(e);
                return null === r
                  ? n
                  : n.isEmpty() && ".priority" !== r
                  ? this
                  : ((0, o.hu)(
                      ".priority" !== r || 1 === G(e),
                      ".priority must be the last token in a path"
                    ),
                    this.updateImmediateChild(
                      r,
                      t.__childrenNodeConstructor.EMPTY_NODE.updateChild(
                        W(e),
                        n
                      )
                    ));
              }),
              (t.prototype.isEmpty = function () {
                return !1;
              }),
              (t.prototype.numChildren = function () {
                return 0;
              }),
              (t.prototype.forEachChild = function (t, e) {
                return !1;
              }),
              (t.prototype.val = function (t) {
                return t && !this.getPriority().isEmpty()
                  ? {
                      ".value": this.getValue(),
                      ".priority": this.getPriority().val(),
                    }
                  : this.getValue();
              }),
              (t.prototype.hash = function () {
                if (null === this.lazyHash_) {
                  var t = "";
                  this.priorityNode_.isEmpty() ||
                    (t += "priority:" + Mt(this.priorityNode_.val()) + ":");
                  var e = typeof this.value_;
                  (t += e + ":"),
                    (t += "number" === e ? M(this.value_) : this.value_),
                    (this.lazyHash_ = g(t));
                }
                return this.lazyHash_;
              }),
              (t.prototype.getValue = function () {
                return this.value_;
              }),
              (t.prototype.compareTo = function (e) {
                return e === t.__childrenNodeConstructor.EMPTY_NODE
                  ? 1
                  : e instanceof t.__childrenNodeConstructor
                  ? -1
                  : ((0, o.hu)(e.isLeafNode(), "Unknown node type"),
                    this.compareToLeafNode_(e));
              }),
              (t.prototype.compareToLeafNode_ = function (e) {
                var n = typeof e.value_,
                  r = typeof this.value_,
                  i = t.VALUE_TYPE_ORDER.indexOf(n),
                  s = t.VALUE_TYPE_ORDER.indexOf(r);
                return (
                  (0, o.hu)(i >= 0, "Unknown leaf type: " + n),
                  (0, o.hu)(s >= 0, "Unknown leaf type: " + r),
                  i === s
                    ? "object" === r
                      ? 0
                      : this.value_ < e.value_
                      ? -1
                      : this.value_ === e.value_
                      ? 0
                      : 1
                    : s - i
                );
              }),
              (t.prototype.withIndex = function () {
                return this;
              }),
              (t.prototype.isIndexed = function () {
                return !0;
              }),
              (t.prototype.equals = function (t) {
                if (t === this) return !0;
                if (t.isLeafNode()) {
                  var e = t;
                  return (
                    this.value_ === e.value_ &&
                    this.priorityNode_.equals(e.priorityNode_)
                  );
                }
                return !1;
              }),
              (t.VALUE_TYPE_ORDER = ["object", "boolean", "number", "string"]),
              t
            );
          })(),
          Ft = (function () {
            function t(t, e, n, r, i) {
              void 0 === i && (i = null),
                (this.isReverse_ = r),
                (this.resultGenerator_ = i),
                (this.nodeStack_ = []);
              for (var o = 1; !t.isEmpty(); )
                if (((t = t), (o = e ? n(t.key, e) : 1), r && (o *= -1), o < 0))
                  t = this.isReverse_ ? t.left : t.right;
                else {
                  if (0 === o) {
                    this.nodeStack_.push(t);
                    break;
                  }
                  this.nodeStack_.push(t),
                    (t = this.isReverse_ ? t.right : t.left);
                }
            }
            return (
              (t.prototype.getNext = function () {
                if (0 === this.nodeStack_.length) return null;
                var t,
                  e = this.nodeStack_.pop();
                if (
                  ((t = this.resultGenerator_
                    ? this.resultGenerator_(e.key, e.value)
                    : { key: e.key, value: e.value }),
                  this.isReverse_)
                )
                  for (e = e.left; !e.isEmpty(); )
                    this.nodeStack_.push(e), (e = e.right);
                else
                  for (e = e.right; !e.isEmpty(); )
                    this.nodeStack_.push(e), (e = e.left);
                return t;
              }),
              (t.prototype.hasNext = function () {
                return this.nodeStack_.length > 0;
              }),
              (t.prototype.peek = function () {
                if (0 === this.nodeStack_.length) return null;
                var t = this.nodeStack_[this.nodeStack_.length - 1];
                return this.resultGenerator_
                  ? this.resultGenerator_(t.key, t.value)
                  : { key: t.key, value: t.value };
              }),
              t
            );
          })(),
          Ut = (function () {
            function t(e, n, r, i, o) {
              (this.key = e),
                (this.value = n),
                (this.color = null != r ? r : t.RED),
                (this.left = null != i ? i : qt.EMPTY_NODE),
                (this.right = null != o ? o : qt.EMPTY_NODE);
            }
            return (
              (t.prototype.copy = function (e, n, r, i, o) {
                return new t(
                  null != e ? e : this.key,
                  null != n ? n : this.value,
                  null != r ? r : this.color,
                  null != i ? i : this.left,
                  null != o ? o : this.right
                );
              }),
              (t.prototype.count = function () {
                return this.left.count() + 1 + this.right.count();
              }),
              (t.prototype.isEmpty = function () {
                return !1;
              }),
              (t.prototype.inorderTraversal = function (t) {
                return (
                  this.left.inorderTraversal(t) ||
                  !!t(this.key, this.value) ||
                  this.right.inorderTraversal(t)
                );
              }),
              (t.prototype.reverseTraversal = function (t) {
                return (
                  this.right.reverseTraversal(t) ||
                  t(this.key, this.value) ||
                  this.left.reverseTraversal(t)
                );
              }),
              (t.prototype.min_ = function () {
                return this.left.isEmpty() ? this : this.left.min_();
              }),
              (t.prototype.minKey = function () {
                return this.min_().key;
              }),
              (t.prototype.maxKey = function () {
                return this.right.isEmpty() ? this.key : this.right.maxKey();
              }),
              (t.prototype.insert = function (t, e, n) {
                var r = this,
                  i = n(t, r.key);
                return (r =
                  i < 0
                    ? r.copy(null, null, null, r.left.insert(t, e, n), null)
                    : 0 === i
                    ? r.copy(null, e, null, null, null)
                    : r.copy(
                        null,
                        null,
                        null,
                        null,
                        r.right.insert(t, e, n)
                      )).fixUp_();
              }),
              (t.prototype.removeMin_ = function () {
                if (this.left.isEmpty()) return qt.EMPTY_NODE;
                var t = this;
                return (
                  t.left.isRed_() ||
                    t.left.left.isRed_() ||
                    (t = t.moveRedLeft_()),
                  (t = t.copy(
                    null,
                    null,
                    null,
                    t.left.removeMin_(),
                    null
                  )).fixUp_()
                );
              }),
              (t.prototype.remove = function (t, e) {
                var n, r;
                if (e(t, (n = this).key) < 0)
                  n.left.isEmpty() ||
                    n.left.isRed_() ||
                    n.left.left.isRed_() ||
                    (n = n.moveRedLeft_()),
                    (n = n.copy(null, null, null, n.left.remove(t, e), null));
                else {
                  if (
                    (n.left.isRed_() && (n = n.rotateRight_()),
                    n.right.isEmpty() ||
                      n.right.isRed_() ||
                      n.right.left.isRed_() ||
                      (n = n.moveRedRight_()),
                    0 === e(t, n.key))
                  ) {
                    if (n.right.isEmpty()) return qt.EMPTY_NODE;
                    (r = n.right.min_()),
                      (n = n.copy(
                        r.key,
                        r.value,
                        null,
                        null,
                        n.right.removeMin_()
                      ));
                  }
                  n = n.copy(null, null, null, null, n.right.remove(t, e));
                }
                return n.fixUp_();
              }),
              (t.prototype.isRed_ = function () {
                return this.color;
              }),
              (t.prototype.fixUp_ = function () {
                var t = this;
                return (
                  t.right.isRed_() && !t.left.isRed_() && (t = t.rotateLeft_()),
                  t.left.isRed_() &&
                    t.left.left.isRed_() &&
                    (t = t.rotateRight_()),
                  t.left.isRed_() && t.right.isRed_() && (t = t.colorFlip_()),
                  t
                );
              }),
              (t.prototype.moveRedLeft_ = function () {
                var t = this.colorFlip_();
                return (
                  t.right.left.isRed_() &&
                    (t = (t = (t = t.copy(
                      null,
                      null,
                      null,
                      null,
                      t.right.rotateRight_()
                    )).rotateLeft_()).colorFlip_()),
                  t
                );
              }),
              (t.prototype.moveRedRight_ = function () {
                var t = this.colorFlip_();
                return (
                  t.left.left.isRed_() &&
                    (t = (t = t.rotateRight_()).colorFlip_()),
                  t
                );
              }),
              (t.prototype.rotateLeft_ = function () {
                var e = this.copy(null, null, t.RED, null, this.right.left);
                return this.right.copy(null, null, this.color, e, null);
              }),
              (t.prototype.rotateRight_ = function () {
                var e = this.copy(null, null, t.RED, this.left.right, null);
                return this.left.copy(null, null, this.color, null, e);
              }),
              (t.prototype.colorFlip_ = function () {
                var t = this.left.copy(
                    null,
                    null,
                    !this.left.color,
                    null,
                    null
                  ),
                  e = this.right.copy(
                    null,
                    null,
                    !this.right.color,
                    null,
                    null
                  );
                return this.copy(null, null, !this.color, t, e);
              }),
              (t.prototype.checkMaxDepth_ = function () {
                var t = this.check_();
                return Math.pow(2, t) <= this.count() + 1;
              }),
              (t.prototype.check_ = function () {
                if (this.isRed_() && this.left.isRed_())
                  throw new Error(
                    "Red node has red child(" +
                      this.key +
                      "," +
                      this.value +
                      ")"
                  );
                if (this.right.isRed_())
                  throw new Error(
                    "Right child of (" +
                      this.key +
                      "," +
                      this.value +
                      ") is red"
                  );
                var t = this.left.check_();
                if (t !== this.right.check_())
                  throw new Error("Black depths differ");
                return t + (this.isRed_() ? 0 : 1);
              }),
              (t.RED = !0),
              (t.BLACK = !1),
              t
            );
          })(),
          Vt = (function () {
            function t() {}
            return (
              (t.prototype.copy = function (t, e, n, r, i) {
                return this;
              }),
              (t.prototype.insert = function (t, e, n) {
                return new Ut(t, e, null);
              }),
              (t.prototype.remove = function (t, e) {
                return this;
              }),
              (t.prototype.count = function () {
                return 0;
              }),
              (t.prototype.isEmpty = function () {
                return !0;
              }),
              (t.prototype.inorderTraversal = function (t) {
                return !1;
              }),
              (t.prototype.reverseTraversal = function (t) {
                return !1;
              }),
              (t.prototype.minKey = function () {
                return null;
              }),
              (t.prototype.maxKey = function () {
                return null;
              }),
              (t.prototype.check_ = function () {
                return 0;
              }),
              (t.prototype.isRed_ = function () {
                return !1;
              }),
              t
            );
          })(),
          qt = (function () {
            function t(e, n) {
              void 0 === n && (n = t.EMPTY_NODE),
                (this.comparator_ = e),
                (this.root_ = n);
            }
            return (
              (t.prototype.insert = function (e, n) {
                return new t(
                  this.comparator_,
                  this.root_
                    .insert(e, n, this.comparator_)
                    .copy(null, null, Ut.BLACK, null, null)
                );
              }),
              (t.prototype.remove = function (e) {
                return new t(
                  this.comparator_,
                  this.root_
                    .remove(e, this.comparator_)
                    .copy(null, null, Ut.BLACK, null, null)
                );
              }),
              (t.prototype.get = function (t) {
                for (var e, n = this.root_; !n.isEmpty(); ) {
                  if (0 === (e = this.comparator_(t, n.key))) return n.value;
                  e < 0 ? (n = n.left) : e > 0 && (n = n.right);
                }
                return null;
              }),
              (t.prototype.getPredecessorKey = function (t) {
                for (var e, n = this.root_, r = null; !n.isEmpty(); ) {
                  if (0 === (e = this.comparator_(t, n.key))) {
                    if (n.left.isEmpty()) return r ? r.key : null;
                    for (n = n.left; !n.right.isEmpty(); ) n = n.right;
                    return n.key;
                  }
                  e < 0 ? (n = n.left) : e > 0 && ((r = n), (n = n.right));
                }
                throw new Error(
                  "Attempted to find predecessor key for a nonexistent key.  What gives?"
                );
              }),
              (t.prototype.isEmpty = function () {
                return this.root_.isEmpty();
              }),
              (t.prototype.count = function () {
                return this.root_.count();
              }),
              (t.prototype.minKey = function () {
                return this.root_.minKey();
              }),
              (t.prototype.maxKey = function () {
                return this.root_.maxKey();
              }),
              (t.prototype.inorderTraversal = function (t) {
                return this.root_.inorderTraversal(t);
              }),
              (t.prototype.reverseTraversal = function (t) {
                return this.root_.reverseTraversal(t);
              }),
              (t.prototype.getIterator = function (t) {
                return new Ft(this.root_, null, this.comparator_, !1, t);
              }),
              (t.prototype.getIteratorFrom = function (t, e) {
                return new Ft(this.root_, t, this.comparator_, !1, e);
              }),
              (t.prototype.getReverseIteratorFrom = function (t, e) {
                return new Ft(this.root_, t, this.comparator_, !0, e);
              }),
              (t.prototype.getReverseIterator = function (t) {
                return new Ft(this.root_, null, this.comparator_, !0, t);
              }),
              (t.EMPTY_NODE = new Vt()),
              t
            );
          })(),
          Bt = (function () {
            function t(t, e) {
              (this.name = t), (this.node = e);
            }
            return (
              (t.Wrap = function (e, n) {
                return new t(e, n);
              }),
              t
            );
          })(),
          Gt = (function () {
            function t() {}
            return (
              (t.prototype.getCompare = function () {
                return this.compare.bind(this);
              }),
              (t.prototype.indexedValueChanged = function (t, e) {
                var n = new Bt(k, t),
                  r = new Bt(k, e);
                return 0 !== this.compare(n, r);
              }),
              (t.prototype.minPost = function () {
                return Bt.MIN;
              }),
              t
            );
          })(),
          Wt = new ((function (t) {
            function e() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              (0, i.ZT)(e, t),
              (e.prototype.compare = function (t, e) {
                var n = t.node.getPriority(),
                  r = e.node.getPriority(),
                  i = n.compareTo(r);
                return 0 === i ? A(t.name, e.name) : i;
              }),
              (e.prototype.isDefinedOn = function (t) {
                return !t.getPriority().isEmpty();
              }),
              (e.prototype.indexedValueChanged = function (t, e) {
                return !t.getPriority().equals(e.getPriority());
              }),
              (e.prototype.minPost = function () {
                return Bt.MIN;
              }),
              (e.prototype.maxPost = function () {
                return new Bt(N, new jt("[PRIORITY-POST]", ft));
              }),
              (e.prototype.makePost = function (t, e) {
                var n = lt(t);
                return new Bt(e, new jt("[PRIORITY-POST]", n));
              }),
              (e.prototype.toString = function () {
                return ".priority";
              }),
              e
            );
          })(Gt))(),
          zt = (function (t) {
            function e() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              (0, i.ZT)(e, t),
              Object.defineProperty(e, "__EMPTY_NODE", {
                get: function () {
                  return pt;
                },
                set: function (t) {
                  pt = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (e.prototype.compare = function (t, e) {
                return A(t.name, e.name);
              }),
              (e.prototype.isDefinedOn = function (t) {
                throw (0, o.g5)(
                  "KeyIndex.isDefinedOn not expected to be called."
                );
              }),
              (e.prototype.indexedValueChanged = function (t, e) {
                return !1;
              }),
              (e.prototype.minPost = function () {
                return Bt.MIN;
              }),
              (e.prototype.maxPost = function () {
                return new Bt(N, pt);
              }),
              (e.prototype.makePost = function (t, e) {
                return (
                  (0, o.hu)(
                    "string" == typeof t,
                    "KeyIndex indexValue must always be a string."
                  ),
                  new Bt(t, pt)
                );
              }),
              (e.prototype.toString = function () {
                return ".key";
              }),
              e
            );
          })(Gt),
          Ht = new zt(),
          Kt = Math.log(2),
          Jt = (function () {
            function t(t) {
              var e;
              (this.count = ((e = t + 1), parseInt(Math.log(e) / Kt, 10))),
                (this.current_ = this.count - 1);
              var n,
                r = ((n = this.count), parseInt(Array(n + 1).join("1"), 2));
              this.bits_ = (t + 1) & r;
            }
            return (
              (t.prototype.nextBitIsOne = function () {
                var t = !(this.bits_ & (1 << this.current_));
                return this.current_--, t;
              }),
              t
            );
          })(),
          Qt = function (t, e, n, r) {
            t.sort(e);
            var i = function (e, r) {
                var o,
                  s,
                  a = r - e;
                if (0 === a) return null;
                if (1 === a)
                  return (
                    (o = t[e]),
                    (s = n ? n(o) : o),
                    new Ut(s, o.node, Ut.BLACK, null, null)
                  );
                var u = parseInt(a / 2, 10) + e,
                  c = i(e, u),
                  h = i(u + 1, r);
                return (
                  (o = t[u]),
                  (s = n ? n(o) : o),
                  new Ut(s, o.node, Ut.BLACK, c, h)
                );
              },
              o = (function (e) {
                for (
                  var r = null,
                    o = null,
                    s = t.length,
                    a = function (e, r) {
                      var o = s - e,
                        a = s;
                      s -= e;
                      var c = i(o + 1, a),
                        h = t[o],
                        l = n ? n(h) : h;
                      u(new Ut(l, h.node, r, null, c));
                    },
                    u = function (t) {
                      r ? ((r.left = t), (r = t)) : ((o = t), (r = t));
                    },
                    c = 0;
                  c < e.count;
                  ++c
                ) {
                  var h = e.nextBitIsOne(),
                    l = Math.pow(2, e.count - (c + 1));
                  h ? a(l, Ut.BLACK) : (a(l, Ut.BLACK), a(l, Ut.RED));
                }
                return o;
              })(new Jt(t.length));
            return new qt(r || e, o);
          },
          Yt = {},
          Xt = (function () {
            function t(t, e) {
              (this.indexes_ = t), (this.indexSet_ = e);
            }
            return (
              Object.defineProperty(t, "Default", {
                get: function () {
                  return (
                    (0, o.hu)(Yt && Wt, "ChildrenNode.ts has not been loaded"),
                    (dt = dt || new t({ ".priority": Yt }, { ".priority": Wt }))
                  );
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.get = function (t) {
                var e = (0, o.DV)(this.indexes_, t);
                if (!e) throw new Error("No index defined for " + t);
                return e instanceof qt ? e : null;
              }),
              (t.prototype.hasIndex = function (t) {
                return (0, o.r3)(this.indexSet_, t.toString());
              }),
              (t.prototype.addIndex = function (e, n) {
                (0, o.hu)(
                  e !== Ht,
                  "KeyIndex always exists and isn't meant to be added to the IndexMap."
                );
                for (
                  var r,
                    s = [],
                    a = !1,
                    u = n.getIterator(Bt.Wrap),
                    c = u.getNext();
                  c;

                )
                  (a = a || e.isDefinedOn(c.node)),
                    s.push(c),
                    (c = u.getNext());
                r = a ? Qt(s, e.getCompare()) : Yt;
                var h = e.toString(),
                  l = (0, i.pi)({}, this.indexSet_);
                l[h] = e;
                var f = (0, i.pi)({}, this.indexes_);
                return (f[h] = r), new t(f, l);
              }),
              (t.prototype.addToIndexes = function (e, n) {
                var r = this;
                return new t(
                  (0, o.UI)(this.indexes_, function (t, i) {
                    var s = (0, o.DV)(r.indexSet_, i);
                    if (
                      ((0, o.hu)(s, "Missing index implementation for " + i),
                      t === Yt)
                    ) {
                      if (s.isDefinedOn(e.node)) {
                        for (
                          var a = [],
                            u = n.getIterator(Bt.Wrap),
                            c = u.getNext();
                          c;

                        )
                          c.name !== e.name && a.push(c), (c = u.getNext());
                        return a.push(e), Qt(a, s.getCompare());
                      }
                      return Yt;
                    }
                    var h = n.get(e.name),
                      l = t;
                    return (
                      h && (l = l.remove(new Bt(e.name, h))),
                      l.insert(e, e.node)
                    );
                  }),
                  this.indexSet_
                );
              }),
              (t.prototype.removeFromIndexes = function (e, n) {
                return new t(
                  (0, o.UI)(this.indexes_, function (t) {
                    if (t === Yt) return t;
                    var r = n.get(e.name);
                    return r ? t.remove(new Bt(e.name, r)) : t;
                  }),
                  this.indexSet_
                );
              }),
              t
            );
          })();
        function Zt(t, e) {
          return A(t.name, e.name);
        }
        function $t(t, e) {
          return A(t, e);
        }
        var te,
          ee = (function () {
            function t(t, e, n) {
              (this.children_ = t),
                (this.priorityNode_ = e),
                (this.indexMap_ = n),
                (this.lazyHash_ = null),
                this.priorityNode_ && Lt(this.priorityNode_),
                this.children_.isEmpty() &&
                  (0, o.hu)(
                    !this.priorityNode_ || this.priorityNode_.isEmpty(),
                    "An empty node cannot have a priority"
                  );
            }
            return (
              Object.defineProperty(t, "EMPTY_NODE", {
                get: function () {
                  return vt || (vt = new t(new qt($t), null, Xt.Default));
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.isLeafNode = function () {
                return !1;
              }),
              (t.prototype.getPriority = function () {
                return this.priorityNode_ || vt;
              }),
              (t.prototype.updatePriority = function (e) {
                return this.children_.isEmpty()
                  ? this
                  : new t(this.children_, e, this.indexMap_);
              }),
              (t.prototype.getImmediateChild = function (t) {
                if (".priority" === t) return this.getPriority();
                var e = this.children_.get(t);
                return null === e ? vt : e;
              }),
              (t.prototype.getChild = function (t) {
                var e = B(t);
                return null === e
                  ? this
                  : this.getImmediateChild(e).getChild(W(t));
              }),
              (t.prototype.hasChild = function (t) {
                return null !== this.children_.get(t);
              }),
              (t.prototype.updateImmediateChild = function (e, n) {
                if (
                  ((0, o.hu)(n, "We should always be passing snapshot nodes"),
                  ".priority" === e)
                )
                  return this.updatePriority(n);
                var r = new Bt(e, n),
                  i = void 0,
                  s = void 0;
                n.isEmpty()
                  ? ((i = this.children_.remove(e)),
                    (s = this.indexMap_.removeFromIndexes(r, this.children_)))
                  : ((i = this.children_.insert(e, n)),
                    (s = this.indexMap_.addToIndexes(r, this.children_)));
                var a = i.isEmpty() ? vt : this.priorityNode_;
                return new t(i, a, s);
              }),
              (t.prototype.updateChild = function (t, e) {
                var n = B(t);
                if (null === n) return e;
                (0, o.hu)(
                  ".priority" !== B(t) || 1 === G(t),
                  ".priority must be the last token in a path"
                );
                var r = this.getImmediateChild(n).updateChild(W(t), e);
                return this.updateImmediateChild(n, r);
              }),
              (t.prototype.isEmpty = function () {
                return this.children_.isEmpty();
              }),
              (t.prototype.numChildren = function () {
                return this.children_.count();
              }),
              (t.prototype.val = function (e) {
                if (this.isEmpty()) return null;
                var n = {},
                  r = 0,
                  i = 0,
                  o = !0;
                if (
                  (this.forEachChild(Wt, function (s, a) {
                    (n[s] = a.val(e)),
                      r++,
                      o && t.INTEGER_REGEXP_.test(s)
                        ? (i = Math.max(i, Number(s)))
                        : (o = !1);
                  }),
                  !e && o && i < 2 * r)
                ) {
                  var s = [];
                  for (var a in n) s[a] = n[a];
                  return s;
                }
                return (
                  e &&
                    !this.getPriority().isEmpty() &&
                    (n[".priority"] = this.getPriority().val()),
                  n
                );
              }),
              (t.prototype.hash = function () {
                if (null === this.lazyHash_) {
                  var t = "";
                  this.getPriority().isEmpty() ||
                    (t += "priority:" + Mt(this.getPriority().val()) + ":"),
                    this.forEachChild(Wt, function (e, n) {
                      var r = n.hash();
                      "" !== r && (t += ":" + e + ":" + r);
                    }),
                    (this.lazyHash_ = "" === t ? "" : g(t));
                }
                return this.lazyHash_;
              }),
              (t.prototype.getPredecessorChildName = function (t, e, n) {
                var r = this.resolveIndex_(n);
                if (r) {
                  var i = r.getPredecessorKey(new Bt(t, e));
                  return i ? i.name : null;
                }
                return this.children_.getPredecessorKey(t);
              }),
              (t.prototype.getFirstChildName = function (t) {
                var e = this.resolveIndex_(t);
                if (e) {
                  var n = e.minKey();
                  return n && n.name;
                }
                return this.children_.minKey();
              }),
              (t.prototype.getFirstChild = function (t) {
                var e = this.getFirstChildName(t);
                return e ? new Bt(e, this.children_.get(e)) : null;
              }),
              (t.prototype.getLastChildName = function (t) {
                var e = this.resolveIndex_(t);
                if (e) {
                  var n = e.maxKey();
                  return n && n.name;
                }
                return this.children_.maxKey();
              }),
              (t.prototype.getLastChild = function (t) {
                var e = this.getLastChildName(t);
                return e ? new Bt(e, this.children_.get(e)) : null;
              }),
              (t.prototype.forEachChild = function (t, e) {
                var n = this.resolveIndex_(t);
                return n
                  ? n.inorderTraversal(function (t) {
                      return e(t.name, t.node);
                    })
                  : this.children_.inorderTraversal(e);
              }),
              (t.prototype.getIterator = function (t) {
                return this.getIteratorFrom(t.minPost(), t);
              }),
              (t.prototype.getIteratorFrom = function (t, e) {
                var n = this.resolveIndex_(e);
                if (n)
                  return n.getIteratorFrom(t, function (t) {
                    return t;
                  });
                for (
                  var r = this.children_.getIteratorFrom(t.name, Bt.Wrap),
                    i = r.peek();
                  null != i && e.compare(i, t) < 0;

                )
                  r.getNext(), (i = r.peek());
                return r;
              }),
              (t.prototype.getReverseIterator = function (t) {
                return this.getReverseIteratorFrom(t.maxPost(), t);
              }),
              (t.prototype.getReverseIteratorFrom = function (t, e) {
                var n = this.resolveIndex_(e);
                if (n)
                  return n.getReverseIteratorFrom(t, function (t) {
                    return t;
                  });
                for (
                  var r = this.children_.getReverseIteratorFrom(
                      t.name,
                      Bt.Wrap
                    ),
                    i = r.peek();
                  null != i && e.compare(i, t) > 0;

                )
                  r.getNext(), (i = r.peek());
                return r;
              }),
              (t.prototype.compareTo = function (t) {
                return this.isEmpty()
                  ? t.isEmpty()
                    ? 0
                    : -1
                  : t.isLeafNode() || t.isEmpty()
                  ? 1
                  : t === ne
                  ? -1
                  : 0;
              }),
              (t.prototype.withIndex = function (e) {
                if (e === Ht || this.indexMap_.hasIndex(e)) return this;
                var n = this.indexMap_.addIndex(e, this.children_);
                return new t(this.children_, this.priorityNode_, n);
              }),
              (t.prototype.isIndexed = function (t) {
                return t === Ht || this.indexMap_.hasIndex(t);
              }),
              (t.prototype.equals = function (t) {
                if (t === this) return !0;
                if (t.isLeafNode()) return !1;
                var e = t;
                if (this.getPriority().equals(e.getPriority())) {
                  if (this.children_.count() === e.children_.count()) {
                    for (
                      var n = this.getIterator(Wt),
                        r = e.getIterator(Wt),
                        i = n.getNext(),
                        o = r.getNext();
                      i && o;

                    ) {
                      if (i.name !== o.name || !i.node.equals(o.node))
                        return !1;
                      (i = n.getNext()), (o = r.getNext());
                    }
                    return null === i && null === o;
                  }
                  return !1;
                }
                return !1;
              }),
              (t.prototype.resolveIndex_ = function (t) {
                return t === Ht ? null : this.indexMap_.get(t.toString());
              }),
              (t.INTEGER_REGEXP_ = /^(0|[1-9]\d*)$/),
              t
            );
          })(),
          ne = new ((function (t) {
            function e() {
              return (
                t.call(this, new qt($t), ee.EMPTY_NODE, Xt.Default) || this
              );
            }
            return (
              (0, i.ZT)(e, t),
              (e.prototype.compareTo = function (t) {
                return t === this ? 0 : 1;
              }),
              (e.prototype.equals = function (t) {
                return t === this;
              }),
              (e.prototype.getPriority = function () {
                return this;
              }),
              (e.prototype.getImmediateChild = function (t) {
                return ee.EMPTY_NODE;
              }),
              (e.prototype.isEmpty = function () {
                return !1;
              }),
              e
            );
          })(ee))();
        function re(t, e) {
          if ((void 0 === e && (e = null), null === t)) return ee.EMPTY_NODE;
          if (
            ("object" == typeof t && ".priority" in t && (e = t[".priority"]),
            (0, o.hu)(
              null === e ||
                "string" == typeof e ||
                "number" == typeof e ||
                ("object" == typeof e && ".sv" in e),
              "Invalid priority type found: " + typeof e
            ),
            "object" == typeof t &&
              ".value" in t &&
              null !== t[".value"] &&
              (t = t[".value"]),
            "object" != typeof t || ".sv" in t)
          )
            return new jt(t, re(e));
          if (t instanceof Array) {
            var n = ee.EMPTY_NODE;
            return (
              R(t, function (e, r) {
                if ((0, o.r3)(t, e) && "." !== e.substring(0, 1)) {
                  var i = re(r);
                  (!i.isLeafNode() && i.isEmpty()) ||
                    (n = n.updateImmediateChild(e, i));
                }
              }),
              n.updatePriority(re(e))
            );
          }
          var r = [],
            i = !1;
          if (
            (R(t, function (t, e) {
              if ("." !== t.substring(0, 1)) {
                var n = re(e);
                n.isEmpty() ||
                  ((i = i || !n.getPriority().isEmpty()), r.push(new Bt(t, n)));
              }
            }),
            0 === r.length)
          )
            return ee.EMPTY_NODE;
          var s = Qt(
            r,
            Zt,
            function (t) {
              return t.name;
            },
            $t
          );
          if (i) {
            var a = Qt(r, Wt.getCompare());
            return new ee(
              s,
              re(e),
              new Xt({ ".priority": a }, { ".priority": Wt })
            );
          }
          return new ee(s, re(e), Xt.Default);
        }
        function ie(t) {
          return { fromUser: !1, fromServer: !0, queryId: t, tagged: !0 };
        }
        Object.defineProperties(Bt, {
          MIN: { value: new Bt(k, ee.EMPTY_NODE) },
          MAX: { value: new Bt(N, ne) },
        }),
          (zt.__EMPTY_NODE = ee.EMPTY_NODE),
          (jt.__childrenNodeConstructor = ee),
          (ct = ne),
          (ft = ne),
          (function (t) {
            lt = t;
          })(re),
          (function (t) {
            (t[(t.OVERWRITE = 0)] = "OVERWRITE"),
              (t[(t.MERGE = 1)] = "MERGE"),
              (t[(t.ACK_USER_WRITE = 2)] = "ACK_USER_WRITE"),
              (t[(t.LISTEN_COMPLETE = 3)] = "LISTEN_COMPLETE");
          })(te || (te = {}));
        var oe,
          se = (function () {
            function t(t, e, n) {
              (this.path = t),
                (this.affectedTree = e),
                (this.revert = n),
                (this.type = te.ACK_USER_WRITE),
                (this.source = {
                  fromUser: !0,
                  fromServer: !1,
                  queryId: null,
                  tagged: !1,
                });
            }
            return (
              (t.prototype.operationForChild = function (e) {
                if (Y(this.path)) {
                  if (null != this.affectedTree.value)
                    return (
                      (0, o.hu)(
                        this.affectedTree.children.isEmpty(),
                        "affectedTree should not have overlapping affected paths."
                      ),
                      this
                    );
                  var n = this.affectedTree.subtree(new V(e));
                  return new t(q(), n, this.revert);
                }
                return (
                  (0, o.hu)(
                    B(this.path) === e,
                    "operationForChild called for unrelated child."
                  ),
                  new t(W(this.path), this.affectedTree, this.revert)
                );
              }),
              t
            );
          })(),
          ae = (function () {
            function t(t, e) {
              void 0 === e && (oe || (oe = new qt(P)), (e = oe)),
                (this.value = t),
                (this.children = e);
            }
            return (
              (t.fromObject = function (e) {
                var n = new t(null);
                return (
                  R(e, function (t, e) {
                    n = n.set(new V(t), e);
                  }),
                  n
                );
              }),
              (t.prototype.isEmpty = function () {
                return null === this.value && this.children.isEmpty();
              }),
              (t.prototype.findRootMostMatchingPathAndValue = function (t, e) {
                if (null != this.value && e(this.value))
                  return { path: q(), value: this.value };
                if (Y(t)) return null;
                var n = B(t),
                  r = this.children.get(n);
                if (null !== r) {
                  var i = r.findRootMostMatchingPathAndValue(W(t), e);
                  return null != i
                    ? { path: Q(new V(n), i.path), value: i.value }
                    : null;
                }
                return null;
              }),
              (t.prototype.findRootMostValueAndPath = function (t) {
                return this.findRootMostMatchingPathAndValue(t, function () {
                  return !0;
                });
              }),
              (t.prototype.subtree = function (e) {
                if (Y(e)) return this;
                var n = B(e),
                  r = this.children.get(n);
                return null !== r ? r.subtree(W(e)) : new t(null);
              }),
              (t.prototype.set = function (e, n) {
                if (Y(e)) return new t(n, this.children);
                var r = B(e),
                  i = (this.children.get(r) || new t(null)).set(W(e), n),
                  o = this.children.insert(r, i);
                return new t(this.value, o);
              }),
              (t.prototype.remove = function (e) {
                if (Y(e))
                  return this.children.isEmpty()
                    ? new t(null)
                    : new t(null, this.children);
                var n = B(e),
                  r = this.children.get(n);
                if (r) {
                  var i = r.remove(W(e)),
                    o = void 0;
                  return (
                    (o = i.isEmpty()
                      ? this.children.remove(n)
                      : this.children.insert(n, i)),
                    null === this.value && o.isEmpty()
                      ? new t(null)
                      : new t(this.value, o)
                  );
                }
                return this;
              }),
              (t.prototype.get = function (t) {
                if (Y(t)) return this.value;
                var e = B(t),
                  n = this.children.get(e);
                return n ? n.get(W(t)) : null;
              }),
              (t.prototype.setTree = function (e, n) {
                if (Y(e)) return n;
                var r,
                  i = B(e),
                  o = (this.children.get(i) || new t(null)).setTree(W(e), n);
                return (
                  (r = o.isEmpty()
                    ? this.children.remove(i)
                    : this.children.insert(i, o)),
                  new t(this.value, r)
                );
              }),
              (t.prototype.fold = function (t) {
                return this.fold_(q(), t);
              }),
              (t.prototype.fold_ = function (t, e) {
                var n = {};
                return (
                  this.children.inorderTraversal(function (r, i) {
                    n[r] = i.fold_(Q(t, r), e);
                  }),
                  e(t, this.value, n)
                );
              }),
              (t.prototype.findOnPath = function (t, e) {
                return this.findOnPath_(t, q(), e);
              }),
              (t.prototype.findOnPath_ = function (t, e, n) {
                var r = !!this.value && n(e, this.value);
                if (r) return r;
                if (Y(t)) return null;
                var i = B(t),
                  o = this.children.get(i);
                return o ? o.findOnPath_(W(t), Q(e, i), n) : null;
              }),
              (t.prototype.foreachOnPath = function (t, e) {
                return this.foreachOnPath_(t, q(), e);
              }),
              (t.prototype.foreachOnPath_ = function (e, n, r) {
                if (Y(e)) return this;
                this.value && r(n, this.value);
                var i = B(e),
                  o = this.children.get(i);
                return o ? o.foreachOnPath_(W(e), Q(n, i), r) : new t(null);
              }),
              (t.prototype.foreach = function (t) {
                this.foreach_(q(), t);
              }),
              (t.prototype.foreach_ = function (t, e) {
                this.children.inorderTraversal(function (n, r) {
                  r.foreach_(Q(t, n), e);
                }),
                  this.value && e(t, this.value);
              }),
              (t.prototype.foreachChild = function (t) {
                this.children.inorderTraversal(function (e, n) {
                  n.value && t(e, n.value);
                });
              }),
              t
            );
          })(),
          ue = (function () {
            function t(t, e) {
              (this.source = t),
                (this.path = e),
                (this.type = te.LISTEN_COMPLETE);
            }
            return (
              (t.prototype.operationForChild = function (e) {
                return Y(this.path)
                  ? new t(this.source, q())
                  : new t(this.source, W(this.path));
              }),
              t
            );
          })(),
          ce = (function () {
            function t(t, e, n) {
              (this.source = t),
                (this.path = e),
                (this.snap = n),
                (this.type = te.OVERWRITE);
            }
            return (
              (t.prototype.operationForChild = function (e) {
                return Y(this.path)
                  ? new t(this.source, q(), this.snap.getImmediateChild(e))
                  : new t(this.source, W(this.path), this.snap);
              }),
              t
            );
          })(),
          he = (function () {
            function t(t, e, n) {
              (this.source = t),
                (this.path = e),
                (this.children = n),
                (this.type = te.MERGE);
            }
            return (
              (t.prototype.operationForChild = function (e) {
                if (Y(this.path)) {
                  var n = this.children.subtree(new V(e));
                  return n.isEmpty()
                    ? null
                    : n.value
                    ? new ce(this.source, q(), n.value)
                    : new t(this.source, q(), n);
                }
                return (
                  (0, o.hu)(
                    B(this.path) === e,
                    "Can't get a merge for a child not on the path of the operation"
                  ),
                  new t(this.source, W(this.path), this.children)
                );
              }),
              (t.prototype.toString = function () {
                return (
                  "Operation(" +
                  this.path +
                  ": " +
                  this.source.toString() +
                  " merge: " +
                  this.children.toString() +
                  ")"
                );
              }),
              t
            );
          })(),
          le = (function () {
            function t(t, e, n) {
              (this.node_ = t),
                (this.fullyInitialized_ = e),
                (this.filtered_ = n);
            }
            return (
              (t.prototype.isFullyInitialized = function () {
                return this.fullyInitialized_;
              }),
              (t.prototype.isFiltered = function () {
                return this.filtered_;
              }),
              (t.prototype.isCompleteForPath = function (t) {
                if (Y(t)) return this.isFullyInitialized() && !this.filtered_;
                var e = B(t);
                return this.isCompleteForChild(e);
              }),
              (t.prototype.isCompleteForChild = function (t) {
                return (
                  (this.isFullyInitialized() && !this.filtered_) ||
                  this.node_.hasChild(t)
                );
              }),
              (t.prototype.getNode = function () {
                return this.node_;
              }),
              t
            );
          })(),
          fe = (function () {
            function t(t, e) {
              (this.eventCache_ = t), (this.serverCache_ = e);
            }
            return (
              (t.prototype.updateEventSnap = function (e, n, r) {
                return new t(new le(e, n, r), this.serverCache_);
              }),
              (t.prototype.updateServerSnap = function (e, n, r) {
                return new t(this.eventCache_, new le(e, n, r));
              }),
              (t.prototype.getEventCache = function () {
                return this.eventCache_;
              }),
              (t.prototype.getCompleteEventSnap = function () {
                return this.eventCache_.isFullyInitialized()
                  ? this.eventCache_.getNode()
                  : null;
              }),
              (t.prototype.getServerCache = function () {
                return this.serverCache_;
              }),
              (t.prototype.getCompleteServerSnap = function () {
                return this.serverCache_.isFullyInitialized()
                  ? this.serverCache_.getNode()
                  : null;
              }),
              t
            );
          })();
        function pe(t) {
          return { type: "value", snapshotNode: t };
        }
        function de(t, e) {
          return { type: "child_added", snapshotNode: e, childName: t };
        }
        function ve(t, e) {
          return { type: "child_removed", snapshotNode: e, childName: t };
        }
        function ge(t, e, n) {
          return {
            type: "child_changed",
            snapshotNode: e,
            childName: t,
            oldSnap: n,
          };
        }
        var me = (function () {
            function t(t) {
              this.index_ = t;
            }
            return (
              (t.prototype.updateChild = function (t, e, n, r, i, s) {
                (0, o.hu)(
                  t.isIndexed(this.index_),
                  "A node must be indexed if only a child is updated"
                );
                var a = t.getImmediateChild(e);
                return a.getChild(r).equals(n.getChild(r)) &&
                  a.isEmpty() === n.isEmpty()
                  ? t
                  : (null != s &&
                      (n.isEmpty()
                        ? t.hasChild(e)
                          ? s.trackChildChange(ve(e, a))
                          : (0, o.hu)(
                              t.isLeafNode(),
                              "A child remove without an old child only makes sense on a leaf node"
                            )
                        : a.isEmpty()
                        ? s.trackChildChange(de(e, n))
                        : s.trackChildChange(ge(e, n, a))),
                    t.isLeafNode() && n.isEmpty()
                      ? t
                      : t.updateImmediateChild(e, n).withIndex(this.index_));
              }),
              (t.prototype.updateFullNode = function (t, e, n) {
                return (
                  null != n &&
                    (t.isLeafNode() ||
                      t.forEachChild(Wt, function (t, r) {
                        e.hasChild(t) || n.trackChildChange(ve(t, r));
                      }),
                    e.isLeafNode() ||
                      e.forEachChild(Wt, function (e, r) {
                        if (t.hasChild(e)) {
                          var i = t.getImmediateChild(e);
                          i.equals(r) || n.trackChildChange(ge(e, r, i));
                        } else n.trackChildChange(de(e, r));
                      })),
                  e.withIndex(this.index_)
                );
              }),
              (t.prototype.updatePriority = function (t, e) {
                return t.isEmpty() ? ee.EMPTY_NODE : t.updatePriority(e);
              }),
              (t.prototype.filtersNodes = function () {
                return !1;
              }),
              (t.prototype.getIndexedFilter = function () {
                return this;
              }),
              (t.prototype.getIndex = function () {
                return this.index_;
              }),
              t
            );
          })(),
          ye = (function () {
            function t() {
              this.changeMap = new Map();
            }
            return (
              (t.prototype.trackChildChange = function (t) {
                var e = t.type,
                  n = t.childName;
                (0, o.hu)(
                  "child_added" === e ||
                    "child_changed" === e ||
                    "child_removed" === e,
                  "Only child changes supported for tracking"
                ),
                  (0, o.hu)(
                    ".priority" !== n,
                    "Only non-priority child changes can be tracked."
                  );
                var r = this.changeMap.get(n);
                if (r) {
                  var i = r.type;
                  if ("child_added" === e && "child_removed" === i)
                    this.changeMap.set(
                      n,
                      ge(n, t.snapshotNode, r.snapshotNode)
                    );
                  else if ("child_removed" === e && "child_added" === i)
                    this.changeMap.delete(n);
                  else if ("child_removed" === e && "child_changed" === i)
                    this.changeMap.set(n, ve(n, r.oldSnap));
                  else if ("child_changed" === e && "child_added" === i)
                    this.changeMap.set(n, de(n, t.snapshotNode));
                  else {
                    if ("child_changed" !== e || "child_changed" !== i)
                      throw (0, o.g5)(
                        "Illegal combination of changes: " +
                          t +
                          " occurred after " +
                          r
                      );
                    this.changeMap.set(n, ge(n, t.snapshotNode, r.oldSnap));
                  }
                } else this.changeMap.set(n, t);
              }),
              (t.prototype.getChanges = function () {
                return Array.from(this.changeMap.values());
              }),
              t
            );
          })(),
          be = new ((function () {
            function t() {}
            return (
              (t.prototype.getCompleteChild = function (t) {
                return null;
              }),
              (t.prototype.getChildAfterChild = function (t, e, n) {
                return null;
              }),
              t
            );
          })())(),
          we = (function () {
            function t(t, e, n) {
              void 0 === n && (n = null),
                (this.writes_ = t),
                (this.viewCache_ = e),
                (this.optCompleteServerCache_ = n);
            }
            return (
              (t.prototype.getCompleteChild = function (t) {
                var e = this.viewCache_.getEventCache();
                if (e.isCompleteForChild(t))
                  return e.getNode().getImmediateChild(t);
                var n =
                  null != this.optCompleteServerCache_
                    ? new le(this.optCompleteServerCache_, !0, !1)
                    : this.viewCache_.getServerCache();
                return this.writes_.calcCompleteChild(t, n);
              }),
              (t.prototype.getChildAfterChild = function (t, e, n) {
                var r =
                    null != this.optCompleteServerCache_
                      ? this.optCompleteServerCache_
                      : this.viewCache_.getCompleteServerSnap(),
                  i = this.writes_.calcIndexedSlice(r, e, 1, n, t);
                return 0 === i.length ? null : i[0];
              }),
              t
            );
          })(),
          _e = function (t, e) {
            (this.viewCache = t), (this.changes = e);
          },
          Ie = (function () {
            function t(t) {
              this.filter_ = t;
            }
            return (
              (t.prototype.assertIndexed = function (t) {
                (0, o.hu)(
                  t
                    .getEventCache()
                    .getNode()
                    .isIndexed(this.filter_.getIndex()),
                  "Event snap not indexed"
                ),
                  (0, o.hu)(
                    t
                      .getServerCache()
                      .getNode()
                      .isIndexed(this.filter_.getIndex()),
                    "Server snap not indexed"
                  );
              }),
              (t.prototype.applyOperation = function (e, n, r, i) {
                var s,
                  a,
                  u = new ye();
                if (n.type === te.OVERWRITE) {
                  var c = n;
                  c.source.fromUser
                    ? (s = this.applyUserOverwrite_(e, c.path, c.snap, r, i, u))
                    : ((0, o.hu)(c.source.fromServer, "Unknown source."),
                      (a =
                        c.source.tagged ||
                        (e.getServerCache().isFiltered() && !Y(c.path))),
                      (s = this.applyServerOverwrite_(
                        e,
                        c.path,
                        c.snap,
                        r,
                        i,
                        a,
                        u
                      )));
                } else if (n.type === te.MERGE) {
                  var h = n;
                  h.source.fromUser
                    ? (s = this.applyUserMerge_(e, h.path, h.children, r, i, u))
                    : ((0, o.hu)(h.source.fromServer, "Unknown source."),
                      (a = h.source.tagged || e.getServerCache().isFiltered()),
                      (s = this.applyServerMerge_(
                        e,
                        h.path,
                        h.children,
                        r,
                        i,
                        a,
                        u
                      )));
                } else if (n.type === te.ACK_USER_WRITE) {
                  var l = n;
                  s = l.revert
                    ? this.revertUserWrite_(e, l.path, r, i, u)
                    : this.ackUserWrite_(e, l.path, l.affectedTree, r, i, u);
                } else {
                  if (n.type !== te.LISTEN_COMPLETE)
                    throw (0, o.g5)("Unknown operation type: " + n.type);
                  s = this.listenComplete_(e, n.path, r, u);
                }
                var f = u.getChanges();
                return t.maybeAddValueEvent_(e, s, f), new _e(s, f);
              }),
              (t.maybeAddValueEvent_ = function (t, e, n) {
                var r = e.getEventCache();
                if (r.isFullyInitialized()) {
                  var i = r.getNode().isLeafNode() || r.getNode().isEmpty(),
                    o = t.getCompleteEventSnap();
                  (n.length > 0 ||
                    !t.getEventCache().isFullyInitialized() ||
                    (i && !r.getNode().equals(o)) ||
                    !r.getNode().getPriority().equals(o.getPriority())) &&
                    n.push(pe(e.getCompleteEventSnap()));
                }
              }),
              (t.prototype.generateEventCacheAfterServerEvent_ = function (
                t,
                e,
                n,
                r,
                i
              ) {
                var s = t.getEventCache();
                if (null != n.shadowingWrite(e)) return t;
                var a = void 0,
                  u = void 0;
                if (Y(e))
                  if (
                    ((0, o.hu)(
                      t.getServerCache().isFullyInitialized(),
                      "If change path is empty, we must have complete server data"
                    ),
                    t.getServerCache().isFiltered())
                  ) {
                    var c = t.getCompleteServerSnap(),
                      h = c instanceof ee ? c : ee.EMPTY_NODE,
                      l = n.calcCompleteEventChildren(h);
                    a = this.filter_.updateFullNode(
                      t.getEventCache().getNode(),
                      l,
                      i
                    );
                  } else {
                    var f = n.calcCompleteEventCache(t.getCompleteServerSnap());
                    a = this.filter_.updateFullNode(
                      t.getEventCache().getNode(),
                      f,
                      i
                    );
                  }
                else {
                  var p = B(e);
                  if (".priority" === p) {
                    (0, o.hu)(
                      1 === G(e),
                      "Can't have a priority with additional path components"
                    );
                    var d = s.getNode();
                    u = t.getServerCache().getNode();
                    var v = n.calcEventCacheAfterServerOverwrite(e, d, u);
                    a =
                      null != v
                        ? this.filter_.updatePriority(d, v)
                        : s.getNode();
                  } else {
                    var g = W(e),
                      m = void 0;
                    if (s.isCompleteForChild(p)) {
                      u = t.getServerCache().getNode();
                      var y = n.calcEventCacheAfterServerOverwrite(
                        e,
                        s.getNode(),
                        u
                      );
                      m =
                        null != y
                          ? s.getNode().getImmediateChild(p).updateChild(g, y)
                          : s.getNode().getImmediateChild(p);
                    } else m = n.calcCompleteChild(p, t.getServerCache());
                    a =
                      null != m
                        ? this.filter_.updateChild(s.getNode(), p, m, g, r, i)
                        : s.getNode();
                  }
                }
                return t.updateEventSnap(
                  a,
                  s.isFullyInitialized() || Y(e),
                  this.filter_.filtersNodes()
                );
              }),
              (t.prototype.applyServerOverwrite_ = function (
                t,
                e,
                n,
                r,
                i,
                o,
                s
              ) {
                var a,
                  u = t.getServerCache(),
                  c = o ? this.filter_ : this.filter_.getIndexedFilter();
                if (Y(e)) a = c.updateFullNode(u.getNode(), n, null);
                else if (c.filtersNodes() && !u.isFiltered()) {
                  var h = u.getNode().updateChild(e, n);
                  a = c.updateFullNode(u.getNode(), h, null);
                } else {
                  var l = B(e);
                  if (!u.isCompleteForPath(e) && G(e) > 1) return t;
                  var f = W(e),
                    p = u.getNode().getImmediateChild(l).updateChild(f, n);
                  a =
                    ".priority" === l
                      ? c.updatePriority(u.getNode(), p)
                      : c.updateChild(u.getNode(), l, p, f, be, null);
                }
                var d = t.updateServerSnap(
                    a,
                    u.isFullyInitialized() || Y(e),
                    c.filtersNodes()
                  ),
                  v = new we(r, d, i);
                return this.generateEventCacheAfterServerEvent_(d, e, r, v, s);
              }),
              (t.prototype.applyUserOverwrite_ = function (t, e, n, r, i, o) {
                var s,
                  a,
                  u = t.getEventCache(),
                  c = new we(r, t, i);
                if (Y(e))
                  (a = this.filter_.updateFullNode(
                    t.getEventCache().getNode(),
                    n,
                    o
                  )),
                    (s = t.updateEventSnap(a, !0, this.filter_.filtersNodes()));
                else {
                  var h = B(e);
                  if (".priority" === h)
                    (a = this.filter_.updatePriority(
                      t.getEventCache().getNode(),
                      n
                    )),
                      (s = t.updateEventSnap(
                        a,
                        u.isFullyInitialized(),
                        u.isFiltered()
                      ));
                  else {
                    var l = W(e),
                      f = u.getNode().getImmediateChild(h),
                      p = void 0;
                    if (Y(l)) p = n;
                    else {
                      var d = c.getCompleteChild(h);
                      p =
                        null != d
                          ? ".priority" === z(l) && d.getChild(J(l)).isEmpty()
                            ? d
                            : d.updateChild(l, n)
                          : ee.EMPTY_NODE;
                    }
                    if (f.equals(p)) s = t;
                    else {
                      var v = this.filter_.updateChild(
                        u.getNode(),
                        h,
                        p,
                        l,
                        c,
                        o
                      );
                      s = t.updateEventSnap(
                        v,
                        u.isFullyInitialized(),
                        this.filter_.filtersNodes()
                      );
                    }
                  }
                }
                return s;
              }),
              (t.cacheHasChild_ = function (t, e) {
                return t.getEventCache().isCompleteForChild(e);
              }),
              (t.prototype.applyUserMerge_ = function (e, n, r, i, o, s) {
                var a = this,
                  u = e;
                return (
                  r.foreach(function (r, c) {
                    var h = Q(n, r);
                    t.cacheHasChild_(e, B(h)) &&
                      (u = a.applyUserOverwrite_(u, h, c, i, o, s));
                  }),
                  r.foreach(function (r, c) {
                    var h = Q(n, r);
                    t.cacheHasChild_(e, B(h)) ||
                      (u = a.applyUserOverwrite_(u, h, c, i, o, s));
                  }),
                  u
                );
              }),
              (t.prototype.applyMerge_ = function (t, e) {
                return (
                  e.foreach(function (e, n) {
                    t = t.updateChild(e, n);
                  }),
                  t
                );
              }),
              (t.prototype.applyServerMerge_ = function (t, e, n, r, i, o, s) {
                var a = this;
                if (
                  t.getServerCache().getNode().isEmpty() &&
                  !t.getServerCache().isFullyInitialized()
                )
                  return t;
                var u,
                  c = t;
                u = Y(e) ? n : new ae(null).setTree(e, n);
                var h = t.getServerCache().getNode();
                return (
                  u.children.inorderTraversal(function (e, n) {
                    if (h.hasChild(e)) {
                      var u = t.getServerCache().getNode().getImmediateChild(e),
                        l = a.applyMerge_(u, n);
                      c = a.applyServerOverwrite_(c, new V(e), l, r, i, o, s);
                    }
                  }),
                  u.children.inorderTraversal(function (e, n) {
                    var u =
                      !t.getServerCache().isCompleteForChild(e) &&
                      void 0 === n.value;
                    if (!h.hasChild(e) && !u) {
                      var l = t.getServerCache().getNode().getImmediateChild(e),
                        f = a.applyMerge_(l, n);
                      c = a.applyServerOverwrite_(c, new V(e), f, r, i, o, s);
                    }
                  }),
                  c
                );
              }),
              (t.prototype.ackUserWrite_ = function (t, e, n, r, i, o) {
                if (null != r.shadowingWrite(e)) return t;
                var s = t.getServerCache().isFiltered(),
                  a = t.getServerCache();
                if (null != n.value) {
                  if (
                    (Y(e) && a.isFullyInitialized()) ||
                    a.isCompleteForPath(e)
                  )
                    return this.applyServerOverwrite_(
                      t,
                      e,
                      a.getNode().getChild(e),
                      r,
                      i,
                      s,
                      o
                    );
                  if (Y(e)) {
                    var u = new ae(null);
                    return (
                      a.getNode().forEachChild(Ht, function (t, e) {
                        u = u.set(new V(t), e);
                      }),
                      this.applyServerMerge_(t, e, u, r, i, s, o)
                    );
                  }
                  return t;
                }
                var c = new ae(null);
                return (
                  n.foreach(function (t, n) {
                    var r = Q(e, t);
                    a.isCompleteForPath(r) &&
                      (c = c.set(t, a.getNode().getChild(r)));
                  }),
                  this.applyServerMerge_(t, e, c, r, i, s, o)
                );
              }),
              (t.prototype.listenComplete_ = function (t, e, n, r) {
                var i = t.getServerCache(),
                  o = t.updateServerSnap(
                    i.getNode(),
                    i.isFullyInitialized() || Y(e),
                    i.isFiltered()
                  );
                return this.generateEventCacheAfterServerEvent_(o, e, n, be, r);
              }),
              (t.prototype.revertUserWrite_ = function (t, e, n, r, i) {
                var s;
                if (null != n.shadowingWrite(e)) return t;
                var a = new we(n, t, r),
                  u = t.getEventCache().getNode(),
                  c = void 0;
                if (Y(e) || ".priority" === B(e)) {
                  var h = void 0;
                  if (t.getServerCache().isFullyInitialized())
                    h = n.calcCompleteEventCache(t.getCompleteServerSnap());
                  else {
                    var l = t.getServerCache().getNode();
                    (0, o.hu)(
                      l instanceof ee,
                      "serverChildren would be complete if leaf node"
                    ),
                      (h = n.calcCompleteEventChildren(l));
                  }
                  (h = h), (c = this.filter_.updateFullNode(u, h, i));
                } else {
                  var f = B(e),
                    p = n.calcCompleteChild(f, t.getServerCache());
                  null == p &&
                    t.getServerCache().isCompleteForChild(f) &&
                    (p = u.getImmediateChild(f)),
                    (c =
                      null != p
                        ? this.filter_.updateChild(u, f, p, W(e), a, i)
                        : t.getEventCache().getNode().hasChild(f)
                        ? this.filter_.updateChild(
                            u,
                            f,
                            ee.EMPTY_NODE,
                            W(e),
                            a,
                            i
                          )
                        : u).isEmpty() &&
                      t.getServerCache().isFullyInitialized() &&
                      (s = n.calcCompleteEventCache(
                        t.getCompleteServerSnap()
                      )).isLeafNode() &&
                      (c = this.filter_.updateFullNode(c, s, i));
                }
                return (
                  (s =
                    t.getServerCache().isFullyInitialized() ||
                    null != n.shadowingWrite(q())),
                  t.updateEventSnap(c, s, this.filter_.filtersNodes())
                );
              }),
              t
            );
          })(),
          Ee = function (t) {
            (this.query_ = t),
              (this.index_ = this.query_.getQueryParams().getIndex());
          };
        function Te(t, e, n, r, i, s) {
          var a = r.filter(function (t) {
            return t.type === n;
          });
          a.sort(function (e, n) {
            return (function (t, e, n) {
              if (null == e.childName || null == n.childName)
                throw (0, o.g5)("Should only compare child_ events.");
              var r = new Bt(e.childName, e.snapshotNode),
                i = new Bt(n.childName, n.snapshotNode);
              return t.index_.compare(r, i);
            })(t, e, n);
          }),
            a.forEach(function (n) {
              var r = (function (t, e, n) {
                return (
                  "value" === e.type ||
                    "child_removed" === e.type ||
                    (e.prevName = n.getPredecessorChildName(
                      e.childName,
                      e.snapshotNode,
                      t.index_
                    )),
                  e
                );
              })(t, n, s);
              i.forEach(function (i) {
                i.respondsTo(n.type) && e.push(i.createEvent(r, t.query_));
              });
            });
        }
        var Se,
          Ce,
          ke =
            "-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",
          Ne =
            ((Se = 0),
            (Ce = []),
            function (t) {
              var e,
                n = t === Se;
              Se = t;
              var r = new Array(8);
              for (e = 7; e >= 0; e--)
                (r[e] = ke.charAt(t % 64)), (t = Math.floor(t / 64));
              (0, o.hu)(0 === t, "Cannot push at time == 0");
              var i = r.join("");
              if (n) {
                for (e = 11; e >= 0 && 63 === Ce[e]; e--) Ce[e] = 0;
                Ce[e]++;
              } else
                for (e = 0; e < 12; e++) Ce[e] = Math.floor(64 * Math.random());
              for (e = 0; e < 12; e++) i += ke.charAt(Ce[e]);
              return (
                (0, o.hu)(20 === i.length, "nextPushId: Length should be 20."),
                i
              );
            }),
          Ae = function (t) {
            if ("2147483647" === t) return "-";
            var e = j(t);
            if (null != e) return "" + (e + 1);
            for (var n = new Array(t.length), r = 0; r < n.length; r++)
              n[r] = t.charAt(r);
            if (n.length < 786) return n.push("-"), n.join("");
            for (var i = n.length - 1; i >= 0 && "z" === n[i]; ) i--;
            if (-1 === i) return N;
            var o = n[i],
              s = ke.charAt(ke.indexOf(o) + 1);
            return (n[i] = s), n.slice(0, i + 1).join("");
          },
          Pe = function (t) {
            if ("-2147483648" === t) return k;
            var e = j(t);
            if (null != e) return "" + (e - 1);
            for (var n = new Array(t.length), r = 0; r < n.length; r++)
              n[r] = t.charAt(r);
            return "-" === n[n.length - 1]
              ? 1 === n.length
                ? "2147483647"
                : (delete n[n.length - 1], n.join(""))
              : ((n[n.length - 1] = ke.charAt(ke.indexOf(n[n.length - 1]) - 1)),
                n.join("") + "z".repeat(786 - n.length));
          },
          De = new ((function (t) {
            function e() {
              return (null !== t && t.apply(this, arguments)) || this;
            }
            return (
              (0, i.ZT)(e, t),
              (e.prototype.compare = function (t, e) {
                var n = t.node.compareTo(e.node);
                return 0 === n ? A(t.name, e.name) : n;
              }),
              (e.prototype.isDefinedOn = function (t) {
                return !0;
              }),
              (e.prototype.indexedValueChanged = function (t, e) {
                return !t.equals(e);
              }),
              (e.prototype.minPost = function () {
                return Bt.MIN;
              }),
              (e.prototype.maxPost = function () {
                return Bt.MAX;
              }),
              (e.prototype.makePost = function (t, e) {
                var n = re(t);
                return new Bt(e, n);
              }),
              (e.prototype.toString = function () {
                return ".value";
              }),
              e
            );
          })(Gt))(),
          xe = (function (t) {
            function e(e) {
              var n = t.call(this) || this;
              return (
                (n.indexPath_ = e),
                (0, o.hu)(
                  !Y(e) && ".priority" !== B(e),
                  "Can't create PathIndex with empty path or .priority key"
                ),
                n
              );
            }
            return (
              (0, i.ZT)(e, t),
              (e.prototype.extractChild = function (t) {
                return t.getChild(this.indexPath_);
              }),
              (e.prototype.isDefinedOn = function (t) {
                return !t.getChild(this.indexPath_).isEmpty();
              }),
              (e.prototype.compare = function (t, e) {
                var n = this.extractChild(t.node),
                  r = this.extractChild(e.node),
                  i = n.compareTo(r);
                return 0 === i ? A(t.name, e.name) : i;
              }),
              (e.prototype.makePost = function (t, e) {
                var n = re(t),
                  r = ee.EMPTY_NODE.updateChild(this.indexPath_, n);
                return new Bt(e, r);
              }),
              (e.prototype.maxPost = function () {
                var t = ee.EMPTY_NODE.updateChild(this.indexPath_, ne);
                return new Bt(N, t);
              }),
              (e.prototype.toString = function () {
                return K(this.indexPath_, 0).join("/");
              }),
              e
            );
          })(Gt),
          Oe = (function () {
            function t(e) {
              (this.indexedFilter_ = new me(e.getIndex())),
                (this.index_ = e.getIndex()),
                (this.startPost_ = t.getStartPost_(e)),
                (this.endPost_ = t.getEndPost_(e));
            }
            return (
              (t.prototype.getStartPost = function () {
                return this.startPost_;
              }),
              (t.prototype.getEndPost = function () {
                return this.endPost_;
              }),
              (t.prototype.matches = function (t) {
                return (
                  this.index_.compare(this.getStartPost(), t) <= 0 &&
                  this.index_.compare(t, this.getEndPost()) <= 0
                );
              }),
              (t.prototype.updateChild = function (t, e, n, r, i, o) {
                return (
                  this.matches(new Bt(e, n)) || (n = ee.EMPTY_NODE),
                  this.indexedFilter_.updateChild(t, e, n, r, i, o)
                );
              }),
              (t.prototype.updateFullNode = function (t, e, n) {
                e.isLeafNode() && (e = ee.EMPTY_NODE);
                var r = e.withIndex(this.index_);
                r = r.updatePriority(ee.EMPTY_NODE);
                var i = this;
                return (
                  e.forEachChild(Wt, function (t, e) {
                    i.matches(new Bt(t, e)) ||
                      (r = r.updateImmediateChild(t, ee.EMPTY_NODE));
                  }),
                  this.indexedFilter_.updateFullNode(t, r, n)
                );
              }),
              (t.prototype.updatePriority = function (t, e) {
                return t;
              }),
              (t.prototype.filtersNodes = function () {
                return !0;
              }),
              (t.prototype.getIndexedFilter = function () {
                return this.indexedFilter_;
              }),
              (t.prototype.getIndex = function () {
                return this.index_;
              }),
              (t.getStartPost_ = function (t) {
                if (t.hasStart()) {
                  var e = t.getIndexStartName();
                  return t.getIndex().makePost(t.getIndexStartValue(), e);
                }
                return t.getIndex().minPost();
              }),
              (t.getEndPost_ = function (t) {
                if (t.hasEnd()) {
                  var e = t.getIndexEndName();
                  return t.getIndex().makePost(t.getIndexEndValue(), e);
                }
                return t.getIndex().maxPost();
              }),
              t
            );
          })(),
          Re = (function () {
            function t(t) {
              (this.rangedFilter_ = new Oe(t)),
                (this.index_ = t.getIndex()),
                (this.limit_ = t.getLimit()),
                (this.reverse_ = !t.isViewFromLeft());
            }
            return (
              (t.prototype.updateChild = function (t, e, n, r, i, o) {
                return (
                  this.rangedFilter_.matches(new Bt(e, n)) ||
                    (n = ee.EMPTY_NODE),
                  t.getImmediateChild(e).equals(n)
                    ? t
                    : t.numChildren() < this.limit_
                    ? this.rangedFilter_
                        .getIndexedFilter()
                        .updateChild(t, e, n, r, i, o)
                    : this.fullLimitUpdateChild_(t, e, n, i, o)
                );
              }),
              (t.prototype.updateFullNode = function (t, e, n) {
                var r;
                if (e.isLeafNode() || e.isEmpty())
                  r = ee.EMPTY_NODE.withIndex(this.index_);
                else if (
                  2 * this.limit_ < e.numChildren() &&
                  e.isIndexed(this.index_)
                ) {
                  r = ee.EMPTY_NODE.withIndex(this.index_);
                  var i = void 0;
                  i = this.reverse_
                    ? e.getReverseIteratorFrom(
                        this.rangedFilter_.getEndPost(),
                        this.index_
                      )
                    : e.getIteratorFrom(
                        this.rangedFilter_.getStartPost(),
                        this.index_
                      );
                  for (var o = 0; i.hasNext() && o < this.limit_; ) {
                    var s = i.getNext();
                    if (
                      !(this.reverse_
                        ? this.index_.compare(
                            this.rangedFilter_.getStartPost(),
                            s
                          ) <= 0
                        : this.index_.compare(
                            s,
                            this.rangedFilter_.getEndPost()
                          ) <= 0)
                    )
                      break;
                    (r = r.updateImmediateChild(s.name, s.node)), o++;
                  }
                } else {
                  r = (r = e.withIndex(this.index_)).updatePriority(
                    ee.EMPTY_NODE
                  );
                  var a = void 0,
                    u = void 0,
                    c = void 0;
                  if (((i = void 0), this.reverse_)) {
                    (i = r.getReverseIterator(this.index_)),
                      (a = this.rangedFilter_.getEndPost()),
                      (u = this.rangedFilter_.getStartPost());
                    var h = this.index_.getCompare();
                    c = function (t, e) {
                      return h(e, t);
                    };
                  } else
                    (i = r.getIterator(this.index_)),
                      (a = this.rangedFilter_.getStartPost()),
                      (u = this.rangedFilter_.getEndPost()),
                      (c = this.index_.getCompare());
                  o = 0;
                  for (var l = !1; i.hasNext(); )
                    (s = i.getNext()),
                      !l && c(a, s) <= 0 && (l = !0),
                      l && o < this.limit_ && c(s, u) <= 0
                        ? o++
                        : (r = r.updateImmediateChild(s.name, ee.EMPTY_NODE));
                }
                return this.rangedFilter_
                  .getIndexedFilter()
                  .updateFullNode(t, r, n);
              }),
              (t.prototype.updatePriority = function (t, e) {
                return t;
              }),
              (t.prototype.filtersNodes = function () {
                return !0;
              }),
              (t.prototype.getIndexedFilter = function () {
                return this.rangedFilter_.getIndexedFilter();
              }),
              (t.prototype.getIndex = function () {
                return this.index_;
              }),
              (t.prototype.fullLimitUpdateChild_ = function (t, e, n, r, i) {
                var s;
                if (this.reverse_) {
                  var a = this.index_.getCompare();
                  s = function (t, e) {
                    return a(e, t);
                  };
                } else s = this.index_.getCompare();
                var u = t;
                (0, o.hu)(u.numChildren() === this.limit_, "");
                var c = new Bt(e, n),
                  h = this.reverse_
                    ? u.getFirstChild(this.index_)
                    : u.getLastChild(this.index_),
                  l = this.rangedFilter_.matches(c);
                if (u.hasChild(e)) {
                  for (
                    var f = u.getImmediateChild(e),
                      p = r.getChildAfterChild(this.index_, h, this.reverse_);
                    null != p && (p.name === e || u.hasChild(p.name));

                  )
                    p = r.getChildAfterChild(this.index_, p, this.reverse_);
                  var d = null == p ? 1 : s(p, c);
                  if (l && !n.isEmpty() && d >= 0)
                    return (
                      null != i && i.trackChildChange(ge(e, n, f)),
                      u.updateImmediateChild(e, n)
                    );
                  null != i && i.trackChildChange(ve(e, f));
                  var v = u.updateImmediateChild(e, ee.EMPTY_NODE);
                  return null != p && this.rangedFilter_.matches(p)
                    ? (null != i && i.trackChildChange(de(p.name, p.node)),
                      v.updateImmediateChild(p.name, p.node))
                    : v;
                }
                return n.isEmpty()
                  ? t
                  : l && s(h, c) >= 0
                  ? (null != i &&
                      (i.trackChildChange(ve(h.name, h.node)),
                      i.trackChildChange(de(e, n))),
                    u
                      .updateImmediateChild(e, n)
                      .updateImmediateChild(h.name, ee.EMPTY_NODE))
                  : t;
              }),
              t
            );
          })(),
          Me = (function () {
            function t() {
              (this.limitSet_ = !1),
                (this.startSet_ = !1),
                (this.startNameSet_ = !1),
                (this.startAfterSet_ = !1),
                (this.endSet_ = !1),
                (this.endNameSet_ = !1),
                (this.endBeforeSet_ = !1),
                (this.limit_ = 0),
                (this.viewFrom_ = ""),
                (this.indexStartValue_ = null),
                (this.indexStartName_ = ""),
                (this.indexEndValue_ = null),
                (this.indexEndName_ = ""),
                (this.index_ = Wt);
            }
            return (
              (t.prototype.hasStart = function () {
                return this.startSet_;
              }),
              (t.prototype.hasStartAfter = function () {
                return this.startAfterSet_;
              }),
              (t.prototype.hasEndBefore = function () {
                return this.endBeforeSet_;
              }),
              (t.prototype.isViewFromLeft = function () {
                return "" === this.viewFrom_
                  ? this.startSet_
                  : "l" === this.viewFrom_;
              }),
              (t.prototype.getIndexStartValue = function () {
                return (
                  (0, o.hu)(this.startSet_, "Only valid if start has been set"),
                  this.indexStartValue_
                );
              }),
              (t.prototype.getIndexStartName = function () {
                return (
                  (0, o.hu)(this.startSet_, "Only valid if start has been set"),
                  this.startNameSet_ ? this.indexStartName_ : k
                );
              }),
              (t.prototype.hasEnd = function () {
                return this.endSet_;
              }),
              (t.prototype.getIndexEndValue = function () {
                return (
                  (0, o.hu)(this.endSet_, "Only valid if end has been set"),
                  this.indexEndValue_
                );
              }),
              (t.prototype.getIndexEndName = function () {
                return (
                  (0, o.hu)(this.endSet_, "Only valid if end has been set"),
                  this.endNameSet_ ? this.indexEndName_ : N
                );
              }),
              (t.prototype.hasLimit = function () {
                return this.limitSet_;
              }),
              (t.prototype.hasAnchoredLimit = function () {
                return this.limitSet_ && "" !== this.viewFrom_;
              }),
              (t.prototype.getLimit = function () {
                return (
                  (0, o.hu)(this.limitSet_, "Only valid if limit has been set"),
                  this.limit_
                );
              }),
              (t.prototype.getIndex = function () {
                return this.index_;
              }),
              (t.prototype.loadsAllData = function () {
                return !(this.startSet_ || this.endSet_ || this.limitSet_);
              }),
              (t.prototype.isDefault = function () {
                return this.loadsAllData() && this.index_ === Wt;
              }),
              (t.prototype.copy = function () {
                var e = new t();
                return (
                  (e.limitSet_ = this.limitSet_),
                  (e.limit_ = this.limit_),
                  (e.startSet_ = this.startSet_),
                  (e.indexStartValue_ = this.indexStartValue_),
                  (e.startNameSet_ = this.startNameSet_),
                  (e.indexStartName_ = this.indexStartName_),
                  (e.endSet_ = this.endSet_),
                  (e.indexEndValue_ = this.indexEndValue_),
                  (e.endNameSet_ = this.endNameSet_),
                  (e.indexEndName_ = this.indexEndName_),
                  (e.index_ = this.index_),
                  (e.viewFrom_ = this.viewFrom_),
                  e
                );
              }),
              t
            );
          })();
        function Le(t, e) {
          var n = t.copy();
          return (n.limitSet_ = !0), (n.limit_ = e), (n.viewFrom_ = "l"), n;
        }
        function je(t, e) {
          var n = t.copy();
          return (n.limitSet_ = !0), (n.limit_ = e), (n.viewFrom_ = "r"), n;
        }
        function Fe(t, e, n) {
          var r = t.copy();
          return (
            (r.startSet_ = !0),
            void 0 === e && (e = null),
            (r.indexStartValue_ = e),
            null != n
              ? ((r.startNameSet_ = !0), (r.indexStartName_ = n))
              : ((r.startNameSet_ = !1), (r.indexStartName_ = "")),
            r
          );
        }
        function Ue(t, e, n) {
          var r;
          return (
            t.index_ === Ht
              ? ("string" == typeof e && (e = Ae(e)), (r = Fe(t, e, n)))
              : (r = Fe(t, e, null == n ? N : Ae(n))),
            (r.startAfterSet_ = !0),
            r
          );
        }
        function Ve(t, e, n) {
          var r = t.copy();
          return (
            (r.endSet_ = !0),
            void 0 === e && (e = null),
            (r.indexEndValue_ = e),
            void 0 !== n
              ? ((r.endNameSet_ = !0), (r.indexEndName_ = n))
              : ((r.endNameSet_ = !1), (r.indexEndName_ = "")),
            r
          );
        }
        function qe(t, e, n) {
          var r;
          return (
            t.index_ === Ht
              ? ("string" == typeof e && (e = Pe(e)), (r = Ve(t, e, n)))
              : (r = Ve(t, e, null == n ? k : Pe(n))),
            (r.endBeforeSet_ = !0),
            r
          );
        }
        function Be(t, e) {
          var n = t.copy();
          return (n.index_ = e), n;
        }
        function Ge(t) {
          var e,
            n = {};
          return (
            t.isDefault() ||
              (t.index_ === Wt
                ? (e = "$priority")
                : t.index_ === De
                ? (e = "$value")
                : t.index_ === Ht
                ? (e = "$key")
                : ((0, o.hu)(
                    t.index_ instanceof xe,
                    "Unrecognized index type!"
                  ),
                  (e = t.index_.toString())),
              (n.orderBy = (0, o.Pz)(e)),
              t.startSet_ &&
                ((n.startAt = (0, o.Pz)(t.indexStartValue_)),
                t.startNameSet_ &&
                  (n.startAt += "," + (0, o.Pz)(t.indexStartName_))),
              t.endSet_ &&
                ((n.endAt = (0, o.Pz)(t.indexEndValue_)),
                t.endNameSet_ && (n.endAt += "," + (0, o.Pz)(t.indexEndName_))),
              t.limitSet_ &&
                (t.isViewFromLeft()
                  ? (n.limitToFirst = t.limit_)
                  : (n.limitToLast = t.limit_))),
            n
          );
        }
        var We,
          ze = (function () {
            function t(t, e) {
              (this.query_ = t), (this.eventRegistrations_ = []);
              var n,
                r = this.query_.getQueryParams(),
                i = new me(r.getIndex()),
                o = (n = r).loadsAllData()
                  ? new me(n.getIndex())
                  : n.hasLimit()
                  ? new Re(n)
                  : new Oe(n);
              this.processor_ = new Ie(o);
              var s = e.getServerCache(),
                a = e.getEventCache(),
                u = i.updateFullNode(ee.EMPTY_NODE, s.getNode(), null),
                c = o.updateFullNode(ee.EMPTY_NODE, a.getNode(), null),
                h = new le(u, s.isFullyInitialized(), i.filtersNodes()),
                l = new le(c, a.isFullyInitialized(), o.filtersNodes());
              (this.viewCache_ = new fe(l, h)),
                (this.eventGenerator_ = new Ee(this.query_));
            }
            return (
              (t.prototype.getQuery = function () {
                return this.query_;
              }),
              (t.prototype.getServerCache = function () {
                return this.viewCache_.getServerCache().getNode();
              }),
              (t.prototype.getCompleteNode = function () {
                return this.viewCache_.getCompleteEventSnap();
              }),
              (t.prototype.getCompleteServerCache = function (t) {
                var e = this.viewCache_.getCompleteServerSnap();
                return e &&
                  (this.query_.getQueryParams().loadsAllData() ||
                    (!Y(t) && !e.getImmediateChild(B(t)).isEmpty()))
                  ? e.getChild(t)
                  : null;
              }),
              (t.prototype.isEmpty = function () {
                return 0 === this.eventRegistrations_.length;
              }),
              (t.prototype.addEventRegistration = function (t) {
                this.eventRegistrations_.push(t);
              }),
              (t.prototype.removeEventRegistration = function (t, e) {
                var n = [];
                if (e) {
                  (0, o.hu)(
                    null == t,
                    "A cancel should cancel all event registrations."
                  );
                  var r = this.query_.path;
                  this.eventRegistrations_.forEach(function (t) {
                    var i = t.createCancelEvent(e, r);
                    i && n.push(i);
                  });
                }
                if (t) {
                  for (
                    var i = [], s = 0;
                    s < this.eventRegistrations_.length;
                    ++s
                  ) {
                    var a = this.eventRegistrations_[s];
                    if (a.matches(t)) {
                      if (t.hasAnyCallback()) {
                        i = i.concat(this.eventRegistrations_.slice(s + 1));
                        break;
                      }
                    } else i.push(a);
                  }
                  this.eventRegistrations_ = i;
                } else this.eventRegistrations_ = [];
                return n;
              }),
              (t.prototype.applyOperation = function (t, e, n) {
                t.type === te.MERGE &&
                  null !== t.source.queryId &&
                  ((0, o.hu)(
                    this.viewCache_.getCompleteServerSnap(),
                    "We should always have a full cache before handling merges"
                  ),
                  (0, o.hu)(
                    this.viewCache_.getCompleteEventSnap(),
                    "Missing event cache, even though we have a server cache"
                  ));
                var r = this.viewCache_,
                  i = this.processor_.applyOperation(r, t, e, n);
                return (
                  this.processor_.assertIndexed(i.viewCache),
                  (0, o.hu)(
                    i.viewCache.getServerCache().isFullyInitialized() ||
                      !r.getServerCache().isFullyInitialized(),
                    "Once a server snap is complete, it should never go back"
                  ),
                  (this.viewCache_ = i.viewCache),
                  this.generateEventsForChanges_(
                    i.changes,
                    i.viewCache.getEventCache().getNode(),
                    null
                  )
                );
              }),
              (t.prototype.getInitialEvents = function (t) {
                var e = this.viewCache_.getEventCache(),
                  n = [];
                return (
                  e.getNode().isLeafNode() ||
                    e.getNode().forEachChild(Wt, function (t, e) {
                      n.push(de(t, e));
                    }),
                  e.isFullyInitialized() && n.push(pe(e.getNode())),
                  this.generateEventsForChanges_(n, e.getNode(), t)
                );
              }),
              (t.prototype.generateEventsForChanges_ = function (t, e, n) {
                var r = n ? [n] : this.eventRegistrations_;
                return (function (t, e, n, r) {
                  var i = [],
                    o = [];
                  return (
                    e.forEach(function (e) {
                      var n;
                      "child_changed" === e.type &&
                        t.index_.indexedValueChanged(
                          e.oldSnap,
                          e.snapshotNode
                        ) &&
                        o.push(
                          ((n = e.childName),
                          {
                            type: "child_moved",
                            snapshotNode: e.snapshotNode,
                            childName: n,
                          })
                        );
                    }),
                    Te(t, i, "child_removed", e, r, n),
                    Te(t, i, "child_added", e, r, n),
                    Te(t, i, "child_moved", o, r, n),
                    Te(t, i, "child_changed", e, r, n),
                    Te(t, i, "value", e, r, n),
                    i
                  );
                })(this.eventGenerator_, t, e, r);
              }),
              t
            );
          })(),
          He = function () {
            this.views = new Map();
          };
        function Ke(t, e, n, r) {
          var s,
            a,
            u = e.source.queryId;
          if (null !== u) {
            var c = t.views.get(u);
            return (
              (0, o.hu)(
                null != c,
                "SyncTree gave us an op for an invalid query."
              ),
              c.applyOperation(e, n, r)
            );
          }
          var h = [];
          try {
            for (
              var l = (0, i.XA)(t.views.values()), f = l.next();
              !f.done;
              f = l.next()
            )
              (c = f.value), (h = h.concat(c.applyOperation(e, n, r)));
          } catch (t) {
            s = { error: t };
          } finally {
            try {
              f && !f.done && (a = l.return) && a.call(l);
            } finally {
              if (s) throw s.error;
            }
          }
          return h;
        }
        function Je(t, e, n, r, i) {
          var o = e.queryIdentifier(),
            s = t.views.get(o);
          if (!s) {
            var a = n.calcCompleteEventCache(i ? r : null),
              u = !1;
            a
              ? (u = !0)
              : r instanceof ee
              ? ((a = n.calcCompleteEventChildren(r)), (u = !1))
              : ((a = ee.EMPTY_NODE), (u = !1));
            var c = new fe(new le(a, u, !1), new le(r, i, !1));
            return new ze(e, c);
          }
          return s;
        }
        function Qe(t) {
          var e,
            n,
            r = [];
          try {
            for (
              var o = (0, i.XA)(t.views.values()), s = o.next();
              !s.done;
              s = o.next()
            ) {
              var a = s.value;
              a.getQuery().getQueryParams().loadsAllData() || r.push(a);
            }
          } catch (t) {
            e = { error: t };
          } finally {
            try {
              s && !s.done && (n = o.return) && n.call(o);
            } finally {
              if (e) throw e.error;
            }
          }
          return r;
        }
        function Ye(t, e) {
          var n,
            r,
            o = null;
          try {
            for (
              var s = (0, i.XA)(t.views.values()), a = s.next();
              !a.done;
              a = s.next()
            ) {
              var u = a.value;
              o = o || u.getCompleteServerCache(e);
            }
          } catch (t) {
            n = { error: t };
          } finally {
            try {
              a && !a.done && (r = s.return) && r.call(s);
            } finally {
              if (n) throw n.error;
            }
          }
          return o;
        }
        function Xe(t, e) {
          if (e.getQueryParams().loadsAllData()) return tn(t);
          var n = e.queryIdentifier();
          return t.views.get(n);
        }
        function Ze(t, e) {
          return null != Xe(t, e);
        }
        function $e(t) {
          return null != tn(t);
        }
        function tn(t) {
          var e, n;
          try {
            for (
              var r = (0, i.XA)(t.views.values()), o = r.next();
              !o.done;
              o = r.next()
            ) {
              var s = o.value;
              if (s.getQuery().getQueryParams().loadsAllData()) return s;
            }
          } catch (t) {
            e = { error: t };
          } finally {
            try {
              o && !o.done && (n = r.return) && n.call(r);
            } finally {
              if (e) throw e.error;
            }
          }
          return null;
        }
        var en = (function () {
          function t(t) {
            this.writeTree_ = t;
          }
          return (
            (t.empty = function () {
              return new t(new ae(null));
            }),
            t
          );
        })();
        function nn(t, e, n) {
          if (Y(e)) return new en(new ae(n));
          var r = t.writeTree_.findRootMostValueAndPath(e);
          if (null != r) {
            var i = r.path,
              o = r.value,
              s = X(i, e);
            return (o = o.updateChild(s, n)), new en(t.writeTree_.set(i, o));
          }
          var a = new ae(n),
            u = t.writeTree_.setTree(e, a);
          return new en(u);
        }
        function rn(t, e, n) {
          var r = t;
          return (
            R(n, function (t, n) {
              r = nn(r, Q(e, t), n);
            }),
            r
          );
        }
        function on(t, e) {
          if (Y(e)) return en.empty();
          var n = t.writeTree_.setTree(e, new ae(null));
          return new en(n);
        }
        function sn(t, e) {
          return null != an(t, e);
        }
        function an(t, e) {
          var n = t.writeTree_.findRootMostValueAndPath(e);
          return null != n
            ? t.writeTree_.get(n.path).getChild(X(n.path, e))
            : null;
        }
        function un(t) {
          var e = [],
            n = t.writeTree_.value;
          return (
            null != n
              ? n.isLeafNode() ||
                n.forEachChild(Wt, function (t, n) {
                  e.push(new Bt(t, n));
                })
              : t.writeTree_.children.inorderTraversal(function (t, n) {
                  null != n.value && e.push(new Bt(t, n.value));
                }),
            e
          );
        }
        function cn(t, e) {
          if (Y(e)) return t;
          var n = an(t, e);
          return new en(null != n ? new ae(n) : t.writeTree_.subtree(e));
        }
        function hn(t) {
          return t.writeTree_.isEmpty();
        }
        function ln(t, e) {
          return fn(q(), t.writeTree_, e);
        }
        function fn(t, e, n) {
          if (null != e.value) return n.updateChild(t, e.value);
          var r = null;
          return (
            e.children.inorderTraversal(function (e, i) {
              ".priority" === e
                ? ((0, o.hu)(
                    null !== i.value,
                    "Priority writes must always be leaf nodes"
                  ),
                  (r = i.value))
                : (n = fn(Q(t, e), i, n));
            }),
            n.getChild(t).isEmpty() ||
              null === r ||
              (n = n.updateChild(Q(t, ".priority"), r)),
            n
          );
        }
        var pn = (function () {
            function t() {
              (this.visibleWrites_ = en.empty()),
                (this.allWrites_ = []),
                (this.lastWriteId_ = -1);
            }
            return (
              (t.prototype.childWrites = function (t) {
                return new dn(t, this);
              }),
              (t.prototype.addOverwrite = function (t, e, n, r) {
                (0, o.hu)(
                  n > this.lastWriteId_,
                  "Stacking an older write on top of newer ones"
                ),
                  void 0 === r && (r = !0),
                  this.allWrites_.push({
                    path: t,
                    snap: e,
                    writeId: n,
                    visible: r,
                  }),
                  r && (this.visibleWrites_ = nn(this.visibleWrites_, t, e)),
                  (this.lastWriteId_ = n);
              }),
              (t.prototype.addMerge = function (t, e, n) {
                (0, o.hu)(
                  n > this.lastWriteId_,
                  "Stacking an older merge on top of newer ones"
                ),
                  this.allWrites_.push({
                    path: t,
                    children: e,
                    writeId: n,
                    visible: !0,
                  }),
                  (this.visibleWrites_ = rn(this.visibleWrites_, t, e)),
                  (this.lastWriteId_ = n);
              }),
              (t.prototype.getWrite = function (t) {
                for (var e = 0; e < this.allWrites_.length; e++) {
                  var n = this.allWrites_[e];
                  if (n.writeId === t) return n;
                }
                return null;
              }),
              (t.prototype.removeWrite = function (t) {
                var e = this,
                  n = this.allWrites_.findIndex(function (e) {
                    return e.writeId === t;
                  });
                (0, o.hu)(
                  n >= 0,
                  "removeWrite called with nonexistent writeId."
                );
                var r = this.allWrites_[n];
                this.allWrites_.splice(n, 1);
                for (
                  var i = r.visible, s = !1, a = this.allWrites_.length - 1;
                  i && a >= 0;

                ) {
                  var u = this.allWrites_[a];
                  u.visible &&
                    (a >= n && this.recordContainsPath_(u, r.path)
                      ? (i = !1)
                      : tt(r.path, u.path) && (s = !0)),
                    a--;
                }
                return (
                  !!i &&
                  (s
                    ? (this.resetTree_(), !0)
                    : (r.snap
                        ? (this.visibleWrites_ = on(
                            this.visibleWrites_,
                            r.path
                          ))
                        : R(r.children, function (t) {
                            e.visibleWrites_ = on(
                              e.visibleWrites_,
                              Q(r.path, t)
                            );
                          }),
                      !0))
                );
              }),
              (t.prototype.getCompleteWriteData = function (t) {
                return an(this.visibleWrites_, t);
              }),
              (t.prototype.calcCompleteEventCache = function (e, n, r, i) {
                if (r || i) {
                  var o = cn(this.visibleWrites_, e);
                  return !i && hn(o)
                    ? n
                    : i || null != n || sn(o, q())
                    ? ln(
                        t.layerTree_(
                          this.allWrites_,
                          function (t) {
                            return (
                              (t.visible || i) &&
                              (!r || !~r.indexOf(t.writeId)) &&
                              (tt(t.path, e) || tt(e, t.path))
                            );
                          },
                          e
                        ),
                        n || ee.EMPTY_NODE
                      )
                    : null;
                }
                var s = an(this.visibleWrites_, e);
                if (null != s) return s;
                var a = cn(this.visibleWrites_, e);
                return hn(a)
                  ? n
                  : null != n || sn(a, q())
                  ? ln(a, n || ee.EMPTY_NODE)
                  : null;
              }),
              (t.prototype.calcCompleteEventChildren = function (t, e) {
                var n = ee.EMPTY_NODE,
                  r = an(this.visibleWrites_, t);
                if (r)
                  return (
                    r.isLeafNode() ||
                      r.forEachChild(Wt, function (t, e) {
                        n = n.updateImmediateChild(t, e);
                      }),
                    n
                  );
                if (e) {
                  var i = cn(this.visibleWrites_, t);
                  return (
                    e.forEachChild(Wt, function (t, e) {
                      var r = ln(cn(i, new V(t)), e);
                      n = n.updateImmediateChild(t, r);
                    }),
                    un(i).forEach(function (t) {
                      n = n.updateImmediateChild(t.name, t.node);
                    }),
                    n
                  );
                }
                return (
                  un(cn(this.visibleWrites_, t)).forEach(function (t) {
                    n = n.updateImmediateChild(t.name, t.node);
                  }),
                  n
                );
              }),
              (t.prototype.calcEventCacheAfterServerOverwrite = function (
                t,
                e,
                n,
                r
              ) {
                (0, o.hu)(
                  n || r,
                  "Either existingEventSnap or existingServerSnap must exist"
                );
                var i = Q(t, e);
                if (sn(this.visibleWrites_, i)) return null;
                var s = cn(this.visibleWrites_, i);
                return hn(s) ? r.getChild(e) : ln(s, r.getChild(e));
              }),
              (t.prototype.calcCompleteChild = function (t, e, n) {
                var r = Q(t, e),
                  i = an(this.visibleWrites_, r);
                return null != i
                  ? i
                  : n.isCompleteForChild(e)
                  ? ln(
                      cn(this.visibleWrites_, r),
                      n.getNode().getImmediateChild(e)
                    )
                  : null;
              }),
              (t.prototype.shadowingWrite = function (t) {
                return an(this.visibleWrites_, t);
              }),
              (t.prototype.calcIndexedSlice = function (t, e, n, r, i, o) {
                var s,
                  a = cn(this.visibleWrites_, t),
                  u = an(a, q());
                if (null != u) s = u;
                else {
                  if (null == e) return [];
                  s = ln(a, e);
                }
                if ((s = s.withIndex(o)).isEmpty() || s.isLeafNode()) return [];
                for (
                  var c = [],
                    h = o.getCompare(),
                    l = i
                      ? s.getReverseIteratorFrom(n, o)
                      : s.getIteratorFrom(n, o),
                    f = l.getNext();
                  f && c.length < r;

                )
                  0 !== h(f, n) && c.push(f), (f = l.getNext());
                return c;
              }),
              (t.prototype.recordContainsPath_ = function (t, e) {
                if (t.snap) return tt(t.path, e);
                for (var n in t.children)
                  if (t.children.hasOwnProperty(n) && tt(Q(t.path, n), e))
                    return !0;
                return !1;
              }),
              (t.prototype.resetTree_ = function () {
                (this.visibleWrites_ = t.layerTree_(
                  this.allWrites_,
                  t.DefaultFilter_,
                  q()
                )),
                  this.allWrites_.length > 0
                    ? (this.lastWriteId_ =
                        this.allWrites_[this.allWrites_.length - 1].writeId)
                    : (this.lastWriteId_ = -1);
              }),
              (t.DefaultFilter_ = function (t) {
                return t.visible;
              }),
              (t.layerTree_ = function (t, e, n) {
                for (var r = en.empty(), i = 0; i < t.length; ++i) {
                  var s = t[i];
                  if (e(s)) {
                    var a = s.path,
                      u = void 0;
                    if (s.snap)
                      tt(n, a)
                        ? (r = nn(r, (u = X(n, a)), s.snap))
                        : tt(a, n) &&
                          ((u = X(a, n)), (r = nn(r, q(), s.snap.getChild(u))));
                    else {
                      if (!s.children)
                        throw (0, o.g5)(
                          "WriteRecord should have .snap or .children"
                        );
                      if (tt(n, a)) r = rn(r, (u = X(n, a)), s.children);
                      else if (tt(a, n))
                        if (Y((u = X(a, n)))) r = rn(r, q(), s.children);
                        else {
                          var c = (0, o.DV)(s.children, B(u));
                          if (c) {
                            var h = c.getChild(W(u));
                            r = nn(r, q(), h);
                          }
                        }
                    }
                  }
                }
                return r;
              }),
              t
            );
          })(),
          dn = (function () {
            function t(t, e) {
              (this.treePath_ = t), (this.writeTree_ = e);
            }
            return (
              (t.prototype.calcCompleteEventCache = function (t, e, n) {
                return this.writeTree_.calcCompleteEventCache(
                  this.treePath_,
                  t,
                  e,
                  n
                );
              }),
              (t.prototype.calcCompleteEventChildren = function (t) {
                return this.writeTree_.calcCompleteEventChildren(
                  this.treePath_,
                  t
                );
              }),
              (t.prototype.calcEventCacheAfterServerOverwrite = function (
                t,
                e,
                n
              ) {
                return this.writeTree_.calcEventCacheAfterServerOverwrite(
                  this.treePath_,
                  t,
                  e,
                  n
                );
              }),
              (t.prototype.shadowingWrite = function (t) {
                return this.writeTree_.shadowingWrite(Q(this.treePath_, t));
              }),
              (t.prototype.calcIndexedSlice = function (t, e, n, r, i) {
                return this.writeTree_.calcIndexedSlice(
                  this.treePath_,
                  t,
                  e,
                  n,
                  r,
                  i
                );
              }),
              (t.prototype.calcCompleteChild = function (t, e) {
                return this.writeTree_.calcCompleteChild(this.treePath_, t, e);
              }),
              (t.prototype.child = function (e) {
                return new t(Q(this.treePath_, e), this.writeTree_);
              }),
              t
            );
          })(),
          vn = 1,
          gn = function (t) {
            (this.listenProvider_ = t),
              (this.syncPointTree_ = new ae(null)),
              (this.pendingWriteTree_ = new pn()),
              (this.tagToQueryMap = new Map()),
              (this.queryToTagMap = new Map());
          };
        function mn(t, e, n, r, i) {
          return (
            t.pendingWriteTree_.addOverwrite(e, n, r, i),
            i
              ? En(
                  t,
                  new ce(
                    { fromUser: !0, fromServer: !1, queryId: null, tagged: !1 },
                    e,
                    n
                  )
                )
              : []
          );
        }
        function yn(t, e, n) {
          void 0 === n && (n = !1);
          var r = t.pendingWriteTree_.getWrite(e);
          if (t.pendingWriteTree_.removeWrite(e)) {
            var i = new ae(null);
            return (
              null != r.snap
                ? (i = i.set(q(), !0))
                : R(r.children, function (t) {
                    i = i.set(new V(t), !0);
                  }),
              En(t, new se(r.path, i, n))
            );
          }
          return [];
        }
        function bn(t, e, n) {
          return En(
            t,
            new ce(
              { fromUser: !1, fromServer: !0, queryId: null, tagged: !1 },
              e,
              n
            )
          );
        }
        function wn(t, e, n, r) {
          var s = e.path,
            a = t.syncPointTree_.get(s),
            u = [];
          if (a && ("default" === e.queryIdentifier() || Ze(a, e))) {
            var c = (function (t, e, n, r) {
              var s,
                a,
                u = e.queryIdentifier(),
                c = [],
                h = [],
                l = $e(t);
              if ("default" === u)
                try {
                  for (
                    var f = (0, i.XA)(t.views.entries()), p = f.next();
                    !p.done;
                    p = f.next()
                  ) {
                    var d = (0, i.CR)(p.value, 2),
                      v = d[0],
                      g = d[1];
                    (h = h.concat(g.removeEventRegistration(n, r))),
                      g.isEmpty() &&
                        (t.views.delete(v),
                        g.getQuery().getQueryParams().loadsAllData() ||
                          c.push(g.getQuery()));
                  }
                } catch (t) {
                  s = { error: t };
                } finally {
                  try {
                    p && !p.done && (a = f.return) && a.call(f);
                  } finally {
                    if (s) throw s.error;
                  }
                }
              else
                (g = t.views.get(u)) &&
                  ((h = h.concat(g.removeEventRegistration(n, r))),
                  g.isEmpty() &&
                    (t.views.delete(u),
                    g.getQuery().getQueryParams().loadsAllData() ||
                      c.push(g.getQuery())));
              return (
                l &&
                  !$e(t) &&
                  c.push(
                    new ((0, o.hu)(We, "Reference.ts has not been loaded"), We)(
                      e.repo,
                      e.path
                    )
                  ),
                { removed: c, events: h }
              );
            })(a, e, n, r);
            0 === a.views.size &&
              (t.syncPointTree_ = t.syncPointTree_.remove(s));
            var h = c.removed;
            u = c.events;
            var l =
                -1 !==
                h.findIndex(function (t) {
                  return t.getQueryParams().loadsAllData();
                }),
              f = t.syncPointTree_.findOnPath(s, function (t, e) {
                return $e(e);
              });
            if (l && !f) {
              var p = t.syncPointTree_.subtree(s);
              if (!p.isEmpty())
                for (
                  var d = (function (t) {
                      return t.fold(function (t, e, n) {
                        if (e && $e(e)) return [tn(e)];
                        var r = [];
                        return (
                          e && (r = Qe(e)),
                          R(n, function (t, e) {
                            r = r.concat(e);
                          }),
                          r
                        );
                      });
                    })(p),
                    v = 0;
                  v < d.length;
                  ++v
                ) {
                  var g = d[v],
                    m = g.getQuery(),
                    y = Cn(t, g);
                  t.listenProvider_.startListening(
                    xn(m),
                    kn(t, m),
                    y.hashFn,
                    y.onComplete
                  );
                }
            }
            !f &&
              h.length > 0 &&
              !r &&
              (l
                ? t.listenProvider_.stopListening(xn(e), null)
                : h.forEach(function (e) {
                    var n = t.queryToTagMap.get(Nn(e));
                    t.listenProvider_.stopListening(xn(e), n);
                  })),
              (function (t, e) {
                for (var n = 0; n < e.length; ++n) {
                  var r = e[n];
                  if (!r.getQueryParams().loadsAllData()) {
                    var i = Nn(r),
                      o = t.queryToTagMap.get(i);
                    t.queryToTagMap.delete(i), t.tagToQueryMap.delete(o);
                  }
                }
              })(t, h);
          }
          return u;
        }
        function _n(t, e, n) {
          var r = e.path,
            i = null,
            s = !1;
          t.syncPointTree_.foreachOnPath(r, function (t, e) {
            var n = X(t, r);
            (i = i || Ye(e, n)), (s = s || $e(e));
          });
          var a,
            u = t.syncPointTree_.get(r);
          u
            ? ((s = s || $e(u)), (i = i || Ye(u, q())))
            : ((u = new He()), (t.syncPointTree_ = t.syncPointTree_.set(r, u))),
            null != i
              ? (a = !0)
              : ((a = !1),
                (i = ee.EMPTY_NODE),
                t.syncPointTree_.subtree(r).foreachChild(function (t, e) {
                  var n = Ye(e, q());
                  n && (i = i.updateImmediateChild(t, n));
                }));
          var c = Ze(u, e);
          if (!c && !e.getQueryParams().loadsAllData()) {
            var h = Nn(e);
            (0, o.hu)(
              !t.queryToTagMap.has(h),
              "View does not exist, but we have a tag"
            );
            var l = vn++;
            t.queryToTagMap.set(h, l), t.tagToQueryMap.set(l, h);
          }
          var f = (function (t, e, n, r, i, o) {
            var s = Je(t, e, r, i, o);
            return (
              t.views.has(e.queryIdentifier()) ||
                t.views.set(e.queryIdentifier(), s),
              s.addEventRegistration(n),
              s.getInitialEvents(n)
            );
          })(u, e, n, t.pendingWriteTree_.childWrites(r), i, a);
          if (!c && !s) {
            var p = Xe(u, e);
            f = f.concat(
              (function (t, e, n) {
                var r = e.path,
                  i = kn(t, e),
                  s = Cn(t, n),
                  a = t.listenProvider_.startListening(
                    xn(e),
                    i,
                    s.hashFn,
                    s.onComplete
                  ),
                  u = t.syncPointTree_.subtree(r);
                if (i)
                  (0, o.hu)(
                    !$e(u.value),
                    "If we're adding a query, it shouldn't be shadowed"
                  );
                else
                  for (
                    var c = u.fold(function (t, e, n) {
                        if (!Y(t) && e && $e(e)) return [tn(e).getQuery()];
                        var r = [];
                        return (
                          e &&
                            (r = r.concat(
                              Qe(e).map(function (t) {
                                return t.getQuery();
                              })
                            )),
                          R(n, function (t, e) {
                            r = r.concat(e);
                          }),
                          r
                        );
                      }),
                      h = 0;
                    h < c.length;
                    ++h
                  ) {
                    var l = c[h];
                    t.listenProvider_.stopListening(xn(l), kn(t, l));
                  }
                return a;
              })(t, e, p)
            );
          }
          return f;
        }
        function In(t, e, n) {
          var r = t.pendingWriteTree_,
            i = t.syncPointTree_.findOnPath(e, function (t, n) {
              var r = Ye(n, X(t, e));
              if (r) return r;
            });
          return r.calcCompleteEventCache(e, i, n, !0);
        }
        function En(t, e) {
          return Tn(
            e,
            t.syncPointTree_,
            null,
            t.pendingWriteTree_.childWrites(q())
          );
        }
        function Tn(t, e, n, r) {
          if (Y(t.path)) return Sn(t, e, n, r);
          var i = e.get(q());
          null == n && null != i && (n = Ye(i, q()));
          var o = [],
            s = B(t.path),
            a = t.operationForChild(s),
            u = e.children.get(s);
          if (u && a) {
            var c = n ? n.getImmediateChild(s) : null,
              h = r.child(s);
            o = o.concat(Tn(a, u, c, h));
          }
          return i && (o = o.concat(Ke(i, t, r, n))), o;
        }
        function Sn(t, e, n, r) {
          var i = e.get(q());
          null == n && null != i && (n = Ye(i, q()));
          var o = [];
          return (
            e.children.inorderTraversal(function (e, i) {
              var s = n ? n.getImmediateChild(e) : null,
                a = r.child(e),
                u = t.operationForChild(e);
              u && (o = o.concat(Sn(u, i, s, a)));
            }),
            i && (o = o.concat(Ke(i, t, r, n))),
            o
          );
        }
        function Cn(t, e) {
          var n = e.getQuery(),
            r = kn(t, n);
          return {
            hashFn: function () {
              return (e.getServerCache() || ee.EMPTY_NODE).hash();
            },
            onComplete: function (e) {
              if ("ok" === e)
                return r
                  ? (function (t, e, n) {
                      var r = An(t, n);
                      if (r) {
                        var i = Pn(r),
                          o = i.path,
                          s = i.queryId,
                          a = X(o, e);
                        return Dn(t, o, new ue(ie(s), a));
                      }
                      return [];
                    })(t, n.path, r)
                  : (function (t, e) {
                      return En(
                        t,
                        new ue(
                          {
                            fromUser: !1,
                            fromServer: !0,
                            queryId: null,
                            tagged: !1,
                          },
                          e
                        )
                      );
                    })(t, n.path);
              var i = (function (t, e) {
                var n = "Unknown Error";
                "too_big" === t
                  ? (n =
                      "The data requested exceeds the maximum size that can be accessed with a single request.")
                  : "permission_denied" === t
                  ? (n =
                      "Client doesn't have permission to access the desired data.")
                  : "unavailable" === t && (n = "The service is unavailable");
                var r = new Error(t + " at " + e.path.toString() + ": " + n);
                return (r.code = t.toUpperCase()), r;
              })(e, n);
              return wn(t, n, null, i);
            },
          };
        }
        function kn(t, e) {
          var n = Nn(e);
          return t.queryToTagMap.get(n);
        }
        function Nn(t) {
          return t.path.toString() + "$" + t.queryIdentifier();
        }
        function An(t, e) {
          return t.tagToQueryMap.get(e);
        }
        function Pn(t) {
          var e = t.indexOf("$");
          return (
            (0, o.hu)(-1 !== e && e < t.length - 1, "Bad queryKey."),
            { queryId: t.substr(e + 1), path: new V(t.substr(0, e)) }
          );
        }
        function Dn(t, e, n) {
          var r = t.syncPointTree_.get(e);
          return (
            (0, o.hu)(
              r,
              "Missing sync point for query tag that we're tracking"
            ),
            Ke(r, n, t.pendingWriteTree_.childWrites(e), null)
          );
        }
        function xn(t) {
          return t.getQueryParams().loadsAllData() &&
            !t.getQueryParams().isDefault()
            ? t.getRef()
            : t;
        }
        var On = (function () {
            function t(t) {
              this.node_ = t;
            }
            return (
              (t.prototype.getImmediateChild = function (e) {
                return new t(this.node_.getImmediateChild(e));
              }),
              (t.prototype.node = function () {
                return this.node_;
              }),
              t
            );
          })(),
          Rn = (function () {
            function t(t, e) {
              (this.syncTree_ = t), (this.path_ = e);
            }
            return (
              (t.prototype.getImmediateChild = function (e) {
                var n = Q(this.path_, e);
                return new t(this.syncTree_, n);
              }),
              (t.prototype.node = function () {
                return In(this.syncTree_, this.path_);
              }),
              t
            );
          })(),
          Mn = function (t, e, n) {
            return t && "object" == typeof t
              ? ((0, o.hu)(
                  ".sv" in t,
                  "Unexpected leaf node or priority contents"
                ),
                "string" == typeof t[".sv"]
                  ? Ln(t[".sv"], e, n)
                  : "object" == typeof t[".sv"]
                  ? jn(t[".sv"], e)
                  : void (0, o.hu)(
                      !1,
                      "Unexpected server value: " + JSON.stringify(t, null, 2)
                    ))
              : t;
          },
          Ln = function (t, e, n) {
            switch (t) {
              case "timestamp":
                return n.timestamp;
              default:
                (0, o.hu)(!1, "Unexpected server value: " + t);
            }
          },
          jn = function (t, e, n) {
            t.hasOwnProperty("increment") ||
              (0, o.hu)(
                !1,
                "Unexpected server value: " + JSON.stringify(t, null, 2)
              );
            var r = t.increment;
            "number" != typeof r &&
              (0, o.hu)(!1, "Unexpected increment value: " + r);
            var i = e.node();
            if (
              ((0, o.hu)(
                null != i,
                "Expected ChildrenNode.EMPTY_NODE for nulls"
              ),
              !i.isLeafNode())
            )
              return r;
            var s = i.getValue();
            return "number" != typeof s ? r : s + r;
          },
          Fn = function (t, e, n, r) {
            return Vn(e, new Rn(n, t), r);
          },
          Un = function (t, e, n) {
            return Vn(t, new On(e), n);
          };
        function Vn(t, e, n) {
          var r,
            i = t.getPriority().val(),
            o = Mn(i, e.getImmediateChild(".priority"), n);
          if (t.isLeafNode()) {
            var s = t,
              a = Mn(s.getValue(), e, n);
            return a !== s.getValue() || o !== s.getPriority().val()
              ? new jt(a, re(o))
              : t;
          }
          var u = t;
          return (
            (r = u),
            o !== u.getPriority().val() && (r = r.updatePriority(new jt(o))),
            u.forEachChild(Wt, function (t, i) {
              var o = Vn(i, e.getImmediateChild(t), n);
              o !== i && (r = r.updateImmediateChild(t, o));
            }),
            r
          );
        }
        function qn() {
          return { value: null, children: new Map() };
        }
        function Bn(t, e, n) {
          if (Y(e)) (t.value = n), t.children.clear();
          else if (null !== t.value) t.value = t.value.updateChild(e, n);
          else {
            var r = B(e);
            t.children.has(r) || t.children.set(r, qn()),
              Bn(t.children.get(r), (e = W(e)), n);
          }
        }
        function Gn(t, e) {
          if (Y(e)) return (t.value = null), t.children.clear(), !0;
          if (null !== t.value) {
            if (t.value.isLeafNode()) return !1;
            var n = t.value;
            return (
              (t.value = null),
              n.forEachChild(Wt, function (e, n) {
                Bn(t, new V(e), n);
              }),
              Gn(t, e)
            );
          }
          if (t.children.size > 0) {
            var r = B(e);
            return (
              (e = W(e)),
              t.children.has(r) &&
                Gn(t.children.get(r), e) &&
                t.children.delete(r),
              0 === t.children.size
            );
          }
          return !0;
        }
        function Wn(t, e, n) {
          null !== t.value
            ? n(e, t.value)
            : (function (t, e) {
                t.children.forEach(function (t, n) {
                  e(n, t);
                });
              })(t, function (t, r) {
                Wn(r, new V(e.toString() + "/" + t), n);
              });
        }
        var zn = (function () {
            function t() {
              this.rootNode_ = ee.EMPTY_NODE;
            }
            return (
              (t.prototype.getNode = function (t) {
                return this.rootNode_.getChild(t);
              }),
              (t.prototype.updateSnapshot = function (t, e) {
                this.rootNode_ = this.rootNode_.updateChild(t, e);
              }),
              t
            );
          })(),
          Hn = (function () {
            function t() {
              this.counters_ = {};
            }
            return (
              (t.prototype.incrementCounter = function (t, e) {
                void 0 === e && (e = 1),
                  (0, o.r3)(this.counters_, t) || (this.counters_[t] = 0),
                  (this.counters_[t] += e);
              }),
              (t.prototype.get = function () {
                return (0, o.p$)(this.counters_);
              }),
              t
            );
          })(),
          Kn = {},
          Jn = {};
        function Qn(t) {
          var e = t.toString();
          return Kn[e] || (Kn[e] = new Hn()), Kn[e];
        }
        var Yn = (function () {
            function t(t) {
              (this.collection_ = t), (this.last_ = null);
            }
            return (
              (t.prototype.get = function () {
                var t = this.collection_.get(),
                  e = (0, i.pi)({}, t);
                return (
                  this.last_ &&
                    R(this.last_, function (t, n) {
                      e[t] = e[t] - n;
                    }),
                  (this.last_ = t),
                  e
                );
              }),
              t
            );
          })(),
          Xn = (function () {
            function t(t, e) {
              (this.server_ = e),
                (this.statsToReport_ = {}),
                (this.statsListener_ = new Yn(t));
              var n = 1e4 + 2e4 * Math.random();
              U(this.reportStats_.bind(this), Math.floor(n));
            }
            return (
              (t.prototype.reportStats_ = function () {
                var t = this,
                  e = this.statsListener_.get(),
                  n = {},
                  r = !1;
                R(e, function (e, i) {
                  i > 0 &&
                    (0, o.r3)(t.statsToReport_, e) &&
                    ((n[e] = i), (r = !0));
                }),
                  r && this.server_.reportStats(n),
                  U(
                    this.reportStats_.bind(this),
                    Math.floor(2 * Math.random() * 3e5)
                  );
              }),
              t
            );
          })(),
          Zn = function () {
            (this.eventLists_ = []), (this.recursionDepth_ = 0);
          };
        function $n(t, e) {
          for (var n = null, r = 0; r < e.length; r++) {
            var i = e[r],
              o = i.getPath();
            null === n || $(o, n.path) || (t.eventLists_.push(n), (n = null)),
              null === n && (n = { events: [], path: o }),
              n.events.push(i);
          }
          n && t.eventLists_.push(n);
        }
        function tr(t, e, n) {
          $n(t, n),
            nr(t, function (t) {
              return $(t, e);
            });
        }
        function er(t, e, n) {
          $n(t, n),
            nr(t, function (t) {
              return tt(t, e) || tt(e, t);
            });
        }
        function nr(t, e) {
          t.recursionDepth_++;
          for (var n = !0, r = 0; r < t.eventLists_.length; r++) {
            var i = t.eventLists_[r];
            i &&
              (e(i.path)
                ? (rr(t.eventLists_[r]), (t.eventLists_[r] = null))
                : (n = !1));
          }
          n && (t.eventLists_ = []), t.recursionDepth_--;
        }
        function rr(t) {
          for (var e = 0; e < t.events.length; e++) {
            var n = t.events[e];
            if (null !== n) {
              t.events[e] = null;
              var r = n.getEventRunner();
              y && _("event: " + n.toString()), F(r);
            }
          }
        }
        var ir = (function () {
            function t(t) {
              (this.allowedEvents_ = t),
                (this.listeners_ = {}),
                (0, o.hu)(
                  Array.isArray(t) && t.length > 0,
                  "Requires a non-empty array"
                );
            }
            return (
              (t.prototype.trigger = function (t) {
                for (var e = [], n = 1; n < arguments.length; n++)
                  e[n - 1] = arguments[n];
                if (Array.isArray(this.listeners_[t]))
                  for (
                    var r = (0, i.ev)([], (0, i.CR)(this.listeners_[t])), o = 0;
                    o < r.length;
                    o++
                  )
                    r[o].callback.apply(r[o].context, e);
              }),
              (t.prototype.on = function (t, e, n) {
                this.validateEventType_(t),
                  (this.listeners_[t] = this.listeners_[t] || []),
                  this.listeners_[t].push({ callback: e, context: n });
                var r = this.getInitialEvent(t);
                r && e.apply(n, r);
              }),
              (t.prototype.off = function (t, e, n) {
                this.validateEventType_(t);
                for (var r = this.listeners_[t] || [], i = 0; i < r.length; i++)
                  if (r[i].callback === e && (!n || n === r[i].context))
                    return void r.splice(i, 1);
              }),
              (t.prototype.validateEventType_ = function (t) {
                (0, o.hu)(
                  this.allowedEvents_.find(function (e) {
                    return e === t;
                  }),
                  "Unknown event: " + t
                );
              }),
              t
            );
          })(),
          or = (function (t) {
            function e() {
              var e,
                n,
                r = t.call(this, ["visible"]) || this;
              return (
                "undefined" != typeof document &&
                  void 0 !== document.addEventListener &&
                  (void 0 !== document.hidden
                    ? ((n = "visibilitychange"), (e = "hidden"))
                    : void 0 !== document.mozHidden
                    ? ((n = "mozvisibilitychange"), (e = "mozHidden"))
                    : void 0 !== document.msHidden
                    ? ((n = "msvisibilitychange"), (e = "msHidden"))
                    : void 0 !== document.webkitHidden &&
                      ((n = "webkitvisibilitychange"), (e = "webkitHidden"))),
                (r.visible_ = !0),
                n &&
                  document.addEventListener(
                    n,
                    function () {
                      var t = !document[e];
                      t !== r.visible_ &&
                        ((r.visible_ = t), r.trigger("visible", t));
                    },
                    !1
                  ),
                r
              );
            }
            return (
              (0, i.ZT)(e, t),
              (e.getInstance = function () {
                return new e();
              }),
              (e.prototype.getInitialEvent = function (t) {
                return (
                  (0, o.hu)("visible" === t, "Unknown event type: " + t),
                  [this.visible_]
                );
              }),
              e
            );
          })(ir),
          sr = (function (t) {
            function e() {
              var e = t.call(this, ["online"]) || this;
              return (
                (e.online_ = !0),
                "undefined" == typeof window ||
                  void 0 === window.addEventListener ||
                  (0, o.uI)() ||
                  (window.addEventListener(
                    "online",
                    function () {
                      e.online_ || ((e.online_ = !0), e.trigger("online", !0));
                    },
                    !1
                  ),
                  window.addEventListener(
                    "offline",
                    function () {
                      e.online_ && ((e.online_ = !1), e.trigger("online", !1));
                    },
                    !1
                  )),
                e
              );
            }
            return (
              (0, i.ZT)(e, t),
              (e.getInstance = function () {
                return new e();
              }),
              (e.prototype.getInitialEvent = function (t) {
                return (
                  (0, o.hu)("online" === t, "Unknown event type: " + t),
                  [this.online_]
                );
              }),
              (e.prototype.currentlyOnline = function () {
                return this.online_;
              }),
              e
            );
          })(ir),
          ar = (function () {
            function t(t) {
              (this.onMessage_ = t),
                (this.pendingResponses = []),
                (this.currentResponseNum = 0),
                (this.closeAfterResponse = -1),
                (this.onClose = null);
            }
            return (
              (t.prototype.closeAfter = function (t, e) {
                (this.closeAfterResponse = t),
                  (this.onClose = e),
                  this.closeAfterResponse < this.currentResponseNum &&
                    (this.onClose(), (this.onClose = null));
              }),
              (t.prototype.handleResponse = function (t, e) {
                var n = this;
                this.pendingResponses[t] = e;
                for (
                  var r = function () {
                      var t = i.pendingResponses[i.currentResponseNum];
                      delete i.pendingResponses[i.currentResponseNum];
                      for (
                        var e = function (e) {
                            t[e] &&
                              F(function () {
                                n.onMessage_(t[e]);
                              });
                          },
                          r = 0;
                        r < t.length;
                        ++r
                      )
                        e(r);
                      if (i.currentResponseNum === i.closeAfterResponse)
                        return (
                          i.onClose && (i.onClose(), (i.onClose = null)),
                          "break"
                        );
                      i.currentResponseNum++;
                    },
                    i = this;
                  this.pendingResponses[this.currentResponseNum] &&
                  "break" !== r();

                );
              }),
              t
            );
          })(),
          ur = "start",
          cr = "close",
          hr = (function () {
            function t(t, e, n, r, i) {
              (this.connId = t),
                (this.repoInfo = e),
                (this.applicationId = n),
                (this.transportSessionId = r),
                (this.lastSessionId = i),
                (this.bytesSent = 0),
                (this.bytesReceived = 0),
                (this.everConnected_ = !1),
                (this.log_ = I(t)),
                (this.stats_ = Qn(e)),
                (this.urlFn = function (t) {
                  return ut(e, st, t);
                });
            }
            return (
              (t.prototype.open = function (t, e) {
                var n = this;
                (this.curSegmentNum = 0),
                  (this.onDisconnect_ = e),
                  (this.myPacketOrderer = new ar(t)),
                  (this.isClosed_ = !1),
                  (this.connectTimeoutTimer_ = setTimeout(function () {
                    n.log_("Timed out trying to connect."),
                      n.onClosed_(),
                      (n.connectTimeoutTimer_ = null);
                  }, Math.floor(3e4))),
                  (function (t) {
                    if ((0, o.Yr)() || "complete" === document.readyState) t();
                    else {
                      var e = !1,
                        n = function () {
                          document.body
                            ? e || ((e = !0), t())
                            : setTimeout(n, Math.floor(10));
                        };
                      document.addEventListener
                        ? (document.addEventListener("DOMContentLoaded", n, !1),
                          window.addEventListener("load", n, !1))
                        : document.attachEvent &&
                          (document.attachEvent(
                            "onreadystatechange",
                            function () {
                              "complete" === document.readyState && n();
                            }
                          ),
                          window.attachEvent("onload", n));
                    }
                  })(function () {
                    if (!n.isClosed_) {
                      n.scriptTagHolder = new lr(
                        function () {
                          for (var t = [], e = 0; e < arguments.length; e++)
                            t[e] = arguments[e];
                          var r = (0, i.CR)(t, 5),
                            o = r[0],
                            s = r[1],
                            a = r[2];
                          if (
                            (r[3],
                            r[4],
                            n.incrementIncomingBytes_(t),
                            n.scriptTagHolder)
                          )
                            if (
                              (n.connectTimeoutTimer_ &&
                                (clearTimeout(n.connectTimeoutTimer_),
                                (n.connectTimeoutTimer_ = null)),
                              (n.everConnected_ = !0),
                              o === ur)
                            )
                              (n.id = s), (n.password = a);
                            else {
                              if (o !== cr)
                                throw new Error(
                                  "Unrecognized command received: " + o
                                );
                              s
                                ? ((n.scriptTagHolder.sendNewPolls = !1),
                                  n.myPacketOrderer.closeAfter(s, function () {
                                    n.onClosed_();
                                  }))
                                : n.onClosed_();
                            }
                        },
                        function () {
                          for (var t = [], e = 0; e < arguments.length; e++)
                            t[e] = arguments[e];
                          var r = (0, i.CR)(t, 2),
                            o = r[0],
                            s = r[1];
                          n.incrementIncomingBytes_(t),
                            n.myPacketOrderer.handleResponse(o, s);
                        },
                        function () {
                          n.onClosed_();
                        },
                        n.urlFn
                      );
                      var t = { start: "t" };
                      (t.ser = Math.floor(1e8 * Math.random())),
                        n.scriptTagHolder.uniqueCallbackIdentifier &&
                          (t.cb = n.scriptTagHolder.uniqueCallbackIdentifier),
                        (t.v = "5"),
                        n.transportSessionId && (t.s = n.transportSessionId),
                        n.lastSessionId && (t.ls = n.lastSessionId),
                        n.applicationId && (t.p = n.applicationId),
                        "undefined" != typeof location &&
                          location.hostname &&
                          it.test(location.hostname) &&
                          (t.r = "f");
                      var e = n.urlFn(t);
                      n.log_("Connecting via long-poll to " + e),
                        n.scriptTagHolder.addTag(e, function () {});
                    }
                  });
              }),
              (t.prototype.start = function () {
                this.scriptTagHolder.startLongPoll(this.id, this.password),
                  this.addDisconnectPingFrame(this.id, this.password);
              }),
              (t.forceAllow = function () {
                t.forceAllow_ = !0;
              }),
              (t.forceDisallow = function () {
                t.forceDisallow_ = !0;
              }),
              (t.isAvailable = function () {
                return !(
                  (0, o.Yr)() ||
                  (!t.forceAllow_ &&
                    (t.forceDisallow_ ||
                      "undefined" == typeof document ||
                      null == document.createElement ||
                      ("object" == typeof window &&
                        window.chrome &&
                        window.chrome.extension &&
                        !/^chrome/.test(window.location.href)) ||
                      ("object" == typeof Windows &&
                        "object" == typeof Windows.UI)))
                );
              }),
              (t.prototype.markConnectionHealthy = function () {}),
              (t.prototype.shutdown_ = function () {
                (this.isClosed_ = !0),
                  this.scriptTagHolder &&
                    (this.scriptTagHolder.close(),
                    (this.scriptTagHolder = null)),
                  this.myDisconnFrame &&
                    (document.body.removeChild(this.myDisconnFrame),
                    (this.myDisconnFrame = null)),
                  this.connectTimeoutTimer_ &&
                    (clearTimeout(this.connectTimeoutTimer_),
                    (this.connectTimeoutTimer_ = null));
              }),
              (t.prototype.onClosed_ = function () {
                this.isClosed_ ||
                  (this.log_("Longpoll is closing itself"),
                  this.shutdown_(),
                  this.onDisconnect_ &&
                    (this.onDisconnect_(this.everConnected_),
                    (this.onDisconnect_ = null)));
              }),
              (t.prototype.close = function () {
                this.isClosed_ ||
                  (this.log_("Longpoll is being closed."), this.shutdown_());
              }),
              (t.prototype.send = function (t) {
                var e = (0, o.Pz)(t);
                (this.bytesSent += e.length),
                  this.stats_.incrementCounter("bytes_sent", e.length);
                for (
                  var n = (0, o.h$)(e), r = O(n, 1840), i = 0;
                  i < r.length;
                  i++
                )
                  this.scriptTagHolder.enqueueSegment(
                    this.curSegmentNum,
                    r.length,
                    r[i]
                  ),
                    this.curSegmentNum++;
              }),
              (t.prototype.addDisconnectPingFrame = function (t, e) {
                if (!(0, o.Yr)()) {
                  this.myDisconnFrame = document.createElement("iframe");
                  var n = { dframe: "t" };
                  (n.id = t),
                    (n.pw = e),
                    (this.myDisconnFrame.src = this.urlFn(n)),
                    (this.myDisconnFrame.style.display = "none"),
                    document.body.appendChild(this.myDisconnFrame);
                }
              }),
              (t.prototype.incrementIncomingBytes_ = function (t) {
                var e = (0, o.Pz)(t).length;
                (this.bytesReceived += e),
                  this.stats_.incrementCounter("bytes_received", e);
              }),
              t
            );
          })(),
          lr = (function () {
            function t(e, n, r, i) {
              if (
                ((this.onDisconnect = r),
                (this.urlFn = i),
                (this.outstandingRequests = new Set()),
                (this.pendingSegs = []),
                (this.currentSerial = Math.floor(1e8 * Math.random())),
                (this.sendNewPolls = !0),
                (0, o.Yr)())
              )
                (this.commandCB = e), (this.onMessageCB = n);
              else {
                (this.uniqueCallbackIdentifier = v()),
                  (window["pLPCommand" + this.uniqueCallbackIdentifier] = e),
                  (window["pRTLPCB" + this.uniqueCallbackIdentifier] = n),
                  (this.myIFrame = t.createIFrame_());
                var s = "";
                this.myIFrame.src &&
                  "javascript:" ===
                    this.myIFrame.src.substr(0, "javascript:".length) &&
                  (s =
                    '<script>document.domain="' +
                    document.domain +
                    '";</script>');
                var a = "<html><body>" + s + "</body></html>";
                try {
                  this.myIFrame.doc.open(),
                    this.myIFrame.doc.write(a),
                    this.myIFrame.doc.close();
                } catch (t) {
                  _("frame writing exception"), t.stack && _(t.stack), _(t);
                }
              }
            }
            return (
              (t.createIFrame_ = function () {
                var t = document.createElement("iframe");
                if (((t.style.display = "none"), !document.body))
                  throw "Document body has not initialized. Wait to initialize Firebase until after the document is ready.";
                document.body.appendChild(t);
                try {
                  t.contentWindow.document ||
                    _("No IE domain setting required");
                } catch (n) {
                  var e = document.domain;
                  t.src =
                    "javascript:void((function(){document.open();document.domain='" +
                    e +
                    "';document.close();})())";
                }
                return (
                  t.contentDocument
                    ? (t.doc = t.contentDocument)
                    : t.contentWindow
                    ? (t.doc = t.contentWindow.document)
                    : t.document && (t.doc = t.document),
                  t
                );
              }),
              (t.prototype.close = function () {
                var t = this;
                (this.alive = !1),
                  this.myIFrame &&
                    ((this.myIFrame.doc.body.innerHTML = ""),
                    setTimeout(function () {
                      null !== t.myIFrame &&
                        (document.body.removeChild(t.myIFrame),
                        (t.myIFrame = null));
                    }, Math.floor(0)));
                var e = this.onDisconnect;
                e && ((this.onDisconnect = null), e());
              }),
              (t.prototype.startLongPoll = function (t, e) {
                for (
                  this.myID = t, this.myPW = e, this.alive = !0;
                  this.newRequest_();

                );
              }),
              (t.prototype.newRequest_ = function () {
                if (
                  this.alive &&
                  this.sendNewPolls &&
                  this.outstandingRequests.size <
                    (this.pendingSegs.length > 0 ? 2 : 1)
                ) {
                  this.currentSerial++;
                  var t = {};
                  (t.id = this.myID),
                    (t.pw = this.myPW),
                    (t.ser = this.currentSerial);
                  for (
                    var e = this.urlFn(t), n = "", r = 0;
                    this.pendingSegs.length > 0 &&
                    this.pendingSegs[0].d.length + 30 + n.length <= 1870;

                  ) {
                    var i = this.pendingSegs.shift();
                    (n =
                      n +
                      "&seg" +
                      r +
                      "=" +
                      i.seg +
                      "&ts" +
                      r +
                      "=" +
                      i.ts +
                      "&d" +
                      r +
                      "=" +
                      i.d),
                      r++;
                  }
                  return (
                    (e += n), this.addLongPollTag_(e, this.currentSerial), !0
                  );
                }
                return !1;
              }),
              (t.prototype.enqueueSegment = function (t, e, n) {
                this.pendingSegs.push({ seg: t, ts: e, d: n }),
                  this.alive && this.newRequest_();
              }),
              (t.prototype.addLongPollTag_ = function (t, e) {
                var n = this;
                this.outstandingRequests.add(e);
                var r = function () {
                    n.outstandingRequests.delete(e), n.newRequest_();
                  },
                  i = setTimeout(r, Math.floor(25e3));
                this.addTag(t, function () {
                  clearTimeout(i), r();
                });
              }),
              (t.prototype.addTag = function (t, e) {
                var n = this;
                (0, o.Yr)()
                  ? this.doNodeLongPoll(t, e)
                  : setTimeout(function () {
                      try {
                        if (!n.sendNewPolls) return;
                        var r = n.myIFrame.doc.createElement("script");
                        (r.type = "text/javascript"),
                          (r.async = !0),
                          (r.src = t),
                          (r.onload = r.onreadystatechange =
                            function () {
                              var t = r.readyState;
                              (t && "loaded" !== t && "complete" !== t) ||
                                ((r.onload = r.onreadystatechange = null),
                                r.parentNode && r.parentNode.removeChild(r),
                                e());
                            }),
                          (r.onerror = function () {
                            _("Long-poll script failed to load: " + t),
                              (n.sendNewPolls = !1),
                              n.close();
                          }),
                          n.myIFrame.doc.body.appendChild(r);
                      } catch (t) {}
                    }, Math.floor(1));
              }),
              t
            );
          })(),
          fr = "";
        function pr(t) {
          fr = t;
        }
        var dr = null;
        "undefined" != typeof MozWebSocket
          ? (dr = MozWebSocket)
          : "undefined" != typeof WebSocket && (dr = WebSocket);
        var vr = (function () {
            function t(e, n, r, i, o) {
              (this.connId = e),
                (this.applicationId = r),
                (this.keepaliveTimer = null),
                (this.frames = null),
                (this.totalFrames = 0),
                (this.bytesSent = 0),
                (this.bytesReceived = 0),
                (this.log_ = I(this.connId)),
                (this.stats_ = Qn(n)),
                (this.connURL = t.connectionURL_(n, i, o)),
                (this.nodeAdmin = n.nodeAdmin);
            }
            return (
              (t.connectionURL_ = function (t, e, n) {
                var r = { v: "5" };
                return (
                  !(0, o.Yr)() &&
                    "undefined" != typeof location &&
                    location.hostname &&
                    it.test(location.hostname) &&
                    (r.r = "f"),
                  e && (r.s = e),
                  n && (r.ls = n),
                  ut(t, ot, r)
                );
              }),
              (t.prototype.open = function (t, e) {
                var n = this;
                (this.onDisconnect = e),
                  (this.onMessage = t),
                  this.log_("Websocket connecting to " + this.connURL),
                  (this.everConnected_ = !1),
                  f.set("previous_websocket_failure", !0);
                try {
                  if ((0, o.Yr)()) {
                    var r = this.nodeAdmin ? "AdminNode" : "Node",
                      i = {
                        headers: {
                          "User-Agent":
                            "Firebase/5/" +
                            fr +
                            "/" +
                            process.platform +
                            "/" +
                            r,
                          "X-Firebase-GMPID": this.applicationId || "",
                        },
                      },
                      s = process.env,
                      a =
                        0 === this.connURL.indexOf("wss://")
                          ? s.HTTPS_PROXY || s.https_proxy
                          : s.HTTP_PROXY || s.http_proxy;
                    a && (i.proxy = { origin: a }),
                      (this.mySock = new dr(this.connURL, [], i));
                  } else
                    (i = {
                      headers: { "X-Firebase-GMPID": this.applicationId || "" },
                    }),
                      (this.mySock = new dr(this.connURL, [], i));
                } catch (t) {
                  this.log_("Error instantiating WebSocket.");
                  var u = t.message || t.data;
                  return u && this.log_(u), void this.onClosed_();
                }
                (this.mySock.onopen = function () {
                  n.log_("Websocket connected."), (n.everConnected_ = !0);
                }),
                  (this.mySock.onclose = function () {
                    n.log_("Websocket connection was disconnected."),
                      (n.mySock = null),
                      n.onClosed_();
                  }),
                  (this.mySock.onmessage = function (t) {
                    n.handleIncomingFrame(t);
                  }),
                  (this.mySock.onerror = function (t) {
                    n.log_("WebSocket error.  Closing connection.");
                    var e = t.message || t.data;
                    e && n.log_(e), n.onClosed_();
                  });
              }),
              (t.prototype.start = function () {}),
              (t.forceDisallow = function () {
                t.forceDisallow_ = !0;
              }),
              (t.isAvailable = function () {
                var e = !1;
                if ("undefined" != typeof navigator && navigator.userAgent) {
                  var n = navigator.userAgent.match(
                    /Android ([0-9]{0,}\.[0-9]{0,})/
                  );
                  n && n.length > 1 && parseFloat(n[1]) < 4.4 && (e = !0);
                }
                return !e && null !== dr && !t.forceDisallow_;
              }),
              (t.previouslyFailed = function () {
                return (
                  f.isInMemoryStorage ||
                  !0 === f.get("previous_websocket_failure")
                );
              }),
              (t.prototype.markConnectionHealthy = function () {
                f.remove("previous_websocket_failure");
              }),
              (t.prototype.appendFrame_ = function (t) {
                if (
                  (this.frames.push(t), this.frames.length === this.totalFrames)
                ) {
                  var e = this.frames.join("");
                  this.frames = null;
                  var n = (0, o.cI)(e);
                  this.onMessage(n);
                }
              }),
              (t.prototype.handleNewFrameCount_ = function (t) {
                (this.totalFrames = t), (this.frames = []);
              }),
              (t.prototype.extractFrameCount_ = function (t) {
                if (
                  ((0, o.hu)(
                    null === this.frames,
                    "We already have a frame buffer"
                  ),
                  t.length <= 6)
                ) {
                  var e = Number(t);
                  if (!isNaN(e)) return this.handleNewFrameCount_(e), null;
                }
                return this.handleNewFrameCount_(1), t;
              }),
              (t.prototype.handleIncomingFrame = function (t) {
                if (null !== this.mySock) {
                  var e = t.data;
                  if (
                    ((this.bytesReceived += e.length),
                    this.stats_.incrementCounter("bytes_received", e.length),
                    this.resetKeepAlive(),
                    null !== this.frames)
                  )
                    this.appendFrame_(e);
                  else {
                    var n = this.extractFrameCount_(e);
                    null !== n && this.appendFrame_(n);
                  }
                }
              }),
              (t.prototype.send = function (t) {
                this.resetKeepAlive();
                var e = (0, o.Pz)(t);
                (this.bytesSent += e.length),
                  this.stats_.incrementCounter("bytes_sent", e.length);
                var n = O(e, 16384);
                n.length > 1 && this.sendString_(String(n.length));
                for (var r = 0; r < n.length; r++) this.sendString_(n[r]);
              }),
              (t.prototype.shutdown_ = function () {
                (this.isClosed_ = !0),
                  this.keepaliveTimer &&
                    (clearInterval(this.keepaliveTimer),
                    (this.keepaliveTimer = null)),
                  this.mySock && (this.mySock.close(), (this.mySock = null));
              }),
              (t.prototype.onClosed_ = function () {
                this.isClosed_ ||
                  (this.log_("WebSocket is closing itself"),
                  this.shutdown_(),
                  this.onDisconnect &&
                    (this.onDisconnect(this.everConnected_),
                    (this.onDisconnect = null)));
              }),
              (t.prototype.close = function () {
                this.isClosed_ ||
                  (this.log_("WebSocket is being closed"), this.shutdown_());
              }),
              (t.prototype.resetKeepAlive = function () {
                var t = this;
                clearInterval(this.keepaliveTimer),
                  (this.keepaliveTimer = setInterval(function () {
                    t.mySock && t.sendString_("0"), t.resetKeepAlive();
                  }, Math.floor(45e3)));
              }),
              (t.prototype.sendString_ = function (t) {
                try {
                  this.mySock.send(t);
                } catch (t) {
                  this.log_(
                    "Exception thrown from WebSocket.send():",
                    t.message || t.data,
                    "Closing connection."
                  ),
                    setTimeout(this.onClosed_.bind(this), 0);
                }
              }),
              (t.responsesRequiredToBeHealthy = 2),
              (t.healthyTimeout = 3e4),
              t
            );
          })(),
          gr = (function () {
            function t(t) {
              this.initTransports_(t);
            }
            return (
              Object.defineProperty(t, "ALL_TRANSPORTS", {
                get: function () {
                  return [hr, vr];
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.initTransports_ = function (e) {
                var n,
                  r,
                  o = vr && vr.isAvailable(),
                  s = o && !vr.previouslyFailed();
                if (
                  (e.webSocketOnly &&
                    (o ||
                      S(
                        "wss:// URL used, but browser isn't known to support websockets.  Trying anyway."
                      ),
                    (s = !0)),
                  s)
                )
                  this.transports_ = [vr];
                else {
                  var a = (this.transports_ = []);
                  try {
                    for (
                      var u = (0, i.XA)(t.ALL_TRANSPORTS), c = u.next();
                      !c.done;
                      c = u.next()
                    ) {
                      var h = c.value;
                      h && h.isAvailable() && a.push(h);
                    }
                  } catch (t) {
                    n = { error: t };
                  } finally {
                    try {
                      c && !c.done && (r = u.return) && r.call(u);
                    } finally {
                      if (n) throw n.error;
                    }
                  }
                }
              }),
              (t.prototype.initialTransport = function () {
                if (this.transports_.length > 0) return this.transports_[0];
                throw new Error("No transports available");
              }),
              (t.prototype.upgradeTransport = function () {
                return this.transports_.length > 1 ? this.transports_[1] : null;
              }),
              t
            );
          })(),
          mr = (function () {
            function t(t, e, n, r, i, o, s, a) {
              (this.id = t),
                (this.repoInfo_ = e),
                (this.applicationId_ = n),
                (this.onMessage_ = r),
                (this.onReady_ = i),
                (this.onDisconnect_ = o),
                (this.onKill_ = s),
                (this.lastSessionId = a),
                (this.connectionCount = 0),
                (this.pendingDataMessages = []),
                (this.state_ = 0),
                (this.log_ = I("c:" + this.id + ":")),
                (this.transportManager_ = new gr(e)),
                this.log_("Connection created"),
                this.start_();
            }
            return (
              (t.prototype.start_ = function () {
                var t = this,
                  e = this.transportManager_.initialTransport();
                (this.conn_ = new e(
                  this.nextTransportId_(),
                  this.repoInfo_,
                  this.applicationId_,
                  void 0,
                  this.lastSessionId
                )),
                  (this.primaryResponsesRequired_ =
                    e.responsesRequiredToBeHealthy || 0);
                var n = this.connReceiver_(this.conn_),
                  r = this.disconnReceiver_(this.conn_);
                (this.tx_ = this.conn_),
                  (this.rx_ = this.conn_),
                  (this.secondaryConn_ = null),
                  (this.isHealthy_ = !1),
                  setTimeout(function () {
                    t.conn_ && t.conn_.open(n, r);
                  }, Math.floor(0));
                var i = e.healthyTimeout || 0;
                i > 0 &&
                  (this.healthyTimeout_ = U(function () {
                    (t.healthyTimeout_ = null),
                      t.isHealthy_ ||
                        (t.conn_ && t.conn_.bytesReceived > 102400
                          ? (t.log_(
                              "Connection exceeded healthy timeout but has received " +
                                t.conn_.bytesReceived +
                                " bytes.  Marking connection healthy."
                            ),
                            (t.isHealthy_ = !0),
                            t.conn_.markConnectionHealthy())
                          : t.conn_ && t.conn_.bytesSent > 10240
                          ? t.log_(
                              "Connection exceeded healthy timeout but has sent " +
                                t.conn_.bytesSent +
                                " bytes.  Leaving connection alive."
                            )
                          : (t.log_(
                              "Closing unhealthy connection after timeout."
                            ),
                            t.close()));
                  }, Math.floor(i)));
              }),
              (t.prototype.nextTransportId_ = function () {
                return "c:" + this.id + ":" + this.connectionCount++;
              }),
              (t.prototype.disconnReceiver_ = function (t) {
                var e = this;
                return function (n) {
                  t === e.conn_
                    ? e.onConnectionLost_(n)
                    : t === e.secondaryConn_
                    ? (e.log_("Secondary connection lost."),
                      e.onSecondaryConnectionLost_())
                    : e.log_("closing an old connection");
                };
              }),
              (t.prototype.connReceiver_ = function (t) {
                var e = this;
                return function (n) {
                  2 !== e.state_ &&
                    (t === e.rx_
                      ? e.onPrimaryMessageReceived_(n)
                      : t === e.secondaryConn_
                      ? e.onSecondaryMessageReceived_(n)
                      : e.log_("message on old connection"));
                };
              }),
              (t.prototype.sendRequest = function (t) {
                var e = { t: "d", d: t };
                this.sendData_(e);
              }),
              (t.prototype.tryCleanupConnection = function () {
                this.tx_ === this.secondaryConn_ &&
                  this.rx_ === this.secondaryConn_ &&
                  (this.log_(
                    "cleaning up and promoting a connection: " +
                      this.secondaryConn_.connId
                  ),
                  (this.conn_ = this.secondaryConn_),
                  (this.secondaryConn_ = null));
              }),
              (t.prototype.onSecondaryControl_ = function (t) {
                if ("t" in t) {
                  var e = t.t;
                  "a" === e
                    ? this.upgradeIfSecondaryHealthy_()
                    : "r" === e
                    ? (this.log_("Got a reset on secondary, closing it"),
                      this.secondaryConn_.close(),
                      (this.tx_ !== this.secondaryConn_ &&
                        this.rx_ !== this.secondaryConn_) ||
                        this.close())
                    : "o" === e &&
                      (this.log_("got pong on secondary."),
                      this.secondaryResponsesRequired_--,
                      this.upgradeIfSecondaryHealthy_());
                }
              }),
              (t.prototype.onSecondaryMessageReceived_ = function (t) {
                var e = D("t", t),
                  n = D("d", t);
                if ("c" === e) this.onSecondaryControl_(n);
                else {
                  if ("d" !== e)
                    throw new Error("Unknown protocol layer: " + e);
                  this.pendingDataMessages.push(n);
                }
              }),
              (t.prototype.upgradeIfSecondaryHealthy_ = function () {
                this.secondaryResponsesRequired_ <= 0
                  ? (this.log_("Secondary connection is healthy."),
                    (this.isHealthy_ = !0),
                    this.secondaryConn_.markConnectionHealthy(),
                    this.proceedWithUpgrade_())
                  : (this.log_("sending ping on secondary."),
                    this.secondaryConn_.send({ t: "c", d: { t: "p", d: {} } }));
              }),
              (t.prototype.proceedWithUpgrade_ = function () {
                this.secondaryConn_.start(),
                  this.log_("sending client ack on secondary"),
                  this.secondaryConn_.send({ t: "c", d: { t: "a", d: {} } }),
                  this.log_("Ending transmission on primary"),
                  this.conn_.send({ t: "c", d: { t: "n", d: {} } }),
                  (this.tx_ = this.secondaryConn_),
                  this.tryCleanupConnection();
              }),
              (t.prototype.onPrimaryMessageReceived_ = function (t) {
                var e = D("t", t),
                  n = D("d", t);
                "c" === e
                  ? this.onControl_(n)
                  : "d" === e && this.onDataMessage_(n);
              }),
              (t.prototype.onDataMessage_ = function (t) {
                this.onPrimaryResponse_(), this.onMessage_(t);
              }),
              (t.prototype.onPrimaryResponse_ = function () {
                this.isHealthy_ ||
                  (this.primaryResponsesRequired_--,
                  this.primaryResponsesRequired_ <= 0 &&
                    (this.log_("Primary connection is healthy."),
                    (this.isHealthy_ = !0),
                    this.conn_.markConnectionHealthy()));
              }),
              (t.prototype.onControl_ = function (t) {
                var e = D("t", t);
                if ("d" in t) {
                  var n = t.d;
                  if ("h" === e) this.onHandshake_(n);
                  else if ("n" === e) {
                    this.log_("recvd end transmission on primary"),
                      (this.rx_ = this.secondaryConn_);
                    for (var r = 0; r < this.pendingDataMessages.length; ++r)
                      this.onDataMessage_(this.pendingDataMessages[r]);
                    (this.pendingDataMessages = []),
                      this.tryCleanupConnection();
                  } else
                    "s" === e
                      ? this.onConnectionShutdown_(n)
                      : "r" === e
                      ? this.onReset_(n)
                      : "e" === e
                      ? E("Server Error: " + n)
                      : "o" === e
                      ? (this.log_("got pong on primary."),
                        this.onPrimaryResponse_(),
                        this.sendPingOnPrimaryIfNecessary_())
                      : E("Unknown control packet command: " + e);
                }
              }),
              (t.prototype.onHandshake_ = function (t) {
                var e = t.ts,
                  n = t.v,
                  r = t.h;
                (this.sessionId = t.s),
                  (this.repoInfo_.host = r),
                  0 === this.state_ &&
                    (this.conn_.start(),
                    this.onConnectionEstablished_(this.conn_, e),
                    "5" !== n && S("Protocol version mismatch detected"),
                    this.tryStartUpgrade_());
              }),
              (t.prototype.tryStartUpgrade_ = function () {
                var t = this.transportManager_.upgradeTransport();
                t && this.startUpgrade_(t);
              }),
              (t.prototype.startUpgrade_ = function (t) {
                var e = this;
                (this.secondaryConn_ = new t(
                  this.nextTransportId_(),
                  this.repoInfo_,
                  this.applicationId_,
                  this.sessionId
                )),
                  (this.secondaryResponsesRequired_ =
                    t.responsesRequiredToBeHealthy || 0);
                var n = this.connReceiver_(this.secondaryConn_),
                  r = this.disconnReceiver_(this.secondaryConn_);
                this.secondaryConn_.open(n, r),
                  U(function () {
                    e.secondaryConn_ &&
                      (e.log_("Timed out trying to upgrade."),
                      e.secondaryConn_.close());
                  }, Math.floor(6e4));
              }),
              (t.prototype.onReset_ = function (t) {
                this.log_("Reset packet received.  New host: " + t),
                  (this.repoInfo_.host = t),
                  1 === this.state_
                    ? this.close()
                    : (this.closeConnections_(), this.start_());
              }),
              (t.prototype.onConnectionEstablished_ = function (t, e) {
                var n = this;
                this.log_("Realtime connection established."),
                  (this.conn_ = t),
                  (this.state_ = 1),
                  this.onReady_ &&
                    (this.onReady_(e, this.sessionId), (this.onReady_ = null)),
                  0 === this.primaryResponsesRequired_
                    ? (this.log_("Primary connection is healthy."),
                      (this.isHealthy_ = !0))
                    : U(function () {
                        n.sendPingOnPrimaryIfNecessary_();
                      }, Math.floor(5e3));
              }),
              (t.prototype.sendPingOnPrimaryIfNecessary_ = function () {
                this.isHealthy_ ||
                  1 !== this.state_ ||
                  (this.log_("sending ping on primary."),
                  this.sendData_({ t: "c", d: { t: "p", d: {} } }));
              }),
              (t.prototype.onSecondaryConnectionLost_ = function () {
                var t = this.secondaryConn_;
                (this.secondaryConn_ = null),
                  (this.tx_ !== t && this.rx_ !== t) || this.close();
              }),
              (t.prototype.onConnectionLost_ = function (t) {
                (this.conn_ = null),
                  t || 0 !== this.state_
                    ? 1 === this.state_ &&
                      this.log_("Realtime connection lost.")
                    : (this.log_("Realtime connection failed."),
                      this.repoInfo_.isCacheableHost() &&
                        (f.remove("host:" + this.repoInfo_.host),
                        (this.repoInfo_.internalHost = this.repoInfo_.host))),
                  this.close();
              }),
              (t.prototype.onConnectionShutdown_ = function (t) {
                this.log_(
                  "Connection shutdown command received. Shutting down..."
                ),
                  this.onKill_ && (this.onKill_(t), (this.onKill_ = null)),
                  (this.onDisconnect_ = null),
                  this.close();
              }),
              (t.prototype.sendData_ = function (t) {
                if (1 !== this.state_) throw "Connection is not connected";
                this.tx_.send(t);
              }),
              (t.prototype.close = function () {
                2 !== this.state_ &&
                  (this.log_("Closing realtime connection."),
                  (this.state_ = 2),
                  this.closeConnections_(),
                  this.onDisconnect_ &&
                    (this.onDisconnect_(), (this.onDisconnect_ = null)));
              }),
              (t.prototype.closeConnections_ = function () {
                this.log_("Shutting down all connections"),
                  this.conn_ && (this.conn_.close(), (this.conn_ = null)),
                  this.secondaryConn_ &&
                    (this.secondaryConn_.close(), (this.secondaryConn_ = null)),
                  this.healthyTimeout_ &&
                    (clearTimeout(this.healthyTimeout_),
                    (this.healthyTimeout_ = null));
              }),
              t
            );
          })(),
          yr = (function () {
            function t() {}
            return (
              (t.prototype.put = function (t, e, n, r) {}),
              (t.prototype.merge = function (t, e, n, r) {}),
              (t.prototype.refreshAuthToken = function (t) {}),
              (t.prototype.onDisconnectPut = function (t, e, n) {}),
              (t.prototype.onDisconnectMerge = function (t, e, n) {}),
              (t.prototype.onDisconnectCancel = function (t, e) {}),
              (t.prototype.reportStats = function (t) {}),
              t
            );
          })(),
          br = 1e3,
          wr = (function (t) {
            function e(n, r, i, s, a, u, c) {
              var h = t.call(this) || this;
              if (
                ((h.repoInfo_ = n),
                (h.applicationId_ = r),
                (h.onDataUpdate_ = i),
                (h.onConnectStatus_ = s),
                (h.onServerInfoUpdate_ = a),
                (h.authTokenProvider_ = u),
                (h.authOverride_ = c),
                (h.id = e.nextPersistentConnectionId_++),
                (h.log_ = I("p:" + h.id + ":")),
                (h.interruptReasons_ = {}),
                (h.listens = new Map()),
                (h.outstandingPuts_ = []),
                (h.outstandingGets_ = []),
                (h.outstandingPutCount_ = 0),
                (h.outstandingGetCount_ = 0),
                (h.onDisconnectRequestQueue_ = []),
                (h.connected_ = !1),
                (h.reconnectDelay_ = br),
                (h.maxReconnectDelay_ = 3e5),
                (h.securityDebugCallback_ = null),
                (h.lastSessionId = null),
                (h.establishConnectionTimer_ = null),
                (h.visible_ = !1),
                (h.requestCBHash_ = {}),
                (h.requestNumber_ = 0),
                (h.realtime_ = null),
                (h.authToken_ = null),
                (h.forceTokenRefresh_ = !1),
                (h.invalidAuthTokenCount_ = 0),
                (h.firstConnection_ = !0),
                (h.lastConnectionAttemptTime_ = null),
                (h.lastConnectionEstablishedTime_ = null),
                c && !(0, o.Yr)())
              )
                throw new Error(
                  "Auth override specified in options, but not supported on non Node.js platforms"
                );
              return (
                h.scheduleConnect_(0),
                or.getInstance().on("visible", h.onVisible_, h),
                -1 === n.host.indexOf("fblocal") &&
                  sr.getInstance().on("online", h.onOnline_, h),
                h
              );
            }
            return (
              (0, i.ZT)(e, t),
              (e.prototype.sendRequest = function (t, e, n) {
                var r = ++this.requestNumber_,
                  i = { r, a: t, b: e };
                this.log_((0, o.Pz)(i)),
                  (0, o.hu)(
                    this.connected_,
                    "sendRequest call when we're not connected not allowed."
                  ),
                  this.realtime_.sendRequest(i),
                  n && (this.requestCBHash_[r] = n);
              }),
              (e.prototype.get = function (t) {
                var e = this,
                  n = new o.BH(),
                  r = { p: t.path.toString(), q: t.queryObject() },
                  i = {
                    action: "g",
                    request: r,
                    onComplete: function (t) {
                      var i = t.d;
                      "ok" === t.s
                        ? (e.onDataUpdate_(r.p, i, !1, null), n.resolve(i))
                        : n.reject(i);
                    },
                  };
                this.outstandingGets_.push(i), this.outstandingGetCount_++;
                var s = this.outstandingGets_.length - 1;
                return (
                  this.connected_ ||
                    setTimeout(function () {
                      var t = e.outstandingGets_[s];
                      void 0 !== t &&
                        i === t &&
                        (delete e.outstandingGets_[s],
                        e.outstandingGetCount_--,
                        0 === e.outstandingGetCount_ &&
                          (e.outstandingGets_ = []),
                        e.log_("get " + s + " timed out on connection"),
                        n.reject(new Error("Client is offline.")));
                    }, 3e3),
                  this.connected_ && this.sendGet_(s),
                  n.promise
                );
              }),
              (e.prototype.listen = function (t, e, n, r) {
                var i = t.queryIdentifier(),
                  s = t.path.toString();
                this.log_("Listen called for " + s + " " + i),
                  this.listens.has(s) || this.listens.set(s, new Map()),
                  (0, o.hu)(
                    t.getQueryParams().isDefault() ||
                      !t.getQueryParams().loadsAllData(),
                    "listen() called for non-default but complete query"
                  ),
                  (0, o.hu)(
                    !this.listens.get(s).has(i),
                    "listen() called twice for same path/queryId."
                  );
                var a = { onComplete: r, hashFn: e, query: t, tag: n };
                this.listens.get(s).set(i, a),
                  this.connected_ && this.sendListen_(a);
              }),
              (e.prototype.sendGet_ = function (t) {
                var e = this,
                  n = this.outstandingGets_[t];
                this.sendRequest("g", n.request, function (r) {
                  delete e.outstandingGets_[t],
                    e.outstandingGetCount_--,
                    0 === e.outstandingGetCount_ && (e.outstandingGets_ = []),
                    n.onComplete && n.onComplete(r);
                });
              }),
              (e.prototype.sendListen_ = function (t) {
                var n = this,
                  r = t.query,
                  i = r.path.toString(),
                  o = r.queryIdentifier();
                this.log_("Listen on " + i + " for " + o);
                var s = { p: i };
                t.tag && ((s.q = r.queryObject()), (s.t = t.tag)),
                  (s.h = t.hashFn()),
                  this.sendRequest("q", s, function (s) {
                    var a = s.d,
                      u = s.s;
                    e.warnOnListenWarnings_(a, r),
                      (n.listens.get(i) && n.listens.get(i).get(o)) === t &&
                        (n.log_("listen response", s),
                        "ok" !== u && n.removeListen_(i, o),
                        t.onComplete && t.onComplete(u, a));
                  });
              }),
              (e.warnOnListenWarnings_ = function (t, e) {
                if (t && "object" == typeof t && (0, o.r3)(t, "w")) {
                  var n = (0, o.DV)(t, "w");
                  if (Array.isArray(n) && ~n.indexOf("no_index")) {
                    var r =
                        '".indexOn": "' +
                        e.getQueryParams().getIndex().toString() +
                        '"',
                      i = e.path.toString();
                    S(
                      "Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding " +
                        r +
                        " at " +
                        i +
                        " to your security rules for better performance."
                    );
                  }
                }
              }),
              (e.prototype.refreshAuthToken = function (t) {
                (this.authToken_ = t),
                  this.log_("Auth token refreshed"),
                  this.authToken_
                    ? this.tryAuth()
                    : this.connected_ &&
                      this.sendRequest("unauth", {}, function () {}),
                  this.reduceReconnectDelayIfAdminCredential_(t);
              }),
              (e.prototype.reduceReconnectDelayIfAdminCredential_ = function (
                t
              ) {
                ((t && 40 === t.length) || (0, o.GJ)(t)) &&
                  (this.log_(
                    "Admin auth credential detected.  Reducing max reconnect time."
                  ),
                  (this.maxReconnectDelay_ = 3e4));
              }),
              (e.prototype.tryAuth = function () {
                var t = this;
                if (this.connected_ && this.authToken_) {
                  var e = this.authToken_,
                    n = (0, o.w9)(e) ? "auth" : "gauth",
                    r = { cred: e };
                  null === this.authOverride_
                    ? (r.noauth = !0)
                    : "object" == typeof this.authOverride_ &&
                      (r.authvar = this.authOverride_),
                    this.sendRequest(n, r, function (n) {
                      var r = n.s,
                        i = n.d || "error";
                      t.authToken_ === e &&
                        ("ok" === r
                          ? (t.invalidAuthTokenCount_ = 0)
                          : t.onAuthRevoked_(r, i));
                    });
                }
              }),
              (e.prototype.unlisten = function (t, e) {
                var n = t.path.toString(),
                  r = t.queryIdentifier();
                this.log_("Unlisten called for " + n + " " + r),
                  (0, o.hu)(
                    t.getQueryParams().isDefault() ||
                      !t.getQueryParams().loadsAllData(),
                    "unlisten() called for non-default but complete query"
                  ),
                  this.removeListen_(n, r) &&
                    this.connected_ &&
                    this.sendUnlisten_(n, r, t.queryObject(), e);
              }),
              (e.prototype.sendUnlisten_ = function (t, e, n, r) {
                this.log_("Unlisten on " + t + " for " + e);
                var i = { p: t };
                r && ((i.q = n), (i.t = r)), this.sendRequest("n", i);
              }),
              (e.prototype.onDisconnectPut = function (t, e, n) {
                this.connected_
                  ? this.sendOnDisconnect_("o", t, e, n)
                  : this.onDisconnectRequestQueue_.push({
                      pathString: t,
                      action: "o",
                      data: e,
                      onComplete: n,
                    });
              }),
              (e.prototype.onDisconnectMerge = function (t, e, n) {
                this.connected_
                  ? this.sendOnDisconnect_("om", t, e, n)
                  : this.onDisconnectRequestQueue_.push({
                      pathString: t,
                      action: "om",
                      data: e,
                      onComplete: n,
                    });
              }),
              (e.prototype.onDisconnectCancel = function (t, e) {
                this.connected_
                  ? this.sendOnDisconnect_("oc", t, null, e)
                  : this.onDisconnectRequestQueue_.push({
                      pathString: t,
                      action: "oc",
                      data: null,
                      onComplete: e,
                    });
              }),
              (e.prototype.sendOnDisconnect_ = function (t, e, n, r) {
                var i = { p: e, d: n };
                this.log_("onDisconnect " + t, i),
                  this.sendRequest(t, i, function (t) {
                    r &&
                      setTimeout(function () {
                        r(t.s, t.d);
                      }, Math.floor(0));
                  });
              }),
              (e.prototype.put = function (t, e, n, r) {
                this.putInternal("p", t, e, n, r);
              }),
              (e.prototype.merge = function (t, e, n, r) {
                this.putInternal("m", t, e, n, r);
              }),
              (e.prototype.putInternal = function (t, e, n, r, i) {
                var o = { p: e, d: n };
                void 0 !== i && (o.h = i),
                  this.outstandingPuts_.push({
                    action: t,
                    request: o,
                    onComplete: r,
                  }),
                  this.outstandingPutCount_++;
                var s = this.outstandingPuts_.length - 1;
                this.connected_
                  ? this.sendPut_(s)
                  : this.log_("Buffering put: " + e);
              }),
              (e.prototype.sendPut_ = function (t) {
                var e = this,
                  n = this.outstandingPuts_[t].action,
                  r = this.outstandingPuts_[t].request,
                  i = this.outstandingPuts_[t].onComplete;
                (this.outstandingPuts_[t].queued = this.connected_),
                  this.sendRequest(n, r, function (r) {
                    e.log_(n + " response", r),
                      delete e.outstandingPuts_[t],
                      e.outstandingPutCount_--,
                      0 === e.outstandingPutCount_ && (e.outstandingPuts_ = []),
                      i && i(r.s, r.d);
                  });
              }),
              (e.prototype.reportStats = function (t) {
                var e = this;
                if (this.connected_) {
                  var n = { c: t };
                  this.log_("reportStats", n),
                    this.sendRequest("s", n, function (t) {
                      if ("ok" !== t.s) {
                        var n = t.d;
                        e.log_("reportStats", "Error sending stats: " + n);
                      }
                    });
                }
              }),
              (e.prototype.onDataMessage_ = function (t) {
                if ("r" in t) {
                  this.log_("from server: " + (0, o.Pz)(t));
                  var e = t.r,
                    n = this.requestCBHash_[e];
                  n && (delete this.requestCBHash_[e], n(t.b));
                } else {
                  if ("error" in t)
                    throw "A server-side error has occurred: " + t.error;
                  "a" in t && this.onDataPush_(t.a, t.b);
                }
              }),
              (e.prototype.onDataPush_ = function (t, e) {
                this.log_("handleServerMessage", t, e),
                  "d" === t
                    ? this.onDataUpdate_(e.p, e.d, !1, e.t)
                    : "m" === t
                    ? this.onDataUpdate_(e.p, e.d, !0, e.t)
                    : "c" === t
                    ? this.onListenRevoked_(e.p, e.q)
                    : "ac" === t
                    ? this.onAuthRevoked_(e.s, e.d)
                    : "sd" === t
                    ? this.onSecurityDebugPacket_(e)
                    : E(
                        "Unrecognized action received from server: " +
                          (0, o.Pz)(t) +
                          "\nAre you using the latest client?"
                      );
              }),
              (e.prototype.onReady_ = function (t, e) {
                this.log_("connection ready"),
                  (this.connected_ = !0),
                  (this.lastConnectionEstablishedTime_ = new Date().getTime()),
                  this.handleTimestamp_(t),
                  (this.lastSessionId = e),
                  this.firstConnection_ && this.sendConnectStats_(),
                  this.restoreState_(),
                  (this.firstConnection_ = !1),
                  this.onConnectStatus_(!0);
              }),
              (e.prototype.scheduleConnect_ = function (t) {
                var e = this;
                (0, o.hu)(
                  !this.realtime_,
                  "Scheduling a connect when we're already connected/ing?"
                ),
                  this.establishConnectionTimer_ &&
                    clearTimeout(this.establishConnectionTimer_),
                  (this.establishConnectionTimer_ = setTimeout(function () {
                    (e.establishConnectionTimer_ = null),
                      e.establishConnection_();
                  }, Math.floor(t)));
              }),
              (e.prototype.onVisible_ = function (t) {
                t &&
                  !this.visible_ &&
                  this.reconnectDelay_ === this.maxReconnectDelay_ &&
                  (this.log_("Window became visible.  Reducing delay."),
                  (this.reconnectDelay_ = br),
                  this.realtime_ || this.scheduleConnect_(0)),
                  (this.visible_ = t);
              }),
              (e.prototype.onOnline_ = function (t) {
                t
                  ? (this.log_("Browser went online."),
                    (this.reconnectDelay_ = br),
                    this.realtime_ || this.scheduleConnect_(0))
                  : (this.log_("Browser went offline.  Killing connection."),
                    this.realtime_ && this.realtime_.close());
              }),
              (e.prototype.onRealtimeDisconnect_ = function () {
                if (
                  (this.log_("data client disconnected"),
                  (this.connected_ = !1),
                  (this.realtime_ = null),
                  this.cancelSentTransactions_(),
                  (this.requestCBHash_ = {}),
                  this.shouldReconnect_())
                ) {
                  this.visible_
                    ? this.lastConnectionEstablishedTime_ &&
                      (new Date().getTime() -
                        this.lastConnectionEstablishedTime_ >
                        3e4 && (this.reconnectDelay_ = br),
                      (this.lastConnectionEstablishedTime_ = null))
                    : (this.log_("Window isn't visible.  Delaying reconnect."),
                      (this.reconnectDelay_ = this.maxReconnectDelay_),
                      (this.lastConnectionAttemptTime_ = new Date().getTime()));
                  var t =
                      new Date().getTime() - this.lastConnectionAttemptTime_,
                    e = Math.max(0, this.reconnectDelay_ - t);
                  (e = Math.random() * e),
                    this.log_("Trying to reconnect in " + e + "ms"),
                    this.scheduleConnect_(e),
                    (this.reconnectDelay_ = Math.min(
                      this.maxReconnectDelay_,
                      1.3 * this.reconnectDelay_
                    ));
                }
                this.onConnectStatus_(!1);
              }),
              (e.prototype.establishConnection_ = function () {
                var t = this;
                if (this.shouldReconnect_()) {
                  this.log_("Making a connection attempt"),
                    (this.lastConnectionAttemptTime_ = new Date().getTime()),
                    (this.lastConnectionEstablishedTime_ = null);
                  var n = this.onDataMessage_.bind(this),
                    r = this.onReady_.bind(this),
                    i = this.onRealtimeDisconnect_.bind(this),
                    s = this.id + ":" + e.nextConnectionId_++,
                    a = this,
                    u = this.lastSessionId,
                    c = !1,
                    h = null,
                    l = function () {
                      h ? h.close() : ((c = !0), i());
                    };
                  this.realtime_ = {
                    close: l,
                    sendRequest: function (t) {
                      (0, o.hu)(
                        h,
                        "sendRequest call when we're not connected not allowed."
                      ),
                        h.sendRequest(t);
                    },
                  };
                  var f = this.forceTokenRefresh_;
                  (this.forceTokenRefresh_ = !1),
                    this.authTokenProvider_
                      .getToken(f)
                      .then(function (t) {
                        c
                          ? _("getToken() completed but was canceled")
                          : (_("getToken() completed. Creating connection."),
                            (a.authToken_ = t && t.accessToken),
                            (h = new mr(
                              s,
                              a.repoInfo_,
                              a.applicationId_,
                              n,
                              r,
                              i,
                              function (t) {
                                S(t + " (" + a.repoInfo_.toString() + ")"),
                                  a.interrupt("server_kill");
                              },
                              u
                            )));
                      })
                      .then(null, function (e) {
                        a.log_("Failed to get token: " + e),
                          c || (t.repoInfo_.nodeAdmin && S(e), l());
                      });
                }
              }),
              (e.prototype.interrupt = function (t) {
                _("Interrupting connection for reason: " + t),
                  (this.interruptReasons_[t] = !0),
                  this.realtime_
                    ? this.realtime_.close()
                    : (this.establishConnectionTimer_ &&
                        (clearTimeout(this.establishConnectionTimer_),
                        (this.establishConnectionTimer_ = null)),
                      this.connected_ && this.onRealtimeDisconnect_());
              }),
              (e.prototype.resume = function (t) {
                _("Resuming connection for reason: " + t),
                  delete this.interruptReasons_[t],
                  (0, o.xb)(this.interruptReasons_) &&
                    ((this.reconnectDelay_ = br),
                    this.realtime_ || this.scheduleConnect_(0));
              }),
              (e.prototype.handleTimestamp_ = function (t) {
                var e = t - new Date().getTime();
                this.onServerInfoUpdate_({ serverTimeOffset: e });
              }),
              (e.prototype.cancelSentTransactions_ = function () {
                for (var t = 0; t < this.outstandingPuts_.length; t++) {
                  var e = this.outstandingPuts_[t];
                  e &&
                    "h" in e.request &&
                    e.queued &&
                    (e.onComplete && e.onComplete("disconnect"),
                    delete this.outstandingPuts_[t],
                    this.outstandingPutCount_--);
                }
                0 === this.outstandingPutCount_ && (this.outstandingPuts_ = []);
              }),
              (e.prototype.onListenRevoked_ = function (t, e) {
                var n;
                n = e
                  ? e
                      .map(function (t) {
                        return x(t);
                      })
                      .join("$")
                  : "default";
                var r = this.removeListen_(t, n);
                r && r.onComplete && r.onComplete("permission_denied");
              }),
              (e.prototype.removeListen_ = function (t, e) {
                var n,
                  r = new V(t).toString();
                if (this.listens.has(r)) {
                  var i = this.listens.get(r);
                  (n = i.get(e)),
                    i.delete(e),
                    0 === i.size && this.listens.delete(r);
                } else n = void 0;
                return n;
              }),
              (e.prototype.onAuthRevoked_ = function (t, e) {
                _("Auth token revoked: " + t + "/" + e),
                  (this.authToken_ = null),
                  (this.forceTokenRefresh_ = !0),
                  this.realtime_.close(),
                  ("invalid_token" !== t && "permission_denied" !== t) ||
                    (this.invalidAuthTokenCount_++,
                    this.invalidAuthTokenCount_ >= 3 &&
                      ((this.reconnectDelay_ = 3e4),
                      this.authTokenProvider_.notifyForInvalidToken()));
              }),
              (e.prototype.onSecurityDebugPacket_ = function (t) {
                this.securityDebugCallback_
                  ? this.securityDebugCallback_(t)
                  : "msg" in t &&
                    console.log(
                      "FIREBASE: " + t.msg.replace("\n", "\nFIREBASE: ")
                    );
              }),
              (e.prototype.restoreState_ = function () {
                var t, e, n, r;
                this.tryAuth();
                try {
                  for (
                    var o = (0, i.XA)(this.listens.values()), s = o.next();
                    !s.done;
                    s = o.next()
                  ) {
                    var a = s.value;
                    try {
                      for (
                        var u = ((n = void 0), (0, i.XA)(a.values())),
                          c = u.next();
                        !c.done;
                        c = u.next()
                      ) {
                        var h = c.value;
                        this.sendListen_(h);
                      }
                    } catch (t) {
                      n = { error: t };
                    } finally {
                      try {
                        c && !c.done && (r = u.return) && r.call(u);
                      } finally {
                        if (n) throw n.error;
                      }
                    }
                  }
                } catch (e) {
                  t = { error: e };
                } finally {
                  try {
                    s && !s.done && (e = o.return) && e.call(o);
                  } finally {
                    if (t) throw t.error;
                  }
                }
                for (var l = 0; l < this.outstandingPuts_.length; l++)
                  this.outstandingPuts_[l] && this.sendPut_(l);
                for (; this.onDisconnectRequestQueue_.length; ) {
                  var f = this.onDisconnectRequestQueue_.shift();
                  this.sendOnDisconnect_(
                    f.action,
                    f.pathString,
                    f.data,
                    f.onComplete
                  );
                }
                for (l = 0; l < this.outstandingGets_.length; l++)
                  this.outstandingGets_[l] && this.sendGet_(l);
              }),
              (e.prototype.sendConnectStats_ = function () {
                var t = {},
                  e = "js";
                (0, o.Yr)() &&
                  (e = this.repoInfo_.nodeAdmin ? "admin_node" : "node"),
                  (t["sdk." + e + "." + fr.replace(/\./g, "-")] = 1),
                  (0, o.uI)()
                    ? (t["framework.cordova"] = 1)
                    : (0, o.b$)() && (t["framework.reactnative"] = 1),
                  this.reportStats(t);
              }),
              (e.prototype.shouldReconnect_ = function () {
                var t = sr.getInstance().currentlyOnline();
                return (0, o.xb)(this.interruptReasons_) && t;
              }),
              (e.nextPersistentConnectionId_ = 0),
              (e.nextConnectionId_ = 0),
              e
            );
          })(yr),
          _r = (function (t) {
            function e(e, n, r) {
              var i = t.call(this) || this;
              return (
                (i.repoInfo_ = e),
                (i.onDataUpdate_ = n),
                (i.authTokenProvider_ = r),
                (i.log_ = I("p:rest:")),
                (i.listens_ = {}),
                i
              );
            }
            return (
              (0, i.ZT)(e, t),
              (e.prototype.reportStats = function (t) {
                throw new Error("Method not implemented.");
              }),
              (e.getListenId_ = function (t, e) {
                return void 0 !== e
                  ? "tag$" + e
                  : ((0, o.hu)(
                      t.getQueryParams().isDefault(),
                      "should have a tag if it's not a default query."
                    ),
                    t.path.toString());
              }),
              (e.prototype.listen = function (t, n, r, i) {
                var s = this,
                  a = t.path.toString();
                this.log_("Listen called for " + a + " " + t.queryIdentifier());
                var u = e.getListenId_(t, r),
                  c = {};
                this.listens_[u] = c;
                var h = Ge(t.getQueryParams());
                this.restRequest_(a + ".json", h, function (t, e) {
                  var n = e;
                  404 === t && ((n = null), (t = null)),
                    null === t && s.onDataUpdate_(a, n, !1, r),
                    (0, o.DV)(s.listens_, u) === c &&
                      i(
                        t
                          ? 401 === t
                            ? "permission_denied"
                            : "rest_error:" + t
                          : "ok",
                        null
                      );
                });
              }),
              (e.prototype.unlisten = function (t, n) {
                var r = e.getListenId_(t, n);
                delete this.listens_[r];
              }),
              (e.prototype.get = function (t) {
                var e = this,
                  n = Ge(t.getQueryParams()),
                  r = t.path.toString(),
                  i = new o.BH();
                return (
                  this.restRequest_(r + ".json", n, function (t, n) {
                    var o = n;
                    404 === t && ((o = null), (t = null)),
                      null === t
                        ? (e.onDataUpdate_(r, o, !1, null), i.resolve(o))
                        : i.reject(new Error(o));
                  }),
                  i.promise
                );
              }),
              (e.prototype.refreshAuthToken = function (t) {}),
              (e.prototype.restRequest_ = function (t, e, n) {
                var r = this;
                void 0 === e && (e = {}),
                  (e.format = "export"),
                  this.authTokenProvider_.getToken(!1).then(function (i) {
                    var s = i && i.accessToken;
                    s && (e.auth = s);
                    var a =
                      (r.repoInfo_.secure ? "https://" : "http://") +
                      r.repoInfo_.host +
                      t +
                      "?ns=" +
                      r.repoInfo_.namespace +
                      (0, o.xO)(e);
                    r.log_("Sending REST request for " + a);
                    var u = new XMLHttpRequest();
                    (u.onreadystatechange = function () {
                      if (n && 4 === u.readyState) {
                        r.log_(
                          "REST Response for " + a + " received. status:",
                          u.status,
                          "response:",
                          u.responseText
                        );
                        var t = null;
                        if (u.status >= 200 && u.status < 300) {
                          try {
                            t = (0, o.cI)(u.responseText);
                          } catch (t) {
                            S(
                              "Failed to parse JSON response for " +
                                a +
                                ": " +
                                u.responseText
                            );
                          }
                          n(null, t);
                        } else
                          401 !== u.status &&
                            404 !== u.status &&
                            S(
                              "Got unsuccessful REST response for " +
                                a +
                                " Status: " +
                                u.status
                            ),
                            n(u.status);
                        n = null;
                      }
                    }),
                      u.open("GET", a, !0),
                      u.send();
                  });
              }),
              e
            );
          })(yr),
          Ir = (function () {
            function t(t, e, n) {
              (this.node_ = t), (this.ref_ = e), (this.index_ = n);
            }
            return (
              (t.prototype.val = function () {
                return (
                  (0, o.Dv)("DataSnapshot.val", 0, 0, arguments.length),
                  this.node_.val()
                );
              }),
              (t.prototype.exportVal = function () {
                return (
                  (0, o.Dv)("DataSnapshot.exportVal", 0, 0, arguments.length),
                  this.node_.val(!0)
                );
              }),
              (t.prototype.toJSON = function () {
                return (
                  (0, o.Dv)("DataSnapshot.toJSON", 0, 1, arguments.length),
                  this.exportVal()
                );
              }),
              (t.prototype.exists = function () {
                return (
                  (0, o.Dv)("DataSnapshot.exists", 0, 0, arguments.length),
                  !this.node_.isEmpty()
                );
              }),
              (t.prototype.child = function (e) {
                (0, o.Dv)("DataSnapshot.child", 0, 1, arguments.length),
                  (e = String(e)),
                  Pt("DataSnapshot.child", 1, e, !1);
                var n = new V(e),
                  r = this.ref_.child(n);
                return new t(this.node_.getChild(n), r, Wt);
              }),
              (t.prototype.hasChild = function (t) {
                (0, o.Dv)("DataSnapshot.hasChild", 1, 1, arguments.length),
                  Pt("DataSnapshot.hasChild", 1, t, !1);
                var e = new V(t);
                return !this.node_.getChild(e).isEmpty();
              }),
              (t.prototype.getPriority = function () {
                return (
                  (0, o.Dv)("DataSnapshot.getPriority", 0, 0, arguments.length),
                  this.node_.getPriority().val()
                );
              }),
              (t.prototype.forEach = function (e) {
                var n = this;
                if (
                  ((0, o.Dv)("DataSnapshot.forEach", 1, 1, arguments.length),
                  (0, o.Wj)("DataSnapshot.forEach", 1, e, !1),
                  this.node_.isLeafNode())
                )
                  return !1;
                var r = this.node_;
                return !!r.forEachChild(this.index_, function (r, i) {
                  return e(new t(i, n.ref_.child(r), Wt));
                });
              }),
              (t.prototype.hasChildren = function () {
                return (
                  (0, o.Dv)("DataSnapshot.hasChildren", 0, 0, arguments.length),
                  !this.node_.isLeafNode() && !this.node_.isEmpty()
                );
              }),
              Object.defineProperty(t.prototype, "key", {
                get: function () {
                  return this.ref_.getKey();
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.numChildren = function () {
                return (
                  (0, o.Dv)("DataSnapshot.numChildren", 0, 0, arguments.length),
                  this.node_.numChildren()
                );
              }),
              (t.prototype.getRef = function () {
                return (
                  (0, o.Dv)("DataSnapshot.ref", 0, 0, arguments.length),
                  this.ref_
                );
              }),
              Object.defineProperty(t.prototype, "ref", {
                get: function () {
                  return this.getRef();
                },
                enumerable: !1,
                configurable: !0,
              }),
              t
            );
          })(),
          Er = function (t, e, n) {
            void 0 === t && (t = ""),
              void 0 === e && (e = null),
              void 0 === n && (n = { children: {}, childCount: 0 }),
              (this.name = t),
              (this.parent = e),
              (this.node = n);
          };
        function Tr(t, e) {
          for (
            var n = e instanceof V ? e : new V(e), r = t, i = B(n);
            null !== i;

          ) {
            var s = (0, o.DV)(r.node.children, i) || {
              children: {},
              childCount: 0,
            };
            (r = new Er(i, r, s)), (i = B((n = W(n))));
          }
          return r;
        }
        function Sr(t) {
          return t.node.value;
        }
        function Cr(t, e) {
          (t.node.value = e), Dr(t);
        }
        function kr(t) {
          return t.node.childCount > 0;
        }
        function Nr(t, e) {
          R(t.node.children, function (n, r) {
            e(new Er(n, t, r));
          });
        }
        function Ar(t, e, n, r) {
          n && !r && e(t),
            Nr(t, function (t) {
              Ar(t, e, !0, r);
            }),
            n && r && e(t);
        }
        function Pr(t) {
          return new V(
            null === t.parent ? t.name : Pr(t.parent) + "/" + t.name
          );
        }
        function Dr(t) {
          null !== t.parent &&
            (function (t, e, n) {
              var r = (function (t) {
                  return void 0 === Sr(t) && !kr(t);
                })(n),
                i = (0, o.r3)(t.node.children, e);
              r && i
                ? (delete t.node.children[e], t.node.childCount--, Dr(t))
                : r ||
                  i ||
                  ((t.node.children[e] = n.node), t.node.childCount++, Dr(t));
            })(t.parent, t.name, t);
        }
        var xr = "repo_interrupt",
          Or = (function () {
            function t(t, e, n, r) {
              (this.repoInfo_ = t),
                (this.forceRestClient_ = e),
                (this.app = n),
                (this.authTokenProvider_ = r),
                (this.dataUpdateCount = 0),
                (this.statsListener_ = null),
                (this.eventQueue_ = new Zn()),
                (this.nextWriteId_ = 1),
                (this.interceptServerDataCallback_ = null),
                (this.onDisconnect_ = qn()),
                (this.transactionQueueTree_ = new Er()),
                (this.persistentConnection_ = null),
                (this.key = this.repoInfo_.toURLString());
            }
            return (
              (t.prototype.toString = function () {
                return (
                  (this.repoInfo_.secure ? "https://" : "http://") +
                  this.repoInfo_.host
                );
              }),
              t
            );
          })();
        function Rr(t) {
          var e =
            t.infoData_.getNode(new V(".info/serverTimeOffset")).val() || 0;
          return new Date().getTime() + e;
        }
        function Mr(t) {
          return (
            ((e = (e = { timestamp: Rr(t) }) || {}).timestamp =
              e.timestamp || new Date().getTime()),
            e
          );
          var e;
        }
        function Lr(t, e, n, r, i) {
          t.dataUpdateCount++;
          var s = new V(e);
          n = t.interceptServerDataCallback_
            ? t.interceptServerDataCallback_(e, n)
            : n;
          var a = [];
          if (i)
            if (r) {
              var u = (0, o.UI)(n, function (t) {
                return re(t);
              });
              a = (function (t, e, n, r) {
                var i = An(t, r);
                if (i) {
                  var o = Pn(i),
                    s = o.path,
                    a = o.queryId,
                    u = X(s, e),
                    c = ae.fromObject(n);
                  return Dn(t, s, new he(ie(a), u, c));
                }
                return [];
              })(t.serverSyncTree_, s, u, i);
            } else {
              var c = re(n);
              a = (function (t, e, n, r) {
                var i = An(t, r);
                if (null != i) {
                  var o = Pn(i),
                    s = o.path,
                    a = o.queryId,
                    u = X(s, e);
                  return Dn(t, s, new ce(ie(a), u, n));
                }
                return [];
              })(t.serverSyncTree_, s, c, i);
            }
          else if (r) {
            var h = (0, o.UI)(n, function (t) {
              return re(t);
            });
            a = (function (t, e, n) {
              var r = ae.fromObject(n);
              return En(
                t,
                new he(
                  { fromUser: !1, fromServer: !0, queryId: null, tagged: !1 },
                  e,
                  r
                )
              );
            })(t.serverSyncTree_, s, h);
          } else {
            var l = re(n);
            a = bn(t.serverSyncTree_, s, l);
          }
          var f = s;
          a.length > 0 && (f = ni(t, s)), er(t.eventQueue_, f, a);
        }
        function jr(t, e) {
          Fr(t, "connected", e),
            !1 === e &&
              (function (t) {
                Yr(t, "onDisconnectEvents");
                var e = Mr(t),
                  n = qn();
                Wn(t.onDisconnect_, q(), function (r, i) {
                  var o = Fn(r, i, t.serverSyncTree_, e);
                  Bn(n, r, o);
                });
                var r = [];
                Wn(n, q(), function (e, n) {
                  r = r.concat(bn(t.serverSyncTree_, e, n));
                  var i = ai(t, e);
                  ni(t, i);
                }),
                  (t.onDisconnect_ = qn()),
                  er(t.eventQueue_, q(), r);
              })(t);
        }
        function Fr(t, e, n) {
          var r = new V("/.info/" + e),
            i = re(n);
          t.infoData_.updateSnapshot(r, i);
          var o = bn(t.infoSyncTree_, r, i);
          er(t.eventQueue_, r, o);
        }
        function Ur(t) {
          return t.nextWriteId_++;
        }
        function Vr(t, e, n, r, i) {
          Yr(t, "set", { path: e.toString(), value: n, priority: r });
          var o = Mr(t),
            s = re(n, r),
            a = In(t.serverSyncTree_, e),
            u = Un(s, a, o),
            c = Ur(t),
            h = mn(t.serverSyncTree_, e, u, c, !0);
          $n(t.eventQueue_, h),
            t.server_.put(e.toString(), s.val(!0), function (n, r) {
              var o = "ok" === n;
              o || S("set at " + e + " failed: " + n);
              var s = yn(t.serverSyncTree_, c, !o);
              er(t.eventQueue_, e, s), Xr(0, i, n, r);
            });
          var l = ai(t, e);
          ni(t, l), er(t.eventQueue_, l, []);
        }
        function qr(t, e, n, r) {
          Yr(t, "update", { path: e.toString(), value: n });
          var i = !0,
            o = Mr(t),
            s = {};
          if (
            (R(n, function (n, r) {
              (i = !1), (s[n] = Fn(Q(e, n), re(r), t.serverSyncTree_, o));
            }),
            i)
          )
            _("update() called with empty data.  Don't do anything."),
              Xr(0, r, "ok", void 0);
          else {
            var a = Ur(t),
              u = (function (t, e, n, r) {
                t.pendingWriteTree_.addMerge(e, n, r);
                var i = ae.fromObject(n);
                return En(
                  t,
                  new he(
                    { fromUser: !0, fromServer: !1, queryId: null, tagged: !1 },
                    e,
                    i
                  )
                );
              })(t.serverSyncTree_, e, s, a);
            $n(t.eventQueue_, u),
              t.server_.merge(e.toString(), n, function (n, i) {
                var o = "ok" === n;
                o || S("update at " + e + " failed: " + n);
                var s = yn(t.serverSyncTree_, a, !o),
                  u = s.length > 0 ? ni(t, e) : e;
                er(t.eventQueue_, u, s), Xr(0, r, n, i);
              }),
              R(n, function (n) {
                var r = ai(t, Q(e, n));
                ni(t, r);
              }),
              er(t.eventQueue_, e, []);
          }
        }
        function Br(t, e, n) {
          t.server_.onDisconnectCancel(e.toString(), function (r, i) {
            "ok" === r && Gn(t.onDisconnect_, e), Xr(0, n, r, i);
          });
        }
        function Gr(t, e, n, r) {
          var i = re(n);
          t.server_.onDisconnectPut(e.toString(), i.val(!0), function (n, o) {
            "ok" === n && Bn(t.onDisconnect_, e, i), Xr(0, r, n, o);
          });
        }
        function Wr(t, e, n, r, i) {
          var o = re(n, r);
          t.server_.onDisconnectPut(e.toString(), o.val(!0), function (n, r) {
            "ok" === n && Bn(t.onDisconnect_, e, o), Xr(0, i, n, r);
          });
        }
        function zr(t, e, n, r) {
          if ((0, o.xb)(n))
            return (
              _(
                "onDisconnect().update() called with empty data.  Don't do anything."
              ),
              void Xr(0, r, "ok", void 0)
            );
          t.server_.onDisconnectMerge(e.toString(), n, function (i, o) {
            "ok" === i &&
              R(n, function (n, r) {
                var i = re(r);
                Bn(t.onDisconnect_, Q(e, n), i);
              }),
              Xr(0, r, i, o);
          });
        }
        function Hr(t, e, n) {
          var r;
          (r =
            ".info" === B(e.path)
              ? _n(t.infoSyncTree_, e, n)
              : _n(t.serverSyncTree_, e, n)),
            tr(t.eventQueue_, e.path, r);
        }
        function Kr(t, e, n) {
          var r;
          (r =
            ".info" === B(e.path)
              ? wn(t.infoSyncTree_, e, n)
              : wn(t.serverSyncTree_, e, n)),
            tr(t.eventQueue_, e.path, r);
        }
        function Jr(t) {
          t.persistentConnection_ && t.persistentConnection_.interrupt(xr);
        }
        function Qr(t) {
          t.persistentConnection_ && t.persistentConnection_.resume(xr);
        }
        function Yr(t) {
          for (var e = [], n = 1; n < arguments.length; n++)
            e[n - 1] = arguments[n];
          var r = "";
          t.persistentConnection_ && (r = t.persistentConnection_.id + ":"),
            _.apply(void 0, (0, i.ev)([r], (0, i.CR)(e)));
        }
        function Xr(t, e, n, r) {
          e &&
            F(function () {
              if ("ok" === n) e(null);
              else {
                var t = (n || "error").toUpperCase(),
                  i = t;
                r && (i += ": " + r);
                var o = new Error(i);
                (o.code = t), e(o);
              }
            });
        }
        function Zr(t) {
          return t.__database || (t.__database = new Ei(t));
        }
        function $r(t, e, n, r, i) {
          Yr(t, "transaction on " + e);
          var s = function () {},
            a = new mi(t, e);
          a.on("value", s);
          var u = {
              path: e,
              update: n,
              onComplete: r,
              status: null,
              order: v(),
              applyLocally: i,
              retryCount: 0,
              unwatcher: function () {
                a.off("value", s);
              },
              abortReason: null,
              currentWriteId: null,
              currentInputSnapshot: null,
              currentOutputSnapshotRaw: null,
              currentOutputSnapshotResolved: null,
            },
            c = ti(t, e, void 0);
          u.currentInputSnapshot = c;
          var h = u.update(c.val());
          if (void 0 === h) {
            if (
              (u.unwatcher(),
              (u.currentOutputSnapshotRaw = null),
              (u.currentOutputSnapshotResolved = null),
              u.onComplete)
            ) {
              var l = new Ir(u.currentInputSnapshot, new mi(t, u.path), Wt);
              u.onComplete(null, !1, l);
            }
          } else {
            St("transaction failed: Data returned ", h, u.path), (u.status = 0);
            var f = Tr(t.transactionQueueTree_, e),
              p = Sr(f) || [];
            p.push(u), Cr(f, p);
            var d = void 0;
            "object" == typeof h && null !== h && (0, o.r3)(h, ".priority")
              ? ((d = (0, o.DV)(h, ".priority")),
                (0, o.hu)(
                  Et(d),
                  "Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null."
                ))
              : (d = (In(t.serverSyncTree_, e) || ee.EMPTY_NODE)
                  .getPriority()
                  .val());
            var g = Mr(t),
              m = re(h, d),
              y = Un(m, c, g);
            (u.currentOutputSnapshotRaw = m),
              (u.currentOutputSnapshotResolved = y),
              (u.currentWriteId = Ur(t));
            var b = mn(
              t.serverSyncTree_,
              e,
              y,
              u.currentWriteId,
              u.applyLocally
            );
            er(t.eventQueue_, e, b), ei(t, t.transactionQueueTree_);
          }
        }
        function ti(t, e, n) {
          return In(t.serverSyncTree_, e, n) || ee.EMPTY_NODE;
        }
        function ei(t, e) {
          if (
            (void 0 === e && (e = t.transactionQueueTree_),
            e || si(t, e),
            Sr(e))
          ) {
            var n = ii(t, e);
            (0, o.hu)(n.length > 0, "Sending zero length transaction queue"),
              n.every(function (t) {
                return 0 === t.status;
              }) &&
                (function (t, e, n) {
                  for (
                    var r = n.map(function (t) {
                        return t.currentWriteId;
                      }),
                      i = ti(t, e, r),
                      s = i,
                      a = i.hash(),
                      u = 0;
                    u < n.length;
                    u++
                  ) {
                    var c = n[u];
                    (0, o.hu)(
                      0 === c.status,
                      "tryToSendTransactionQueue_: items in queue should all be run."
                    ),
                      (c.status = 1),
                      c.retryCount++;
                    var h = X(e, c.path);
                    s = s.updateChild(h, c.currentOutputSnapshotRaw);
                  }
                  var l = s.val(!0),
                    f = e;
                  t.server_.put(
                    f.toString(),
                    l,
                    function (r) {
                      Yr(t, "transaction put response", {
                        path: f.toString(),
                        status: r,
                      });
                      var i = [];
                      if ("ok" === r) {
                        for (var o = [], s = 0; s < n.length; s++) {
                          if (
                            ((n[s].status = 2),
                            (i = i.concat(
                              yn(t.serverSyncTree_, n[s].currentWriteId)
                            )),
                            n[s].onComplete)
                          ) {
                            var a = n[s].currentOutputSnapshotResolved,
                              u = new mi(t, n[s].path),
                              c = new Ir(a, u, Wt);
                            o.push(n[s].onComplete.bind(null, null, !0, c));
                          }
                          n[s].unwatcher();
                        }
                        for (
                          si(t, Tr(t.transactionQueueTree_, e)),
                            ei(t, t.transactionQueueTree_),
                            er(t.eventQueue_, e, i),
                            s = 0;
                          s < o.length;
                          s++
                        )
                          F(o[s]);
                      } else {
                        if ("datastale" === r)
                          for (s = 0; s < n.length; s++)
                            3 === n[s].status
                              ? (n[s].status = 4)
                              : (n[s].status = 0);
                        else
                          for (
                            S(
                              "transaction at " + f.toString() + " failed: " + r
                            ),
                              s = 0;
                            s < n.length;
                            s++
                          )
                            (n[s].status = 4), (n[s].abortReason = r);
                        ni(t, e);
                      }
                    },
                    a
                  );
                })(t, Pr(e), n);
          } else
            kr(e) &&
              Nr(e, function (e) {
                ei(t, e);
              });
        }
        function ni(t, e) {
          var n = ri(t, e),
            r = Pr(n);
          return (
            (function (t, e, n) {
              if (0 !== e.length) {
                for (
                  var r = [],
                    i = [],
                    s = e
                      .filter(function (t) {
                        return 0 === t.status;
                      })
                      .map(function (t) {
                        return t.currentWriteId;
                      }),
                    a = 0;
                  a < e.length;
                  a++
                ) {
                  var u = e[a],
                    c = X(n, u.path),
                    h = !1,
                    l = void 0;
                  if (
                    ((0, o.hu)(
                      null !== c,
                      "rerunTransactionsUnderNode_: relativePath should not be null."
                    ),
                    4 === u.status)
                  )
                    (h = !0),
                      (l = u.abortReason),
                      (i = i.concat(
                        yn(t.serverSyncTree_, u.currentWriteId, !0)
                      ));
                  else if (0 === u.status)
                    if (u.retryCount >= 25)
                      (h = !0),
                        (l = "maxretry"),
                        (i = i.concat(
                          yn(t.serverSyncTree_, u.currentWriteId, !0)
                        ));
                    else {
                      var f = ti(t, u.path, s);
                      u.currentInputSnapshot = f;
                      var p = e[a].update(f.val());
                      if (void 0 !== p) {
                        St("transaction failed: Data returned ", p, u.path);
                        var d = re(p);
                        ("object" == typeof p &&
                          null != p &&
                          (0, o.r3)(p, ".priority")) ||
                          (d = d.updatePriority(f.getPriority()));
                        var v = u.currentWriteId,
                          g = Mr(t),
                          m = Un(d, f, g);
                        (u.currentOutputSnapshotRaw = d),
                          (u.currentOutputSnapshotResolved = m),
                          (u.currentWriteId = Ur(t)),
                          s.splice(s.indexOf(v), 1),
                          (i = (i = i.concat(
                            mn(
                              t.serverSyncTree_,
                              u.path,
                              m,
                              u.currentWriteId,
                              u.applyLocally
                            )
                          )).concat(yn(t.serverSyncTree_, v, !0)));
                      } else
                        (h = !0),
                          (l = "nodata"),
                          (i = i.concat(
                            yn(t.serverSyncTree_, u.currentWriteId, !0)
                          ));
                    }
                  if (
                    (er(t.eventQueue_, n, i),
                    (i = []),
                    h &&
                      ((e[a].status = 2),
                      (_ = e[a].unwatcher),
                      setTimeout(_, Math.floor(0)),
                      e[a].onComplete))
                  )
                    if ("nodata" === l) {
                      var y = new mi(t, e[a].path),
                        b = e[a].currentInputSnapshot,
                        w = new Ir(b, y, Wt);
                      r.push(e[a].onComplete.bind(null, null, !1, w));
                    } else
                      r.push(
                        e[a].onComplete.bind(null, new Error(l), !1, null)
                      );
                }
                var _;
                for (si(t, t.transactionQueueTree_), a = 0; a < r.length; a++)
                  F(r[a]);
                ei(t, t.transactionQueueTree_);
              }
            })(t, ii(t, n), r),
            r
          );
        }
        function ri(t, e) {
          var n,
            r = t.transactionQueueTree_;
          for (n = B(e); null !== n && void 0 === Sr(r); )
            (r = Tr(r, n)), (n = B((e = W(e))));
          return r;
        }
        function ii(t, e) {
          var n = [];
          return (
            oi(t, e, n),
            n.sort(function (t, e) {
              return t.order - e.order;
            }),
            n
          );
        }
        function oi(t, e, n) {
          var r = Sr(e);
          if (r) for (var i = 0; i < r.length; i++) n.push(r[i]);
          Nr(e, function (e) {
            oi(t, e, n);
          });
        }
        function si(t, e) {
          var n = Sr(e);
          if (n) {
            for (var r = 0, i = 0; i < n.length; i++)
              2 !== n[i].status && ((n[r] = n[i]), r++);
            (n.length = r), Cr(e, n.length > 0 ? n : void 0);
          }
          Nr(e, function (e) {
            si(t, e);
          });
        }
        function ai(t, e) {
          var n = Pr(ri(t, e)),
            r = Tr(t.transactionQueueTree_, e);
          return (
            (function (t, e, n) {
              for (var r = t.parent; null !== r; ) {
                if (e(r)) return !0;
                r = r.parent;
              }
            })(r, function (e) {
              ui(t, e);
            }),
            ui(t, r),
            Ar(r, function (e) {
              ui(t, e);
            }),
            n
          );
        }
        function ui(t, e) {
          var n = Sr(e);
          if (n) {
            for (var r = [], i = [], s = -1, a = 0; a < n.length; a++)
              3 === n[a].status ||
                (1 === n[a].status
                  ? ((0, o.hu)(
                      s === a - 1,
                      "All SENT items should be at beginning of queue."
                    ),
                    (s = a),
                    (n[a].status = 3),
                    (n[a].abortReason = "set"))
                  : ((0, o.hu)(
                      0 === n[a].status,
                      "Unexpected transaction status in abort"
                    ),
                    n[a].unwatcher(),
                    (i = i.concat(
                      yn(t.serverSyncTree_, n[a].currentWriteId, !0)
                    )),
                    n[a].onComplete &&
                      r.push(
                        n[a].onComplete.bind(null, new Error("set"), !1, null)
                      )));
            for (
              -1 === s ? Cr(e, void 0) : (n.length = s + 1),
                er(t.eventQueue_, Pr(e), i),
                a = 0;
              a < r.length;
              a++
            )
              F(r[a]);
          }
        }
        var ci,
          hi = (function () {
            function t(t, e) {
              (this.repo_ = t), (this.path_ = e);
            }
            return (
              (t.prototype.cancel = function (t) {
                (0, o.Dv)("OnDisconnect.cancel", 0, 1, arguments.length),
                  (0, o.Wj)("OnDisconnect.cancel", 1, t, !0);
                var e = new o.BH();
                return Br(this.repo_, this.path_, e.wrapCallback(t)), e.promise;
              }),
              (t.prototype.remove = function (t) {
                (0, o.Dv)("OnDisconnect.remove", 0, 1, arguments.length),
                  xt("OnDisconnect.remove", this.path_),
                  (0, o.Wj)("OnDisconnect.remove", 1, t, !0);
                var e = new o.BH();
                return (
                  Gr(this.repo_, this.path_, null, e.wrapCallback(t)), e.promise
                );
              }),
              (t.prototype.set = function (t, e) {
                (0, o.Dv)("OnDisconnect.set", 1, 2, arguments.length),
                  xt("OnDisconnect.set", this.path_),
                  Tt("OnDisconnect.set", 1, t, this.path_, !1),
                  (0, o.Wj)("OnDisconnect.set", 2, e, !0);
                var n = new o.BH();
                return (
                  Gr(this.repo_, this.path_, t, n.wrapCallback(e)), n.promise
                );
              }),
              (t.prototype.setWithPriority = function (t, e, n) {
                (0, o.Dv)(
                  "OnDisconnect.setWithPriority",
                  2,
                  3,
                  arguments.length
                ),
                  xt("OnDisconnect.setWithPriority", this.path_),
                  Tt("OnDisconnect.setWithPriority", 1, t, this.path_, !1),
                  kt("OnDisconnect.setWithPriority", 2, e, !1),
                  (0, o.Wj)("OnDisconnect.setWithPriority", 3, n, !0);
                var r = new o.BH();
                return (
                  Wr(this.repo_, this.path_, t, e, r.wrapCallback(n)), r.promise
                );
              }),
              (t.prototype.update = function (t, e) {
                if (
                  ((0, o.Dv)("OnDisconnect.update", 1, 2, arguments.length),
                  xt("OnDisconnect.update", this.path_),
                  Array.isArray(t))
                ) {
                  for (var n = {}, r = 0; r < t.length; ++r) n["" + r] = t[r];
                  (t = n),
                    S(
                      "Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children."
                    );
                }
                Ct("OnDisconnect.update", 1, t, this.path_, !1),
                  (0, o.Wj)("OnDisconnect.update", 2, e, !0);
                var i = new o.BH();
                return (
                  zr(this.repo_, this.path_, t, i.wrapCallback(e)), i.promise
                );
              }),
              t
            );
          })(),
          li = (function () {
            function t(t, e) {
              (this.committed = t), (this.snapshot = e);
            }
            return (
              (t.prototype.toJSON = function () {
                return (
                  (0, o.Dv)("TransactionResult.toJSON", 0, 1, arguments.length),
                  {
                    committed: this.committed,
                    snapshot: this.snapshot.toJSON(),
                  }
                );
              }),
              t
            );
          })(),
          fi = (function () {
            function t(t, e, n, r) {
              (this.eventType = t),
                (this.eventRegistration = e),
                (this.snapshot = n),
                (this.prevName = r);
            }
            return (
              (t.prototype.getPath = function () {
                var t = this.snapshot.getRef();
                return "value" === this.eventType ? t.path : t.getParent().path;
              }),
              (t.prototype.getEventType = function () {
                return this.eventType;
              }),
              (t.prototype.getEventRunner = function () {
                return this.eventRegistration.getEventRunner(this);
              }),
              (t.prototype.toString = function () {
                return (
                  this.getPath().toString() +
                  ":" +
                  this.eventType +
                  ":" +
                  (0, o.Pz)(this.snapshot.exportVal())
                );
              }),
              t
            );
          })(),
          pi = (function () {
            function t(t, e, n) {
              (this.eventRegistration = t), (this.error = e), (this.path = n);
            }
            return (
              (t.prototype.getPath = function () {
                return this.path;
              }),
              (t.prototype.getEventType = function () {
                return "cancel";
              }),
              (t.prototype.getEventRunner = function () {
                return this.eventRegistration.getEventRunner(this);
              }),
              (t.prototype.toString = function () {
                return this.path.toString() + ":cancel";
              }),
              t
            );
          })(),
          di = (function () {
            function t(t, e, n) {
              (this.callback_ = t),
                (this.cancelCallback_ = e),
                (this.context_ = n);
            }
            return (
              (t.prototype.respondsTo = function (t) {
                return "value" === t;
              }),
              (t.prototype.createEvent = function (t, e) {
                var n = e.getQueryParams().getIndex();
                return new fi(
                  "value",
                  this,
                  new Ir(t.snapshotNode, e.getRef(), n)
                );
              }),
              (t.prototype.getEventRunner = function (t) {
                var e = this.context_;
                if ("cancel" === t.getEventType()) {
                  (0, o.hu)(
                    this.cancelCallback_,
                    "Raising a cancel event on a listener with no cancel callback"
                  );
                  var n = this.cancelCallback_;
                  return function () {
                    n.call(e, t.error);
                  };
                }
                var r = this.callback_;
                return function () {
                  r.call(e, t.snapshot);
                };
              }),
              (t.prototype.createCancelEvent = function (t, e) {
                return this.cancelCallback_ ? new pi(this, t, e) : null;
              }),
              (t.prototype.matches = function (e) {
                return (
                  e instanceof t &&
                  (!e.callback_ ||
                    !this.callback_ ||
                    (e.callback_ === this.callback_ &&
                      e.context_ === this.context_))
                );
              }),
              (t.prototype.hasAnyCallback = function () {
                return null !== this.callback_;
              }),
              t
            );
          })(),
          vi = (function () {
            function t(t, e, n) {
              (this.callbacks_ = t),
                (this.cancelCallback_ = e),
                (this.context_ = n);
            }
            return (
              (t.prototype.respondsTo = function (t) {
                var e = "children_added" === t ? "child_added" : t;
                return (
                  (e = "children_removed" === e ? "child_removed" : e),
                  (0, o.r3)(this.callbacks_, e)
                );
              }),
              (t.prototype.createCancelEvent = function (t, e) {
                return this.cancelCallback_ ? new pi(this, t, e) : null;
              }),
              (t.prototype.createEvent = function (t, e) {
                (0, o.hu)(
                  null != t.childName,
                  "Child events should have a childName."
                );
                var n = e.getRef().child(t.childName),
                  r = e.getQueryParams().getIndex();
                return new fi(
                  t.type,
                  this,
                  new Ir(t.snapshotNode, n, r),
                  t.prevName
                );
              }),
              (t.prototype.getEventRunner = function (t) {
                var e = this.context_;
                if ("cancel" === t.getEventType()) {
                  (0, o.hu)(
                    this.cancelCallback_,
                    "Raising a cancel event on a listener with no cancel callback"
                  );
                  var n = this.cancelCallback_;
                  return function () {
                    n.call(e, t.error);
                  };
                }
                var r = this.callbacks_[t.eventType];
                return function () {
                  r.call(e, t.snapshot, t.prevName);
                };
              }),
              (t.prototype.matches = function (e) {
                var n = this;
                if (e instanceof t) {
                  if (!this.callbacks_ || !e.callbacks_) return !0;
                  if (this.context_ === e.context_) {
                    var r = Object.keys(e.callbacks_),
                      i = Object.keys(this.callbacks_),
                      o = r.length;
                    if (o === i.length) {
                      if (1 === o) {
                        var s = r[0],
                          a = i[0];
                        return !(
                          a !== s ||
                          (e.callbacks_[s] &&
                            this.callbacks_[a] &&
                            e.callbacks_[s] !== this.callbacks_[a])
                        );
                      }
                      return i.every(function (t) {
                        return e.callbacks_[t] === n.callbacks_[t];
                      });
                    }
                  }
                }
                return !1;
              }),
              (t.prototype.hasAnyCallback = function () {
                return null !== this.callbacks_;
              }),
              t
            );
          })(),
          gi = (function () {
            function t(t, e, n, r) {
              (this.repo = t),
                (this.path = e),
                (this.queryParams_ = n),
                (this.orderByCalled_ = r);
            }
            return (
              Object.defineProperty(t, "__referenceConstructor", {
                get: function () {
                  return (0, o.hu)(ci, "Reference.ts has not been loaded"), ci;
                },
                set: function (t) {
                  ci = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.validateQueryEndpoints_ = function (t) {
                var e = null,
                  n = null;
                if (
                  (t.hasStart() && (e = t.getIndexStartValue()),
                  t.hasEnd() && (n = t.getIndexEndValue()),
                  t.getIndex() === Ht)
                ) {
                  var r =
                      "Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",
                    i =
                      "Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";
                  if (t.hasStart()) {
                    if (t.getIndexStartName() !== k) throw new Error(r);
                    if ("string" != typeof e) throw new Error(i);
                  }
                  if (t.hasEnd()) {
                    if (t.getIndexEndName() !== N) throw new Error(r);
                    if ("string" != typeof n) throw new Error(i);
                  }
                } else if (t.getIndex() === Wt) {
                  if ((null != e && !Et(e)) || (null != n && !Et(n)))
                    throw new Error(
                      "Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string)."
                    );
                } else if (
                  ((0, o.hu)(
                    t.getIndex() instanceof xe || t.getIndex() === De,
                    "unknown index type."
                  ),
                  (null != e && "object" == typeof e) ||
                    (null != n && "object" == typeof n))
                )
                  throw new Error(
                    "Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object."
                  );
              }),
              (t.validateLimit_ = function (t) {
                if (
                  t.hasStart() &&
                  t.hasEnd() &&
                  t.hasLimit() &&
                  !t.hasAnchoredLimit()
                )
                  throw new Error(
                    "Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead."
                  );
              }),
              (t.prototype.validateNoPreviousOrderByCall_ = function (t) {
                if (!0 === this.orderByCalled_)
                  throw new Error(
                    t + ": You can't combine multiple orderBy calls."
                  );
              }),
              (t.prototype.getQueryParams = function () {
                return this.queryParams_;
              }),
              (t.prototype.getRef = function () {
                return (
                  (0, o.Dv)("Query.ref", 0, 0, arguments.length),
                  new t.__referenceConstructor(this.repo, this.path)
                );
              }),
              (t.prototype.on = function (e, n, r, i) {
                (0, o.Dv)("Query.on", 2, 4, arguments.length),
                  Nt("Query.on", 1, e, !1),
                  (0, o.Wj)("Query.on", 2, n, !1);
                var s = t.getCancelAndContextArgs_("Query.on", r, i);
                if ("value" === e) this.onValueEvent(n, s.cancel, s.context);
                else {
                  var a = {};
                  (a[e] = n), this.onChildEvent(a, s.cancel, s.context);
                }
                return n;
              }),
              (t.prototype.onValueEvent = function (t, e, n) {
                var r = new di(t, e || null, n || null);
                Hr(this.repo, this, r);
              }),
              (t.prototype.onChildEvent = function (t, e, n) {
                var r = new vi(t, e, n);
                Hr(this.repo, this, r);
              }),
              (t.prototype.off = function (t, e, n) {
                (0, o.Dv)("Query.off", 0, 3, arguments.length),
                  Nt("Query.off", 1, t, !0),
                  (0, o.Wj)("Query.off", 2, e, !0),
                  (0, o.lb)("Query.off", 3, n, !0);
                var r = null,
                  i = null;
                if ("value" === t) {
                  var s = e || null;
                  r = new di(s, null, n || null);
                } else
                  t &&
                    (e && ((i = {})[t] = e), (r = new vi(i, null, n || null)));
                Kr(this.repo, this, r);
              }),
              (t.prototype.get = function () {
                return (
                  (t = this.repo),
                  (e = this),
                  null !=
                  (n = (function (t, e) {
                    var n = e.path,
                      r = null;
                    t.syncPointTree_.foreachOnPath(n, function (t, e) {
                      var i = X(t, n);
                      r = r || Ye(e, i);
                    });
                    var i = t.syncPointTree_.get(n);
                    i
                      ? (r = r || Ye(i, q()))
                      : ((i = new He()),
                        (t.syncPointTree_ = t.syncPointTree_.set(n, i)));
                    var o = null != r,
                      s = o ? new le(r, !0, !1) : null;
                    return Je(
                      i,
                      e,
                      t.pendingWriteTree_.childWrites(e.path),
                      o ? s.getNode() : ee.EMPTY_NODE,
                      o
                    ).getCompleteNode();
                  })(t.serverSyncTree_, e))
                    ? Promise.resolve(
                        new Ir(n, e.getRef(), e.getQueryParams().getIndex())
                      )
                    : t.server_.get(e).then(
                        function (n) {
                          var r = re(n),
                            i = bn(t.serverSyncTree_, e.path, r);
                          return (
                            tr(t.eventQueue_, e.path, i),
                            Promise.resolve(
                              new Ir(
                                r,
                                e.getRef(),
                                e.getQueryParams().getIndex()
                              )
                            )
                          );
                        },
                        function (n) {
                          return (
                            Yr(
                              t,
                              "get for query " + (0, o.Pz)(e) + " failed: " + n
                            ),
                            Promise.reject(new Error(n))
                          );
                        }
                      )
                );
                var t, e, n;
              }),
              (t.prototype.once = function (e, n, r, i) {
                var s = this;
                (0, o.Dv)("Query.once", 1, 4, arguments.length),
                  Nt("Query.once", 1, e, !1),
                  (0, o.Wj)("Query.once", 2, n, !0);
                var a = t.getCancelAndContextArgs_("Query.once", r, i),
                  u = !0,
                  c = new o.BH();
                c.promise.catch(function () {});
                var h = function (t) {
                  u &&
                    ((u = !1),
                    s.off(e, h),
                    n && n.bind(a.context)(t),
                    c.resolve(t));
                };
                return (
                  this.on(e, h, function (t) {
                    s.off(e, h),
                      a.cancel && a.cancel.bind(a.context)(t),
                      c.reject(t);
                  }),
                  c.promise
                );
              }),
              (t.prototype.limitToFirst = function (e) {
                if (
                  ((0, o.Dv)("Query.limitToFirst", 1, 1, arguments.length),
                  "number" != typeof e || Math.floor(e) !== e || e <= 0)
                )
                  throw new Error(
                    "Query.limitToFirst: First argument must be a positive integer."
                  );
                if (this.queryParams_.hasLimit())
                  throw new Error(
                    "Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast)."
                  );
                return new t(
                  this.repo,
                  this.path,
                  Le(this.queryParams_, e),
                  this.orderByCalled_
                );
              }),
              (t.prototype.limitToLast = function (e) {
                if (
                  ((0, o.Dv)("Query.limitToLast", 1, 1, arguments.length),
                  "number" != typeof e || Math.floor(e) !== e || e <= 0)
                )
                  throw new Error(
                    "Query.limitToLast: First argument must be a positive integer."
                  );
                if (this.queryParams_.hasLimit())
                  throw new Error(
                    "Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast)."
                  );
                return new t(
                  this.repo,
                  this.path,
                  je(this.queryParams_, e),
                  this.orderByCalled_
                );
              }),
              (t.prototype.orderByChild = function (e) {
                if (
                  ((0, o.Dv)("Query.orderByChild", 1, 1, arguments.length),
                  "$key" === e)
                )
                  throw new Error(
                    'Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.'
                  );
                if ("$priority" === e)
                  throw new Error(
                    'Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.'
                  );
                if ("$value" === e)
                  throw new Error(
                    'Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.'
                  );
                Pt("Query.orderByChild", 1, e, !1),
                  this.validateNoPreviousOrderByCall_("Query.orderByChild");
                var n = new V(e);
                if (Y(n))
                  throw new Error(
                    "Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead."
                  );
                var r = new xe(n),
                  i = Be(this.queryParams_, r);
                return (
                  t.validateQueryEndpoints_(i),
                  new t(this.repo, this.path, i, !0)
                );
              }),
              (t.prototype.orderByKey = function () {
                (0, o.Dv)("Query.orderByKey", 0, 0, arguments.length),
                  this.validateNoPreviousOrderByCall_("Query.orderByKey");
                var e = Be(this.queryParams_, Ht);
                return (
                  t.validateQueryEndpoints_(e),
                  new t(this.repo, this.path, e, !0)
                );
              }),
              (t.prototype.orderByPriority = function () {
                (0, o.Dv)("Query.orderByPriority", 0, 0, arguments.length),
                  this.validateNoPreviousOrderByCall_("Query.orderByPriority");
                var e = Be(this.queryParams_, Wt);
                return (
                  t.validateQueryEndpoints_(e),
                  new t(this.repo, this.path, e, !0)
                );
              }),
              (t.prototype.orderByValue = function () {
                (0, o.Dv)("Query.orderByValue", 0, 0, arguments.length),
                  this.validateNoPreviousOrderByCall_("Query.orderByValue");
                var e = Be(this.queryParams_, De);
                return (
                  t.validateQueryEndpoints_(e),
                  new t(this.repo, this.path, e, !0)
                );
              }),
              (t.prototype.startAt = function (e, n) {
                void 0 === e && (e = null),
                  (0, o.Dv)("Query.startAt", 0, 2, arguments.length),
                  Tt("Query.startAt", 1, e, this.path, !0),
                  At("Query.startAt", 2, n, !0);
                var r = Fe(this.queryParams_, e, n);
                if (
                  (t.validateLimit_(r),
                  t.validateQueryEndpoints_(r),
                  this.queryParams_.hasStart())
                )
                  throw new Error(
                    "Query.startAt: Starting point was already set (by another call to startAt or equalTo)."
                  );
                return (
                  void 0 === e && ((e = null), (n = null)),
                  new t(this.repo, this.path, r, this.orderByCalled_)
                );
              }),
              (t.prototype.startAfter = function (e, n) {
                void 0 === e && (e = null),
                  (0, o.Dv)("Query.startAfter", 0, 2, arguments.length),
                  Tt("Query.startAfter", 1, e, this.path, !1),
                  At("Query.startAfter", 2, n, !0);
                var r = Ue(this.queryParams_, e, n);
                if (
                  (t.validateLimit_(r),
                  t.validateQueryEndpoints_(r),
                  this.queryParams_.hasStart())
                )
                  throw new Error(
                    "Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo)."
                  );
                return new t(this.repo, this.path, r, this.orderByCalled_);
              }),
              (t.prototype.endAt = function (e, n) {
                void 0 === e && (e = null),
                  (0, o.Dv)("Query.endAt", 0, 2, arguments.length),
                  Tt("Query.endAt", 1, e, this.path, !0),
                  At("Query.endAt", 2, n, !0);
                var r = Ve(this.queryParams_, e, n);
                if (
                  (t.validateLimit_(r),
                  t.validateQueryEndpoints_(r),
                  this.queryParams_.hasEnd())
                )
                  throw new Error(
                    "Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo)."
                  );
                return new t(this.repo, this.path, r, this.orderByCalled_);
              }),
              (t.prototype.endBefore = function (e, n) {
                void 0 === e && (e = null),
                  (0, o.Dv)("Query.endBefore", 0, 2, arguments.length),
                  Tt("Query.endBefore", 1, e, this.path, !1),
                  At("Query.endBefore", 2, n, !0);
                var r = qe(this.queryParams_, e, n);
                if (
                  (t.validateLimit_(r),
                  t.validateQueryEndpoints_(r),
                  this.queryParams_.hasEnd())
                )
                  throw new Error(
                    "Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo)."
                  );
                return new t(this.repo, this.path, r, this.orderByCalled_);
              }),
              (t.prototype.equalTo = function (t, e) {
                if (
                  ((0, o.Dv)("Query.equalTo", 1, 2, arguments.length),
                  Tt("Query.equalTo", 1, t, this.path, !1),
                  At("Query.equalTo", 2, e, !0),
                  this.queryParams_.hasStart())
                )
                  throw new Error(
                    "Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo)."
                  );
                if (this.queryParams_.hasEnd())
                  throw new Error(
                    "Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo)."
                  );
                return this.startAt(t, e).endAt(t, e);
              }),
              (t.prototype.toString = function () {
                return (
                  (0, o.Dv)("Query.toString", 0, 0, arguments.length),
                  this.repo.toString() + H(this.path)
                );
              }),
              (t.prototype.toJSON = function () {
                return (
                  (0, o.Dv)("Query.toJSON", 0, 1, arguments.length),
                  this.toString()
                );
              }),
              (t.prototype.queryObject = function () {
                return (function (t) {
                  var e = {};
                  if (
                    (t.startSet_ &&
                      ((e.sp = t.indexStartValue_),
                      t.startNameSet_ && (e.sn = t.indexStartName_)),
                    t.endSet_ &&
                      ((e.ep = t.indexEndValue_),
                      t.endNameSet_ && (e.en = t.indexEndName_)),
                    t.limitSet_)
                  ) {
                    e.l = t.limit_;
                    var n = t.viewFrom_;
                    "" === n && (n = t.isViewFromLeft() ? "l" : "r"),
                      (e.vf = n);
                  }
                  return t.index_ !== Wt && (e.i = t.index_.toString()), e;
                })(this.queryParams_);
              }),
              (t.prototype.queryIdentifier = function () {
                var t = this.queryObject(),
                  e = x(t);
                return "{}" === e ? "default" : e;
              }),
              (t.prototype.isEqual = function (e) {
                if (
                  ((0, o.Dv)("Query.isEqual", 1, 1, arguments.length),
                  !(e instanceof t))
                ) {
                  var n =
                    "Query.isEqual failed: First argument must be an instance of firebase.database.Query.";
                  throw new Error(n);
                }
                var r = this.repo === e.repo,
                  i = $(this.path, e.path),
                  s = this.queryIdentifier() === e.queryIdentifier();
                return r && i && s;
              }),
              (t.getCancelAndContextArgs_ = function (t, e, n) {
                var r = { cancel: null, context: null };
                if (e && n)
                  (r.cancel = e),
                    (0, o.Wj)(t, 3, r.cancel, !0),
                    (r.context = n),
                    (0, o.lb)(t, 4, r.context, !0);
                else if (e)
                  if ("object" == typeof e && null !== e) r.context = e;
                  else {
                    if ("function" != typeof e)
                      throw new Error(
                        (0, o.gK)(t, 3, !0) +
                          " must either be a cancel callback or a context object."
                      );
                    r.cancel = e;
                  }
                return r;
              }),
              Object.defineProperty(t.prototype, "ref", {
                get: function () {
                  return this.getRef();
                },
                enumerable: !1,
                configurable: !0,
              }),
              t
            );
          })(),
          mi = (function (t) {
            function e(e, n) {
              if (!(e instanceof Or))
                throw new Error(
                  "new Reference() no longer supported - use app.database()."
                );
              return t.call(this, e, n, new Me(), !1) || this;
            }
            return (
              (0, i.ZT)(e, t),
              (e.prototype.getKey = function () {
                return (
                  (0, o.Dv)("Reference.key", 0, 0, arguments.length),
                  Y(this.path) ? null : z(this.path)
                );
              }),
              (e.prototype.child = function (t) {
                return (
                  (0, o.Dv)("Reference.child", 1, 1, arguments.length),
                  "number" == typeof t
                    ? (t = String(t))
                    : t instanceof V ||
                      (null === B(this.path)
                        ? Dt("Reference.child", 1, t, !1)
                        : Pt("Reference.child", 1, t, !1)),
                  new e(this.repo, Q(this.path, t))
                );
              }),
              (e.prototype.getParent = function () {
                (0, o.Dv)("Reference.parent", 0, 0, arguments.length);
                var t = J(this.path);
                return null === t ? null : new e(this.repo, t);
              }),
              (e.prototype.getRoot = function () {
                (0, o.Dv)("Reference.root", 0, 0, arguments.length);
                for (var t = this; null !== t.getParent(); ) t = t.getParent();
                return t;
              }),
              (e.prototype.databaseProp = function () {
                return Zr(this.repo);
              }),
              (e.prototype.set = function (t, e) {
                (0, o.Dv)("Reference.set", 1, 2, arguments.length),
                  xt("Reference.set", this.path),
                  Tt("Reference.set", 1, t, this.path, !1),
                  (0, o.Wj)("Reference.set", 2, e, !0);
                var n = new o.BH();
                return (
                  Vr(this.repo, this.path, t, null, n.wrapCallback(e)),
                  n.promise
                );
              }),
              (e.prototype.update = function (t, e) {
                if (
                  ((0, o.Dv)("Reference.update", 1, 2, arguments.length),
                  xt("Reference.update", this.path),
                  Array.isArray(t))
                ) {
                  for (var n = {}, r = 0; r < t.length; ++r) n["" + r] = t[r];
                  (t = n),
                    S(
                      "Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children."
                    );
                }
                Ct("Reference.update", 1, t, this.path, !1),
                  (0, o.Wj)("Reference.update", 2, e, !0);
                var i = new o.BH();
                return (
                  qr(this.repo, this.path, t, i.wrapCallback(e)), i.promise
                );
              }),
              (e.prototype.setWithPriority = function (t, e, n) {
                if (
                  ((0, o.Dv)(
                    "Reference.setWithPriority",
                    2,
                    3,
                    arguments.length
                  ),
                  xt("Reference.setWithPriority", this.path),
                  Tt("Reference.setWithPriority", 1, t, this.path, !1),
                  kt("Reference.setWithPriority", 2, e, !1),
                  (0, o.Wj)("Reference.setWithPriority", 3, n, !0),
                  ".length" === this.getKey() || ".keys" === this.getKey())
                )
                  throw (
                    "Reference.setWithPriority failed: " +
                    this.getKey() +
                    " is a read-only object."
                  );
                var r = new o.BH();
                return (
                  Vr(this.repo, this.path, t, e, r.wrapCallback(n)), r.promise
                );
              }),
              (e.prototype.remove = function (t) {
                return (
                  (0, o.Dv)("Reference.remove", 0, 1, arguments.length),
                  xt("Reference.remove", this.path),
                  (0, o.Wj)("Reference.remove", 1, t, !0),
                  this.set(null, t)
                );
              }),
              (e.prototype.transaction = function (t, e, n) {
                if (
                  ((0, o.Dv)("Reference.transaction", 1, 3, arguments.length),
                  xt("Reference.transaction", this.path),
                  (0, o.Wj)("Reference.transaction", 1, t, !1),
                  (0, o.Wj)("Reference.transaction", 2, e, !0),
                  Rt("Reference.transaction", 3, n, !0),
                  ".length" === this.getKey() || ".keys" === this.getKey())
                )
                  throw (
                    "Reference.transaction failed: " +
                    this.getKey() +
                    " is a read-only object."
                  );
                void 0 === n && (n = !0);
                var r = new o.BH();
                "function" == typeof e && r.promise.catch(function () {});
                var i = function (t, n, i) {
                  t ? r.reject(t) : r.resolve(new li(n, i)),
                    "function" == typeof e && e(t, n, i);
                };
                return $r(this.repo, this.path, t, i, n), r.promise;
              }),
              (e.prototype.setPriority = function (t, e) {
                (0, o.Dv)("Reference.setPriority", 1, 2, arguments.length),
                  xt("Reference.setPriority", this.path),
                  kt("Reference.setPriority", 1, t, !1),
                  (0, o.Wj)("Reference.setPriority", 2, e, !0);
                var n = new o.BH();
                return (
                  Vr(
                    this.repo,
                    Q(this.path, ".priority"),
                    t,
                    null,
                    n.wrapCallback(e)
                  ),
                  n.promise
                );
              }),
              (e.prototype.push = function (t, e) {
                (0, o.Dv)("Reference.push", 0, 2, arguments.length),
                  xt("Reference.push", this.path),
                  Tt("Reference.push", 1, t, this.path, !0),
                  (0, o.Wj)("Reference.push", 2, e, !0);
                var n,
                  r = Rr(this.repo),
                  i = Ne(r),
                  s = this.child(i),
                  a = this.child(i);
                return (
                  (n =
                    null != t
                      ? s.set(t, e).then(function () {
                          return a;
                        })
                      : Promise.resolve(a)),
                  (s.then = n.then.bind(n)),
                  (s.catch = n.then.bind(n, void 0)),
                  "function" == typeof e && n.catch(function () {}),
                  s
                );
              }),
              (e.prototype.onDisconnect = function () {
                return (
                  xt("Reference.onDisconnect", this.path),
                  new hi(this.repo, this.path)
                );
              }),
              Object.defineProperty(e.prototype, "database", {
                get: function () {
                  return this.databaseProp();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "key", {
                get: function () {
                  return this.getKey();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "parent", {
                get: function () {
                  return this.getParent();
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(e.prototype, "root", {
                get: function () {
                  return this.getRoot();
                },
                enumerable: !1,
                configurable: !0,
              }),
              e
            );
          })(gi);
        (gi.__referenceConstructor = mi),
          (function (t) {
            (0, o.hu)(!We, "__referenceConstructor has already been defined"),
              (We = t);
          })(mi);
        var yi = (function () {
            function t(t, e) {
              var n = this;
              (this.app_ = t),
                (this.authProvider_ = e),
                (this.auth_ = null),
                (this.auth_ = e.getImmediate({ optional: !0 })),
                this.auth_ ||
                  e.get().then(function (t) {
                    return (n.auth_ = t);
                  });
            }
            return (
              (t.prototype.getToken = function (t) {
                return this.auth_
                  ? this.auth_.getToken(t).catch(function (t) {
                      return t && "auth/token-not-initialized" === t.code
                        ? (_(
                            "Got auth/token-not-initialized error.  Treating as null token."
                          ),
                          null)
                        : Promise.reject(t);
                    })
                  : Promise.resolve(null);
              }),
              (t.prototype.addTokenChangeListener = function (t) {
                this.auth_
                  ? this.auth_.addAuthTokenListener(t)
                  : (setTimeout(function () {
                      return t(null);
                    }, 0),
                    this.authProvider_.get().then(function (e) {
                      return e.addAuthTokenListener(t);
                    }));
              }),
              (t.prototype.removeTokenChangeListener = function (t) {
                this.authProvider_.get().then(function (e) {
                  return e.removeAuthTokenListener(t);
                });
              }),
              (t.prototype.notifyForInvalidToken = function () {
                var t =
                  'Provided authentication credentials for the app named "' +
                  this.app_.name +
                  '" are invalid. This usually indicates your app was not initialized correctly. ';
                "credential" in this.app_.options
                  ? (t +=
                      'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.')
                  : "serviceAccount" in this.app_.options
                  ? (t +=
                      'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.')
                  : (t +=
                      'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.'),
                  S(t);
              }),
              t
            );
          })(),
          bi = (function () {
            function t() {}
            return (
              (t.prototype.getToken = function (e) {
                return Promise.resolve({ accessToken: t.EMULATOR_AUTH_TOKEN });
              }),
              (t.prototype.addTokenChangeListener = function (e) {
                e(t.EMULATOR_AUTH_TOKEN);
              }),
              (t.prototype.removeTokenChangeListener = function (t) {}),
              (t.prototype.notifyForInvalidToken = function () {}),
              (t.EMULATOR_AUTH_TOKEN = "owner"),
              t
            );
          })(),
          wi = {},
          _i = !1;
        function Ii(t, e, n, r) {
          var i = n || t.options.databaseURL;
          void 0 === i &&
            (t.options.projectId ||
              T(
                "Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."
              ),
            _("Using default host for project ", t.options.projectId),
            (i = t.options.projectId + "-default-rtdb.firebaseio.com"));
          var s,
            a = gt(i, r),
            u = a.repoInfo,
            c = void 0;
          "undefined" != typeof process &&
            (c = process.env.FIREBASE_DATABASE_EMULATOR_HOST),
            c
              ? ((s = !0),
                (i = "http://" + c + "?ns=" + u.namespace),
                (u = (a = gt(i, r)).repoInfo))
              : (s = !a.repoInfo.secure);
          var h = r && s ? new bi() : new yi(t, e);
          return (
            Ot("Invalid Firebase Database URL", 1, a),
            Y(a.path) ||
              T(
                "Database URL must point to the root of a Firebase Database (not including a child path)."
              ),
            Zr(
              (function (t, e, n) {
                var r = (0, o.DV)(wi, e.name);
                r || ((r = {}), (wi[e.name] = r));
                var i = (0, o.DV)(r, t.toURLString());
                return (
                  i &&
                    T(
                      "Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."
                    ),
                  (i = new Or(t, _i, e, n)),
                  (r[t.toURLString()] = i),
                  i
                );
              })(u, t, h)
            )
          );
        }
        var Ei = (function () {
            function t(t) {
              var e = this;
              (this.repoInternal_ = t),
                (this.instanceStarted_ = !1),
                (this.INTERNAL = {
                  delete: function () {
                    return (0, i.mG)(e, void 0, void 0, function () {
                      return (0, i.Jh)(this, function (t) {
                        var e, n;
                        return (
                          this.checkDeleted_("delete"),
                          (e = this.repo_),
                          ((n = (0, o.DV)(wi, e.app.name)) &&
                            (0, o.DV)(n, e.key) === e) ||
                            T(
                              "Database " +
                                e.app.name +
                                "(" +
                                e.repoInfo_ +
                                ") has already been deleted."
                            ),
                          Jr(e),
                          delete n[e.key],
                          (this.repoInternal_ = null),
                          (this.rootInternal_ = null),
                          [2]
                        );
                      });
                    });
                  },
                }),
                t instanceof Or ||
                  T(
                    "Don't call new Database() directly - please use firebase.database()."
                  );
            }
            return (
              Object.defineProperty(t.prototype, "repo_", {
                get: function () {
                  return (
                    this.instanceStarted_ ||
                      ((function (t) {
                        if (
                          ((t.stats_ = Qn(t.repoInfo_)),
                          t.forceRestClient_ ||
                            (
                              ("object" == typeof window &&
                                window.navigator &&
                                window.navigator.userAgent) ||
                              ""
                            ).search(
                              /googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i
                            ) >= 0)
                        )
                          (t.server_ = new _r(
                            t.repoInfo_,
                            function (e, n, r, i) {
                              Lr(t, e, n, r, i);
                            },
                            t.authTokenProvider_
                          )),
                            setTimeout(function () {
                              return jr(t, !0);
                            }, 0);
                        else {
                          var e = t.app.options.databaseAuthVariableOverride;
                          if (null != e) {
                            if ("object" != typeof e)
                              throw new Error(
                                "Only objects are supported for option databaseAuthVariableOverride"
                              );
                            try {
                              (0, o.Pz)(e);
                            } catch (t) {
                              throw new Error(
                                "Invalid authOverride provided: " + t
                              );
                            }
                          }
                          (t.persistentConnection_ = new wr(
                            t.repoInfo_,
                            t.app.options.appId,
                            function (e, n, r, i) {
                              Lr(t, e, n, r, i);
                            },
                            function (e) {
                              jr(t, e);
                            },
                            function (e) {
                              !(function (t, e) {
                                R(e, function (e, n) {
                                  Fr(t, e, n);
                                });
                              })(t, e);
                            },
                            t.authTokenProvider_,
                            e
                          )),
                            (t.server_ = t.persistentConnection_);
                        }
                        var n, r;
                        t.authTokenProvider_.addTokenChangeListener(function (
                          e
                        ) {
                          t.server_.refreshAuthToken(e);
                        }),
                          (t.statsReporter_ =
                            ((n = function () {
                              return new Xn(t.stats_, t.server_);
                            }),
                            (r = t.repoInfo_.toString()),
                            Jn[r] || (Jn[r] = n()),
                            Jn[r])),
                          (t.infoData_ = new zn()),
                          (t.infoSyncTree_ = new gn({
                            startListening: function (e, n, r, i) {
                              var o = [],
                                s = t.infoData_.getNode(e.path);
                              return (
                                s.isEmpty() ||
                                  ((o = bn(t.infoSyncTree_, e.path, s)),
                                  setTimeout(function () {
                                    i("ok");
                                  }, 0)),
                                o
                              );
                            },
                            stopListening: function () {},
                          })),
                          Fr(t, "connected", !1),
                          (t.serverSyncTree_ = new gn({
                            startListening: function (e, n, r, i) {
                              return (
                                t.server_.listen(e, r, n, function (n, r) {
                                  var o = i(n, r);
                                  er(t.eventQueue_, e.path, o);
                                }),
                                []
                              );
                            },
                            stopListening: function (e, n) {
                              t.server_.unlisten(e, n);
                            },
                          }));
                      })(this.repoInternal_),
                      (this.instanceStarted_ = !0)),
                    this.repoInternal_
                  );
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(t.prototype, "root_", {
                get: function () {
                  return (
                    this.rootInternal_ ||
                      (this.rootInternal_ = new mi(this.repo_, q())),
                    this.rootInternal_
                  );
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(t.prototype, "app", {
                get: function () {
                  return this.repo_.app;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.useEmulator = function (t, e) {
                this.checkDeleted_("useEmulator"),
                  this.instanceStarted_
                    ? T(
                        "Cannot call useEmulator() after instance has already been initialized."
                      )
                    : (function (t, e, n) {
                        (t.repoInfo_ = new at(
                          e + ":" + n,
                          !1,
                          t.repoInfo_.namespace,
                          t.repoInfo_.webSocketOnly,
                          t.repoInfo_.nodeAdmin,
                          t.repoInfo_.persistenceKey,
                          t.repoInfo_.includeNamespaceInQueryParams
                        )),
                          t.repoInfo_.nodeAdmin &&
                            (t.authTokenProvider_ = new bi());
                      })(this.repoInternal_, t, e);
              }),
              (t.prototype.ref = function (t) {
                return (
                  this.checkDeleted_("ref"),
                  (0, o.Dv)("database.ref", 0, 1, arguments.length),
                  t instanceof mi
                    ? this.refFromURL(t.toString())
                    : void 0 !== t
                    ? this.root_.child(t)
                    : this.root_
                );
              }),
              (t.prototype.refFromURL = function (t) {
                var e = "database.refFromURL";
                this.checkDeleted_(e), (0, o.Dv)(e, 1, 1, arguments.length);
                var n = gt(t, this.repo_.repoInfo_.nodeAdmin);
                Ot(e, 1, n);
                var r = n.repoInfo;
                return (
                  this.repo_.repoInfo_.isCustomHost() ||
                    r.host === this.repo_.repoInfo_.host ||
                    T(
                      e +
                        ": Host name does not match the current database: (found " +
                        r.host +
                        " but expected " +
                        this.repo_.repoInfo_.host +
                        ")"
                    ),
                  this.ref(n.path.toString())
                );
              }),
              (t.prototype.checkDeleted_ = function (t) {
                null === this.repoInternal_ &&
                  T("Cannot call " + t + " on a deleted database.");
              }),
              (t.prototype.goOffline = function () {
                (0, o.Dv)("database.goOffline", 0, 0, arguments.length),
                  this.checkDeleted_("goOffline"),
                  Jr(this.repo_);
              }),
              (t.prototype.goOnline = function () {
                (0, o.Dv)("database.goOnline", 0, 0, arguments.length),
                  this.checkDeleted_("goOnline"),
                  Qr(this.repo_);
              }),
              (t.ServerValue = {
                TIMESTAMP: { ".sv": "timestamp" },
                increment: function (t) {
                  return { ".sv": { increment: t } };
                },
              }),
              t
            );
          })(),
          Ti = Object.freeze({
            __proto__: null,
            forceLongPolling: function () {
              vr.forceDisallow(), hr.forceAllow();
            },
            forceWebSockets: function () {
              hr.forceDisallow();
            },
            isWebSocketsAvailable: function () {
              return vr.isAvailable();
            },
            setSecurityDebugCallback: function (t, e) {
              t.repo.persistentConnection_.securityDebugCallback_ = e;
            },
            stats: function (t, e) {
              !(function (t, e) {
                if ((void 0 === e && (e = !1), "undefined" != typeof console)) {
                  var n;
                  e
                    ? (t.statsListener_ ||
                        (t.statsListener_ = new Yn(t.stats_)),
                      (n = t.statsListener_.get()))
                    : (n = t.stats_.get());
                  var r = Object.keys(n).reduce(function (t, e) {
                    return Math.max(e.length, t);
                  }, 0);
                  R(n, function (t, e) {
                    for (var n = t, i = t.length; i < r + 2; i++) n += " ";
                    console.log(n + e);
                  });
                }
              })(t.repo, e);
            },
            statsIncrementCounter: function (t, e) {
              !(function (t, e) {
                var n;
                t.stats_.incrementCounter(e),
                  (n = e),
                  (t.statsReporter_.statsToReport_[n] = !0);
              })(t.repo, e);
            },
            dataUpdateCount: function (t) {
              return t.repo.dataUpdateCount;
            },
            interceptServerData: function (t, e) {
              return (function (t, e) {
                t.interceptServerDataCallback_ = e;
              })(t.repo, e);
            },
            initStandalone: function (t) {
              var e = t.app,
                n = t.url,
                r = t.version,
                i = t.customAuthImpl,
                o = t.namespace,
                s = t.nodeAdmin,
                u = void 0 !== s && s;
              pr(r);
              var c = new a.zt(
                "auth-internal",
                new a.H0("database-standalone")
              );
              return (
                c.setComponent(
                  new a.wA(
                    "auth-internal",
                    function () {
                      return i;
                    },
                    "PRIVATE"
                  )
                ),
                { instance: Ii(e, c, n, u), namespace: o }
              );
            },
          }),
          Si = wr;
        (wr.prototype.simpleListen = function (t, e) {
          this.sendRequest("q", { p: t }, e);
        }),
          (wr.prototype.echo = function (t, e) {
            this.sendRequest("echo", { d: t }, e);
          });
        var Ci = mr,
          ki = at,
          Ni = Object.freeze({
            __proto__: null,
            DataConnection: Si,
            RealTimeConnection: Ci,
            hijackHash: function (t) {
              var e = wr.prototype.put;
              return (
                (wr.prototype.put = function (n, r, i, o) {
                  void 0 !== o && (o = t()), e.call(this, n, r, i, o);
                }),
                function () {
                  wr.prototype.put = e;
                }
              );
            },
            ConnectionTarget: ki,
            queryIdentifier: function (t) {
              return t.queryIdentifier();
            },
            forceRestClient: function (t) {
              !(function (t) {
                _i = t;
              })(t);
            },
          }),
          Ai = Ei.ServerValue;
        !(function (e) {
          pr(e.SDK_VERSION);
          var n = e.INTERNAL.registerComponent(
            new a.wA(
              "database",
              function (t, e) {
                return Ii(
                  t.getProvider("app").getImmediate(),
                  t.getProvider("auth-internal"),
                  e,
                  void 0
                );
              },
              "PUBLIC"
            )
              .setServiceProps({
                Reference: mi,
                Query: gi,
                Database: Ei,
                DataSnapshot: Ir,
                enableLogging: w,
                INTERNAL: Ti,
                ServerValue: Ai,
                TEST_ACCESS: Ni,
              })
              .setMultipleInstances(!0)
          );
          e.registerVersion("@firebase/database", "0.9.5"),
            (0, o.Yr)() && (t.exports = n);
        })(r.Z);
      },
      270: (t, e, n) => {
        "use strict";
        function r() {
          for (var t = 0, e = 0, n = arguments.length; e < n; e++)
            t += arguments[e].length;
          var r = Array(t),
            i = 0;
          for (e = 0; e < n; e++)
            for (var o = arguments[e], s = 0, a = o.length; s < a; s++, i++)
              r[i] = o[s];
          return r;
        }
        var i;
        n.d(e, { in: () => o, Yd: () => l, Ub: () => f, Am: () => p });
        var o,
          s = [];
        !(function (t) {
          (t[(t.DEBUG = 0)] = "DEBUG"),
            (t[(t.VERBOSE = 1)] = "VERBOSE"),
            (t[(t.INFO = 2)] = "INFO"),
            (t[(t.WARN = 3)] = "WARN"),
            (t[(t.ERROR = 4)] = "ERROR"),
            (t[(t.SILENT = 5)] = "SILENT");
        })(o || (o = {}));
        var a = {
            debug: o.DEBUG,
            verbose: o.VERBOSE,
            info: o.INFO,
            warn: o.WARN,
            error: o.ERROR,
            silent: o.SILENT,
          },
          u = o.INFO,
          c =
            (((i = {})[o.DEBUG] = "log"),
            (i[o.VERBOSE] = "log"),
            (i[o.INFO] = "info"),
            (i[o.WARN] = "warn"),
            (i[o.ERROR] = "error"),
            i),
          h = function (t, e) {
            for (var n = [], i = 2; i < arguments.length; i++)
              n[i - 2] = arguments[i];
            if (!(e < t.logLevel)) {
              var o = new Date().toISOString(),
                s = c[e];
              if (!s)
                throw new Error(
                  "Attempted to log a message with an invalid logType (value: " +
                    e +
                    ")"
                );
              console[s].apply(console, r(["[" + o + "]  " + t.name + ":"], n));
            }
          },
          l = (function () {
            function t(t) {
              (this.name = t),
                (this._logLevel = u),
                (this._logHandler = h),
                (this._userLogHandler = null),
                s.push(this);
            }
            return (
              Object.defineProperty(t.prototype, "logLevel", {
                get: function () {
                  return this._logLevel;
                },
                set: function (t) {
                  if (!(t in o))
                    throw new TypeError(
                      'Invalid value "' + t + '" assigned to `logLevel`'
                    );
                  this._logLevel = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.setLogLevel = function (t) {
                this._logLevel = "string" == typeof t ? a[t] : t;
              }),
              Object.defineProperty(t.prototype, "logHandler", {
                get: function () {
                  return this._logHandler;
                },
                set: function (t) {
                  if ("function" != typeof t)
                    throw new TypeError(
                      "Value assigned to `logHandler` must be a function"
                    );
                  this._logHandler = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              Object.defineProperty(t.prototype, "userLogHandler", {
                get: function () {
                  return this._userLogHandler;
                },
                set: function (t) {
                  this._userLogHandler = t;
                },
                enumerable: !1,
                configurable: !0,
              }),
              (t.prototype.debug = function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                this._userLogHandler &&
                  this._userLogHandler.apply(this, r([this, o.DEBUG], t)),
                  this._logHandler.apply(this, r([this, o.DEBUG], t));
              }),
              (t.prototype.log = function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                this._userLogHandler &&
                  this._userLogHandler.apply(this, r([this, o.VERBOSE], t)),
                  this._logHandler.apply(this, r([this, o.VERBOSE], t));
              }),
              (t.prototype.info = function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                this._userLogHandler &&
                  this._userLogHandler.apply(this, r([this, o.INFO], t)),
                  this._logHandler.apply(this, r([this, o.INFO], t));
              }),
              (t.prototype.warn = function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                this._userLogHandler &&
                  this._userLogHandler.apply(this, r([this, o.WARN], t)),
                  this._logHandler.apply(this, r([this, o.WARN], t));
              }),
              (t.prototype.error = function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                this._userLogHandler &&
                  this._userLogHandler.apply(this, r([this, o.ERROR], t)),
                  this._logHandler.apply(this, r([this, o.ERROR], t));
              }),
              t
            );
          })();
        function f(t) {
          s.forEach(function (e) {
            e.setLogLevel(t);
          });
        }
        function p(t, e) {
          for (
            var n = function (n) {
                var r = null;
                e && e.level && (r = a[e.level]),
                  (n.userLogHandler =
                    null === t
                      ? null
                      : function (e, n) {
                          for (var i = [], s = 2; s < arguments.length; s++)
                            i[s - 2] = arguments[s];
                          var a = i
                            .map(function (t) {
                              if (null == t) return null;
                              if ("string" == typeof t) return t;
                              if ("number" == typeof t || "boolean" == typeof t)
                                return t.toString();
                              if (t instanceof Error) return t.message;
                              try {
                                return JSON.stringify(t);
                              } catch (t) {
                                return null;
                              }
                            })
                            .filter(function (t) {
                              return t;
                            })
                            .join(" ");
                          n >= (null != r ? r : e.logLevel) &&
                            t({
                              level: o[n].toLowerCase(),
                              message: a,
                              args: i,
                              type: e.name,
                            });
                        });
              },
              r = 0,
              i = s;
            r < i.length;
            r++
          )
            n(i[r]);
        }
      },
      36: (t, e, n) => {
        "use strict";
        n.d(e, {
          BH: () => f,
          LL: () => k,
          ZR: () => C,
          gQ: () => V,
          zI: () => S,
          hu: () => i,
          g5: () => o,
          US: () => a,
          h$: () => u,
          $s: () => Y,
          r3: () => M,
          ne: () => q,
          p$: () => h,
          ZB: () => l,
          gK: () => z,
          z$: () => p,
          GJ: () => R,
          jU: () => g,
          ru: () => m,
          d: () => b,
          xb: () => j,
          w1: () => w,
          hl: () => E,
          uI: () => d,
          UG: () => v,
          Yr: () => I,
          b$: () => y,
          Mn: () => _,
          w9: () => O,
          cI: () => P,
          UI: () => F,
          xO: () => U,
          DV: () => L,
          ug: () => Q,
          dS: () => J,
          Pz: () => D,
          Dv: () => W,
          Wj: () => H,
          lb: () => K,
          eu: () => T,
        });
        var r = n(15),
          i = function (t, e) {
            if (!t) throw o(e);
          },
          o = function (t) {
            return new Error(
              "Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: " +
                t
            );
          },
          s = function (t) {
            for (var e = [], n = 0, r = 0; r < t.length; r++) {
              var i = t.charCodeAt(r);
              i < 128
                ? (e[n++] = i)
                : i < 2048
                ? ((e[n++] = (i >> 6) | 192), (e[n++] = (63 & i) | 128))
                : 55296 == (64512 & i) &&
                  r + 1 < t.length &&
                  56320 == (64512 & t.charCodeAt(r + 1))
                ? ((i =
                    65536 + ((1023 & i) << 10) + (1023 & t.charCodeAt(++r))),
                  (e[n++] = (i >> 18) | 240),
                  (e[n++] = ((i >> 12) & 63) | 128),
                  (e[n++] = ((i >> 6) & 63) | 128),
                  (e[n++] = (63 & i) | 128))
                : ((e[n++] = (i >> 12) | 224),
                  (e[n++] = ((i >> 6) & 63) | 128),
                  (e[n++] = (63 & i) | 128));
            }
            return e;
          },
          a = {
            byteToCharMap_: null,
            charToByteMap_: null,
            byteToCharMapWebSafe_: null,
            charToByteMapWebSafe_: null,
            ENCODED_VALS_BASE:
              "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",
            get ENCODED_VALS() {
              return this.ENCODED_VALS_BASE + "+/=";
            },
            get ENCODED_VALS_WEBSAFE() {
              return this.ENCODED_VALS_BASE + "-_.";
            },
            HAS_NATIVE_SUPPORT: "function" == typeof atob,
            encodeByteArray: function (t, e) {
              if (!Array.isArray(t))
                throw Error("encodeByteArray takes an array as a parameter");
              this.init_();
              for (
                var n = e ? this.byteToCharMapWebSafe_ : this.byteToCharMap_,
                  r = [],
                  i = 0;
                i < t.length;
                i += 3
              ) {
                var o = t[i],
                  s = i + 1 < t.length,
                  a = s ? t[i + 1] : 0,
                  u = i + 2 < t.length,
                  c = u ? t[i + 2] : 0,
                  h = o >> 2,
                  l = ((3 & o) << 4) | (a >> 4),
                  f = ((15 & a) << 2) | (c >> 6),
                  p = 63 & c;
                u || ((p = 64), s || (f = 64)), r.push(n[h], n[l], n[f], n[p]);
              }
              return r.join("");
            },
            encodeString: function (t, e) {
              return this.HAS_NATIVE_SUPPORT && !e
                ? btoa(t)
                : this.encodeByteArray(s(t), e);
            },
            decodeString: function (t, e) {
              return this.HAS_NATIVE_SUPPORT && !e
                ? atob(t)
                : (function (t) {
                    for (var e = [], n = 0, r = 0; n < t.length; ) {
                      var i = t[n++];
                      if (i < 128) e[r++] = String.fromCharCode(i);
                      else if (i > 191 && i < 224) {
                        var o = t[n++];
                        e[r++] = String.fromCharCode(
                          ((31 & i) << 6) | (63 & o)
                        );
                      } else if (i > 239 && i < 365) {
                        var s =
                          (((7 & i) << 18) |
                            ((63 & (o = t[n++])) << 12) |
                            ((63 & (a = t[n++])) << 6) |
                            (63 & t[n++])) -
                          65536;
                        (e[r++] = String.fromCharCode(55296 + (s >> 10))),
                          (e[r++] = String.fromCharCode(56320 + (1023 & s)));
                      } else {
                        o = t[n++];
                        var a = t[n++];
                        e[r++] = String.fromCharCode(
                          ((15 & i) << 12) | ((63 & o) << 6) | (63 & a)
                        );
                      }
                    }
                    return e.join("");
                  })(this.decodeStringToByteArray(t, e));
            },
            decodeStringToByteArray: function (t, e) {
              this.init_();
              for (
                var n = e ? this.charToByteMapWebSafe_ : this.charToByteMap_,
                  r = [],
                  i = 0;
                i < t.length;

              ) {
                var o = n[t.charAt(i++)],
                  s = i < t.length ? n[t.charAt(i)] : 0,
                  a = ++i < t.length ? n[t.charAt(i)] : 64,
                  u = ++i < t.length ? n[t.charAt(i)] : 64;
                if ((++i, null == o || null == s || null == a || null == u))
                  throw Error();
                var c = (o << 2) | (s >> 4);
                if ((r.push(c), 64 !== a)) {
                  var h = ((s << 4) & 240) | (a >> 2);
                  if ((r.push(h), 64 !== u)) {
                    var l = ((a << 6) & 192) | u;
                    r.push(l);
                  }
                }
              }
              return r;
            },
            init_: function () {
              if (!this.byteToCharMap_) {
                (this.byteToCharMap_ = {}),
                  (this.charToByteMap_ = {}),
                  (this.byteToCharMapWebSafe_ = {}),
                  (this.charToByteMapWebSafe_ = {});
                for (var t = 0; t < this.ENCODED_VALS.length; t++)
                  (this.byteToCharMap_[t] = this.ENCODED_VALS.charAt(t)),
                    (this.charToByteMap_[this.byteToCharMap_[t]] = t),
                    (this.byteToCharMapWebSafe_[t] =
                      this.ENCODED_VALS_WEBSAFE.charAt(t)),
                    (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]] =
                      t),
                    t >= this.ENCODED_VALS_BASE.length &&
                      ((this.charToByteMap_[
                        this.ENCODED_VALS_WEBSAFE.charAt(t)
                      ] = t),
                      (this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)] =
                        t));
              }
            },
          },
          u = function (t) {
            var e = s(t);
            return a.encodeByteArray(e, !0);
          },
          c = function (t) {
            try {
              return a.decodeString(t, !0);
            } catch (t) {
              console.error("base64Decode failed: ", t);
            }
            return null;
          };
        function h(t) {
          return l(void 0, t);
        }
        function l(t, e) {
          if (!(e instanceof Object)) return e;
          switch (e.constructor) {
            case Date:
              return new Date(e.getTime());
            case Object:
              void 0 === t && (t = {});
              break;
            case Array:
              t = [];
              break;
            default:
              return e;
          }
          for (var n in e)
            e.hasOwnProperty(n) && "__proto__" !== n && (t[n] = l(t[n], e[n]));
          return t;
        }
        var f = (function () {
          function t() {
            var t = this;
            (this.reject = function () {}),
              (this.resolve = function () {}),
              (this.promise = new Promise(function (e, n) {
                (t.resolve = e), (t.reject = n);
              }));
          }
          return (
            (t.prototype.wrapCallback = function (t) {
              var e = this;
              return function (n, r) {
                n ? e.reject(n) : e.resolve(r),
                  "function" == typeof t &&
                    (e.promise.catch(function () {}),
                    1 === t.length ? t(n) : t(n, r));
              };
            }),
            t
          );
        })();
        function p() {
          return "undefined" != typeof navigator &&
            "string" == typeof navigator.userAgent
            ? navigator.userAgent
            : "";
        }
        function d() {
          return (
            "undefined" != typeof window &&
            !!(window.cordova || window.phonegap || window.PhoneGap) &&
            /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())
          );
        }
        function v() {
          try {
            return (
              "[object process]" === Object.prototype.toString.call(n.g.process)
            );
          } catch (t) {
            return !1;
          }
        }
        function g() {
          return "object" == typeof self && self.self === self;
        }
        function m() {
          var t =
            "object" == typeof chrome
              ? chrome.runtime
              : "object" == typeof browser
              ? browser.runtime
              : void 0;
          return "object" == typeof t && void 0 !== t.id;
        }
        function y() {
          return (
            "object" == typeof navigator && "ReactNative" === navigator.product
          );
        }
        function b() {
          return p().indexOf("Electron/") >= 0;
        }
        function w() {
          var t = p();
          return t.indexOf("MSIE ") >= 0 || t.indexOf("Trident/") >= 0;
        }
        function _() {
          return p().indexOf("MSAppHost/") >= 0;
        }
        function I() {
          return !1;
        }
        function E() {
          return "indexedDB" in self && null != indexedDB;
        }
        function T() {
          return new Promise(function (t, e) {
            try {
              var n = !0,
                r = "validate-browser-context-for-indexeddb-analytics-module",
                i = window.indexedDB.open(r);
              (i.onsuccess = function () {
                i.result.close(),
                  n || window.indexedDB.deleteDatabase(r),
                  t(!0);
              }),
                (i.onupgradeneeded = function () {
                  n = !1;
                }),
                (i.onerror = function () {
                  var t;
                  e(
                    (null === (t = i.error) || void 0 === t
                      ? void 0
                      : t.message) || ""
                  );
                });
            } catch (t) {
              e(t);
            }
          });
        }
        function S() {
          return !(!navigator || !navigator.cookieEnabled);
        }
        var C = (function (t) {
            function e(n, r, i) {
              var o = t.call(this, r) || this;
              return (
                (o.code = n),
                (o.customData = i),
                (o.name = "FirebaseError"),
                Object.setPrototypeOf(o, e.prototype),
                Error.captureStackTrace &&
                  Error.captureStackTrace(o, k.prototype.create),
                o
              );
            }
            return (0, r.ZT)(e, t), e;
          })(Error),
          k = (function () {
            function t(t, e, n) {
              (this.service = t), (this.serviceName = e), (this.errors = n);
            }
            return (
              (t.prototype.create = function (t) {
                for (var e = [], n = 1; n < arguments.length; n++)
                  e[n - 1] = arguments[n];
                var r = e[0] || {},
                  i = this.service + "/" + t,
                  o = this.errors[t],
                  s = o ? N(o, r) : "Error",
                  a = this.serviceName + ": " + s + " (" + i + ").",
                  u = new C(i, a, r);
                return u;
              }),
              t
            );
          })();
        function N(t, e) {
          return t.replace(A, function (t, n) {
            var r = e[n];
            return null != r ? String(r) : "<" + n + "?>";
          });
        }
        var A = /\{\$([^}]+)}/g;
        function P(t) {
          return JSON.parse(t);
        }
        function D(t) {
          return JSON.stringify(t);
        }
        var x = function (t) {
            var e = {},
              n = {},
              r = {},
              i = "";
            try {
              var o = t.split(".");
              (e = P(c(o[0]) || "")),
                (n = P(c(o[1]) || "")),
                (i = o[2]),
                (r = n.d || {}),
                delete n.d;
            } catch (t) {}
            return { header: e, claims: n, data: r, signature: i };
          },
          O = function (t) {
            var e = x(t).claims;
            return !!e && "object" == typeof e && e.hasOwnProperty("iat");
          },
          R = function (t) {
            var e = x(t).claims;
            return "object" == typeof e && !0 === e.admin;
          };
        function M(t, e) {
          return Object.prototype.hasOwnProperty.call(t, e);
        }
        function L(t, e) {
          return Object.prototype.hasOwnProperty.call(t, e) ? t[e] : void 0;
        }
        function j(t) {
          for (var e in t)
            if (Object.prototype.hasOwnProperty.call(t, e)) return !1;
          return !0;
        }
        function F(t, e, n) {
          var r = {};
          for (var i in t)
            Object.prototype.hasOwnProperty.call(t, i) &&
              (r[i] = e.call(n, t[i], i, t));
          return r;
        }
        function U(t) {
          for (
            var e = [],
              n = function (t, n) {
                Array.isArray(n)
                  ? n.forEach(function (n) {
                      e.push(
                        encodeURIComponent(t) + "=" + encodeURIComponent(n)
                      );
                    })
                  : e.push(encodeURIComponent(t) + "=" + encodeURIComponent(n));
              },
              r = 0,
              i = Object.entries(t);
            r < i.length;
            r++
          ) {
            var o = i[r];
            n(o[0], o[1]);
          }
          return e.length ? "&" + e.join("&") : "";
        }
        var V = (function () {
          function t() {
            (this.chain_ = []),
              (this.buf_ = []),
              (this.W_ = []),
              (this.pad_ = []),
              (this.inbuf_ = 0),
              (this.total_ = 0),
              (this.blockSize = 64),
              (this.pad_[0] = 128);
            for (var t = 1; t < this.blockSize; ++t) this.pad_[t] = 0;
            this.reset();
          }
          return (
            (t.prototype.reset = function () {
              (this.chain_[0] = 1732584193),
                (this.chain_[1] = 4023233417),
                (this.chain_[2] = 2562383102),
                (this.chain_[3] = 271733878),
                (this.chain_[4] = 3285377520),
                (this.inbuf_ = 0),
                (this.total_ = 0);
            }),
            (t.prototype.compress_ = function (t, e) {
              e || (e = 0);
              var n = this.W_;
              if ("string" == typeof t)
                for (var r = 0; r < 16; r++)
                  (n[r] =
                    (t.charCodeAt(e) << 24) |
                    (t.charCodeAt(e + 1) << 16) |
                    (t.charCodeAt(e + 2) << 8) |
                    t.charCodeAt(e + 3)),
                    (e += 4);
              else
                for (r = 0; r < 16; r++)
                  (n[r] =
                    (t[e] << 24) |
                    (t[e + 1] << 16) |
                    (t[e + 2] << 8) |
                    t[e + 3]),
                    (e += 4);
              for (r = 16; r < 80; r++) {
                var i = n[r - 3] ^ n[r - 8] ^ n[r - 14] ^ n[r - 16];
                n[r] = 4294967295 & ((i << 1) | (i >>> 31));
              }
              var o,
                s,
                a = this.chain_[0],
                u = this.chain_[1],
                c = this.chain_[2],
                h = this.chain_[3],
                l = this.chain_[4];
              for (r = 0; r < 80; r++)
                r < 40
                  ? r < 20
                    ? ((o = h ^ (u & (c ^ h))), (s = 1518500249))
                    : ((o = u ^ c ^ h), (s = 1859775393))
                  : r < 60
                  ? ((o = (u & c) | (h & (u | c))), (s = 2400959708))
                  : ((o = u ^ c ^ h), (s = 3395469782)),
                  (i =
                    (((a << 5) | (a >>> 27)) + o + l + s + n[r]) & 4294967295),
                  (l = h),
                  (h = c),
                  (c = 4294967295 & ((u << 30) | (u >>> 2))),
                  (u = a),
                  (a = i);
              (this.chain_[0] = (this.chain_[0] + a) & 4294967295),
                (this.chain_[1] = (this.chain_[1] + u) & 4294967295),
                (this.chain_[2] = (this.chain_[2] + c) & 4294967295),
                (this.chain_[3] = (this.chain_[3] + h) & 4294967295),
                (this.chain_[4] = (this.chain_[4] + l) & 4294967295);
            }),
            (t.prototype.update = function (t, e) {
              if (null != t) {
                void 0 === e && (e = t.length);
                for (
                  var n = e - this.blockSize,
                    r = 0,
                    i = this.buf_,
                    o = this.inbuf_;
                  r < e;

                ) {
                  if (0 === o)
                    for (; r <= n; )
                      this.compress_(t, r), (r += this.blockSize);
                  if ("string" == typeof t) {
                    for (; r < e; )
                      if (
                        ((i[o] = t.charCodeAt(r)), ++r, ++o === this.blockSize)
                      ) {
                        this.compress_(i), (o = 0);
                        break;
                      }
                  } else
                    for (; r < e; )
                      if (((i[o] = t[r]), ++r, ++o === this.blockSize)) {
                        this.compress_(i), (o = 0);
                        break;
                      }
                }
                (this.inbuf_ = o), (this.total_ += e);
              }
            }),
            (t.prototype.digest = function () {
              var t = [],
                e = 8 * this.total_;
              this.inbuf_ < 56
                ? this.update(this.pad_, 56 - this.inbuf_)
                : this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));
              for (var n = this.blockSize - 1; n >= 56; n--)
                (this.buf_[n] = 255 & e), (e /= 256);
              this.compress_(this.buf_);
              var r = 0;
              for (n = 0; n < 5; n++)
                for (var i = 24; i >= 0; i -= 8)
                  (t[r] = (this.chain_[n] >> i) & 255), ++r;
              return t;
            }),
            t
          );
        })();
        function q(t, e) {
          var n = new B(t, e);
          return n.subscribe.bind(n);
        }
        var B = (function () {
          function t(t, e) {
            var n = this;
            (this.observers = []),
              (this.unsubscribes = []),
              (this.observerCount = 0),
              (this.task = Promise.resolve()),
              (this.finalized = !1),
              (this.onNoObservers = e),
              this.task
                .then(function () {
                  t(n);
                })
                .catch(function (t) {
                  n.error(t);
                });
          }
          return (
            (t.prototype.next = function (t) {
              this.forEachObserver(function (e) {
                e.next(t);
              });
            }),
            (t.prototype.error = function (t) {
              this.forEachObserver(function (e) {
                e.error(t);
              }),
                this.close(t);
            }),
            (t.prototype.complete = function () {
              this.forEachObserver(function (t) {
                t.complete();
              }),
                this.close();
            }),
            (t.prototype.subscribe = function (t, e, n) {
              var r,
                i = this;
              if (void 0 === t && void 0 === e && void 0 === n)
                throw new Error("Missing Observer.");
              void 0 ===
                (r = (function (t, e) {
                  if ("object" != typeof t || null === t) return !1;
                  for (
                    var n = 0, r = ["next", "error", "complete"];
                    n < r.length;
                    n++
                  ) {
                    var i = r[n];
                    if (i in t && "function" == typeof t[i]) return !0;
                  }
                  return !1;
                })(t)
                  ? t
                  : { next: t, error: e, complete: n }).next && (r.next = G),
                void 0 === r.error && (r.error = G),
                void 0 === r.complete && (r.complete = G);
              var o = this.unsubscribeOne.bind(this, this.observers.length);
              return (
                this.finalized &&
                  this.task.then(function () {
                    try {
                      i.finalError ? r.error(i.finalError) : r.complete();
                    } catch (t) {}
                  }),
                this.observers.push(r),
                o
              );
            }),
            (t.prototype.unsubscribeOne = function (t) {
              void 0 !== this.observers &&
                void 0 !== this.observers[t] &&
                (delete this.observers[t],
                (this.observerCount -= 1),
                0 === this.observerCount &&
                  void 0 !== this.onNoObservers &&
                  this.onNoObservers(this));
            }),
            (t.prototype.forEachObserver = function (t) {
              if (!this.finalized)
                for (var e = 0; e < this.observers.length; e++)
                  this.sendOne(e, t);
            }),
            (t.prototype.sendOne = function (t, e) {
              var n = this;
              this.task.then(function () {
                if (void 0 !== n.observers && void 0 !== n.observers[t])
                  try {
                    e(n.observers[t]);
                  } catch (t) {
                    "undefined" != typeof console &&
                      console.error &&
                      console.error(t);
                  }
              });
            }),
            (t.prototype.close = function (t) {
              var e = this;
              this.finalized ||
                ((this.finalized = !0),
                void 0 !== t && (this.finalError = t),
                this.task.then(function () {
                  (e.observers = void 0), (e.onNoObservers = void 0);
                }));
            }),
            t
          );
        })();
        function G() {}
        var W = function (t, e, n, r) {
          var i;
          if (
            (r < e
              ? (i = "at least " + e)
              : r > n && (i = 0 === n ? "none" : "no more than " + n),
            i)
          )
            throw new Error(
              t +
                " failed: Was called with " +
                r +
                (1 === r ? " argument." : " arguments.") +
                " Expects " +
                i +
                "."
            );
        };
        function z(t, e, n) {
          var r = "";
          switch (e) {
            case 1:
              r = n ? "first" : "First";
              break;
            case 2:
              r = n ? "second" : "Second";
              break;
            case 3:
              r = n ? "third" : "Third";
              break;
            case 4:
              r = n ? "fourth" : "Fourth";
              break;
            default:
              throw new Error(
                "errorPrefix called with argumentNumber > 4.  Need to update it?"
              );
          }
          return t + " failed: " + (r + " argument ");
        }
        function H(t, e, n, r) {
          if ((!r || n) && "function" != typeof n)
            throw new Error(z(t, e, r) + "must be a valid function.");
        }
        function K(t, e, n, r) {
          if ((!r || n) && ("object" != typeof n || null === n))
            throw new Error(z(t, e, r) + "must be a valid context object.");
        }
        var J = function (t) {
            for (var e = [], n = 0, r = 0; r < t.length; r++) {
              var o = t.charCodeAt(r);
              if (o >= 55296 && o <= 56319) {
                var s = o - 55296;
                r++,
                  i(r < t.length, "Surrogate pair missing trail surrogate."),
                  (o = 65536 + (s << 10) + (t.charCodeAt(r) - 56320));
              }
              o < 128
                ? (e[n++] = o)
                : o < 2048
                ? ((e[n++] = (o >> 6) | 192), (e[n++] = (63 & o) | 128))
                : o < 65536
                ? ((e[n++] = (o >> 12) | 224),
                  (e[n++] = ((o >> 6) & 63) | 128),
                  (e[n++] = (63 & o) | 128))
                : ((e[n++] = (o >> 18) | 240),
                  (e[n++] = ((o >> 12) & 63) | 128),
                  (e[n++] = ((o >> 6) & 63) | 128),
                  (e[n++] = (63 & o) | 128));
            }
            return e;
          },
          Q = function (t) {
            for (var e = 0, n = 0; n < t.length; n++) {
              var r = t.charCodeAt(n);
              r < 128
                ? e++
                : r < 2048
                ? (e += 2)
                : r >= 55296 && r <= 56319
                ? ((e += 4), n++)
                : (e += 3);
            }
            return e;
          };
        function Y(t, e, n) {
          void 0 === e && (e = 1e3), void 0 === n && (n = 2);
          var r = e * Math.pow(n, t),
            i = Math.round(0.5 * r * (Math.random() - 0.5) * 2);
          return Math.min(144e5, r + i);
        }
      },
      772: function (t, e) {
        !(function (t) {
          "use strict";
          function e(t) {
            return Array.prototype.slice.call(t);
          }
          function n(t) {
            return new Promise(function (e, n) {
              (t.onsuccess = function () {
                e(t.result);
              }),
                (t.onerror = function () {
                  n(t.error);
                });
            });
          }
          function r(t, e, r) {
            var i,
              o = new Promise(function (o, s) {
                n((i = t[e].apply(t, r))).then(o, s);
              });
            return (o.request = i), o;
          }
          function i(t, e, n) {
            var i = r(t, e, n);
            return i.then(function (t) {
              if (t) return new h(t, i.request);
            });
          }
          function o(t, e, n) {
            n.forEach(function (n) {
              Object.defineProperty(t.prototype, n, {
                get: function () {
                  return this[e][n];
                },
                set: function (t) {
                  this[e][n] = t;
                },
              });
            });
          }
          function s(t, e, n, i) {
            i.forEach(function (i) {
              i in n.prototype &&
                (t.prototype[i] = function () {
                  return r(this[e], i, arguments);
                });
            });
          }
          function a(t, e, n, r) {
            r.forEach(function (r) {
              r in n.prototype &&
                (t.prototype[r] = function () {
                  return this[e][r].apply(this[e], arguments);
                });
            });
          }
          function u(t, e, n, r) {
            r.forEach(function (r) {
              r in n.prototype &&
                (t.prototype[r] = function () {
                  return i(this[e], r, arguments);
                });
            });
          }
          function c(t) {
            this._index = t;
          }
          function h(t, e) {
            (this._cursor = t), (this._request = e);
          }
          function l(t) {
            this._store = t;
          }
          function f(t) {
            (this._tx = t),
              (this.complete = new Promise(function (e, n) {
                (t.oncomplete = function () {
                  e();
                }),
                  (t.onerror = function () {
                    n(t.error);
                  }),
                  (t.onabort = function () {
                    n(t.error);
                  });
              }));
          }
          function p(t, e, n) {
            (this._db = t),
              (this.oldVersion = e),
              (this.transaction = new f(n));
          }
          function d(t) {
            this._db = t;
          }
          o(c, "_index", ["name", "keyPath", "multiEntry", "unique"]),
            s(c, "_index", IDBIndex, [
              "get",
              "getKey",
              "getAll",
              "getAllKeys",
              "count",
            ]),
            u(c, "_index", IDBIndex, ["openCursor", "openKeyCursor"]),
            o(h, "_cursor", ["direction", "key", "primaryKey", "value"]),
            s(h, "_cursor", IDBCursor, ["update", "delete"]),
            ["advance", "continue", "continuePrimaryKey"].forEach(function (t) {
              t in IDBCursor.prototype &&
                (h.prototype[t] = function () {
                  var e = this,
                    r = arguments;
                  return Promise.resolve().then(function () {
                    return (
                      e._cursor[t].apply(e._cursor, r),
                      n(e._request).then(function (t) {
                        if (t) return new h(t, e._request);
                      })
                    );
                  });
                });
            }),
            (l.prototype.createIndex = function () {
              return new c(
                this._store.createIndex.apply(this._store, arguments)
              );
            }),
            (l.prototype.index = function () {
              return new c(this._store.index.apply(this._store, arguments));
            }),
            o(l, "_store", ["name", "keyPath", "indexNames", "autoIncrement"]),
            s(l, "_store", IDBObjectStore, [
              "put",
              "add",
              "delete",
              "clear",
              "get",
              "getAll",
              "getKey",
              "getAllKeys",
              "count",
            ]),
            u(l, "_store", IDBObjectStore, ["openCursor", "openKeyCursor"]),
            a(l, "_store", IDBObjectStore, ["deleteIndex"]),
            (f.prototype.objectStore = function () {
              return new l(this._tx.objectStore.apply(this._tx, arguments));
            }),
            o(f, "_tx", ["objectStoreNames", "mode"]),
            a(f, "_tx", IDBTransaction, ["abort"]),
            (p.prototype.createObjectStore = function () {
              return new l(
                this._db.createObjectStore.apply(this._db, arguments)
              );
            }),
            o(p, "_db", ["name", "version", "objectStoreNames"]),
            a(p, "_db", IDBDatabase, ["deleteObjectStore", "close"]),
            (d.prototype.transaction = function () {
              return new f(this._db.transaction.apply(this._db, arguments));
            }),
            o(d, "_db", ["name", "version", "objectStoreNames"]),
            a(d, "_db", IDBDatabase, ["close"]),
            ["openCursor", "openKeyCursor"].forEach(function (t) {
              [l, c].forEach(function (n) {
                t in n.prototype &&
                  (n.prototype[t.replace("open", "iterate")] = function () {
                    var n = e(arguments),
                      r = n[n.length - 1],
                      i = this._store || this._index,
                      o = i[t].apply(i, n.slice(0, -1));
                    o.onsuccess = function () {
                      r(o.result);
                    };
                  });
              });
            }),
            [c, l].forEach(function (t) {
              t.prototype.getAll ||
                (t.prototype.getAll = function (t, e) {
                  var n = this,
                    r = [];
                  return new Promise(function (i) {
                    n.iterateCursor(t, function (t) {
                      t
                        ? (r.push(t.value),
                          void 0 === e || r.length != e ? t.continue() : i(r))
                        : i(r);
                    });
                  });
                });
            }),
            (t.openDb = function (t, e, n) {
              var i = r(indexedDB, "open", [t, e]),
                o = i.request;
              return (
                o &&
                  (o.onupgradeneeded = function (t) {
                    n && n(new p(o.result, t.oldVersion, o.transaction));
                  }),
                i.then(function (t) {
                  return new d(t);
                })
              );
            }),
            (t.deleteDb = function (t) {
              return r(indexedDB, "deleteDatabase", [t]);
            }),
            Object.defineProperty(t, "__esModule", { value: !0 });
        })(e);
      },
      15: (t, e, n) => {
        "use strict";
        n.d(e, {
          ZT: () => i,
          pi: () => o,
          mG: () => s,
          Jh: () => a,
          XA: () => u,
          CR: () => c,
          ev: () => h,
        });
        var r = function (t, e) {
          return (r =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
            })(t, e);
        };
        function i(t, e) {
          if ("function" != typeof e && null !== e)
            throw new TypeError(
              "Class extends value " +
                String(e) +
                " is not a constructor or null"
            );
          function n() {
            this.constructor = t;
          }
          r(t, e),
            (t.prototype =
              null === e
                ? Object.create(e)
                : ((n.prototype = e.prototype), new n()));
        }
        var o = function () {
          return (o =
            Object.assign ||
            function (t) {
              for (var e, n = 1, r = arguments.length; n < r; n++)
                for (var i in (e = arguments[n]))
                  Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);
              return t;
            }).apply(this, arguments);
        };
        function s(t, e, n, r) {
          return new (n || (n = Promise))(function (i, o) {
            function s(t) {
              try {
                u(r.next(t));
              } catch (t) {
                o(t);
              }
            }
            function a(t) {
              try {
                u(r.throw(t));
              } catch (t) {
                o(t);
              }
            }
            function u(t) {
              var e;
              t.done
                ? i(t.value)
                : ((e = t.value),
                  e instanceof n
                    ? e
                    : new n(function (t) {
                        t(e);
                      })).then(s, a);
            }
            u((r = r.apply(t, e || [])).next());
          });
        }
        function a(t, e) {
          var n,
            r,
            i,
            o,
            s = {
              label: 0,
              sent: function () {
                if (1 & i[0]) throw i[1];
                return i[1];
              },
              trys: [],
              ops: [],
            };
          return (
            (o = { next: a(0), throw: a(1), return: a(2) }),
            "function" == typeof Symbol &&
              (o[Symbol.iterator] = function () {
                return this;
              }),
            o
          );
          function a(o) {
            return function (a) {
              return (function (o) {
                if (n) throw new TypeError("Generator is already executing.");
                for (; s; )
                  try {
                    if (
                      ((n = 1),
                      r &&
                        (i =
                          2 & o[0]
                            ? r.return
                            : o[0]
                            ? r.throw || ((i = r.return) && i.call(r), 0)
                            : r.next) &&
                        !(i = i.call(r, o[1])).done)
                    )
                      return i;
                    switch (((r = 0), i && (o = [2 & o[0], i.value]), o[0])) {
                      case 0:
                      case 1:
                        i = o;
                        break;
                      case 4:
                        return s.label++, { value: o[1], done: !1 };
                      case 5:
                        s.label++, (r = o[1]), (o = [0]);
                        continue;
                      case 7:
                        (o = s.ops.pop()), s.trys.pop();
                        continue;
                      default:
                        if (
                          !(
                            (i = (i = s.trys).length > 0 && i[i.length - 1]) ||
                            (6 !== o[0] && 2 !== o[0])
                          )
                        ) {
                          s = 0;
                          continue;
                        }
                        if (
                          3 === o[0] &&
                          (!i || (o[1] > i[0] && o[1] < i[3]))
                        ) {
                          s.label = o[1];
                          break;
                        }
                        if (6 === o[0] && s.label < i[1]) {
                          (s.label = i[1]), (i = o);
                          break;
                        }
                        if (i && s.label < i[2]) {
                          (s.label = i[2]), s.ops.push(o);
                          break;
                        }
                        i[2] && s.ops.pop(), s.trys.pop();
                        continue;
                    }
                    o = e.call(t, s);
                  } catch (t) {
                    (o = [6, t]), (r = 0);
                  } finally {
                    n = i = 0;
                  }
                if (5 & o[0]) throw o[1];
                return { value: o[0] ? o[1] : void 0, done: !0 };
              })([o, a]);
            };
          }
        }
        function u(t) {
          var e = "function" == typeof Symbol && Symbol.iterator,
            n = e && t[e],
            r = 0;
          if (n) return n.call(t);
          if (t && "number" == typeof t.length)
            return {
              next: function () {
                return (
                  t && r >= t.length && (t = void 0),
                  { value: t && t[r++], done: !t }
                );
              },
            };
          throw new TypeError(
            e ? "Object is not iterable." : "Symbol.iterator is not defined."
          );
        }
        function c(t, e) {
          var n = "function" == typeof Symbol && t[Symbol.iterator];
          if (!n) return t;
          var r,
            i,
            o = n.call(t),
            s = [];
          try {
            for (; (void 0 === e || e-- > 0) && !(r = o.next()).done; )
              s.push(r.value);
          } catch (t) {
            i = { error: t };
          } finally {
            try {
              r && !r.done && (n = o.return) && n.call(o);
            } finally {
              if (i) throw i.error;
            }
          }
          return s;
        }
        function h(t, e) {
          for (var n = 0, r = e.length, i = t.length; n < r; n++, i++)
            t[i] = e[n];
          return t;
        }
        Object.create, Object.create;
      },
    },
    e = {};
  function n(r) {
    var i = e[r];
    if (void 0 !== i) return i.exports;
    var o = (e[r] = { id: r, loaded: !1, exports: {} });
    return t[r].call(o.exports, o, o.exports, n), (o.loaded = !0), o.exports;
  }
  (n.d = (t, e) => {
    for (var r in e)
      n.o(e, r) &&
        !n.o(t, r) &&
        Object.defineProperty(t, r, { enumerable: !0, get: e[r] });
  }),
    (n.g = (function () {
      if ("object" == typeof globalThis) return globalThis;
      try {
        return this || new Function("return this")();
      } catch (t) {
        if ("object" == typeof window) return window;
      }
    })()),
    (n.hmd = (t) => (
      (t = Object.create(t)).children || (t.children = []),
      Object.defineProperty(t, "exports", {
        enumerable: !0,
        set: () => {
          throw new Error(
            "ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: " +
              t.id
          );
        },
      }),
      t
    )),
    (n.o = (t, e) => Object.prototype.hasOwnProperty.call(t, e)),
    (n.r = (t) => {
      "undefined" != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }),
        Object.defineProperty(t, "__esModule", { value: !0 });
    }),
    (() => {
      "use strict";
      var t = {};
      n.r(t);
      var e = n(85);
      (function () {
        var t,
          r =
            "function" == typeof Object.defineProperties
              ? Object.defineProperty
              : function (t, e, n) {
                  t != Array.prototype &&
                    t != Object.prototype &&
                    (t[e] = n.value);
                },
          i = (function (t) {
            t = [
              "object" == typeof window && window,
              "object" == typeof self && self,
              "object" == typeof n.g && n.g,
              t,
            ];
            for (var e = 0; e < t.length; ++e) {
              var r = t[e];
              if (r && r.Math == Math) return r;
            }
            return globalThis;
          })(this);
        function o(t) {
          var e = 0;
          return function () {
            return e < t.length ? { done: !1, value: t[e++] } : { done: !0 };
          };
        }
        function s(t) {
          var e =
            "undefined" != typeof Symbol &&
            Symbol.iterator &&
            t[Symbol.iterator];
          return e ? e.call(t) : { next: o(t) };
        }
        !(function (t, e) {
          if (e) {
            var n = i;
            t = t.split(".");
            for (var o = 0; o < t.length - 1; o++) {
              var s = t[o];
              s in n || (n[s] = {}), (n = n[s]);
            }
            (e = e((o = n[(t = t[t.length - 1])]))) != o &&
              null != e &&
              r(n, t, { configurable: !0, writable: !0, value: e });
          }
        })("Promise", function (t) {
          function e(t) {
            (this.b = 0), (this.c = void 0), (this.a = []);
            var e = this.f();
            try {
              t(e.resolve, e.reject);
            } catch (t) {
              e.reject(t);
            }
          }
          function n() {
            this.a = null;
          }
          function r(t) {
            return t instanceof e
              ? t
              : new e(function (e) {
                  e(t);
                });
          }
          if (t) return t;
          n.prototype.b = function (t) {
            if (null == this.a) {
              this.a = [];
              var e = this;
              this.c(function () {
                e.g();
              });
            }
            this.a.push(t);
          };
          var o = i.setTimeout;
          (n.prototype.c = function (t) {
            o(t, 0);
          }),
            (n.prototype.g = function () {
              for (; this.a && this.a.length; ) {
                var t = this.a;
                this.a = [];
                for (var e = 0; e < t.length; ++e) {
                  var n = t[e];
                  t[e] = null;
                  try {
                    n();
                  } catch (t) {
                    this.f(t);
                  }
                }
              }
              this.a = null;
            }),
            (n.prototype.f = function (t) {
              this.c(function () {
                throw t;
              });
            }),
            (e.prototype.f = function () {
              function t(t) {
                return function (r) {
                  n || ((n = !0), t.call(e, r));
                };
              }
              var e = this,
                n = !1;
              return { resolve: t(this.m), reject: t(this.g) };
            }),
            (e.prototype.m = function (t) {
              if (t === this)
                this.g(new TypeError("A Promise cannot resolve to itself"));
              else if (t instanceof e) this.s(t);
              else {
                t: switch (typeof t) {
                  case "object":
                    var n = null != t;
                    break t;
                  case "function":
                    n = !0;
                    break t;
                  default:
                    n = !1;
                }
                n ? this.v(t) : this.h(t);
              }
            }),
            (e.prototype.v = function (t) {
              var e = void 0;
              try {
                e = t.then;
              } catch (t) {
                return void this.g(t);
              }
              "function" == typeof e ? this.u(e, t) : this.h(t);
            }),
            (e.prototype.g = function (t) {
              this.i(2, t);
            }),
            (e.prototype.h = function (t) {
              this.i(1, t);
            }),
            (e.prototype.i = function (t, e) {
              if (0 != this.b)
                throw Error(
                  "Cannot settle(" +
                    t +
                    ", " +
                    e +
                    "): Promise already settled in state" +
                    this.b
                );
              (this.b = t), (this.c = e), this.l();
            }),
            (e.prototype.l = function () {
              if (null != this.a) {
                for (var t = 0; t < this.a.length; ++t) a.b(this.a[t]);
                this.a = null;
              }
            });
          var a = new n();
          return (
            (e.prototype.s = function (t) {
              var e = this.f();
              t.Qa(e.resolve, e.reject);
            }),
            (e.prototype.u = function (t, e) {
              var n = this.f();
              try {
                t.call(e, n.resolve, n.reject);
              } catch (t) {
                n.reject(t);
              }
            }),
            (e.prototype.then = function (t, n) {
              function r(t, e) {
                return "function" == typeof t
                  ? function (e) {
                      try {
                        i(t(e));
                      } catch (t) {
                        o(t);
                      }
                    }
                  : e;
              }
              var i,
                o,
                s = new e(function (t, e) {
                  (i = t), (o = e);
                });
              return this.Qa(r(t, i), r(n, o)), s;
            }),
            (e.prototype.catch = function (t) {
              return this.then(void 0, t);
            }),
            (e.prototype.Qa = function (t, e) {
              function n() {
                switch (r.b) {
                  case 1:
                    t(r.c);
                    break;
                  case 2:
                    e(r.c);
                    break;
                  default:
                    throw Error("Unexpected state: " + r.b);
                }
              }
              var r = this;
              null == this.a ? a.b(n) : this.a.push(n);
            }),
            (e.resolve = r),
            (e.reject = function (t) {
              return new e(function (e, n) {
                n(t);
              });
            }),
            (e.race = function (t) {
              return new e(function (e, n) {
                for (var i = s(t), o = i.next(); !o.done; o = i.next())
                  r(o.value).Qa(e, n);
              });
            }),
            (e.all = function (t) {
              var n = s(t),
                i = n.next();
              return i.done
                ? r([])
                : new e(function (t, e) {
                    function o(e) {
                      return function (n) {
                        (s[e] = n), 0 == --a && t(s);
                      };
                    }
                    var s = [],
                      a = 0;
                    do {
                      s.push(void 0),
                        a++,
                        r(i.value).Qa(o(s.length - 1), e),
                        (i = n.next());
                    } while (!i.done);
                  });
            }),
            e
          );
        });
        var a = a || {},
          u = this || self,
          c = /^[\w+/_-]+[=]{0,2}$/,
          h = null;
        function l(t) {
          return (t = t.querySelector && t.querySelector("script[nonce]")) &&
            (t = t.nonce || t.getAttribute("nonce")) &&
            c.test(t)
            ? t
            : "";
        }
        function f() {}
        function p(t) {
          var e = typeof t;
          return "object" != e
            ? e
            : t
            ? Array.isArray(t)
              ? "array"
              : e
            : "null";
        }
        function d(t) {
          var e = p(t);
          return "array" == e || ("object" == e && "number" == typeof t.length);
        }
        function v(t) {
          return "function" == p(t);
        }
        function g(t) {
          var e = typeof t;
          return ("object" == e && null != t) || "function" == e;
        }
        function m(t) {
          return (
            (Object.prototype.hasOwnProperty.call(t, y) && t[y]) || (t[y] = ++b)
          );
        }
        var y = "closure_uid_" + ((1e9 * Math.random()) >>> 0),
          b = 0;
        function w(t, e, n) {
          return t.call.apply(t.bind, arguments);
        }
        function _(t, e, n) {
          if (!t) throw Error();
          if (2 < arguments.length) {
            var r = Array.prototype.slice.call(arguments, 2);
            return function () {
              var n = Array.prototype.slice.call(arguments);
              return Array.prototype.unshift.apply(n, r), t.apply(e, n);
            };
          }
          return function () {
            return t.apply(e, arguments);
          };
        }
        function I(t, e, n) {
          return (I =
            Function.prototype.bind &&
            -1 != Function.prototype.bind.toString().indexOf("native code")
              ? w
              : _).apply(null, arguments);
        }
        function E(t, e) {
          var n = Array.prototype.slice.call(arguments, 1);
          return function () {
            var e = n.slice();
            return e.push.apply(e, arguments), t.apply(this, e);
          };
        }
        var T = Date.now;
        function S(t, e) {
          function n() {}
          (n.prototype = e.prototype),
            (t.ab = e.prototype),
            (t.prototype = new n()),
            (t.prototype.constructor = t);
        }
        function C(t) {
          return t;
        }
        function k(t, e, n) {
          (this.code = P + t),
            (this.message = e || D[t] || ""),
            (this.a = n || null);
        }
        function N(t) {
          var e = t && t.code;
          return e
            ? new k(e.substring(P.length), t.message, t.serverResponse)
            : null;
        }
        S(k, Error),
          (k.prototype.w = function () {
            var t = { code: this.code, message: this.message };
            return this.a && (t.serverResponse = this.a), t;
          }),
          (k.prototype.toJSON = function () {
            return this.w();
          });
        var A,
          P = "auth/",
          D = {
            "admin-restricted-operation":
              "This operation is restricted to administrators only.",
            "argument-error": "",
            "app-not-authorized":
              "This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",
            "app-not-installed":
              "The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",
            "captcha-check-failed":
              "The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",
            "code-expired":
              "The SMS code has expired. Please re-send the verification code to try again.",
            "cordova-not-ready": "Cordova framework is not ready.",
            "cors-unsupported": "This browser is not supported.",
            "credential-already-in-use":
              "This credential is already associated with a different user account.",
            "custom-token-mismatch":
              "The custom token corresponds to a different audience.",
            "requires-recent-login":
              "This operation is sensitive and requires recent authentication. Log in again before retrying this request.",
            "dynamic-link-not-activated":
              "Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",
            "email-change-needs-verification":
              "Multi-factor users must always have a verified email.",
            "email-already-in-use":
              "The email address is already in use by another account.",
            "expired-action-code": "The action code has expired. ",
            "cancelled-popup-request":
              "This operation has been cancelled due to another conflicting popup being opened.",
            "internal-error": "An internal error has occurred.",
            "invalid-app-credential":
              "The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",
            "invalid-app-id":
              "The mobile app identifier is not registed for the current project.",
            "invalid-user-token":
              "This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",
            "invalid-auth-event": "An internal error has occurred.",
            "invalid-verification-code":
              "The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.",
            "invalid-continue-uri":
              "The continue URL provided in the request is invalid.",
            "invalid-cordova-configuration":
              "The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",
            "invalid-custom-token":
              "The custom token format is incorrect. Please check the documentation.",
            "invalid-dynamic-link-domain":
              "The provided dynamic link domain is not configured or authorized for the current project.",
            "invalid-email": "The email address is badly formatted.",
            "invalid-api-key":
              "Your API key is invalid, please check you have copied it correctly.",
            "invalid-cert-hash":
              "The SHA-1 certificate hash provided is invalid.",
            "invalid-credential":
              "The supplied auth credential is malformed or has expired.",
            "invalid-message-payload":
              "The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",
            "invalid-multi-factor-session":
              "The request does not contain a valid proof of first factor successful sign-in.",
            "invalid-oauth-provider":
              "EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",
            "invalid-oauth-client-id":
              "The OAuth client ID provided is either invalid or does not match the specified API key.",
            "unauthorized-domain":
              "This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",
            "invalid-action-code":
              "The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",
            "wrong-password":
              "The password is invalid or the user does not have a password.",
            "invalid-persistence-type":
              "The specified persistence type is invalid. It can only be local, session or none.",
            "invalid-phone-number":
              "The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",
            "invalid-provider-id": "The specified provider ID is invalid.",
            "invalid-recipient-email":
              "The email corresponding to this action failed to send as the provided recipient email address is invalid.",
            "invalid-sender":
              "The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",
            "invalid-verification-id":
              "The verification ID used to create the phone auth credential is invalid.",
            "invalid-tenant-id": "The Auth instance's tenant ID is invalid.",
            "multi-factor-info-not-found":
              "The user does not have a second factor matching the identifier provided.",
            "multi-factor-auth-required":
              "Proof of ownership of a second factor is required to complete sign-in.",
            "missing-android-pkg-name":
              "An Android Package Name must be provided if the Android App is required to be installed.",
            "auth-domain-config-required":
              "Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",
            "missing-app-credential":
              "The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",
            "missing-verification-code":
              "The phone auth credential was created with an empty SMS verification code.",
            "missing-continue-uri":
              "A continue URL must be provided in the request.",
            "missing-iframe-start": "An internal error has occurred.",
            "missing-ios-bundle-id":
              "An iOS Bundle ID must be provided if an App Store ID is provided.",
            "missing-multi-factor-info":
              "No second factor identifier is provided.",
            "missing-multi-factor-session":
              "The request is missing proof of first factor successful sign-in.",
            "missing-or-invalid-nonce":
              "The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",
            "missing-phone-number":
              "To send verification codes, provide a phone number for the recipient.",
            "missing-verification-id":
              "The phone auth credential was created with an empty verification ID.",
            "app-deleted": "This instance of FirebaseApp has been deleted.",
            "account-exists-with-different-credential":
              "An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",
            "network-request-failed":
              "A network error (such as timeout, interrupted connection or unreachable host) has occurred.",
            "no-auth-event": "An internal error has occurred.",
            "no-such-provider":
              "User was not linked to an account with the given provider.",
            "null-user":
              "A null user object was provided as the argument for an operation which requires a non-null user object.",
            "operation-not-allowed":
              "The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",
            "operation-not-supported-in-this-environment":
              'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',
            "popup-blocked":
              "Unable to establish a connection with the popup. It may have been blocked by the browser.",
            "popup-closed-by-user":
              "The popup has been closed by the user before finalizing the operation.",
            "provider-already-linked":
              "User can only be linked to one identity for the given provider.",
            "quota-exceeded":
              "The project's quota for this operation has been exceeded.",
            "redirect-cancelled-by-user":
              "The redirect operation has been cancelled by the user before finalizing.",
            "redirect-operation-pending":
              "A redirect sign-in operation is already pending.",
            "rejected-credential":
              "The request contains malformed or mismatching credentials.",
            "second-factor-already-in-use":
              "The second factor is already enrolled on this account.",
            "maximum-second-factor-count-exceeded":
              "The maximum allowed number of second factors on a user has been exceeded.",
            "tenant-id-mismatch":
              "The provided tenant ID does not match the Auth instance's tenant ID",
            timeout: "The operation has timed out.",
            "user-token-expired":
              "The user's credential is no longer valid. The user must sign in again.",
            "too-many-requests":
              "We have blocked all requests from this device due to unusual activity. Try again later.",
            "unauthorized-continue-uri":
              "The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",
            "unsupported-first-factor":
              "Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",
            "unsupported-persistence-type":
              "The current environment does not support the specified persistence type.",
            "unsupported-tenant-operation":
              "This operation is not supported in a multi-tenant context.",
            "unverified-email": "The operation requires a verified email.",
            "user-cancelled":
              "The user did not grant your application the permissions it requested.",
            "user-not-found":
              "There is no user record corresponding to this identifier. The user may have been deleted.",
            "user-disabled":
              "The user account has been disabled by an administrator.",
            "user-mismatch":
              "The supplied credentials do not correspond to the previously signed in user.",
            "user-signed-out": "",
            "weak-password": "The password must be 6 characters long or more.",
            "web-storage-unsupported":
              "This browser is not supported or 3rd party cookies and data may be disabled.",
          },
          x = {
            ld: {
              Ta: "https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",
              Za: "https://staging-securetoken.sandbox.googleapis.com/v1/token",
              Wa: "https://staging-identitytoolkit.sandbox.googleapis.com/v2/",
              id: "b",
            },
            sd: {
              Ta: "https://www.googleapis.com/identitytoolkit/v3/relyingparty/",
              Za: "https://securetoken.googleapis.com/v1/token",
              Wa: "https://identitytoolkit.googleapis.com/v2/",
              id: "p",
            },
            ud: {
              Ta: "https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",
              Za: "https://staging-securetoken.sandbox.googleapis.com/v1/token",
              Wa: "https://staging-identitytoolkit.sandbox.googleapis.com/v2/",
              id: "s",
            },
            vd: {
              Ta: "https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",
              Za: "https://test-securetoken.sandbox.googleapis.com/v1/token",
              Wa: "https://test-identitytoolkit.sandbox.googleapis.com/v2/",
              id: "t",
            },
          };
        function O(t) {
          for (var e in x)
            if (x[e].id === t)
              return {
                firebaseEndpoint: (t = x[e]).Ta,
                secureTokenEndpoint: t.Za,
                identityPlatformEndpoint: t.Wa,
              };
          return null;
        }
        function R(t) {
          if (!t) return !1;
          try {
            return !!t.$goog_Thenable;
          } catch (t) {
            return !1;
          }
        }
        function M(t) {
          if (Error.captureStackTrace) Error.captureStackTrace(this, M);
          else {
            var e = Error().stack;
            e && (this.stack = e);
          }
          t && (this.message = String(t));
        }
        function L(t, e) {
          for (
            var n = "", r = (t = t.split("%s")).length - 1, i = 0;
            i < r;
            i++
          )
            n += t[i] + (i < e.length ? e[i] : "%s");
          M.call(this, n + t[r]);
        }
        function j(t, e) {
          throw new L(
            "Failure" + (t ? ": " + t : ""),
            Array.prototype.slice.call(arguments, 1)
          );
        }
        function F(t, e) {
          (this.c = t), (this.f = e), (this.b = 0), (this.a = null);
        }
        function U(t, e) {
          t.f(e), 100 > t.b && (t.b++, (e.next = t.a), (t.a = e));
        }
        function V() {
          this.b = this.a = null;
        }
        (A = O("__EID__") ? "__EID__" : void 0),
          S(M, Error),
          (M.prototype.name = "CustomError"),
          S(L, M),
          (L.prototype.name = "AssertionError"),
          (F.prototype.get = function () {
            if (0 < this.b) {
              this.b--;
              var t = this.a;
              (this.a = t.next), (t.next = null);
            } else t = this.c();
            return t;
          });
        var q = new F(
          function () {
            return new G();
          },
          function (t) {
            t.reset();
          }
        );
        function B() {
          var t = we,
            e = null;
          return (
            t.a &&
              ((e = t.a),
              (t.a = t.a.next),
              t.a || (t.b = null),
              (e.next = null)),
            e
          );
        }
        function G() {
          this.next = this.b = this.a = null;
        }
        (V.prototype.add = function (t, e) {
          var n = q.get();
          n.set(t, e), this.b ? (this.b.next = n) : (this.a = n), (this.b = n);
        }),
          (G.prototype.set = function (t, e) {
            (this.a = t), (this.b = e), (this.next = null);
          }),
          (G.prototype.reset = function () {
            this.next = this.b = this.a = null;
          });
        var W = Array.prototype.indexOf
            ? function (t, e) {
                return Array.prototype.indexOf.call(t, e, void 0);
              }
            : function (t, e) {
                if ("string" == typeof t)
                  return "string" != typeof e || 1 != e.length
                    ? -1
                    : t.indexOf(e, 0);
                for (var n = 0; n < t.length; n++)
                  if (n in t && t[n] === e) return n;
                return -1;
              },
          z = Array.prototype.forEach
            ? function (t, e, n) {
                Array.prototype.forEach.call(t, e, n);
              }
            : function (t, e, n) {
                for (
                  var r = t.length,
                    i = "string" == typeof t ? t.split("") : t,
                    o = 0;
                  o < r;
                  o++
                )
                  o in i && e.call(n, i[o], o, t);
              },
          H = Array.prototype.filter
            ? function (t, e) {
                return Array.prototype.filter.call(t, e, void 0);
              }
            : function (t, e) {
                for (
                  var n = t.length,
                    r = [],
                    i = 0,
                    o = "string" == typeof t ? t.split("") : t,
                    s = 0;
                  s < n;
                  s++
                )
                  if (s in o) {
                    var a = o[s];
                    e.call(void 0, a, s, t) && (r[i++] = a);
                  }
                return r;
              },
          K = Array.prototype.map
            ? function (t, e) {
                return Array.prototype.map.call(t, e, void 0);
              }
            : function (t, e) {
                for (
                  var n = t.length,
                    r = Array(n),
                    i = "string" == typeof t ? t.split("") : t,
                    o = 0;
                  o < n;
                  o++
                )
                  o in i && (r[o] = e.call(void 0, i[o], o, t));
                return r;
              },
          J = Array.prototype.some
            ? function (t, e) {
                return Array.prototype.some.call(t, e, void 0);
              }
            : function (t, e) {
                for (
                  var n = t.length,
                    r = "string" == typeof t ? t.split("") : t,
                    i = 0;
                  i < n;
                  i++
                )
                  if (i in r && e.call(void 0, r[i], i, t)) return !0;
                return !1;
              };
        function Q(t, e) {
          return 0 <= W(t, e);
        }
        function Y(t, e) {
          var n;
          return (
            (n = 0 <= (e = W(t, e))) && Array.prototype.splice.call(t, e, 1), n
          );
        }
        function X(t, e) {
          !(function (t, e) {
            for (
              var n = "string" == typeof t ? t.split("") : t, r = t.length - 1;
              0 <= r;
              --r
            )
              r in n && e.call(void 0, n[r], r, t);
          })(t, function (n, r) {
            e.call(void 0, n, r, t) &&
              Array.prototype.splice.call(t, r, 1).length;
          });
        }
        function Z(t) {
          return Array.prototype.concat.apply([], arguments);
        }
        function $(t) {
          var e = t.length;
          if (0 < e) {
            for (var n = Array(e), r = 0; r < e; r++) n[r] = t[r];
            return n;
          }
          return [];
        }
        var tt,
          et = String.prototype.trim
            ? function (t) {
                return t.trim();
              }
            : function (t) {
                return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
              },
          nt = /&/g,
          rt = /</g,
          it = />/g,
          ot = /"/g,
          st = /'/g,
          at = /\x00/g,
          ut = /[\x00&<>"']/;
        function ct(t, e) {
          return -1 != t.indexOf(e);
        }
        function ht(t, e) {
          return t < e ? -1 : t > e ? 1 : 0;
        }
        t: {
          var lt = u.navigator;
          if (lt) {
            var ft = lt.userAgent;
            if (ft) {
              tt = ft;
              break t;
            }
          }
          tt = "";
        }
        function pt(t) {
          return ct(tt, t);
        }
        function dt(t, e) {
          for (var n in t) e.call(void 0, t[n], n, t);
        }
        function vt(t) {
          for (var e in t) return !1;
          return !0;
        }
        function gt(t) {
          var e,
            n = {};
          for (e in t) n[e] = t[e];
          return n;
        }
        var mt =
          "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(
            " "
          );
        function yt(t, e) {
          for (var n, r, i = 1; i < arguments.length; i++) {
            for (n in (r = arguments[i])) t[n] = r[n];
            for (var o = 0; o < mt.length; o++)
              (n = mt[o]),
                Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);
          }
        }
        function bt(t, e) {
          t: {
            try {
              var n = t && t.ownerDocument,
                r = n && (n.defaultView || n.parentWindow);
              if ((r = r || u).Element && r.Location) {
                var i = r;
                break t;
              }
            } catch (t) {}
            i = null;
          }
          if (
            i &&
            void 0 !== i[e] &&
            (!t ||
              (!(t instanceof i[e]) &&
                (t instanceof i.Location || t instanceof i.Element)))
          ) {
            if (g(t))
              try {
                var o =
                  t.constructor.displayName ||
                  t.constructor.name ||
                  Object.prototype.toString.call(t);
              } catch (t) {
                o = "<object could not be stringified>";
              }
            else
              o = void 0 === t ? "undefined" : null === t ? "null" : typeof t;
            j(
              "Argument is not a %s (or a non-Element, non-Location mock); got: %s",
              e,
              o
            );
          }
        }
        function wt(t, e) {
          (this.a = (t === Tt && e) || ""), (this.b = Et);
        }
        function _t(t) {
          return t instanceof wt && t.constructor === wt && t.b === Et
            ? t.a
            : (j("expected object of type Const, got '" + t + "'"),
              "type_error:Const");
        }
        (wt.prototype.sa = !0),
          (wt.prototype.ra = function () {
            return this.a;
          }),
          (wt.prototype.toString = function () {
            return "Const{" + this.a + "}";
          });
        var It,
          Et = {},
          Tt = {};
        function St() {
          if (void 0 === It) {
            var t = null,
              e = u.trustedTypes;
            if (e && e.createPolicy) {
              try {
                t = e.createPolicy("goog#html", {
                  createHTML: C,
                  createScript: C,
                  createScriptURL: C,
                });
              } catch (t) {
                u.console && u.console.error(t.message);
              }
              It = t;
            } else It = t;
          }
          return It;
        }
        function Ct(t, e) {
          this.a = e === Dt ? t : "";
        }
        function kt(t) {
          return t instanceof Ct && t.constructor === Ct
            ? t.a
            : (j(
                "expected object of type TrustedResourceUrl, got '" +
                  t +
                  "' of type " +
                  p(t)
              ),
              "type_error:TrustedResourceUrl");
        }
        function Nt(t, e) {
          var n = _t(t);
          if (!Pt.test(n))
            throw Error("Invalid TrustedResourceUrl format: " + n);
          return (function (t) {
            var e = St();
            return new Ct((t = e ? e.createScriptURL(t) : t), Dt);
          })(
            (t = n.replace(At, function (t, r) {
              if (!Object.prototype.hasOwnProperty.call(e, r))
                throw Error(
                  'Found marker, "' +
                    r +
                    '", in format string, "' +
                    n +
                    '", but no valid label mapping found in args: ' +
                    JSON.stringify(e)
                );
              return (t = e[r]) instanceof wt
                ? _t(t)
                : encodeURIComponent(String(t));
            }))
          );
        }
        (Ct.prototype.sa = !0),
          (Ct.prototype.ra = function () {
            return this.a.toString();
          }),
          (Ct.prototype.toString = function () {
            return "TrustedResourceUrl{" + this.a + "}";
          });
        var At = /%{(\w+)}/g,
          Pt =
            /^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,
          Dt = {};
        function xt(t, e) {
          this.a = e === Ut ? t : "";
        }
        function Ot(t) {
          return t instanceof xt && t.constructor === xt
            ? t.a
            : (j(
                "expected object of type SafeUrl, got '" +
                  t +
                  "' of type " +
                  p(t)
              ),
              "type_error:SafeUrl");
        }
        (xt.prototype.sa = !0),
          (xt.prototype.ra = function () {
            return this.a.toString();
          }),
          (xt.prototype.toString = function () {
            return "SafeUrl{" + this.a + "}";
          });
        var Rt =
            /^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,
          Mt = /^data:(.*);base64,[a-z0-9+\/]+=*$/i,
          Lt = /^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;
        function jt(t) {
          if (t instanceof xt) return t;
          if (
            ((t = "object" == typeof t && t.sa ? t.ra() : String(t)),
            Lt.test(t))
          )
            t = new xt(t, Ut);
          else {
            var e = (t = (t = String(t)).replace(/(%0A|%0D)/g, "")).match(Mt);
            t = e && Rt.test(e[1]) ? new xt(t, Ut) : null;
          }
          return t;
        }
        function Ft(t) {
          return t instanceof xt
            ? t
            : ((t = "object" == typeof t && t.sa ? t.ra() : String(t)),
              Lt.test(t) || (t = "about:invalid#zClosurez"),
              new xt(t, Ut));
        }
        var Ut = {},
          Vt = new xt("about:invalid#zClosurez", Ut);
        function qt(t, e, n) {
          this.a = n === Bt ? t : "";
        }
        (qt.prototype.sa = !0),
          (qt.prototype.ra = function () {
            return this.a.toString();
          }),
          (qt.prototype.toString = function () {
            return "SafeHtml{" + this.a + "}";
          });
        var Bt = {};
        function Gt(t, e, n, r) {
          return (
            (t = t instanceof xt ? t : Ft(t)),
            (e = e || u),
            (n = n instanceof wt ? _t(n) : n || ""),
            e.open(Ot(t), n, r, void 0)
          );
        }
        function Wt(t, e) {
          for (
            var n = t.split("%s"),
              r = "",
              i = Array.prototype.slice.call(arguments, 1);
            i.length && 1 < n.length;

          )
            r += n.shift() + i.shift();
          return r + n.join("%s");
        }
        function zt(t) {
          return (
            ut.test(t) &&
              (-1 != t.indexOf("&") && (t = t.replace(nt, "&amp;")),
              -1 != t.indexOf("<") && (t = t.replace(rt, "&lt;")),
              -1 != t.indexOf(">") && (t = t.replace(it, "&gt;")),
              -1 != t.indexOf('"') && (t = t.replace(ot, "&quot;")),
              -1 != t.indexOf("'") && (t = t.replace(st, "&#39;")),
              -1 != t.indexOf("\0") && (t = t.replace(at, "&#0;"))),
            t
          );
        }
        function Ht(t) {
          return Ht[" "](t), t;
        }
        Ht[" "] = f;
        var Kt,
          Jt,
          Qt = pt("Opera"),
          Yt = pt("Trident") || pt("MSIE"),
          Xt = pt("Edge"),
          Zt = Xt || Yt,
          $t =
            pt("Gecko") &&
            !(ct(tt.toLowerCase(), "webkit") && !pt("Edge")) &&
            !(pt("Trident") || pt("MSIE")) &&
            !pt("Edge"),
          te = ct(tt.toLowerCase(), "webkit") && !pt("Edge");
        function ee() {
          var t = u.document;
          return t ? t.documentMode : void 0;
        }
        t: {
          var ne = "",
            re =
              ((Jt = tt),
              $t
                ? /rv:([^\);]+)(\)|;)/.exec(Jt)
                : Xt
                ? /Edge\/([\d\.]+)/.exec(Jt)
                : Yt
                ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Jt)
                : te
                ? /WebKit\/(\S+)/.exec(Jt)
                : Qt
                ? /(?:Version)[ \/]?(\S+)/.exec(Jt)
                : void 0);
          if ((re && (ne = re ? re[1] : ""), Yt)) {
            var ie = ee();
            if (null != ie && ie > parseFloat(ne)) {
              Kt = String(ie);
              break t;
            }
          }
          Kt = ne;
        }
        var oe,
          se = {};
        function ae(t) {
          return (function (t, e) {
            var n = se;
            return Object.prototype.hasOwnProperty.call(n, t)
              ? n[t]
              : (n[t] = e());
          })(t, function () {
            for (
              var e = 0,
                n = et(String(Kt)).split("."),
                r = et(String(t)).split("."),
                i = Math.max(n.length, r.length),
                o = 0;
              0 == e && o < i;
              o++
            ) {
              var s = n[o] || "",
                a = r[o] || "";
              do {
                if (
                  ((s = /(\d*)(\D*)(.*)/.exec(s) || ["", "", "", ""]),
                  (a = /(\d*)(\D*)(.*)/.exec(a) || ["", "", "", ""]),
                  0 == s[0].length && 0 == a[0].length)
                )
                  break;
                (e =
                  ht(
                    0 == s[1].length ? 0 : parseInt(s[1], 10),
                    0 == a[1].length ? 0 : parseInt(a[1], 10)
                  ) ||
                  ht(0 == s[2].length, 0 == a[2].length) ||
                  ht(s[2], a[2])),
                  (s = s[3]),
                  (a = a[3]);
              } while (0 == e);
            }
            return 0 <= e;
          });
        }
        u.document && Yt
          ? (oe = ee() || parseInt(Kt, 10) || void 0)
          : (oe = void 0);
        var ue = oe;
        try {
          new self.OffscreenCanvas(0, 0).getContext("2d");
        } catch (Jt) {}
        var ce = !Yt || 9 <= Number(ue);
        function he(t) {
          var e = document;
          return "string" == typeof t ? e.getElementById(t) : t;
        }
        function le(t, e) {
          dt(e, function (e, n) {
            e && "object" == typeof e && e.sa && (e = e.ra()),
              "style" == n
                ? (t.style.cssText = e)
                : "class" == n
                ? (t.className = e)
                : "for" == n
                ? (t.htmlFor = e)
                : de.hasOwnProperty(n)
                ? t.setAttribute(de[n], e)
                : 0 == n.lastIndexOf("aria-", 0) ||
                  0 == n.lastIndexOf("data-", 0)
                ? t.setAttribute(n, e)
                : (t[n] = e);
          });
        }
        var fe,
          pe,
          de = {
            cellpadding: "cellPadding",
            cellspacing: "cellSpacing",
            colspan: "colSpan",
            frameborder: "frameBorder",
            height: "height",
            maxlength: "maxLength",
            nonce: "nonce",
            role: "role",
            rowspan: "rowSpan",
            type: "type",
            usemap: "useMap",
            valign: "vAlign",
            width: "width",
          };
        function ve(t, e, n) {
          function r(n) {
            n && e.appendChild("string" == typeof n ? t.createTextNode(n) : n);
          }
          for (var i = 2; i < n.length; i++) {
            var o = n[i];
            if (!d(o) || (g(o) && 0 < o.nodeType)) r(o);
            else {
              t: {
                if (o && "number" == typeof o.length) {
                  if (g(o)) {
                    var s =
                      "function" == typeof o.item || "string" == typeof o.item;
                    break t;
                  }
                  if (v(o)) {
                    s = "function" == typeof o.item;
                    break t;
                  }
                }
                s = !1;
              }
              z(s ? $(o) : o, r);
            }
          }
        }
        function ge(t, e) {
          return (
            (e = String(e)),
            "application/xhtml+xml" === t.contentType && (e = e.toLowerCase()),
            t.createElement(e)
          );
        }
        function me(t) {
          u.setTimeout(function () {
            throw t;
          }, 0);
        }
        function ye(t, e) {
          pe ||
            (function () {
              if (u.Promise && u.Promise.resolve) {
                var t = u.Promise.resolve(void 0);
                pe = function () {
                  t.then(_e);
                };
              } else
                pe = function () {
                  var t = _e;
                  !v(u.setImmediate) ||
                  (u.Window &&
                    u.Window.prototype &&
                    !pt("Edge") &&
                    u.Window.prototype.setImmediate == u.setImmediate)
                    ? (fe ||
                        (fe = (function () {
                          var t = u.MessageChannel;
                          if (
                            (void 0 === t &&
                              "undefined" != typeof window &&
                              window.postMessage &&
                              window.addEventListener &&
                              !pt("Presto") &&
                              (t = function () {
                                var t = ge(document, "IFRAME");
                                (t.style.display = "none"),
                                  document.documentElement.appendChild(t);
                                var e = t.contentWindow;
                                (t = e.document).open(), t.close();
                                var n = "callImmediate" + Math.random(),
                                  r =
                                    "file:" == e.location.protocol
                                      ? "*"
                                      : e.location.protocol +
                                        "//" +
                                        e.location.host;
                                (t = I(function (t) {
                                  ("*" != r && t.origin != r) ||
                                    t.data != n ||
                                    this.port1.onmessage();
                                }, this)),
                                  e.addEventListener("message", t, !1),
                                  (this.port1 = {}),
                                  (this.port2 = {
                                    postMessage: function () {
                                      e.postMessage(n, r);
                                    },
                                  });
                              }),
                            void 0 !== t && !pt("Trident") && !pt("MSIE"))
                          ) {
                            var e = new t(),
                              n = {},
                              r = n;
                            return (
                              (e.port1.onmessage = function () {
                                if (void 0 !== n.next) {
                                  var t = (n = n.next).Gb;
                                  (n.Gb = null), t();
                                }
                              }),
                              function (t) {
                                (r.next = { Gb: t }),
                                  (r = r.next),
                                  e.port2.postMessage(0);
                              }
                            );
                          }
                          return function (t) {
                            u.setTimeout(t, 0);
                          };
                        })()),
                      fe(t))
                    : u.setImmediate(t);
                };
            })(),
            be || (pe(), (be = !0)),
            we.add(t, e);
        }
        var be = !1,
          we = new V();
        function _e() {
          for (var t; (t = B()); ) {
            try {
              t.a.call(t.b);
            } catch (t) {
              me(t);
            }
            U(q, t);
          }
          be = !1;
        }
        function Ie(t, e) {
          if (
            ((this.a = Ee),
            (this.i = void 0),
            (this.f = this.b = this.c = null),
            (this.g = this.h = !1),
            t != f)
          )
            try {
              var n = this;
              t.call(
                e,
                function (t) {
                  Le(n, Te, t);
                },
                function (t) {
                  if (!(t instanceof Ge))
                    try {
                      if (t instanceof Error) throw t;
                      throw Error("Promise rejected.");
                    } catch (t) {}
                  Le(n, Se, t);
                }
              );
            } catch (t) {
              Le(this, Se, t);
            }
        }
        var Ee = 0,
          Te = 2,
          Se = 3;
        function Ce() {
          (this.next = this.f = this.b = this.g = this.a = null), (this.c = !1);
        }
        Ce.prototype.reset = function () {
          (this.f = this.b = this.g = this.a = null), (this.c = !1);
        };
        var ke = new F(
          function () {
            return new Ce();
          },
          function (t) {
            t.reset();
          }
        );
        function Ne(t, e, n) {
          var r = ke.get();
          return (r.g = t), (r.b = e), (r.f = n), r;
        }
        function Ae(t) {
          if (t instanceof Ie) return t;
          var e = new Ie(f);
          return Le(e, Te, t), e;
        }
        function Pe(t) {
          return new Ie(function (e, n) {
            n(t);
          });
        }
        function De(t, e, n) {
          je(t, e, n, null) || ye(E(e, t));
        }
        function xe(t) {
          return new Ie(function (e) {
            var n = t.length,
              r = [];
            if (n)
              for (
                var i = function (t, i, o) {
                    n--,
                      (r[t] = i ? { Pb: !0, value: o } : { Pb: !1, reason: o }),
                      0 == n && e(r);
                  },
                  o = 0;
                o < t.length;
                o++
              )
                De(t[o], E(i, o, !0), E(i, o, !1));
            else e(r);
          });
        }
        function Oe(t, e) {
          if (t.a == Ee)
            if (t.c) {
              var n = t.c;
              if (n.b) {
                for (
                  var r = 0, i = null, o = null, s = n.b;
                  s && (s.c || (r++, s.a == t && (i = s), !(i && 1 < r)));
                  s = s.next
                )
                  i || (o = s);
                i &&
                  (n.a == Ee && 1 == r
                    ? Oe(n, e)
                    : (o
                        ? ((r = o).next == n.f && (n.f = r),
                          (r.next = r.next.next))
                        : Ue(n),
                      Ve(n, i, Se, e)));
              }
              t.c = null;
            } else Le(t, Se, e);
        }
        function Re(t, e) {
          t.b || (t.a != Te && t.a != Se) || Fe(t),
            t.f ? (t.f.next = e) : (t.b = e),
            (t.f = e);
        }
        function Me(t, e, n, r) {
          var i = Ne(null, null, null);
          return (
            (i.a = new Ie(function (t, o) {
              (i.g = e
                ? function (n) {
                    try {
                      var i = e.call(r, n);
                      t(i);
                    } catch (t) {
                      o(t);
                    }
                  }
                : t),
                (i.b = n
                  ? function (e) {
                      try {
                        var i = n.call(r, e);
                        void 0 === i && e instanceof Ge ? o(e) : t(i);
                      } catch (t) {
                        o(t);
                      }
                    }
                  : o);
            })),
            (i.a.c = t),
            Re(t, i),
            i.a
          );
        }
        function Le(t, e, n) {
          t.a == Ee &&
            (t === n &&
              ((e = Se),
              (n = new TypeError("Promise cannot resolve to itself"))),
            (t.a = 1),
            je(n, t.$c, t.ad, t) ||
              ((t.i = n),
              (t.a = e),
              (t.c = null),
              Fe(t),
              e != Se ||
                n instanceof Ge ||
                (function (t, e) {
                  (t.g = !0),
                    ye(function () {
                      t.g && Be.call(null, e);
                    });
                })(t, n)));
        }
        function je(t, e, n, r) {
          if (t instanceof Ie) return Re(t, Ne(e || f, n || null, r)), !0;
          if (R(t)) return t.then(e, n, r), !0;
          if (g(t))
            try {
              var i = t.then;
              if (v(i))
                return (
                  (function (t, e, n, r, i) {
                    function o(t) {
                      s || ((s = !0), r.call(i, t));
                    }
                    var s = !1;
                    try {
                      e.call(
                        t,
                        function (t) {
                          s || ((s = !0), n.call(i, t));
                        },
                        o
                      );
                    } catch (t) {
                      o(t);
                    }
                  })(t, i, e, n, r),
                  !0
                );
            } catch (t) {
              return n.call(r, t), !0;
            }
          return !1;
        }
        function Fe(t) {
          t.h || ((t.h = !0), ye(t.gc, t));
        }
        function Ue(t) {
          var e = null;
          return (
            t.b && ((e = t.b), (t.b = e.next), (e.next = null)),
            t.b || (t.f = null),
            e
          );
        }
        function Ve(t, e, n, r) {
          if (n == Se && e.b && !e.c) for (; t && t.g; t = t.c) t.g = !1;
          if (e.a) (e.a.c = null), qe(e, n, r);
          else
            try {
              e.c ? e.g.call(e.f) : qe(e, n, r);
            } catch (t) {
              Be.call(null, t);
            }
          U(ke, e);
        }
        function qe(t, e, n) {
          e == Te ? t.g.call(t.f, n) : t.b && t.b.call(t.f, n);
        }
        (Ie.prototype.then = function (t, e, n) {
          return Me(this, v(t) ? t : null, v(e) ? e : null, n);
        }),
          (Ie.prototype.$goog_Thenable = !0),
          ((t = Ie.prototype).oa = function (t, e) {
            return ((t = Ne(t, t, e)).c = !0), Re(this, t), this;
          }),
          (t.o = function (t, e) {
            return Me(this, null, t, e);
          }),
          (t.cancel = function (t) {
            if (this.a == Ee) {
              var e = new Ge(t);
              ye(function () {
                Oe(this, e);
              }, this);
            }
          }),
          (t.$c = function (t) {
            (this.a = Ee), Le(this, Te, t);
          }),
          (t.ad = function (t) {
            (this.a = Ee), Le(this, Se, t);
          }),
          (t.gc = function () {
            for (var t; (t = Ue(this)); ) Ve(this, t, this.a, this.i);
            this.h = !1;
          });
        var Be = me;
        function Ge(t) {
          M.call(this, t);
        }
        function We() {
          0 != ze && (He[m(this)] = this),
            (this.xa = this.xa),
            (this.pa = this.pa);
        }
        S(Ge, M), (Ge.prototype.name = "cancel");
        var ze = 0,
          He = {};
        function Ke(t) {
          if (!t.xa && ((t.xa = !0), t.Da(), 0 != ze)) {
            var e = m(t);
            if (0 != ze && t.pa && 0 < t.pa.length)
              throw Error(
                t +
                  " did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method."
              );
            delete He[e];
          }
        }
        (We.prototype.xa = !1),
          (We.prototype.Da = function () {
            if (this.pa) for (; this.pa.length; ) this.pa.shift()();
          });
        var Je =
            Object.freeze ||
            function (t) {
              return t;
            },
          Qe = !Yt || 9 <= Number(ue),
          Ye = Yt && !ae("9"),
          Xe = (function () {
            if (!u.addEventListener || !Object.defineProperty) return !1;
            var t = !1,
              e = Object.defineProperty({}, "passive", {
                get: function () {
                  t = !0;
                },
              });
            try {
              u.addEventListener("test", f, e),
                u.removeEventListener("test", f, e);
            } catch (t) {}
            return t;
          })();
        function Ze(t, e) {
          (this.type = t),
            (this.b = this.target = e),
            (this.defaultPrevented = !1);
        }
        function $e(t, e) {
          if (
            (Ze.call(this, t ? t.type : ""),
            (this.relatedTarget = this.b = this.target = null),
            (this.button =
              this.screenY =
              this.screenX =
              this.clientY =
              this.clientX =
                0),
            (this.key = ""),
            (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
            (this.pointerId = 0),
            (this.pointerType = ""),
            (this.a = null),
            t)
          ) {
            var n = (this.type = t.type),
              r =
                t.changedTouches && t.changedTouches.length
                  ? t.changedTouches[0]
                  : null;
            if (
              ((this.target = t.target || t.srcElement),
              (this.b = e),
              (e = t.relatedTarget))
            ) {
              if ($t) {
                t: {
                  try {
                    Ht(e.nodeName);
                    var i = !0;
                    break t;
                  } catch (t) {}
                  i = !1;
                }
                i || (e = null);
              }
            } else
              "mouseover" == n
                ? (e = t.fromElement)
                : "mouseout" == n && (e = t.toElement);
            (this.relatedTarget = e),
              r
                ? ((this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX),
                  (this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY),
                  (this.screenX = r.screenX || 0),
                  (this.screenY = r.screenY || 0))
                : ((this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX),
                  (this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY),
                  (this.screenX = t.screenX || 0),
                  (this.screenY = t.screenY || 0)),
              (this.button = t.button),
              (this.key = t.key || ""),
              (this.ctrlKey = t.ctrlKey),
              (this.altKey = t.altKey),
              (this.shiftKey = t.shiftKey),
              (this.metaKey = t.metaKey),
              (this.pointerId = t.pointerId || 0),
              (this.pointerType =
                "string" == typeof t.pointerType
                  ? t.pointerType
                  : tn[t.pointerType] || ""),
              (this.a = t),
              t.defaultPrevented && this.preventDefault();
          }
        }
        (Ze.prototype.preventDefault = function () {
          this.defaultPrevented = !0;
        }),
          S($e, Ze);
        var tn = Je({ 2: "touch", 3: "pen", 4: "mouse" });
        ($e.prototype.preventDefault = function () {
          $e.ab.preventDefault.call(this);
          var t = this.a;
          if (t.preventDefault) t.preventDefault();
          else if (((t.returnValue = !1), Ye))
            try {
              (t.ctrlKey || (112 <= t.keyCode && 123 >= t.keyCode)) &&
                (t.keyCode = -1);
            } catch (t) {}
        }),
          ($e.prototype.g = function () {
            return this.a;
          });
        var en = "closure_listenable_" + ((1e6 * Math.random()) | 0),
          nn = 0;
        function rn(t, e, n, r, i) {
          (this.listener = t),
            (this.proxy = null),
            (this.src = e),
            (this.type = n),
            (this.capture = !!r),
            (this.Va = i),
            (this.key = ++nn),
            (this.va = this.Pa = !1);
        }
        function on(t) {
          (t.va = !0),
            (t.listener = null),
            (t.proxy = null),
            (t.src = null),
            (t.Va = null);
        }
        function sn(t) {
          (this.src = t), (this.a = {}), (this.b = 0);
        }
        function an(t, e) {
          var n = e.type;
          n in t.a &&
            Y(t.a[n], e) &&
            (on(e), 0 == t.a[n].length && (delete t.a[n], t.b--));
        }
        function un(t, e, n, r) {
          for (var i = 0; i < t.length; ++i) {
            var o = t[i];
            if (!o.va && o.listener == e && o.capture == !!n && o.Va == r)
              return i;
          }
          return -1;
        }
        sn.prototype.add = function (t, e, n, r, i) {
          var o = t.toString();
          (t = this.a[o]) || ((t = this.a[o] = []), this.b++);
          var s = un(t, e, r, i);
          return (
            -1 < s
              ? ((e = t[s]), n || (e.Pa = !1))
              : (((e = new rn(e, this.src, o, !!r, i)).Pa = n), t.push(e)),
            e
          );
        };
        var cn = "closure_lm_" + ((1e6 * Math.random()) | 0),
          hn = {};
        function ln(t, e, n, r, i) {
          if (r && r.once) pn(t, e, n, r, i);
          else if (Array.isArray(e))
            for (var o = 0; o < e.length; o++) ln(t, e[o], n, r, i);
          else
            (n = In(n)),
              t && t[en]
                ? Tn(t, e, n, g(r) ? !!r.capture : !!r, i)
                : fn(t, e, n, !1, r, i);
        }
        function fn(t, e, n, r, i, o) {
          if (!e) throw Error("Invalid event type");
          var s = g(i) ? !!i.capture : !!i,
            a = wn(t);
          if ((a || (t[cn] = a = new sn(t)), !(n = a.add(e, n, r, s, o)).proxy))
            if (
              ((r = (function () {
                var t = bn,
                  e = Qe
                    ? function (n) {
                        return t.call(e.src, e.listener, n);
                      }
                    : function (n) {
                        if (!(n = t.call(e.src, e.listener, n))) return n;
                      };
                return e;
              })()),
              (n.proxy = r),
              (r.src = t),
              (r.listener = n),
              t.addEventListener)
            )
              Xe || (i = s),
                void 0 === i && (i = !1),
                t.addEventListener(e.toString(), r, i);
            else if (t.attachEvent) t.attachEvent(gn(e.toString()), r);
            else {
              if (!t.addListener || !t.removeListener)
                throw Error(
                  "addEventListener and attachEvent are unavailable."
                );
              t.addListener(r);
            }
        }
        function pn(t, e, n, r, i) {
          if (Array.isArray(e))
            for (var o = 0; o < e.length; o++) pn(t, e[o], n, r, i);
          else
            (n = In(n)),
              t && t[en]
                ? Sn(t, e, n, g(r) ? !!r.capture : !!r, i)
                : fn(t, e, n, !0, r, i);
        }
        function dn(t, e, n, r, i) {
          if (Array.isArray(e))
            for (var o = 0; o < e.length; o++) dn(t, e[o], n, r, i);
          else
            (r = g(r) ? !!r.capture : !!r),
              (n = In(n)),
              t && t[en]
                ? ((t = t.v),
                  (e = String(e).toString()) in t.a &&
                    -1 < (n = un((o = t.a[e]), n, r, i)) &&
                    (on(o[n]),
                    Array.prototype.splice.call(o, n, 1),
                    0 == o.length && (delete t.a[e], t.b--)))
                : t &&
                  (t = wn(t)) &&
                  ((e = t.a[e.toString()]),
                  (t = -1),
                  e && (t = un(e, n, r, i)),
                  (n = -1 < t ? e[t] : null) && vn(n));
        }
        function vn(t) {
          if ("number" != typeof t && t && !t.va) {
            var e = t.src;
            if (e && e[en]) an(e.v, t);
            else {
              var n = t.type,
                r = t.proxy;
              e.removeEventListener
                ? e.removeEventListener(n, r, t.capture)
                : e.detachEvent
                ? e.detachEvent(gn(n), r)
                : e.addListener && e.removeListener && e.removeListener(r),
                (n = wn(e))
                  ? (an(n, t), 0 == n.b && ((n.src = null), (e[cn] = null)))
                  : on(t);
            }
          }
        }
        function gn(t) {
          return t in hn ? hn[t] : (hn[t] = "on" + t);
        }
        function mn(t, e, n, r) {
          var i = !0;
          if ((t = wn(t)) && (e = t.a[e.toString()]))
            for (e = e.concat(), t = 0; t < e.length; t++) {
              var o = e[t];
              o &&
                o.capture == n &&
                !o.va &&
                ((o = yn(o, r)), (i = i && !1 !== o));
            }
          return i;
        }
        function yn(t, e) {
          var n = t.listener,
            r = t.Va || t.src;
          return t.Pa && vn(t), n.call(r, e);
        }
        function bn(t, e) {
          if (t.va) return !0;
          if (!Qe) {
            if (!e)
              t: {
                e = ["window", "event"];
                for (var n = u, r = 0; r < e.length; r++)
                  if (null == (n = n[e[r]])) {
                    e = null;
                    break t;
                  }
                e = n;
              }
            if (
              ((e = new $e((r = e), this)),
              (n = !0),
              !(0 > r.keyCode || null != r.returnValue))
            ) {
              t: {
                var i = !1;
                if (0 == r.keyCode)
                  try {
                    r.keyCode = -1;
                    break t;
                  } catch (t) {
                    i = !0;
                  }
                (i || null == r.returnValue) && (r.returnValue = !0);
              }
              for (r = [], i = e.b; i; i = i.parentNode) r.push(i);
              for (t = t.type, i = r.length - 1; 0 <= i; i--) {
                e.b = r[i];
                var o = mn(r[i], t, !0, e);
                n = n && o;
              }
              for (i = 0; i < r.length; i++)
                (e.b = r[i]), (o = mn(r[i], t, !1, e)), (n = n && o);
            }
            return n;
          }
          return yn(t, new $e(e, this));
        }
        function wn(t) {
          return (t = t[cn]) instanceof sn ? t : null;
        }
        var _n = "__closure_events_fn_" + ((1e9 * Math.random()) >>> 0);
        function In(t) {
          return v(t)
            ? t
            : (t[_n] ||
                (t[_n] = function (e) {
                  return t.handleEvent(e);
                }),
              t[_n]);
        }
        function En() {
          We.call(this),
            (this.v = new sn(this)),
            (this.ac = this),
            (this.gb = null);
        }
        function Tn(t, e, n, r, i) {
          t.v.add(String(e), n, !1, r, i);
        }
        function Sn(t, e, n, r, i) {
          t.v.add(String(e), n, !0, r, i);
        }
        function Cn(t, e, n, r) {
          if (!(e = t.v.a[String(e)])) return !0;
          e = e.concat();
          for (var i = !0, o = 0; o < e.length; ++o) {
            var s = e[o];
            if (s && !s.va && s.capture == n) {
              var a = s.listener,
                u = s.Va || s.src;
              s.Pa && an(t.v, s), (i = !1 !== a.call(u, r) && i);
            }
          }
          return i && !r.defaultPrevented;
        }
        function kn(t, e, n) {
          if (v(t)) n && (t = I(t, n));
          else {
            if (!t || "function" != typeof t.handleEvent)
              throw Error("Invalid listener argument");
            t = I(t.handleEvent, t);
          }
          return 2147483647 < Number(e) ? -1 : u.setTimeout(t, e || 0);
        }
        function Nn(t) {
          var e = null;
          return new Ie(function (n, r) {
            -1 ==
              (e = kn(function () {
                n(void 0);
              }, t)) && r(Error("Failed to schedule timer."));
          }).o(function (t) {
            throw (u.clearTimeout(e), t);
          });
        }
        function An(t) {
          if (t.W && "function" == typeof t.W) return t.W();
          if ("string" == typeof t) return t.split("");
          if (d(t)) {
            for (var e = [], n = t.length, r = 0; r < n; r++) e.push(t[r]);
            return e;
          }
          for (r in ((e = []), (n = 0), t)) e[n++] = t[r];
          return e;
        }
        function Pn(t) {
          if (t.Y && "function" == typeof t.Y) return t.Y();
          if (!t.W || "function" != typeof t.W) {
            if (d(t) || "string" == typeof t) {
              var e = [];
              t = t.length;
              for (var n = 0; n < t; n++) e.push(n);
              return e;
            }
            for (var r in ((e = []), (n = 0), t)) e[n++] = r;
            return e;
          }
        }
        function Dn(t, e) {
          (this.b = {}), (this.a = []), (this.c = 0);
          var n = arguments.length;
          if (1 < n) {
            if (n % 2) throw Error("Uneven number of arguments");
            for (var r = 0; r < n; r += 2)
              this.set(arguments[r], arguments[r + 1]);
          } else if (t)
            if (t instanceof Dn)
              for (n = t.Y(), r = 0; r < n.length; r++)
                this.set(n[r], t.get(n[r]));
            else for (r in t) this.set(r, t[r]);
        }
        function xn(t) {
          if (t.c != t.a.length) {
            for (var e = 0, n = 0; e < t.a.length; ) {
              var r = t.a[e];
              On(t.b, r) && (t.a[n++] = r), e++;
            }
            t.a.length = n;
          }
          if (t.c != t.a.length) {
            var i = {};
            for (n = e = 0; e < t.a.length; )
              On(i, (r = t.a[e])) || ((t.a[n++] = r), (i[r] = 1)), e++;
            t.a.length = n;
          }
        }
        function On(t, e) {
          return Object.prototype.hasOwnProperty.call(t, e);
        }
        S(En, We),
          (En.prototype[en] = !0),
          (En.prototype.addEventListener = function (t, e, n, r) {
            ln(this, t, e, n, r);
          }),
          (En.prototype.removeEventListener = function (t, e, n, r) {
            dn(this, t, e, n, r);
          }),
          (En.prototype.dispatchEvent = function (t) {
            var e,
              n = this.gb;
            if (n) for (e = []; n; n = n.gb) e.push(n);
            n = this.ac;
            var r = t.type || t;
            if ("string" == typeof t) t = new Ze(t, n);
            else if (t instanceof Ze) t.target = t.target || n;
            else {
              var i = t;
              yt((t = new Ze(r, n)), i);
            }
            if (((i = !0), e))
              for (var o = e.length - 1; 0 <= o; o--) {
                var s = (t.b = e[o]);
                i = Cn(s, r, !0, t) && i;
              }
            if (
              ((i = Cn((s = t.b = n), r, !0, t) && i),
              (i = Cn(s, r, !1, t) && i),
              e)
            )
              for (o = 0; o < e.length; o++)
                i = Cn((s = t.b = e[o]), r, !1, t) && i;
            return i;
          }),
          (En.prototype.Da = function () {
            if ((En.ab.Da.call(this), this.v)) {
              var t,
                e = this.v;
              for (t in e.a) {
                for (var n = e.a[t], r = 0; r < n.length; r++) on(n[r]);
                delete e.a[t], e.b--;
              }
            }
            this.gb = null;
          }),
          ((t = Dn.prototype).W = function () {
            xn(this);
            for (var t = [], e = 0; e < this.a.length; e++)
              t.push(this.b[this.a[e]]);
            return t;
          }),
          (t.Y = function () {
            return xn(this), this.a.concat();
          }),
          (t.clear = function () {
            (this.b = {}), (this.c = this.a.length = 0);
          }),
          (t.get = function (t, e) {
            return On(this.b, t) ? this.b[t] : e;
          }),
          (t.set = function (t, e) {
            On(this.b, t) || (this.c++, this.a.push(t)), (this.b[t] = e);
          }),
          (t.forEach = function (t, e) {
            for (var n = this.Y(), r = 0; r < n.length; r++) {
              var i = n[r],
                o = this.get(i);
              t.call(e, o, i, this);
            }
          });
        var Rn =
          /^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
        function Mn(t, e) {
          var n;
          (this.a = this.l = this.c = ""),
            (this.g = null),
            (this.h = this.f = ""),
            (this.i = !1),
            t instanceof Mn
              ? ((this.i = void 0 !== e ? e : t.i),
                Ln(this, t.c),
                (this.l = t.l),
                (this.a = t.a),
                jn(this, t.g),
                (this.f = t.f),
                Fn(this, rr(t.b)),
                (this.h = t.h))
              : t && (n = String(t).match(Rn))
              ? ((this.i = !!e),
                Ln(this, n[1] || "", !0),
                (this.l = Gn(n[2] || "")),
                (this.a = Gn(n[3] || "", !0)),
                jn(this, n[4]),
                (this.f = Gn(n[5] || "", !0)),
                Fn(this, n[6] || "", !0),
                (this.h = Gn(n[7] || "")))
              : ((this.i = !!e), (this.b = new Xn(null, this.i)));
        }
        function Ln(t, e, n) {
          (t.c = n ? Gn(e, !0) : e), t.c && (t.c = t.c.replace(/:$/, ""));
        }
        function jn(t, e) {
          if (e) {
            if (((e = Number(e)), isNaN(e) || 0 > e))
              throw Error("Bad port number " + e);
            t.g = e;
          } else t.g = null;
        }
        function Fn(t, e, n) {
          e instanceof Xn
            ? ((t.b = e),
              (function (t, e) {
                e &&
                  !t.f &&
                  (Zn(t),
                  (t.c = null),
                  t.a.forEach(function (t, e) {
                    var n = e.toLowerCase();
                    e != n && (tr(this, e), nr(this, n, t));
                  }, t)),
                  (t.f = e);
              })(t.b, t.i))
            : (n || (e = Wn(e, Qn)), (t.b = new Xn(e, t.i)));
        }
        function Un(t, e, n) {
          t.b.set(e, n);
        }
        function Vn(t, e) {
          return t.b.get(e);
        }
        function qn(t) {
          return t instanceof Mn ? new Mn(t) : new Mn(t, void 0);
        }
        function Bn(t, e, n, r) {
          var i = new Mn(null, void 0);
          return (
            t && Ln(i, t), e && (i.a = e), n && jn(i, n), r && (i.f = r), i
          );
        }
        function Gn(t, e) {
          return t
            ? e
              ? decodeURI(t.replace(/%25/g, "%2525"))
              : decodeURIComponent(t)
            : "";
        }
        function Wn(t, e, n) {
          return "string" == typeof t
            ? ((t = encodeURI(t).replace(e, zn)),
              n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, "%$1")),
              t)
            : null;
        }
        function zn(t) {
          return (
            "%" +
            (((t = t.charCodeAt(0)) >> 4) & 15).toString(16) +
            (15 & t).toString(16)
          );
        }
        (Mn.prototype.toString = function () {
          var t = [],
            e = this.c;
          e && t.push(Wn(e, Hn, !0), ":");
          var n = this.a;
          return (
            (n || "file" == e) &&
              (t.push("//"),
              (e = this.l) && t.push(Wn(e, Hn, !0), "@"),
              t.push(
                encodeURIComponent(String(n)).replace(
                  /%25([0-9a-fA-F]{2})/g,
                  "%$1"
                )
              ),
              null != (n = this.g) && t.push(":", String(n))),
            (n = this.f) &&
              (this.a && "/" != n.charAt(0) && t.push("/"),
              t.push(Wn(n, "/" == n.charAt(0) ? Jn : Kn, !0))),
            (n = this.b.toString()) && t.push("?", n),
            (n = this.h) && t.push("#", Wn(n, Yn)),
            t.join("")
          );
        }),
          (Mn.prototype.resolve = function (t) {
            var e = new Mn(this),
              n = !!t.c;
            n ? Ln(e, t.c) : (n = !!t.l),
              n ? (e.l = t.l) : (n = !!t.a),
              n ? (e.a = t.a) : (n = null != t.g);
            var r = t.f;
            if (n) jn(e, t.g);
            else if ((n = !!t.f)) {
              if ("/" != r.charAt(0))
                if (this.a && !this.f) r = "/" + r;
                else {
                  var i = e.f.lastIndexOf("/");
                  -1 != i && (r = e.f.substr(0, i + 1) + r);
                }
              if (".." == (i = r) || "." == i) r = "";
              else if (ct(i, "./") || ct(i, "/.")) {
                (r = 0 == i.lastIndexOf("/", 0)), (i = i.split("/"));
                for (var o = [], s = 0; s < i.length; ) {
                  var a = i[s++];
                  "." == a
                    ? r && s == i.length && o.push("")
                    : ".." == a
                    ? ((1 < o.length || (1 == o.length && "" != o[0])) &&
                        o.pop(),
                      r && s == i.length && o.push(""))
                    : (o.push(a), (r = !0));
                }
                r = o.join("/");
              } else r = i;
            }
            return (
              n ? (e.f = r) : (n = "" !== t.b.toString()),
              n ? Fn(e, rr(t.b)) : (n = !!t.h),
              n && (e.h = t.h),
              e
            );
          });
        var Hn = /[#\/\?@]/g,
          Kn = /[#\?:]/g,
          Jn = /[#\?]/g,
          Qn = /[#\?@]/g,
          Yn = /#/g;
        function Xn(t, e) {
          (this.b = this.a = null), (this.c = t || null), (this.f = !!e);
        }
        function Zn(t) {
          t.a ||
            ((t.a = new Dn()),
            (t.b = 0),
            t.c &&
              (function (t, e) {
                if (t) {
                  t = t.split("&");
                  for (var n = 0; n < t.length; n++) {
                    var r = t[n].indexOf("="),
                      i = null;
                    if (0 <= r) {
                      var o = t[n].substring(0, r);
                      i = t[n].substring(r + 1);
                    } else o = t[n];
                    e(o, i ? decodeURIComponent(i.replace(/\+/g, " ")) : "");
                  }
                }
              })(t.c, function (e, n) {
                t.add(decodeURIComponent(e.replace(/\+/g, " ")), n);
              }));
        }
        function $n(t) {
          var e = Pn(t);
          if (void 0 === e) throw Error("Keys are undefined");
          var n = new Xn(null, void 0);
          t = An(t);
          for (var r = 0; r < e.length; r++) {
            var i = e[r],
              o = t[r];
            Array.isArray(o) ? nr(n, i, o) : n.add(i, o);
          }
          return n;
        }
        function tr(t, e) {
          Zn(t),
            (e = ir(t, e)),
            On(t.a.b, e) &&
              ((t.c = null),
              (t.b -= t.a.get(e).length),
              On((t = t.a).b, e) &&
                (delete t.b[e], t.c--, t.a.length > 2 * t.c && xn(t)));
        }
        function er(t, e) {
          return Zn(t), (e = ir(t, e)), On(t.a.b, e);
        }
        function nr(t, e, n) {
          tr(t, e),
            0 < n.length &&
              ((t.c = null), t.a.set(ir(t, e), $(n)), (t.b += n.length));
        }
        function rr(t) {
          var e = new Xn();
          return (e.c = t.c), t.a && ((e.a = new Dn(t.a)), (e.b = t.b)), e;
        }
        function ir(t, e) {
          return (e = String(e)), t.f && (e = e.toLowerCase()), e;
        }
        function or(t) {
          var e = [];
          return ar(new sr(), t, e), e.join("");
        }
        function sr() {}
        function ar(t, e, n) {
          if (null == e) n.push("null");
          else {
            if ("object" == typeof e) {
              if (Array.isArray(e)) {
                var r = e;
                (e = r.length), n.push("[");
                for (var i = "", o = 0; o < e; o++)
                  n.push(i), ar(t, r[o], n), (i = ",");
                return void n.push("]");
              }
              if (
                !(
                  e instanceof String ||
                  e instanceof Number ||
                  e instanceof Boolean
                )
              ) {
                for (r in (n.push("{"), (i = ""), e))
                  Object.prototype.hasOwnProperty.call(e, r) &&
                    "function" != typeof (o = e[r]) &&
                    (n.push(i), hr(r, n), n.push(":"), ar(t, o, n), (i = ","));
                return void n.push("}");
              }
              e = e.valueOf();
            }
            switch (typeof e) {
              case "string":
                hr(e, n);
                break;
              case "number":
                n.push(isFinite(e) && !isNaN(e) ? String(e) : "null");
                break;
              case "boolean":
                n.push(String(e));
                break;
              case "function":
                n.push("null");
                break;
              default:
                throw Error("Unknown type: " + typeof e);
            }
          }
        }
        ((t = Xn.prototype).add = function (t, e) {
          Zn(this), (this.c = null), (t = ir(this, t));
          var n = this.a.get(t);
          return n || this.a.set(t, (n = [])), n.push(e), (this.b += 1), this;
        }),
          (t.clear = function () {
            (this.a = this.c = null), (this.b = 0);
          }),
          (t.forEach = function (t, e) {
            Zn(this),
              this.a.forEach(function (n, r) {
                z(
                  n,
                  function (n) {
                    t.call(e, n, r, this);
                  },
                  this
                );
              }, this);
          }),
          (t.Y = function () {
            Zn(this);
            for (
              var t = this.a.W(), e = this.a.Y(), n = [], r = 0;
              r < e.length;
              r++
            )
              for (var i = t[r], o = 0; o < i.length; o++) n.push(e[r]);
            return n;
          }),
          (t.W = function (t) {
            Zn(this);
            var e = [];
            if ("string" == typeof t)
              er(this, t) && (e = Z(e, this.a.get(ir(this, t))));
            else {
              t = this.a.W();
              for (var n = 0; n < t.length; n++) e = Z(e, t[n]);
            }
            return e;
          }),
          (t.set = function (t, e) {
            return (
              Zn(this),
              (this.c = null),
              er(this, (t = ir(this, t))) && (this.b -= this.a.get(t).length),
              this.a.set(t, [e]),
              (this.b += 1),
              this
            );
          }),
          (t.get = function (t, e) {
            return t && 0 < (t = this.W(t)).length ? String(t[0]) : e;
          }),
          (t.toString = function () {
            if (this.c) return this.c;
            if (!this.a) return "";
            for (var t = [], e = this.a.Y(), n = 0; n < e.length; n++) {
              var r = e[n],
                i = encodeURIComponent(String(r));
              r = this.W(r);
              for (var o = 0; o < r.length; o++) {
                var s = i;
                "" !== r[o] && (s += "=" + encodeURIComponent(String(r[o]))),
                  t.push(s);
              }
            }
            return (this.c = t.join("&"));
          });
        var ur = {
            '"': '\\"',
            "\\": "\\\\",
            "/": "\\/",
            "\b": "\\b",
            "\f": "\\f",
            "\n": "\\n",
            "\r": "\\r",
            "\t": "\\t",
            "\v": "\\u000b",
          },
          cr = /\uffff/.test("")
            ? /[\\"\x00-\x1f\x7f-\uffff]/g
            : /[\\"\x00-\x1f\x7f-\xff]/g;
        function hr(t, e) {
          e.push(
            '"',
            t.replace(cr, function (t) {
              var e = ur[t];
              return (
                e ||
                  ((e =
                    "\\u" + (65536 | t.charCodeAt(0)).toString(16).substr(1)),
                  (ur[t] = e)),
                e
              );
            }),
            '"'
          );
        }
        function lr() {
          var t = Dr();
          return (Yt && !!ue && 11 == ue) || /Edge\/\d+/.test(t);
        }
        function fr() {
          return (
            (u.window && u.window.location.href) ||
            (self && self.location && self.location.href) ||
            ""
          );
        }
        function pr(t, e) {
          e = e || u.window;
          var n = "about:blank";
          t && (n = Ot(jt(t) || Vt)), (e.location.href = n);
        }
        function dr(t, e) {
          var n,
            r = [];
          for (n in t)
            n in e
              ? typeof t[n] != typeof e[n]
                ? r.push(n)
                : "object" == typeof t[n] && null != t[n] && null != e[n]
                ? 0 < dr(t[n], e[n]).length && r.push(n)
                : t[n] !== e[n] && r.push(n)
              : r.push(n);
          for (n in e) n in t || r.push(n);
          return r;
        }
        function vr(t) {
          return !!(
            (t = (t || Dr()).toLowerCase()).match(/android/) ||
            t.match(/webos/) ||
            t.match(/iphone|ipad|ipod/) ||
            t.match(/blackberry/) ||
            t.match(/windows phone/) ||
            t.match(/iemobile/)
          );
        }
        function gr(t) {
          t = t || u.window;
          try {
            t.close();
          } catch (t) {}
        }
        function mr(t, e, n) {
          var r = Math.floor(1e9 * Math.random()).toString();
          (e = e || 500), (n = n || 600);
          var i = (window.screen.availHeight - n) / 2,
            o = (window.screen.availWidth - e) / 2;
          for (s in ((e = {
            width: e,
            height: n,
            top: 0 < i ? i : 0,
            left: 0 < o ? o : 0,
            location: !0,
            resizable: !0,
            statusbar: !0,
            toolbar: !1,
          }),
          (n = Dr().toLowerCase()),
          r && ((e.target = r), ct(n, "crios/") && (e.target = "_blank")),
          Nr(Dr()) == Cr &&
            ((t = t || "http://localhost"), (e.scrollbars = !0)),
          (n = t || ""),
          (t = e) || (t = {}),
          (r = window),
          (e =
            n instanceof xt
              ? n
              : jt(void 0 !== n.href ? n.href : String(n)) || Vt),
          (n = t.target || n.target),
          (i = []),
          t))
            switch (s) {
              case "width":
              case "height":
              case "top":
              case "left":
                i.push(s + "=" + t[s]);
                break;
              case "target":
              case "noopener":
              case "noreferrer":
                break;
              default:
                i.push(s + "=" + (t[s] ? 1 : 0));
            }
          var s = i.join(",");
          if (
            (((pt("iPhone") && !pt("iPod") && !pt("iPad")) ||
              pt("iPad") ||
              pt("iPod")) &&
            r.navigator &&
            r.navigator.standalone &&
            n &&
            "_self" != n
              ? (bt((s = ge(document, "A")), "HTMLAnchorElement"),
                (e = e instanceof xt ? e : Ft(e)),
                (s.href = Ot(e)),
                s.setAttribute("target", n),
                t.noreferrer && s.setAttribute("rel", "noreferrer"),
                (t = document.createEvent("MouseEvent")).initMouseEvent(
                  "click",
                  !0,
                  !0,
                  r,
                  1
                ),
                s.dispatchEvent(t),
                (s = {}))
              : t.noreferrer
              ? ((s = Gt("", r, n, s)),
                (t = Ot(e)),
                s &&
                  (Zt && ct(t, ";") && (t = "'" + t.replace(/'/g, "%27") + "'"),
                  (s.opener = null),
                  (t =
                    '<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url=' +
                    zt(t) +
                    '">'),
                  (t = new qt(
                    (t = (r = St()) ? r.createHTML(t) : t),
                    null,
                    Bt
                  )),
                  (r = s.document)) &&
                  (r.write(
                    (function (t) {
                      return t instanceof qt && t.constructor === qt
                        ? t.a
                        : (j(
                            "expected object of type SafeHtml, got '" +
                              t +
                              "' of type " +
                              p(t)
                          ),
                          "type_error:SafeHtml");
                    })(t)
                  ),
                  r.close()))
              : (s = Gt(e, r, n, s)) && t.noopener && (s.opener = null),
            s)
          )
            try {
              s.focus();
            } catch (t) {}
          return s;
        }
        var yr = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,
          br = /^[^@]+@[^@]+$/;
        function wr() {
          var t = null;
          return new Ie(function (e) {
            "complete" == u.document.readyState
              ? e()
              : ((t = function () {
                  e();
                }),
                pn(window, "load", t));
          }).o(function (e) {
            throw (dn(window, "load", t), e);
          });
        }
        function _r(t) {
          return (
            (t = t || Dr()),
            !(
              ("file:" !== Lr() && "ionic:" !== Lr()) ||
              !t.toLowerCase().match(/iphone|ipad|ipod|android/)
            )
          );
        }
        function Ir() {
          var t = u.window;
          try {
            return !(!t || t == t.top);
          } catch (t) {
            return !1;
          }
        }
        function Er() {
          return (
            void 0 !== u.WorkerGlobalScope &&
            "function" == typeof u.importScripts
          );
        }
        function Tr() {
          return e.Z.INTERNAL.hasOwnProperty("reactNative")
            ? "ReactNative"
            : e.Z.INTERNAL.hasOwnProperty("node")
            ? "Node"
            : Er()
            ? "Worker"
            : "Browser";
        }
        function Sr() {
          var t = Tr();
          return "ReactNative" === t || "Node" === t;
        }
        var Cr = "Firefox",
          kr = "Chrome";
        function Nr(t) {
          var e = t.toLowerCase();
          return ct(e, "opera/") || ct(e, "opr/") || ct(e, "opios/")
            ? "Opera"
            : ct(e, "iemobile")
            ? "IEMobile"
            : ct(e, "msie") || ct(e, "trident/")
            ? "IE"
            : ct(e, "edge/")
            ? "Edge"
            : ct(e, "firefox/")
            ? Cr
            : ct(e, "silk/")
            ? "Silk"
            : ct(e, "blackberry")
            ? "Blackberry"
            : ct(e, "webos")
            ? "Webos"
            : !ct(e, "safari/") ||
              ct(e, "chrome/") ||
              ct(e, "crios/") ||
              ct(e, "android")
            ? (!ct(e, "chrome/") && !ct(e, "crios/")) || ct(e, "edge/")
              ? ct(e, "android")
                ? "Android"
                : (t = t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/)) &&
                  2 == t.length
                ? t[1]
                : "Other"
              : kr
            : "Safari";
        }
        var Ar = { md: "FirebaseCore-web", od: "FirebaseUI-web" };
        function Pr(t, e) {
          e = e || [];
          var n,
            r = [],
            i = {};
          for (n in Ar) i[Ar[n]] = !0;
          for (n = 0; n < e.length; n++)
            void 0 !== i[e[n]] && (delete i[e[n]], r.push(e[n]));
          return (
            r.sort(),
            (e = r).length || (e = ["FirebaseCore-web"]),
            "Browser" === (r = Tr())
              ? (r = Nr((i = Dr())))
              : "Worker" === r && (r = Nr((i = Dr())) + "-" + r),
            r + "/JsCore/" + t + "/" + e.join(",")
          );
        }
        function Dr() {
          return (u.navigator && u.navigator.userAgent) || "";
        }
        function xr(t, e) {
          (t = t.split(".")), (e = e || u);
          for (
            var n = 0;
            n < t.length && "object" == typeof e && null != e;
            n++
          )
            e = e[t[n]];
          return n != t.length && (e = void 0), e;
        }
        function Or() {
          try {
            var t = u.localStorage,
              e = qr();
            if (t)
              return t.setItem(e, "1"), t.removeItem(e), !lr() || !!u.indexedDB;
          } catch (t) {
            return Er() && !!u.indexedDB;
          }
          return !1;
        }
        function Rr() {
          return (
            (Mr() || "chrome-extension:" === Lr() || _r()) &&
            !Sr() &&
            Or() &&
            !Er()
          );
        }
        function Mr() {
          return "http:" === Lr() || "https:" === Lr();
        }
        function Lr() {
          return (u.location && u.location.protocol) || null;
        }
        function jr(t) {
          return !vr((t = t || Dr())) && Nr(t) != Cr;
        }
        function Fr(t) {
          return void 0 === t ? null : or(t);
        }
        function Ur(t) {
          var e,
            n = {};
          for (e in t)
            t.hasOwnProperty(e) &&
              null !== t[e] &&
              void 0 !== t[e] &&
              (n[e] = t[e]);
          return n;
        }
        function Vr(t) {
          if (null !== t) return JSON.parse(t);
        }
        function qr(t) {
          return t || Math.floor(1e9 * Math.random()).toString();
        }
        function Br(t) {
          return (
            "Safari" != Nr((t = t || Dr())) &&
            !t.toLowerCase().match(/iphone|ipad|ipod/)
          );
        }
        function Gr() {
          var t = u.___jsl;
          if (t && t.H)
            for (var e in t.H)
              if (
                ((t.H[e].r = t.H[e].r || []),
                (t.H[e].L = t.H[e].L || []),
                (t.H[e].r = t.H[e].L.concat()),
                t.CP)
              )
                for (var n = 0; n < t.CP.length; n++) t.CP[n] = null;
        }
        function Wr(t, e) {
          if (t > e) throw Error("Short delay should be less than long delay!");
          (this.a = t),
            (this.c = e),
            (t = Dr()),
            (e = Tr()),
            (this.b = vr(t) || "ReactNative" === e);
        }
        function zr() {
          var t = u.document;
          return (
            !t || void 0 === t.visibilityState || "visible" == t.visibilityState
          );
        }
        function Hr(t) {
          try {
            var e = new Date(parseInt(t, 10));
            if (!isNaN(e.getTime()) && !/[^0-9]/.test(t))
              return e.toUTCString();
          } catch (t) {}
          return null;
        }
        function Kr() {
          return !(!xr("fireauth.oauthhelper", u) && !xr("fireauth.iframe", u));
        }
        Wr.prototype.get = function () {
          var t = u.navigator;
          return !t ||
            "boolean" != typeof t.onLine ||
            (!Mr() &&
              "chrome-extension:" !== Lr() &&
              void 0 === t.connection) ||
            t.onLine
            ? this.b
              ? this.c
              : this.a
            : Math.min(5e3, this.a);
        };
        var Jr,
          Qr = {};
        function Yr(t) {
          Qr[t] ||
            ((Qr[t] = !0),
            "undefined" != typeof console &&
              "function" == typeof console.warn &&
              console.warn(t));
        }
        try {
          var Xr = {};
          Object.defineProperty(Xr, "abcd", {
            configurable: !0,
            enumerable: !0,
            value: 1,
          }),
            Object.defineProperty(Xr, "abcd", {
              configurable: !0,
              enumerable: !0,
              value: 2,
            }),
            (Jr = 2 == Xr.abcd);
        } catch (Jt) {
          Jr = !1;
        }
        function Zr(t, e, n) {
          Jr
            ? Object.defineProperty(t, e, {
                configurable: !0,
                enumerable: !0,
                value: n,
              })
            : (t[e] = n);
        }
        function $r(t, e) {
          if (e) for (var n in e) e.hasOwnProperty(n) && Zr(t, n, e[n]);
        }
        function ti(t) {
          var e = {};
          return $r(e, t), e;
        }
        function ei(t) {
          var e = t;
          if ("object" == typeof t && null != t)
            for (var n in ((e = "length" in t ? [] : {}), t))
              Zr(e, n, ei(t[n]));
          return e;
        }
        function ni(t) {
          var e = t && (t[ai] ? "phone" : null);
          if (!(e && t && t[si]))
            throw new k(
              "internal-error",
              "Internal assert: invalid MultiFactorInfo object"
            );
          Zr(this, "uid", t[si]), Zr(this, "displayName", t[ii] || null);
          var n = null;
          t[oi] && (n = new Date(t[oi]).toUTCString()),
            Zr(this, "enrollmentTime", n),
            Zr(this, "factorId", e);
        }
        function ri(t) {
          try {
            var e = new ui(t);
          } catch (t) {
            e = null;
          }
          return e;
        }
        ni.prototype.w = function () {
          return {
            uid: this.uid,
            displayName: this.displayName,
            factorId: this.factorId,
            enrollmentTime: this.enrollmentTime,
          };
        };
        var ii = "displayName",
          oi = "enrolledAt",
          si = "mfaEnrollmentId",
          ai = "phoneInfo";
        function ui(t) {
          ni.call(this, t), Zr(this, "phoneNumber", t[ai]);
        }
        function ci(t) {
          var e = {},
            n = t[pi],
            r = t[vi],
            i = t[gi];
          if (
            ((t = ri(t[di])),
            !i ||
              (i != li && i != fi && !n) ||
              (i == fi && !r) ||
              (i == hi && !t))
          )
            throw Error("Invalid checkActionCode response!");
          i == fi
            ? ((e[yi] = n || null), (e[wi] = n || null), (e[mi] = r))
            : ((e[yi] = r || null), (e[wi] = r || null), (e[mi] = n || null)),
            (e[bi] = t || null),
            Zr(this, Ii, i),
            Zr(this, _i, ei(e));
        }
        S(ui, ni),
          (ui.prototype.w = function () {
            var t = ui.ab.w.call(this);
            return (t.phoneNumber = this.phoneNumber), t;
          });
        var hi = "REVERT_SECOND_FACTOR_ADDITION",
          li = "EMAIL_SIGNIN",
          fi = "VERIFY_AND_CHANGE_EMAIL",
          pi = "email",
          di = "mfaInfo",
          vi = "newEmail",
          gi = "requestType",
          mi = "email",
          yi = "fromEmail",
          bi = "multiFactorInfo",
          wi = "previousEmail",
          _i = "data",
          Ii = "operation";
        function Ei(t) {
          var e = Vn((t = qn(t)), Ti) || null,
            n = Vn(t, Si) || null,
            r = Vn(t, Ni) || null;
          if (((r = (r && Pi[r]) || null), !e || !n || !r))
            throw new k(
              "argument-error",
              Ti +
                ", " +
                Si +
                "and " +
                Ni +
                " are required in a valid action code URL."
            );
          $r(this, {
            apiKey: e,
            operation: r,
            code: n,
            continueUrl: Vn(t, Ci) || null,
            languageCode: Vn(t, ki) || null,
            tenantId: Vn(t, Ai) || null,
          });
        }
        var Ti = "apiKey",
          Si = "oobCode",
          Ci = "continueUrl",
          ki = "languageCode",
          Ni = "mode",
          Ai = "tenantId",
          Pi = {
            recoverEmail: "RECOVER_EMAIL",
            resetPassword: "PASSWORD_RESET",
            revertSecondFactorAddition: hi,
            signIn: li,
            verifyAndChangeEmail: fi,
            verifyEmail: "VERIFY_EMAIL",
          };
        function Di(t) {
          try {
            return new Ei(t);
          } catch (t) {
            return null;
          }
        }
        function xi(t) {
          var e = t[ji];
          if (void 0 === e) throw new k("missing-continue-uri");
          if ("string" != typeof e || ("string" == typeof e && !e.length))
            throw new k("invalid-continue-uri");
          (this.h = e), (this.b = this.a = null), (this.g = !1);
          var n = t[Oi];
          if (n && "object" == typeof n) {
            e = n[Vi];
            var r = n[Fi];
            if (((n = n[Ui]), "string" == typeof e && e.length)) {
              if (((this.a = e), void 0 !== r && "boolean" != typeof r))
                throw new k(
                  "argument-error",
                  Fi + " property must be a boolean when specified."
                );
              if (
                ((this.g = !!r),
                void 0 !== n &&
                  ("string" != typeof n || ("string" == typeof n && !n.length)))
              )
                throw new k(
                  "argument-error",
                  Ui + " property must be a non empty string when specified."
                );
              this.b = n || null;
            } else {
              if (void 0 !== e)
                throw new k(
                  "argument-error",
                  Vi + " property must be a non empty string when specified."
                );
              if (void 0 !== r || void 0 !== n)
                throw new k("missing-android-pkg-name");
            }
          } else if (void 0 !== n)
            throw new k(
              "argument-error",
              Oi + " property must be a non null object when specified."
            );
          if (((this.f = null), (e = t[Li]) && "object" == typeof e)) {
            if ("string" == typeof (e = e[qi]) && e.length) this.f = e;
            else if (void 0 !== e)
              throw new k(
                "argument-error",
                qi + " property must be a non empty string when specified."
              );
          } else if (void 0 !== e)
            throw new k(
              "argument-error",
              Li + " property must be a non null object when specified."
            );
          if (void 0 !== (e = t[Mi]) && "boolean" != typeof e)
            throw new k(
              "argument-error",
              Mi + " property must be a boolean when specified."
            );
          if (
            ((this.c = !!e),
            void 0 !== (t = t[Ri]) &&
              ("string" != typeof t || ("string" == typeof t && !t.length)))
          )
            throw new k(
              "argument-error",
              Ri + " property must be a non empty string when specified."
            );
          this.i = t || null;
        }
        var Oi = "android",
          Ri = "dynamicLinkDomain",
          Mi = "handleCodeInApp",
          Li = "iOS",
          ji = "url",
          Fi = "installApp",
          Ui = "minimumVersion",
          Vi = "packageName",
          qi = "bundleId";
        function Bi(t) {
          var e = {};
          for (var n in ((e.continueUrl = t.h),
          (e.canHandleCodeInApp = t.c),
          (e.androidPackageName = t.a) &&
            ((e.androidMinimumVersion = t.b), (e.androidInstallApp = t.g)),
          (e.iOSBundleId = t.f),
          (e.dynamicLinkDomain = t.i),
          e))
            null === e[n] && delete e[n];
          return e;
        }
        var Gi = null;
        function Wi(t) {
          var e = Hi(t);
          if (!(e && e.sub && e.iss && e.aud && e.exp))
            throw Error("Invalid JWT");
          (this.h = t),
            (this.a = e.exp),
            (this.i = e.sub),
            (t = Date.now() / 1e3),
            (this.g = e.iat || (t > this.a ? this.a : t)),
            (this.b =
              e.provider_id ||
              (e.firebase && e.firebase.sign_in_provider) ||
              null),
            (this.f = (e.firebase && e.firebase.tenant) || null),
            (this.c = !!e.is_anonymous || "anonymous" == this.b);
        }
        function zi(t) {
          try {
            return new Wi(t);
          } catch (t) {
            return null;
          }
        }
        function Hi(t) {
          if (!t) return null;
          if (3 != (t = t.split(".")).length) return null;
          for (var e = (4 - ((t = t[1]).length % 4)) % 4, n = 0; n < e; n++)
            t += ".";
          try {
            var r = (function (t) {
              var e = [];
              return (
                (function (t, e) {
                  function n(e) {
                    for (; r < t.length; ) {
                      var n = t.charAt(r++),
                        i = Gi[n];
                      if (null != i) return i;
                      if (!/^[\s\xa0]*$/.test(n))
                        throw Error("Unknown base64 encoding at char: " + n);
                    }
                    return e;
                  }
                  !(function () {
                    if (!Gi) {
                      Gi = {};
                      for (
                        var t =
                            "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(
                              ""
                            ),
                          e = ["+/=", "+/", "-_=", "-_.", "-_"],
                          n = 0;
                        5 > n;
                        n++
                      )
                        for (
                          var r = t.concat(e[n].split("")), i = 0;
                          i < r.length;
                          i++
                        ) {
                          var o = r[i];
                          void 0 === Gi[o] && (Gi[o] = i);
                        }
                    }
                  })();
                  for (var r = 0; ; ) {
                    var i = n(-1),
                      o = n(0),
                      s = n(64),
                      a = n(64);
                    if (64 === a && -1 === i) break;
                    e((i << 2) | (o >> 4)),
                      64 != s &&
                        (e(((o << 4) & 240) | (s >> 2)),
                        64 != a && e(((s << 6) & 192) | a));
                  }
                })(t, function (t) {
                  e.push(t);
                }),
                e
              );
            })(t);
            for (t = [], n = e = 0; e < r.length; ) {
              var i = r[e++];
              if (128 > i) t[n++] = String.fromCharCode(i);
              else if (191 < i && 224 > i) {
                var o = r[e++];
                t[n++] = String.fromCharCode(((31 & i) << 6) | (63 & o));
              } else if (239 < i && 365 > i) {
                o = r[e++];
                var s = r[e++],
                  a =
                    (((7 & i) << 18) |
                      ((63 & o) << 12) |
                      ((63 & s) << 6) |
                      (63 & r[e++])) -
                    65536;
                (t[n++] = String.fromCharCode(55296 + (a >> 10))),
                  (t[n++] = String.fromCharCode(56320 + (1023 & a)));
              } else
                (o = r[e++]),
                  (s = r[e++]),
                  (t[n++] = String.fromCharCode(
                    ((15 & i) << 12) | ((63 & o) << 6) | (63 & s)
                  ));
            }
            return JSON.parse(t.join(""));
          } catch (t) {}
          return null;
        }
        (Wi.prototype.T = function () {
          return this.f;
        }),
          (Wi.prototype.l = function () {
            return this.c;
          }),
          (Wi.prototype.toString = function () {
            return this.h;
          });
        var Ki =
            "oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(
              " "
            ),
          Ji = ["client_id", "response_type", "scope", "redirect_uri", "state"],
          Qi = {
            nd: { Ja: "locale", ua: 700, ta: 600, fa: "facebook.com", Xa: Ji },
            pd: { Ja: null, ua: 500, ta: 750, fa: "github.com", Xa: Ji },
            qd: { Ja: "hl", ua: 515, ta: 680, fa: "google.com", Xa: Ji },
            wd: { Ja: "lang", ua: 485, ta: 705, fa: "twitter.com", Xa: Ki },
            kd: { Ja: "locale", ua: 640, ta: 600, fa: "apple.com", Xa: [] },
          };
        function Yi(t) {
          for (var e in Qi) if (Qi[e].fa == t) return Qi[e];
          return null;
        }
        function Xi(t) {
          var e = {};
          (e["facebook.com"] = no),
            (e["google.com"] = io),
            (e["github.com"] = ro),
            (e["twitter.com"] = oo);
          var n = t && t[$i];
          try {
            if (n) return e[n] ? new e[n](t) : new eo(t);
            if (void 0 !== t[Zi]) return new to(t);
          } catch (t) {}
          return null;
        }
        var Zi = "idToken",
          $i = "providerId";
        function to(t) {
          var e = t[$i];
          if (!e && t[Zi]) {
            var n = zi(t[Zi]);
            n && n.b && (e = n.b);
          }
          if (!e) throw Error("Invalid additional user info!");
          ("anonymous" != e && "custom" != e) || (e = null),
            (n = !1),
            void 0 !== t.isNewUser
              ? (n = !!t.isNewUser)
              : "identitytoolkit#SignupNewUserResponse" === t.kind && (n = !0),
            Zr(this, "providerId", e),
            Zr(this, "isNewUser", n);
        }
        function eo(t) {
          to.call(this, t),
            Zr(this, "profile", ei((t = Vr(t.rawUserInfo || "{}")) || {}));
        }
        function no(t) {
          if ((eo.call(this, t), "facebook.com" != this.providerId))
            throw Error("Invalid provider ID!");
        }
        function ro(t) {
          if ((eo.call(this, t), "github.com" != this.providerId))
            throw Error("Invalid provider ID!");
          Zr(this, "username", (this.profile && this.profile.login) || null);
        }
        function io(t) {
          if ((eo.call(this, t), "google.com" != this.providerId))
            throw Error("Invalid provider ID!");
        }
        function oo(t) {
          if ((eo.call(this, t), "twitter.com" != this.providerId))
            throw Error("Invalid provider ID!");
          Zr(this, "username", t.screenName || null);
        }
        function so(t) {
          var e = qn(t),
            n = Vn(e, "link"),
            r = Vn(qn(n), "link");
          return (
            (e = Vn(e, "deep_link_id")), Vn(qn(e), "link") || e || r || n || t
          );
        }
        function ao(t, e) {
          if (!t && !e)
            throw new k(
              "internal-error",
              "Internal assert: no raw session string available"
            );
          if (t && e)
            throw new k(
              "internal-error",
              "Internal assert: unable to determine the session type"
            );
          (this.a = t || null),
            (this.b = e || null),
            (this.type = this.a ? uo : co);
        }
        S(eo, to), S(no, eo), S(ro, eo), S(io, eo), S(oo, eo);
        var uo = "enroll",
          co = "signin";
        function ho() {}
        function lo(t, e) {
          return t
            .then(function (t) {
              if (t[$s]) {
                var n = zi(t[$s]);
                if (!n || e != n.i) throw new k("user-mismatch");
                return t;
              }
              throw new k("user-mismatch");
            })
            .o(function (t) {
              throw t && t.code && t.code == P + "user-not-found"
                ? new k("user-mismatch")
                : t;
            });
        }
        function fo(t, e) {
          if (!e)
            throw new k("internal-error", "failed to construct a credential");
          (this.a = e), Zr(this, "providerId", t), Zr(this, "signInMethod", t);
        }
        function po(t) {
          return { pendingToken: t.a, requestUri: "http://localhost" };
        }
        function vo(t) {
          if (
            t &&
            t.providerId &&
            t.signInMethod &&
            0 == t.providerId.indexOf("saml.") &&
            t.pendingToken
          )
            try {
              return new fo(t.providerId, t.pendingToken);
            } catch (t) {}
          return null;
        }
        function go(t, e, n) {
          if (((this.a = null), e.idToken || e.accessToken))
            e.idToken && Zr(this, "idToken", e.idToken),
              e.accessToken && Zr(this, "accessToken", e.accessToken),
              e.nonce && !e.pendingToken && Zr(this, "nonce", e.nonce),
              e.pendingToken && (this.a = e.pendingToken);
          else {
            if (!e.oauthToken || !e.oauthTokenSecret)
              throw new k("internal-error", "failed to construct a credential");
            Zr(this, "accessToken", e.oauthToken),
              Zr(this, "secret", e.oauthTokenSecret);
          }
          Zr(this, "providerId", t), Zr(this, "signInMethod", n);
        }
        function mo(t) {
          var e = {};
          return (
            t.idToken && (e.id_token = t.idToken),
            t.accessToken && (e.access_token = t.accessToken),
            t.secret && (e.oauth_token_secret = t.secret),
            (e.providerId = t.providerId),
            t.nonce && !t.a && (e.nonce = t.nonce),
            (e = {
              postBody: $n(e).toString(),
              requestUri: "http://localhost",
            }),
            t.a && (delete e.postBody, (e.pendingToken = t.a)),
            e
          );
        }
        function yo(t) {
          if (t && t.providerId && t.signInMethod) {
            var e = {
              idToken: t.oauthIdToken,
              accessToken: t.oauthTokenSecret ? null : t.oauthAccessToken,
              oauthTokenSecret: t.oauthTokenSecret,
              oauthToken: t.oauthTokenSecret && t.oauthAccessToken,
              nonce: t.nonce,
              pendingToken: t.pendingToken,
            };
            try {
              return new go(t.providerId, e, t.signInMethod);
            } catch (t) {}
          }
          return null;
        }
        function bo(t, e) {
          (this.Qc = e || []),
            $r(this, { providerId: t, isOAuthProvider: !0 }),
            (this.Ib = {}),
            (this.pb = (Yi(t) || {}).Ja || null),
            (this.ob = null);
        }
        function wo(t) {
          if ("string" != typeof t || 0 != t.indexOf("saml."))
            throw new k(
              "argument-error",
              'SAML provider IDs must be prefixed with "saml."'
            );
          bo.call(this, t, []);
        }
        function _o(t) {
          bo.call(this, t, Ji), (this.a = []);
        }
        function Io() {
          _o.call(this, "facebook.com");
        }
        function Eo(t) {
          if (!t)
            throw new k(
              "argument-error",
              "credential failed: expected 1 argument (the OAuth access token)."
            );
          var e = t;
          return (
            g(t) && (e = t.accessToken), new Io().credential({ accessToken: e })
          );
        }
        function To() {
          _o.call(this, "github.com");
        }
        function So(t) {
          if (!t)
            throw new k(
              "argument-error",
              "credential failed: expected 1 argument (the OAuth access token)."
            );
          var e = t;
          return (
            g(t) && (e = t.accessToken), new To().credential({ accessToken: e })
          );
        }
        function Co() {
          _o.call(this, "google.com"), this.Ca("profile");
        }
        function ko(t, e) {
          var n = t;
          return (
            g(t) && ((n = t.idToken), (e = t.accessToken)),
            new Co().credential({ idToken: n, accessToken: e })
          );
        }
        function No() {
          bo.call(this, "twitter.com", Ki);
        }
        function Ao(t, e) {
          var n = t;
          if (
            (g(n) || (n = { oauthToken: t, oauthTokenSecret: e }),
            !n.oauthToken || !n.oauthTokenSecret)
          )
            throw new k(
              "argument-error",
              "credential failed: expected 2 arguments (the OAuth access token and secret)."
            );
          return new go("twitter.com", n, "twitter.com");
        }
        function Po(t, e, n) {
          (this.a = t),
            (this.f = e),
            Zr(this, "providerId", "password"),
            Zr(
              this,
              "signInMethod",
              n === xo.EMAIL_LINK_SIGN_IN_METHOD
                ? xo.EMAIL_LINK_SIGN_IN_METHOD
                : xo.EMAIL_PASSWORD_SIGN_IN_METHOD
            );
        }
        function Do(t) {
          return t && t.email && t.password
            ? new Po(t.email, t.password, t.signInMethod)
            : null;
        }
        function xo() {
          $r(this, { providerId: "password", isOAuthProvider: !1 });
        }
        function Oo(t, e) {
          if (!(e = Ro(e)))
            throw new k("argument-error", "Invalid email link!");
          return new Po(t, e.code, xo.EMAIL_LINK_SIGN_IN_METHOD);
        }
        function Ro(t) {
          return (t = Di((t = so(t)))) && t.operation === li ? t : null;
        }
        function Mo(t) {
          if (!((t.eb && t.cb) || (t.La && t.ea)))
            throw new k("internal-error");
          (this.a = t),
            Zr(this, "providerId", "phone"),
            (this.fa = "phone"),
            Zr(this, "signInMethod", "phone");
        }
        function Lo(t) {
          if (
            t &&
            "phone" === t.providerId &&
            ((t.verificationId && t.verificationCode) ||
              (t.temporaryProof && t.phoneNumber))
          ) {
            var e = {};
            return (
              z(
                [
                  "verificationId",
                  "verificationCode",
                  "temporaryProof",
                  "phoneNumber",
                ],
                function (n) {
                  t[n] && (e[n] = t[n]);
                }
              ),
              new Mo(e)
            );
          }
          return null;
        }
        function jo(t) {
          return t.a.La && t.a.ea
            ? { temporaryProof: t.a.La, phoneNumber: t.a.ea }
            : { sessionInfo: t.a.eb, code: t.a.cb };
        }
        function Fo(t) {
          try {
            this.a = t || e.Z.auth();
          } catch (t) {
            throw new k(
              "argument-error",
              "Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp()."
            );
          }
          $r(this, { providerId: "phone", isOAuthProvider: !1 });
        }
        function Uo(t, e) {
          if (!t) throw new k("missing-verification-id");
          if (!e) throw new k("missing-verification-code");
          return new Mo({ eb: t, cb: e });
        }
        function Vo(t) {
          if (t.temporaryProof && t.phoneNumber)
            return new Mo({ La: t.temporaryProof, ea: t.phoneNumber });
          var e = t && t.providerId;
          if (!e || "password" === e) return null;
          var n = t && t.oauthAccessToken,
            r = t && t.oauthTokenSecret,
            i = t && t.nonce,
            o = t && t.oauthIdToken,
            s = t && t.pendingToken;
          try {
            switch (e) {
              case "google.com":
                return ko(o, n);
              case "facebook.com":
                return Eo(n);
              case "github.com":
                return So(n);
              case "twitter.com":
                return Ao(n, r);
              default:
                return n || r || o || s
                  ? s
                    ? 0 == e.indexOf("saml.")
                      ? new fo(e, s)
                      : new go(
                          e,
                          {
                            pendingToken: s,
                            idToken: t.oauthIdToken,
                            accessToken: t.oauthAccessToken,
                          },
                          e
                        )
                    : new _o(e).credential({
                        idToken: o,
                        accessToken: n,
                        rawNonce: i,
                      })
                  : null;
            }
          } catch (t) {
            return null;
          }
        }
        function qo(t) {
          if (!t.isOAuthProvider) throw new k("invalid-oauth-provider");
        }
        function Bo(t, e, n, r, i, o, s) {
          if (
            ((this.c = t),
            (this.b = e || null),
            (this.g = n || null),
            (this.f = r || null),
            (this.i = o || null),
            (this.h = s || null),
            (this.a = i || null),
            !this.g && !this.a)
          )
            throw new k("invalid-auth-event");
          if (this.g && this.a) throw new k("invalid-auth-event");
          if (this.g && !this.f) throw new k("invalid-auth-event");
        }
        function Go(t) {
          return (t = t || {}).type
            ? new Bo(
                t.type,
                t.eventId,
                t.urlResponse,
                t.sessionId,
                t.error && N(t.error),
                t.postBody,
                t.tenantId
              )
            : null;
        }
        function Wo() {
          (this.b = null), (this.a = []);
        }
        (ao.prototype.Ha = function () {
          return this.a ? Ae(this.a) : Ae(this.b);
        }),
          (ao.prototype.w = function () {
            return this.type == uo
              ? { multiFactorSession: { idToken: this.a } }
              : { multiFactorSession: { pendingCredential: this.b } };
          }),
          (ho.prototype.ka = function () {}),
          (ho.prototype.b = function () {}),
          (ho.prototype.c = function () {}),
          (ho.prototype.w = function () {}),
          (fo.prototype.ka = function (t) {
            return wa(t, po(this));
          }),
          (fo.prototype.b = function (t, e) {
            var n = po(this);
            return (n.idToken = e), _a(t, n);
          }),
          (fo.prototype.c = function (t, e) {
            return lo(Ia(t, po(this)), e);
          }),
          (fo.prototype.w = function () {
            return {
              providerId: this.providerId,
              signInMethod: this.signInMethod,
              pendingToken: this.a,
            };
          }),
          (go.prototype.ka = function (t) {
            return wa(t, mo(this));
          }),
          (go.prototype.b = function (t, e) {
            var n = mo(this);
            return (n.idToken = e), _a(t, n);
          }),
          (go.prototype.c = function (t, e) {
            return lo(Ia(t, mo(this)), e);
          }),
          (go.prototype.w = function () {
            var t = {
              providerId: this.providerId,
              signInMethod: this.signInMethod,
            };
            return (
              this.idToken && (t.oauthIdToken = this.idToken),
              this.accessToken && (t.oauthAccessToken = this.accessToken),
              this.secret && (t.oauthTokenSecret = this.secret),
              this.nonce && (t.nonce = this.nonce),
              this.a && (t.pendingToken = this.a),
              t
            );
          }),
          (bo.prototype.Ka = function (t) {
            return (this.Ib = gt(t)), this;
          }),
          S(wo, bo),
          S(_o, bo),
          (_o.prototype.Ca = function (t) {
            return Q(this.a, t) || this.a.push(t), this;
          }),
          (_o.prototype.Qb = function () {
            return $(this.a);
          }),
          (_o.prototype.credential = function (t, e) {
            var n;
            if (
              !(n = g(t)
                ? {
                    idToken: t.idToken || null,
                    accessToken: t.accessToken || null,
                    nonce: t.rawNonce || null,
                  }
                : { idToken: t || null, accessToken: e || null }).idToken &&
              !n.accessToken
            )
              throw new k(
                "argument-error",
                "credential failed: must provide the ID token and/or the access token."
              );
            return new go(this.providerId, n, this.providerId);
          }),
          S(Io, _o),
          Zr(Io, "PROVIDER_ID", "facebook.com"),
          Zr(Io, "FACEBOOK_SIGN_IN_METHOD", "facebook.com"),
          S(To, _o),
          Zr(To, "PROVIDER_ID", "github.com"),
          Zr(To, "GITHUB_SIGN_IN_METHOD", "github.com"),
          S(Co, _o),
          Zr(Co, "PROVIDER_ID", "google.com"),
          Zr(Co, "GOOGLE_SIGN_IN_METHOD", "google.com"),
          S(No, bo),
          Zr(No, "PROVIDER_ID", "twitter.com"),
          Zr(No, "TWITTER_SIGN_IN_METHOD", "twitter.com"),
          (Po.prototype.ka = function (t) {
            return this.signInMethod == xo.EMAIL_LINK_SIGN_IN_METHOD
              ? ru(t, Pa, { email: this.a, oobCode: this.f })
              : ru(t, Za, { email: this.a, password: this.f });
          }),
          (Po.prototype.b = function (t, e) {
            return this.signInMethod == xo.EMAIL_LINK_SIGN_IN_METHOD
              ? ru(t, Da, { idToken: e, email: this.a, oobCode: this.f })
              : ru(t, Wa, { idToken: e, email: this.a, password: this.f });
          }),
          (Po.prototype.c = function (t, e) {
            return lo(this.ka(t), e);
          }),
          (Po.prototype.w = function () {
            return {
              email: this.a,
              password: this.f,
              signInMethod: this.signInMethod,
            };
          }),
          $r(xo, { PROVIDER_ID: "password" }),
          $r(xo, { EMAIL_LINK_SIGN_IN_METHOD: "emailLink" }),
          $r(xo, { EMAIL_PASSWORD_SIGN_IN_METHOD: "password" }),
          (Mo.prototype.ka = function (t) {
            return t.fb(jo(this));
          }),
          (Mo.prototype.b = function (t, e) {
            var n = jo(this);
            return (n.idToken = e), ru(t, tu, n);
          }),
          (Mo.prototype.c = function (t, e) {
            var n = jo(this);
            return (n.operation = "REAUTH"), lo((t = ru(t, eu, n)), e);
          }),
          (Mo.prototype.w = function () {
            var t = { providerId: "phone" };
            return (
              this.a.eb && (t.verificationId = this.a.eb),
              this.a.cb && (t.verificationCode = this.a.cb),
              this.a.La && (t.temporaryProof = this.a.La),
              this.a.ea && (t.phoneNumber = this.a.ea),
              t
            );
          }),
          (Fo.prototype.fb = function (t, e) {
            var n = this.a.a;
            return Ae(e.verify()).then(function (r) {
              if ("string" != typeof r)
                throw new k(
                  "argument-error",
                  "An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string."
                );
              switch (e.type) {
                case "recaptcha":
                  var i = g(t) ? t.session : null,
                    o = g(t) ? t.phoneNumber : t;
                  return (
                    i && i.type == uo
                      ? i.Ha().then(function (t) {
                          return (function (t, e) {
                            return ru(t, Ha, e).then(function (t) {
                              return t.phoneSessionInfo.sessionInfo;
                            });
                          })(n, {
                            idToken: t,
                            phoneEnrollmentInfo: {
                              phoneNumber: o,
                              recaptchaToken: r,
                            },
                          });
                        })
                      : i && i.type == co
                      ? i.Ha().then(function (e) {
                          return (function (t, e) {
                            return ru(t, Ka, e).then(function (t) {
                              return t.phoneResponseInfo.sessionInfo;
                            });
                          })(n, {
                            mfaPendingCredential: e,
                            mfaEnrollmentId:
                              (t.multiFactorHint && t.multiFactorHint.uid) ||
                              t.multiFactorUid,
                            phoneSignInInfo: { recaptchaToken: r },
                          });
                        })
                      : (function (t, e) {
                          return ru(t, Ba, e);
                        })(n, { phoneNumber: o, recaptchaToken: r })
                  ).then(
                    function (t) {
                      return "function" == typeof e.reset && e.reset(), t;
                    },
                    function (t) {
                      throw ("function" == typeof e.reset && e.reset(), t);
                    }
                  );
                default:
                  throw new k(
                    "argument-error",
                    'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.'
                  );
              }
            });
          }),
          $r(Fo, { PROVIDER_ID: "phone" }),
          $r(Fo, { PHONE_SIGN_IN_METHOD: "phone" }),
          (Bo.prototype.getUid = function () {
            var t = [];
            return (
              t.push(this.c),
              this.b && t.push(this.b),
              this.f && t.push(this.f),
              this.h && t.push(this.h),
              t.join("-")
            );
          }),
          (Bo.prototype.T = function () {
            return this.h;
          }),
          (Bo.prototype.w = function () {
            return {
              type: this.c,
              eventId: this.b,
              urlResponse: this.g,
              sessionId: this.f,
              postBody: this.i,
              tenantId: this.h,
              error: this.a && this.a.w(),
            };
          });
        var zo,
          Ho = null;
        function Ko(t) {
          var e = "unauthorized-domain",
            n = void 0,
            r = qn(t);
          (t = r.a),
            "chrome-extension" == (r = r.c)
              ? (n = Wt(
                  "This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",
                  t
                ))
              : "http" == r || "https" == r
              ? (n = Wt(
                  "This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",
                  t
                ))
              : (e = "operation-not-supported-in-this-environment"),
            k.call(this, e, n);
        }
        function Jo(t, e, n) {
          k.call(this, t, n),
            (t = e || {}).Jb && Zr(this, "email", t.Jb),
            t.ea && Zr(this, "phoneNumber", t.ea),
            t.credential && Zr(this, "credential", t.credential),
            t.Zb && Zr(this, "tenantId", t.Zb);
        }
        function Qo(t) {
          if (t.code) {
            var e = t.code || "";
            0 == e.indexOf(P) && (e = e.substring(P.length));
            var n = { credential: Vo(t), Zb: t.tenantId };
            if (t.email) n.Jb = t.email;
            else if (t.phoneNumber) n.ea = t.phoneNumber;
            else if (!n.credential) return new k(e, t.message || void 0);
            return new Jo(e, n, t.message);
          }
          return null;
        }
        function Yo() {}
        function Xo(t) {
          return t.c || (t.c = t.b());
        }
        function Zo() {}
        function $o(t) {
          if (
            !t.f &&
            "undefined" == typeof XMLHttpRequest &&
            "undefined" != typeof ActiveXObject
          ) {
            for (
              var e = [
                  "MSXML2.XMLHTTP.6.0",
                  "MSXML2.XMLHTTP.3.0",
                  "MSXML2.XMLHTTP",
                  "Microsoft.XMLHTTP",
                ],
                n = 0;
              n < e.length;
              n++
            ) {
              var r = e[n];
              try {
                return new ActiveXObject(r), (t.f = r);
              } catch (t) {}
            }
            throw Error(
              "Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed"
            );
          }
          return t.f;
        }
        function ts() {}
        function es() {
          (this.a = new XDomainRequest()),
            (this.readyState = 0),
            (this.onreadystatechange = null),
            (this.responseType = this.responseText = this.response = ""),
            (this.status = -1),
            (this.statusText = ""),
            (this.a.onload = I(this.qc, this)),
            (this.a.onerror = I(this.Sb, this)),
            (this.a.onprogress = I(this.rc, this)),
            (this.a.ontimeout = I(this.vc, this));
        }
        function ns(t, e) {
          (t.readyState = e), t.onreadystatechange && t.onreadystatechange();
        }
        function rs(t, e, n) {
          this.reset(t, e, n, void 0, void 0);
        }
        function is(t) {
          (this.f = t), (this.b = this.c = this.a = null);
        }
        function os(t, e) {
          (this.name = t), (this.value = e);
        }
        S(Ko, k),
          S(Jo, k),
          (Jo.prototype.w = function () {
            var t = { code: this.code, message: this.message };
            this.email && (t.email = this.email),
              this.phoneNumber && (t.phoneNumber = this.phoneNumber),
              this.tenantId && (t.tenantId = this.tenantId);
            var e = this.credential && this.credential.w();
            return e && yt(t, e), t;
          }),
          (Jo.prototype.toJSON = function () {
            return this.w();
          }),
          (Yo.prototype.c = null),
          S(Zo, Yo),
          (Zo.prototype.a = function () {
            var t = $o(this);
            return t ? new ActiveXObject(t) : new XMLHttpRequest();
          }),
          (Zo.prototype.b = function () {
            var t = {};
            return $o(this) && ((t[0] = !0), (t[1] = !0)), t;
          }),
          (zo = new Zo()),
          S(ts, Yo),
          (ts.prototype.a = function () {
            var t = new XMLHttpRequest();
            if ("withCredentials" in t) return t;
            if ("undefined" != typeof XDomainRequest) return new es();
            throw Error("Unsupported browser");
          }),
          (ts.prototype.b = function () {
            return {};
          }),
          ((t = es.prototype).open = function (t, e, n) {
            if (null != n && !n)
              throw Error("Only async requests are supported.");
            this.a.open(t, e);
          }),
          (t.send = function (t) {
            if (t) {
              if ("string" != typeof t)
                throw Error("Only string data is supported");
              this.a.send(t);
            } else this.a.send();
          }),
          (t.abort = function () {
            this.a.abort();
          }),
          (t.setRequestHeader = function () {}),
          (t.getResponseHeader = function (t) {
            return "content-type" == t.toLowerCase() ? this.a.contentType : "";
          }),
          (t.qc = function () {
            (this.status = 200),
              (this.response = this.responseText = this.a.responseText),
              ns(this, 4);
          }),
          (t.Sb = function () {
            (this.status = 500),
              (this.response = this.responseText = ""),
              ns(this, 4);
          }),
          (t.vc = function () {
            this.Sb();
          }),
          (t.rc = function () {
            (this.status = 200), ns(this, 1);
          }),
          (t.getAllResponseHeaders = function () {
            return "content-type: " + this.a.contentType;
          }),
          (rs.prototype.a = null),
          (rs.prototype.reset = function (t, e, n, r, i) {
            r || T(), delete this.a;
          }),
          (os.prototype.toString = function () {
            return this.name;
          });
        var ss = new os("SEVERE", 1e3),
          as = new os("WARNING", 900),
          us = new os("CONFIG", 700),
          cs = new os("FINE", 500);
        function hs(t) {
          return t.c
            ? t.c
            : t.a
            ? hs(t.a)
            : (j("Root logger has no level set."), null);
        }
        is.prototype.log = function (t, e, n) {
          if (t.value >= hs(this).value)
            for (
              v(e) && (e = e()),
                t = new rs(t, String(e), this.f),
                n && (t.a = n),
                n = this;
              n;

            )
              n = n.a;
        };
        var ls = {},
          fs = null;
        function ps(t) {
          var e;
          if (
            (fs || ((fs = new is("")), (ls[""] = fs), (fs.c = us)),
            !(e = ls[t]))
          ) {
            e = new is(t);
            var n = t.lastIndexOf("."),
              r = t.substr(n + 1);
            (n = ps(t.substr(0, n))).b || (n.b = {}),
              (n.b[r] = e),
              (e.a = n),
              (ls[t] = e);
          }
          return e;
        }
        function ds(t, e) {
          t && t.log(cs, e, void 0);
        }
        function vs(t) {
          this.f = t;
        }
        function gs(t) {
          En.call(this),
            (this.u = t),
            (this.h = void 0),
            (this.readyState = ms),
            (this.status = 0),
            (this.responseType =
              this.responseText =
              this.response =
              this.statusText =
                ""),
            (this.onreadystatechange = null),
            (this.l = new Headers()),
            (this.b = null),
            (this.s = "GET"),
            (this.f = ""),
            (this.a = !1),
            (this.i = ps("goog.net.FetchXmlHttp")),
            (this.m = this.c = this.g = null);
        }
        S(vs, Yo),
          (vs.prototype.a = function () {
            return new gs(this.f);
          }),
          (vs.prototype.b = (function (t) {
            return function () {
              return t;
            };
          })({})),
          S(gs, En);
        var ms = 0;
        function ys(t) {
          t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t));
        }
        function bs(t) {
          (t.readyState = 4), (t.g = null), (t.c = null), (t.m = null), ws(t);
        }
        function ws(t) {
          t.onreadystatechange && t.onreadystatechange.call(t);
        }
        function _s(t) {
          En.call(this),
            (this.headers = new Dn()),
            (this.D = t || null),
            (this.c = !1),
            (this.C = this.a = null),
            (this.h = this.R = this.l = ""),
            (this.f = this.O = this.i = this.J = !1),
            (this.g = 0),
            (this.s = null),
            (this.m = Is),
            (this.u = this.S = !1);
        }
        ((t = gs.prototype).open = function (t, e) {
          if (this.readyState != ms)
            throw (this.abort(), Error("Error reopening a connection"));
          (this.s = t), (this.f = e), (this.readyState = 1), ws(this);
        }),
          (t.send = function (t) {
            if (1 != this.readyState)
              throw (this.abort(), Error("need to call open() first. "));
            this.a = !0;
            var e = {
              headers: this.l,
              method: this.s,
              credentials: this.h,
              cache: void 0,
            };
            t && (e.body = t),
              this.u
                .fetch(new Request(this.f, e))
                .then(this.uc.bind(this), this.Ua.bind(this));
          }),
          (t.abort = function () {
            (this.response = this.responseText = ""),
              (this.l = new Headers()),
              (this.status = 0),
              this.c && this.c.cancel("Request was aborted."),
              1 <= this.readyState &&
                this.a &&
                4 != this.readyState &&
                ((this.a = !1), bs(this)),
              (this.readyState = ms);
          }),
          (t.uc = function (t) {
            this.a &&
              ((this.g = t),
              this.b ||
                ((this.status = this.g.status),
                (this.statusText = this.g.statusText),
                (this.b = t.headers),
                (this.readyState = 2),
                ws(this)),
              this.a &&
                ((this.readyState = 3),
                ws(this),
                this.a &&
                  ("arraybuffer" === this.responseType
                    ? t
                        .arrayBuffer()
                        .then(this.sc.bind(this), this.Ua.bind(this))
                    : void 0 !== u.ReadableStream && "body" in t
                    ? ((this.response = this.responseText = ""),
                      (this.c = t.body.getReader()),
                      (this.m = new TextDecoder()),
                      ys(this))
                    : t.text().then(this.tc.bind(this), this.Ua.bind(this)))));
          }),
          (t.pc = function (t) {
            if (this.a) {
              var e = this.m.decode(t.value ? t.value : new Uint8Array(0), {
                stream: !t.done,
              });
              e && (this.response = this.responseText += e),
                t.done ? bs(this) : ws(this),
                3 == this.readyState && ys(this);
            }
          }),
          (t.tc = function (t) {
            this.a && ((this.response = this.responseText = t), bs(this));
          }),
          (t.sc = function (t) {
            this.a && ((this.response = t), bs(this));
          }),
          (t.Ua = function (t) {
            var e = this.i;
            e &&
              e.log(
                as,
                "Failed to fetch url " + this.f,
                t instanceof Error ? t : Error(t)
              ),
              this.a && bs(this);
          }),
          (t.setRequestHeader = function (t, e) {
            this.l.append(t, e);
          }),
          (t.getResponseHeader = function (t) {
            return this.b
              ? this.b.get(t.toLowerCase()) || ""
              : ((t = this.i) &&
                  t.log(
                    as,
                    "Attempting to get response header but no headers have been received for url: " +
                      this.f,
                    void 0
                  ),
                "");
          }),
          (t.getAllResponseHeaders = function () {
            if (!this.b) {
              var t = this.i;
              return (
                t &&
                  t.log(
                    as,
                    "Attempting to get all response headers but no headers have been received for url: " +
                      this.f,
                    void 0
                  ),
                ""
              );
            }
            t = [];
            for (var e = this.b.entries(), n = e.next(); !n.done; )
              (n = n.value), t.push(n[0] + ": " + n[1]), (n = e.next());
            return t.join("\r\n");
          }),
          Object.defineProperty(gs.prototype, "withCredentials", {
            get: function () {
              return "include" === this.h;
            },
            set: function (t) {
              this.h = t ? "include" : "same-origin";
            },
          }),
          S(_s, En);
        var Is = "";
        _s.prototype.b = ps("goog.net.XhrIo");
        var Es = /^https?$/i,
          Ts = ["POST", "PUT"];
        function Ss(t) {
          return "content-type" == t.toLowerCase();
        }
        function Cs(t, e) {
          (t.c = !1),
            t.a && ((t.f = !0), t.a.abort(), (t.f = !1)),
            (t.h = e),
            ks(t),
            As(t);
        }
        function ks(t) {
          t.J ||
            ((t.J = !0), t.dispatchEvent("complete"), t.dispatchEvent("error"));
        }
        function Ns(t) {
          if (t.c && void 0 !== a)
            if (t.C[1] && 4 == Ds(t) && 2 == xs(t))
              ds(t.b, Os(t, "Local request error detected and ignored"));
            else if (t.i && 4 == Ds(t)) kn(t.Vb, 0, t);
            else if ((t.dispatchEvent("readystatechange"), 4 == Ds(t))) {
              ds(t.b, Os(t, "Request complete")), (t.c = !1);
              try {
                var e,
                  n = xs(t);
                t: switch (n) {
                  case 200:
                  case 201:
                  case 202:
                  case 204:
                  case 206:
                  case 304:
                  case 1223:
                    var r = !0;
                    break t;
                  default:
                    r = !1;
                }
                if (!(e = r)) {
                  var i;
                  if ((i = 0 === n)) {
                    var o = String(t.l).match(Rn)[1] || null;
                    if (!o && u.self && u.self.location) {
                      var s = u.self.location.protocol;
                      o = s.substr(0, s.length - 1);
                    }
                    i = !Es.test(o ? o.toLowerCase() : "");
                  }
                  e = i;
                }
                if (e) t.dispatchEvent("complete"), t.dispatchEvent("success");
                else {
                  try {
                    var c = 2 < Ds(t) ? t.a.statusText : "";
                  } catch (e) {
                    ds(t.b, "Can not get status: " + e.message), (c = "");
                  }
                  (t.h = c + " [" + xs(t) + "]"), ks(t);
                }
              } finally {
                As(t);
              }
            }
        }
        function As(t, e) {
          if (t.a) {
            Ps(t);
            var n = t.a,
              r = t.C[0] ? f : null;
            (t.a = null), (t.C = null), e || t.dispatchEvent("ready");
            try {
              n.onreadystatechange = r;
            } catch (e) {
              (t = t.b) &&
                t.log(
                  ss,
                  "Problem encountered resetting onreadystatechange: " +
                    e.message,
                  void 0
                );
            }
          }
        }
        function Ps(t) {
          t.a && t.u && (t.a.ontimeout = null),
            t.s && (u.clearTimeout(t.s), (t.s = null));
        }
        function Ds(t) {
          return t.a ? t.a.readyState : 0;
        }
        function xs(t) {
          try {
            return 2 < Ds(t) ? t.a.status : -1;
          } catch (t) {
            return -1;
          }
        }
        function Os(t, e) {
          return e + " [" + t.R + " " + t.l + " " + xs(t) + "]";
        }
        function Rs(t) {
          var e = zs;
          (this.g = []),
            (this.u = e),
            (this.s = t || null),
            (this.f = this.a = !1),
            (this.c = void 0),
            (this.v = this.C = this.i = !1),
            (this.h = 0),
            (this.b = null),
            (this.l = 0);
        }
        function Ms(t, e, n) {
          (t.a = !0), (t.c = n), (t.f = !e), Us(t);
        }
        function Ls(t) {
          if (t.a) {
            if (!t.v) throw new Vs(t);
            t.v = !1;
          }
        }
        function js(t, e, n, r) {
          t.g.push([e, n, r]), t.a && Us(t);
        }
        function Fs(t) {
          return J(t.g, function (t) {
            return v(t[1]);
          });
        }
        function Us(t) {
          if (t.h && t.a && Fs(t)) {
            var e = t.h,
              n = Gs[e];
            n && (u.clearTimeout(n.a), delete Gs[e]), (t.h = 0);
          }
          t.b && (t.b.l--, delete t.b), (e = t.c);
          for (var r = (n = !1); t.g.length && !t.i; ) {
            var i = t.g.shift(),
              o = i[0],
              s = i[1];
            if (((i = i[2]), (o = t.f ? s : o)))
              try {
                var a = o.call(i || t.s, e);
                void 0 !== a &&
                  ((t.f = t.f && (a == e || a instanceof Error)),
                  (t.c = e = a)),
                  (R(e) ||
                    ("function" == typeof u.Promise &&
                      e instanceof u.Promise)) &&
                    ((r = !0), (t.i = !0));
              } catch (r) {
                (e = r), (t.f = !0), Fs(t) || (n = !0);
              }
          }
          (t.c = e),
            r &&
              ((a = I(t.m, t, !0)),
              (r = I(t.m, t, !1)),
              e instanceof Rs ? (js(e, a, r), (e.C = !0)) : e.then(a, r)),
            n && ((e = new Bs(e)), (Gs[e.a] = e), (t.h = e.a));
        }
        function Vs() {
          M.call(this);
        }
        function qs() {
          M.call(this);
        }
        function Bs(t) {
          (this.a = u.setTimeout(I(this.c, this), 0)), (this.b = t);
        }
        ((t = _s.prototype).Ma = function () {
          void 0 !== a &&
            this.a &&
            ((this.h = "Timed out after " + this.g + "ms, aborting"),
            ds(this.b, Os(this, this.h)),
            this.dispatchEvent("timeout"),
            this.abort(8));
        }),
          (t.abort = function () {
            this.a &&
              this.c &&
              (ds(this.b, Os(this, "Aborting")),
              (this.c = !1),
              (this.f = !0),
              this.a.abort(),
              (this.f = !1),
              this.dispatchEvent("complete"),
              this.dispatchEvent("abort"),
              As(this));
          }),
          (t.Da = function () {
            this.a &&
              (this.c &&
                ((this.c = !1), (this.f = !0), this.a.abort(), (this.f = !1)),
              As(this, !0)),
              _s.ab.Da.call(this);
          }),
          (t.Vb = function () {
            this.xa || (this.O || this.i || this.f ? Ns(this) : this.Jc());
          }),
          (t.Jc = function () {
            Ns(this);
          }),
          (t.getResponse = function () {
            try {
              if (!this.a) return null;
              if ("response" in this.a) return this.a.response;
              switch (this.m) {
                case Is:
                case "text":
                  return this.a.responseText;
                case "arraybuffer":
                  if ("mozResponseArrayBuffer" in this.a)
                    return this.a.mozResponseArrayBuffer;
              }
              var t = this.b;
              return (
                t &&
                  t.log(
                    ss,
                    "Response type " +
                      this.m +
                      " is not supported on this browser",
                    void 0
                  ),
                null
              );
            } catch (t) {
              return ds(this.b, "Can not get response: " + t.message), null;
            }
          }),
          (Rs.prototype.cancel = function (t) {
            if (this.a) this.c instanceof Rs && this.c.cancel();
            else {
              if (this.b) {
                var e = this.b;
                delete this.b,
                  t ? e.cancel(t) : (e.l--, 0 >= e.l && e.cancel());
              }
              this.u ? this.u.call(this.s, this) : (this.v = !0),
                this.a || ((t = new qs(this)), Ls(this), Ms(this, !1, t));
            }
          }),
          (Rs.prototype.m = function (t, e) {
            (this.i = !1), Ms(this, t, e);
          }),
          (Rs.prototype.then = function (t, e, n) {
            var r,
              i,
              o = new Ie(function (t, e) {
                (r = t), (i = e);
              });
            return (
              js(this, r, function (t) {
                t instanceof qs ? o.cancel() : i(t);
              }),
              o.then(t, e, n)
            );
          }),
          (Rs.prototype.$goog_Thenable = !0),
          S(Vs, M),
          (Vs.prototype.message = "Deferred has already fired"),
          (Vs.prototype.name = "AlreadyCalledError"),
          S(qs, M),
          (qs.prototype.message = "Deferred was canceled"),
          (qs.prototype.name = "CanceledError"),
          (Bs.prototype.c = function () {
            throw (delete Gs[this.a], this.b);
          });
        var Gs = {};
        function Ws(t) {
          var e = {},
            n = e.document || document,
            r = kt(t).toString(),
            i = ge(document, "SCRIPT"),
            o = { Wb: i, Ma: void 0 },
            s = new Rs(o),
            a = null,
            c = null != e.timeout ? e.timeout : 5e3;
          return (
            0 < c &&
              ((a = window.setTimeout(function () {
                Hs(i, !0);
                var t = new Qs(Js, "Timeout reached for loading script " + r);
                Ls(s), Ms(s, !1, t);
              }, c)),
              (o.Ma = a)),
            (i.onload = i.onreadystatechange =
              function () {
                (i.readyState &&
                  "loaded" != i.readyState &&
                  "complete" != i.readyState) ||
                  (Hs(i, e.xd || !1, a), Ls(s), Ms(s, !0, null));
              }),
            (i.onerror = function () {
              Hs(i, !0, a);
              var t = new Qs(Ks, "Error while loading script " + r);
              Ls(s), Ms(s, !1, t);
            }),
            yt((o = e.attributes || {}), {
              type: "text/javascript",
              charset: "UTF-8",
            }),
            le(i, o),
            (function (t, e) {
              bt(t, "HTMLScriptElement"),
                (t.src = kt(e)),
                (e = t.ownerDocument && t.ownerDocument.defaultView) && e != u
                  ? (e = l(e.document))
                  : (null === h && (h = l(u.document)), (e = h)),
                e && t.setAttribute("nonce", e);
            })(i, t),
            (function (t) {
              var e;
              return (e = (t || document).getElementsByTagName("HEAD")) &&
                0 != e.length
                ? e[0]
                : t.documentElement;
            })(n).appendChild(i),
            s
          );
        }
        function zs() {
          if (this && this.Wb) {
            var t = this.Wb;
            t && "SCRIPT" == t.tagName && Hs(t, !0, this.Ma);
          }
        }
        function Hs(t, e, n) {
          null != n && u.clearTimeout(n),
            (t.onload = f),
            (t.onerror = f),
            (t.onreadystatechange = f),
            e &&
              window.setTimeout(function () {
                t && t.parentNode && t.parentNode.removeChild(t);
              }, 0);
        }
        var Ks = 0,
          Js = 1;
        function Qs(t, e) {
          var n = "Jsloader error (code #" + t + ")";
          e && (n += ": " + e), M.call(this, n), (this.code = t);
        }
        function Ys(t) {
          this.f = t;
        }
        function Xs(t, n, r) {
          if (
            ((this.c = t),
            (t = n || {}),
            (this.l =
              t.secureTokenEndpoint ||
              "https://securetoken.googleapis.com/v1/token"),
            (this.m = t.secureTokenTimeout || ta),
            (this.g = gt(t.secureTokenHeaders || ea)),
            (this.h =
              t.firebaseEndpoint ||
              "https://www.googleapis.com/identitytoolkit/v3/relyingparty/"),
            (this.i =
              t.identityPlatformEndpoint ||
              "https://identitytoolkit.googleapis.com/v2/"),
            (this.v = t.firebaseTimeout || na),
            (this.a = gt(t.firebaseHeaders || ra)),
            r &&
              ((this.a["X-Client-Version"] = r),
              (this.g["X-Client-Version"] = r)),
            (r = "Node" == Tr()),
            !(r =
              u.XMLHttpRequest ||
              (r && e.Z.INTERNAL.node && e.Z.INTERNAL.node.XMLHttpRequest)) &&
              !Er())
          )
            throw new k(
              "internal-error",
              "The XMLHttpRequest compatibility library was not found."
            );
          (this.f = void 0),
            Er()
              ? (this.f = new vs(self))
              : Sr()
              ? (this.f = new Ys(r))
              : (this.f = new ts()),
            (this.b = null);
        }
        S(Qs, M),
          S(Ys, Yo),
          (Ys.prototype.a = function () {
            return new this.f();
          }),
          (Ys.prototype.b = function () {
            return {};
          });
        var Zs,
          $s = "idToken",
          ta = new Wr(3e4, 6e4),
          ea = { "Content-Type": "application/x-www-form-urlencoded" },
          na = new Wr(3e4, 6e4),
          ra = { "Content-Type": "application/json" };
        function ia(t, e) {
          e ? (t.a["X-Firebase-Locale"] = e) : delete t.a["X-Firebase-Locale"];
        }
        function oa(t, e) {
          e &&
            ((t.l = sa("https://securetoken.googleapis.com/v1/token", e)),
            (t.h = sa(
              "https://www.googleapis.com/identitytoolkit/v3/relyingparty/",
              e
            )),
            (t.i = sa("https://identitytoolkit.googleapis.com/v2/", e)));
        }
        function sa(t, e) {
          return (
            (t = qn(t)),
            (e = qn(e.url)),
            (t.f = t.a + t.f),
            Ln(t, e.c),
            (t.a = e.a),
            jn(t, e.g),
            t.toString()
          );
        }
        function aa(t, e) {
          e
            ? ((t.a["X-Client-Version"] = e), (t.g["X-Client-Version"] = e))
            : (delete t.a["X-Client-Version"], delete t.g["X-Client-Version"]);
        }
        function ua(t, e, n, r, i, o, s) {
          (function () {
            var t = Dr();
            return !(
              ((t =
                Nr(t) != kr
                  ? null
                  : (t = t.match(/\sChrome\/(\d+)/i)) && 2 == t.length
                  ? parseInt(t[1], 10)
                  : null) &&
                30 > t) ||
              (Yt && ue && !(9 < ue))
            );
          })() || Er()
            ? (t = I(t.u, t))
            : (Zs ||
                (Zs = new Ie(function (t, e) {
                  !(function (t, e) {
                    ((window.gapi || {}).client || {}).request
                      ? t()
                      : ((u[ha] = function () {
                          ((window.gapi || {}).client || {}).request
                            ? t()
                            : e(Error("CORS_UNSUPPORTED"));
                        }),
                        (function (t, e) {
                          js(t, null, e, void 0);
                        })(Ws(Nt(ca, { onload: ha })), function () {
                          e(Error("CORS_UNSUPPORTED"));
                        }));
                  })(t, e);
                })),
              (t = I(t.s, t))),
            t(e, n, r, i, o, s);
        }
        (Xs.prototype.T = function () {
          return this.b;
        }),
          (Xs.prototype.u = function (t, e, n, r, i, o) {
            if (
              Er() &&
              (void 0 === u.fetch ||
                void 0 === u.Headers ||
                void 0 === u.Request)
            )
              throw new k(
                "operation-not-supported-in-this-environment",
                "fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment."
              );
            var s = new _s(this.f);
            if (o) {
              s.g = Math.max(0, o);
              var a = setTimeout(function () {
                s.dispatchEvent("timeout");
              }, o);
            }
            Tn(s, "complete", function () {
              a && clearTimeout(a);
              var t = null;
              try {
                t =
                  JSON.parse(
                    (function (t) {
                      try {
                        return t.a ? t.a.responseText : "";
                      } catch (e) {
                        return (
                          ds(t.b, "Can not get responseText: " + e.message), ""
                        );
                      }
                    })(this)
                  ) || null;
              } catch (e) {
                t = null;
              }
              e && e(t);
            }),
              Sn(s, "ready", function () {
                a && clearTimeout(a), Ke(this);
              }),
              Sn(s, "timeout", function () {
                a && clearTimeout(a), Ke(this), e && e(null);
              }),
              (function (t, e, n, r, i) {
                if (t.a)
                  throw Error(
                    "[goog.net.XhrIo] Object is active with another request=" +
                      t.l +
                      "; newUri=" +
                      e
                  );
                (n = n ? n.toUpperCase() : "GET"),
                  (t.l = e),
                  (t.h = ""),
                  (t.R = n),
                  (t.J = !1),
                  (t.c = !0),
                  (t.a = t.D ? t.D.a() : zo.a()),
                  (t.C = t.D ? Xo(t.D) : Xo(zo)),
                  (t.a.onreadystatechange = I(t.Vb, t));
                try {
                  ds(t.b, Os(t, "Opening Xhr")),
                    (t.O = !0),
                    t.a.open(n, String(e), !0),
                    (t.O = !1);
                } catch (e) {
                  return (
                    ds(t.b, Os(t, "Error opening Xhr: " + e.message)),
                    void Cs(t, e)
                  );
                }
                e = r || "";
                var o = new Dn(t.headers);
                i &&
                  (function (t, e) {
                    if (t.forEach && "function" == typeof t.forEach)
                      t.forEach(e, void 0);
                    else if (d(t) || "string" == typeof t) z(t, e, void 0);
                    else
                      for (
                        var n = Pn(t), r = An(t), i = r.length, o = 0;
                        o < i;
                        o++
                      )
                        e.call(void 0, r[o], n && n[o], t);
                  })(i, function (t, e) {
                    o.set(e, t);
                  }),
                  (i = (function (t) {
                    t: {
                      for (
                        var e = Ss,
                          n = t.length,
                          r = "string" == typeof t ? t.split("") : t,
                          i = 0;
                        i < n;
                        i++
                      )
                        if (i in r && e.call(void 0, r[i], i, t)) {
                          e = i;
                          break t;
                        }
                      e = -1;
                    }
                    return 0 > e
                      ? null
                      : "string" == typeof t
                      ? t.charAt(e)
                      : t[e];
                  })(o.Y())),
                  (r = u.FormData && e instanceof u.FormData),
                  !Q(Ts, n) ||
                    i ||
                    r ||
                    o.set(
                      "Content-Type",
                      "application/x-www-form-urlencoded;charset=utf-8"
                    ),
                  o.forEach(function (t, e) {
                    this.a.setRequestHeader(e, t);
                  }, t),
                  t.m && (t.a.responseType = t.m),
                  "withCredentials" in t.a &&
                    t.a.withCredentials !== t.S &&
                    (t.a.withCredentials = t.S);
                try {
                  Ps(t),
                    0 < t.g &&
                      ((t.u = (function (t) {
                        return (
                          Yt &&
                          ae(9) &&
                          "number" == typeof t.timeout &&
                          void 0 !== t.ontimeout
                        );
                      })(t.a)),
                      ds(
                        t.b,
                        Os(
                          t,
                          "Will abort after " +
                            t.g +
                            "ms if incomplete, xhr2 " +
                            t.u
                        )
                      ),
                      t.u
                        ? ((t.a.timeout = t.g), (t.a.ontimeout = I(t.Ma, t)))
                        : (t.s = kn(t.Ma, t.g, t))),
                    ds(t.b, Os(t, "Sending request")),
                    (t.i = !0),
                    t.a.send(e),
                    (t.i = !1);
                } catch (e) {
                  ds(t.b, Os(t, "Send error: " + e.message)), Cs(t, e);
                }
              })(s, t, n, r, i);
          });
        var ca = new wt(
            Tt,
            "https://apis.google.com/js/client.js?onload=%{onload}"
          ),
          ha = "__fcb" + Math.floor(1e6 * Math.random()).toString();
        function la(t) {
          if ("string" != typeof (t = t.email) || !br.test(t))
            throw new k("invalid-email");
        }
        function fa(t) {
          "email" in t && la(t);
        }
        function pa(t) {
          if (!t[$s]) {
            if (t.mfaPendingCredential)
              throw new k("multi-factor-auth-required", null, gt(t));
            throw new k("internal-error");
          }
        }
        function da(t) {
          if (t.phoneNumber || t.temporaryProof) {
            if (!t.phoneNumber || !t.temporaryProof)
              throw new k("internal-error");
          } else {
            if (!t.sessionInfo) throw new k("missing-verification-id");
            if (!t.code) throw new k("missing-verification-code");
          }
        }
        (Xs.prototype.s = function (t, e, n, r, i) {
          var o = this;
          Zs.then(function () {
            window.gapi.client.setApiKey(o.c);
            var s = window.gapi.auth.getToken();
            window.gapi.auth.setToken(null),
              window.gapi.client.request({
                path: t,
                method: n,
                body: r,
                headers: i,
                authType: "none",
                callback: function (t) {
                  window.gapi.auth.setToken(s), e && e(t);
                },
              });
          }).o(function (t) {
            e &&
              e({ error: { message: (t && t.message) || "CORS_UNSUPPORTED" } });
          });
        }),
          (Xs.prototype.zb = function () {
            return ru(this, za, {});
          }),
          (Xs.prototype.Bb = function (t, e) {
            return ru(this, Ga, { idToken: t, email: e });
          }),
          (Xs.prototype.Cb = function (t, e) {
            return ru(this, Wa, { idToken: t, password: e });
          });
        var va = { displayName: "DISPLAY_NAME", photoUrl: "PHOTO_URL" };
        function ga(t) {
          if (!t.phoneVerificationInfo) throw new k("internal-error");
          if (!t.phoneVerificationInfo.sessionInfo)
            throw new k("missing-verification-id");
          if (!t.phoneVerificationInfo.code)
            throw new k("missing-verification-code");
        }
        function ma(t) {
          if (!t.requestUri || (!t.sessionId && !t.postBody && !t.pendingToken))
            throw new k("internal-error");
        }
        function ya(t, e) {
          return (
            e.oauthIdToken &&
              e.providerId &&
              0 == e.providerId.indexOf("oidc.") &&
              !e.pendingToken &&
              (t.sessionId
                ? (e.nonce = t.sessionId)
                : t.postBody &&
                  er((t = new Xn(t.postBody)), "nonce") &&
                  (e.nonce = t.get("nonce"))),
            e
          );
        }
        function ba(t) {
          var e = null;
          if (
            (t.needConfirmation
              ? ((t.code = "account-exists-with-different-credential"),
                (e = Qo(t)))
              : "FEDERATED_USER_ID_ALREADY_LINKED" == t.errorMessage
              ? ((t.code = "credential-already-in-use"), (e = Qo(t)))
              : "EMAIL_EXISTS" == t.errorMessage
              ? ((t.code = "email-already-in-use"), (e = Qo(t)))
              : t.errorMessage && (e = iu(t.errorMessage)),
            e)
          )
            throw e;
          pa(t);
        }
        function wa(t, e) {
          return (e.returnIdpCredential = !0), ru(t, Ja, e);
        }
        function _a(t, e) {
          return (e.returnIdpCredential = !0), ru(t, Ya, e);
        }
        function Ia(t, e) {
          return (
            (e.returnIdpCredential = !0), (e.autoCreate = !1), ru(t, Qa, e)
          );
        }
        function Ea(t) {
          if (!t.oobCode) throw new k("invalid-action-code");
        }
        ((t = Xs.prototype).Db = function (t, e) {
          var n = { idToken: t },
            r = [];
          return (
            dt(va, function (t, i) {
              var o = e[i];
              null === o ? r.push(t) : i in e && (n[i] = o);
            }),
            r.length && (n.deleteAttribute = r),
            ru(this, Ga, n)
          );
        }),
          (t.vb = function (t, e) {
            return (
              yt((t = { requestType: "PASSWORD_RESET", email: t }), e),
              ru(this, Fa, t)
            );
          }),
          (t.wb = function (t, e) {
            return (
              yt((t = { requestType: "EMAIL_SIGNIN", email: t }), e),
              ru(this, Ma, t)
            );
          }),
          (t.ub = function (t, e) {
            return (
              yt((t = { requestType: "VERIFY_EMAIL", idToken: t }), e),
              ru(this, La, t)
            );
          }),
          (t.Eb = function (t, e, n) {
            return (
              yt(
                (t = {
                  requestType: "VERIFY_AND_CHANGE_EMAIL",
                  idToken: t,
                  newEmail: e,
                }),
                n
              ),
              ru(this, ja, t)
            );
          }),
          (t.fb = function (t) {
            return ru(this, $a, t);
          }),
          (t.nb = function (t, e) {
            return ru(this, qa, { oobCode: t, newPassword: e });
          }),
          (t.Ra = function (t) {
            return ru(this, Sa, { oobCode: t });
          }),
          (t.jb = function (t) {
            return ru(this, Ta, { oobCode: t });
          });
        var Ta = { endpoint: "setAccountInfo", A: Ea, Z: "email", B: !0 },
          Sa = {
            endpoint: "resetPassword",
            A: Ea,
            G: function (t) {
              var e = t.requestType;
              if (
                !e ||
                (!t.email &&
                  "EMAIL_SIGNIN" != e &&
                  "VERIFY_AND_CHANGE_EMAIL" != e)
              )
                throw new k("internal-error");
            },
            B: !0,
          },
          Ca = {
            endpoint: "signupNewUser",
            A: function (t) {
              if ((la(t), !t.password)) throw new k("weak-password");
            },
            G: pa,
            V: !0,
            B: !0,
          },
          ka = { endpoint: "createAuthUri", B: !0 },
          Na = { endpoint: "deleteAccount", N: ["idToken"] },
          Aa = {
            endpoint: "setAccountInfo",
            N: ["idToken", "deleteProvider"],
            A: function (t) {
              if (!Array.isArray(t.deleteProvider))
                throw new k("internal-error");
            },
          },
          Pa = {
            endpoint: "emailLinkSignin",
            N: ["email", "oobCode"],
            A: la,
            G: pa,
            V: !0,
            B: !0,
          },
          Da = {
            endpoint: "emailLinkSignin",
            N: ["idToken", "email", "oobCode"],
            A: la,
            G: pa,
            V: !0,
          },
          xa = {
            endpoint: "accounts/mfaEnrollment:finalize",
            N: ["idToken", "phoneVerificationInfo"],
            A: ga,
            G: pa,
            B: !0,
            Na: !0,
          },
          Oa = {
            endpoint: "accounts/mfaSignIn:finalize",
            N: ["mfaPendingCredential", "phoneVerificationInfo"],
            A: ga,
            G: pa,
            B: !0,
            Na: !0,
          },
          Ra = { endpoint: "getAccountInfo" },
          Ma = {
            endpoint: "getOobConfirmationCode",
            N: ["requestType"],
            A: function (t) {
              if ("EMAIL_SIGNIN" != t.requestType)
                throw new k("internal-error");
              la(t);
            },
            Z: "email",
            B: !0,
          },
          La = {
            endpoint: "getOobConfirmationCode",
            N: ["idToken", "requestType"],
            A: function (t) {
              if ("VERIFY_EMAIL" != t.requestType)
                throw new k("internal-error");
            },
            Z: "email",
            B: !0,
          },
          ja = {
            endpoint: "getOobConfirmationCode",
            N: ["idToken", "newEmail", "requestType"],
            A: function (t) {
              if ("VERIFY_AND_CHANGE_EMAIL" != t.requestType)
                throw new k("internal-error");
            },
            Z: "email",
            B: !0,
          },
          Fa = {
            endpoint: "getOobConfirmationCode",
            N: ["requestType"],
            A: function (t) {
              if ("PASSWORD_RESET" != t.requestType)
                throw new k("internal-error");
              la(t);
            },
            Z: "email",
            B: !0,
          },
          Ua = { lb: !0, endpoint: "getProjectConfig", Ub: "GET" },
          Va = {
            lb: !0,
            endpoint: "getRecaptchaParam",
            Ub: "GET",
            G: function (t) {
              if (!t.recaptchaSiteKey) throw new k("internal-error");
            },
          },
          qa = { endpoint: "resetPassword", A: Ea, Z: "email", B: !0 },
          Ba = {
            endpoint: "sendVerificationCode",
            N: ["phoneNumber", "recaptchaToken"],
            Z: "sessionInfo",
            B: !0,
          },
          Ga = { endpoint: "setAccountInfo", N: ["idToken"], A: fa, V: !0 },
          Wa = {
            endpoint: "setAccountInfo",
            N: ["idToken"],
            A: function (t) {
              if ((fa(t), !t.password)) throw new k("weak-password");
            },
            G: pa,
            V: !0,
          },
          za = { endpoint: "signupNewUser", G: pa, V: !0, B: !0 },
          Ha = {
            endpoint: "accounts/mfaEnrollment:start",
            N: ["idToken", "phoneEnrollmentInfo"],
            A: function (t) {
              if (!t.phoneEnrollmentInfo) throw new k("internal-error");
              if (!t.phoneEnrollmentInfo.phoneNumber)
                throw new k("missing-phone-number");
              if (!t.phoneEnrollmentInfo.recaptchaToken)
                throw new k("missing-app-credential");
            },
            G: function (t) {
              if (!t.phoneSessionInfo || !t.phoneSessionInfo.sessionInfo)
                throw new k("internal-error");
            },
            B: !0,
            Na: !0,
          },
          Ka = {
            endpoint: "accounts/mfaSignIn:start",
            N: ["mfaPendingCredential", "mfaEnrollmentId", "phoneSignInInfo"],
            A: function (t) {
              if (!t.phoneSignInInfo || !t.phoneSignInInfo.recaptchaToken)
                throw new k("missing-app-credential");
            },
            G: function (t) {
              if (!t.phoneResponseInfo || !t.phoneResponseInfo.sessionInfo)
                throw new k("internal-error");
            },
            B: !0,
            Na: !0,
          },
          Ja = {
            endpoint: "verifyAssertion",
            A: ma,
            Ya: ya,
            G: ba,
            V: !0,
            B: !0,
          },
          Qa = {
            endpoint: "verifyAssertion",
            A: ma,
            Ya: ya,
            G: function (t) {
              if (t.errorMessage && "USER_NOT_FOUND" == t.errorMessage)
                throw new k("user-not-found");
              if (t.errorMessage) throw iu(t.errorMessage);
              pa(t);
            },
            V: !0,
            B: !0,
          },
          Ya = {
            endpoint: "verifyAssertion",
            A: function (t) {
              if ((ma(t), !t.idToken)) throw new k("internal-error");
            },
            Ya: ya,
            G: ba,
            V: !0,
          },
          Xa = {
            endpoint: "verifyCustomToken",
            A: function (t) {
              if (!t.token) throw new k("invalid-custom-token");
            },
            G: pa,
            V: !0,
            B: !0,
          },
          Za = {
            endpoint: "verifyPassword",
            A: function (t) {
              if ((la(t), !t.password)) throw new k("wrong-password");
            },
            G: pa,
            V: !0,
            B: !0,
          },
          $a = { endpoint: "verifyPhoneNumber", A: da, G: pa, B: !0 },
          tu = {
            endpoint: "verifyPhoneNumber",
            A: function (t) {
              if (!t.idToken) throw new k("internal-error");
              da(t);
            },
            G: function (t) {
              if (t.temporaryProof)
                throw ((t.code = "credential-already-in-use"), Qo(t));
              pa(t);
            },
          },
          eu = {
            Hb: { USER_NOT_FOUND: "user-not-found" },
            endpoint: "verifyPhoneNumber",
            A: da,
            G: pa,
            B: !0,
          },
          nu = {
            endpoint: "accounts/mfaEnrollment:withdraw",
            N: ["idToken", "mfaEnrollmentId"],
            G: function (t) {
              if (!!t[$s] ^ !!t.refreshToken) throw new k("internal-error");
            },
            B: !0,
            Na: !0,
          };
        function ru(t, e, n) {
          if (
            !(function (t, e) {
              if (!e || !e.length) return !0;
              if (!t) return !1;
              for (var n = 0; n < e.length; n++) {
                var r = t[e[n]];
                if (null == r || "" === r) return !1;
              }
              return !0;
            })(n, e.N)
          )
            return Pe(new k("internal-error"));
          var r,
            i = !!e.Na,
            o = e.Ub || "POST";
          return Ae(n)
            .then(e.A)
            .then(function () {
              return (
                e.V && (n.returnSecureToken = !0),
                e.B && t.b && void 0 === n.tenantId && (n.tenantId = t.b),
                (function (t, e, n, r, i, o, s) {
                  var a = qn(e + n);
                  Un(a, "key", t.c), s && Un(a, "cb", T().toString());
                  var u = "GET" == r;
                  if (u) for (var c in i) i.hasOwnProperty(c) && Un(a, c, i[c]);
                  return new Ie(function (e, n) {
                    ua(
                      t,
                      a.toString(),
                      function (t) {
                        t
                          ? t.error
                            ? n(ou(t, o || {}))
                            : e(t)
                          : n(new k("network-request-failed"));
                      },
                      r,
                      u ? void 0 : or(Ur(i)),
                      t.a,
                      t.v.get()
                    );
                  });
                })(t, i ? t.i : t.h, e.endpoint, o, n, e.Hb, e.lb || !1)
              );
            })
            .then(function (t) {
              return (r = t), e.Ya ? e.Ya(n, r) : r;
            })
            .then(e.G)
            .then(function () {
              if (!e.Z) return r;
              if (!(e.Z in r)) throw new k("internal-error");
              return r[e.Z];
            });
        }
        function iu(t) {
          return ou({
            error: { errors: [{ message: t }], code: 400, message: t },
          });
        }
        function ou(t, e) {
          var n =
              ((t.error && t.error.errors && t.error.errors[0]) || {}).reason ||
              "",
            r = {
              keyInvalid: "invalid-api-key",
              ipRefererBlocked: "app-not-authorized",
            };
          if ((n = r[n] ? new k(r[n]) : null)) return n;
          for (var i in ((n = (t.error && t.error.message) || ""),
          yt(
            (r = {
              INVALID_CUSTOM_TOKEN: "invalid-custom-token",
              CREDENTIAL_MISMATCH: "custom-token-mismatch",
              MISSING_CUSTOM_TOKEN: "internal-error",
              INVALID_IDENTIFIER: "invalid-email",
              MISSING_CONTINUE_URI: "internal-error",
              INVALID_EMAIL: "invalid-email",
              INVALID_PASSWORD: "wrong-password",
              USER_DISABLED: "user-disabled",
              MISSING_PASSWORD: "internal-error",
              EMAIL_EXISTS: "email-already-in-use",
              PASSWORD_LOGIN_DISABLED: "operation-not-allowed",
              INVALID_IDP_RESPONSE: "invalid-credential",
              INVALID_PENDING_TOKEN: "invalid-credential",
              FEDERATED_USER_ID_ALREADY_LINKED: "credential-already-in-use",
              MISSING_OR_INVALID_NONCE: "missing-or-invalid-nonce",
              INVALID_MESSAGE_PAYLOAD: "invalid-message-payload",
              INVALID_RECIPIENT_EMAIL: "invalid-recipient-email",
              INVALID_SENDER: "invalid-sender",
              EMAIL_NOT_FOUND: "user-not-found",
              RESET_PASSWORD_EXCEED_LIMIT: "too-many-requests",
              EXPIRED_OOB_CODE: "expired-action-code",
              INVALID_OOB_CODE: "invalid-action-code",
              MISSING_OOB_CODE: "internal-error",
              INVALID_PROVIDER_ID: "invalid-provider-id",
              CREDENTIAL_TOO_OLD_LOGIN_AGAIN: "requires-recent-login",
              INVALID_ID_TOKEN: "invalid-user-token",
              TOKEN_EXPIRED: "user-token-expired",
              USER_NOT_FOUND: "user-token-expired",
              CORS_UNSUPPORTED: "cors-unsupported",
              DYNAMIC_LINK_NOT_ACTIVATED: "dynamic-link-not-activated",
              INVALID_APP_ID: "invalid-app-id",
              TOO_MANY_ATTEMPTS_TRY_LATER: "too-many-requests",
              WEAK_PASSWORD: "weak-password",
              OPERATION_NOT_ALLOWED: "operation-not-allowed",
              USER_CANCELLED: "user-cancelled",
              CAPTCHA_CHECK_FAILED: "captcha-check-failed",
              INVALID_APP_CREDENTIAL: "invalid-app-credential",
              INVALID_CODE: "invalid-verification-code",
              INVALID_PHONE_NUMBER: "invalid-phone-number",
              INVALID_SESSION_INFO: "invalid-verification-id",
              INVALID_TEMPORARY_PROOF: "invalid-credential",
              MISSING_APP_CREDENTIAL: "missing-app-credential",
              MISSING_CODE: "missing-verification-code",
              MISSING_PHONE_NUMBER: "missing-phone-number",
              MISSING_SESSION_INFO: "missing-verification-id",
              QUOTA_EXCEEDED: "quota-exceeded",
              SESSION_EXPIRED: "code-expired",
              REJECTED_CREDENTIAL: "rejected-credential",
              INVALID_CONTINUE_URI: "invalid-continue-uri",
              MISSING_ANDROID_PACKAGE_NAME: "missing-android-pkg-name",
              MISSING_IOS_BUNDLE_ID: "missing-ios-bundle-id",
              UNAUTHORIZED_DOMAIN: "unauthorized-continue-uri",
              INVALID_DYNAMIC_LINK_DOMAIN: "invalid-dynamic-link-domain",
              INVALID_OAUTH_CLIENT_ID: "invalid-oauth-client-id",
              INVALID_CERT_HASH: "invalid-cert-hash",
              UNSUPPORTED_TENANT_OPERATION: "unsupported-tenant-operation",
              INVALID_TENANT_ID: "invalid-tenant-id",
              TENANT_ID_MISMATCH: "tenant-id-mismatch",
              ADMIN_ONLY_OPERATION: "admin-restricted-operation",
              INVALID_MFA_PENDING_CREDENTIAL: "invalid-multi-factor-session",
              MFA_ENROLLMENT_NOT_FOUND: "multi-factor-info-not-found",
              MISSING_MFA_PENDING_CREDENTIAL: "missing-multi-factor-session",
              MISSING_MFA_ENROLLMENT_ID: "missing-multi-factor-info",
              EMAIL_CHANGE_NEEDS_VERIFICATION:
                "email-change-needs-verification",
              SECOND_FACTOR_EXISTS: "second-factor-already-in-use",
              SECOND_FACTOR_LIMIT_EXCEEDED:
                "maximum-second-factor-count-exceeded",
              UNSUPPORTED_FIRST_FACTOR: "unsupported-first-factor",
              UNVERIFIED_EMAIL: "unverified-email",
            }),
            e || {}
          ),
          (e =
            (e = n.match(/^[^\s]+\s*:\s*([\s\S]*)$/)) && 1 < e.length
              ? e[1]
              : void 0),
          r))
            if (0 === n.indexOf(i)) return new k(r[i], e);
          return !e && t && (e = Fr(t)), new k("internal-error", e);
        }
        function su(t) {
          (this.b = t),
            (this.a = null),
            (this.rb = (function (t) {
              return (
                hu ||
                (hu = new Ie(function (t, e) {
                  function n() {
                    Gr(),
                      xr("gapi.load")("gapi.iframes", {
                        callback: t,
                        ontimeout: function () {
                          Gr(), e(Error("Network Error"));
                        },
                        timeout: uu.get(),
                      });
                  }
                  if (xr("gapi.iframes.Iframe")) t();
                  else if (xr("gapi.load")) n();
                  else {
                    var r =
                      "__iframefcb" +
                      Math.floor(1e6 * Math.random()).toString();
                    (u[r] = function () {
                      xr("gapi.load") ? n() : e(Error("Network Error"));
                    }),
                      Ae(Ws((r = Nt(au, { onload: r })))).o(function () {
                        e(Error("Network Error"));
                      });
                  }
                }).o(function (t) {
                  throw ((hu = null), t);
                }))
              ).then(function () {
                return new Ie(function (e, n) {
                  xr("gapi.iframes.getContext")().open(
                    {
                      where: document.body,
                      url: t.b,
                      messageHandlersFilter: xr(
                        "gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"
                      ),
                      attributes: {
                        style: {
                          position: "absolute",
                          top: "-100px",
                          width: "1px",
                          height: "1px",
                        },
                      },
                      dontclear: !0,
                    },
                    function (r) {
                      function i() {
                        clearTimeout(o), e();
                      }
                      (t.a = r), t.a.restyle({ setHideOnLeave: !1 });
                      var o = setTimeout(function () {
                        n(Error("Network Error"));
                      }, cu.get());
                      r.ping(i).then(i, function () {
                        n(Error("Network Error"));
                      });
                    }
                  );
                });
              });
            })(this));
        }
        var au = new wt(
            Tt,
            "https://apis.google.com/js/api.js?onload=%{onload}"
          ),
          uu = new Wr(3e4, 6e4),
          cu = new Wr(5e3, 15e3),
          hu = null;
        function lu(t, e, n, r) {
          (this.l = t),
            (this.h = e),
            (this.i = n),
            (this.g = r),
            (this.f = null),
            (t = this.g
              ? Bn((t = qn(this.g.url)).c, t.a, t.g, "/emulator/auth/iframe")
              : Bn("https", this.l, null, "/__/auth/iframe")),
            (this.a = t),
            Un(this.a, "apiKey", this.h),
            Un(this.a, "appName", this.i),
            (this.b = null),
            (this.c = []);
        }
        function fu(t, e, n, r, i, o) {
          (this.u = t),
            (this.s = e),
            (this.c = n),
            (this.m = r),
            (this.v = o),
            (this.i = this.g = this.l = null),
            (this.a = i),
            (this.h = this.f = null);
        }
        function pu(t) {
          try {
            return e.Z.app(t).auth().Ga();
          } catch (t) {
            return [];
          }
        }
        function du(t, e, n, r, i, o) {
          (this.s = t),
            (this.g = e),
            (this.b = n),
            (this.f = o),
            (this.c = r || null),
            (this.i = i || null),
            (this.l = this.u = this.C = null),
            (this.h = []),
            (this.m = this.a = null);
        }
        function vu(t) {
          var e = fr();
          return (function (t) {
            return ru(t, Ua, {}).then(function (t) {
              return t.authorizedDomains || [];
            });
          })(t).then(function (t) {
            t: {
              var n = qn(e),
                r = n.c;
              n = n.a;
              for (var i = 0; i < t.length; i++) {
                var o = t[i],
                  s = n,
                  a = r;
                if (
                  (0 == o.indexOf("chrome-extension://")
                    ? (s = qn(o).a == s && "chrome-extension" == a)
                    : "http" != a && "https" != a
                    ? (s = !1)
                    : yr.test(o)
                    ? (s = s == o)
                    : ((o = o.split(".").join("\\.")),
                      (s = new RegExp("^(.+\\." + o + "|" + o + ")$", "i").test(
                        s
                      ))),
                  s)
                ) {
                  t = !0;
                  break t;
                }
              }
              t = !1;
            }
            if (!t) throw new Ko(fr());
          });
        }
        function gu(t) {
          return (
            t.m ||
              (t.m = wr().then(function () {
                if (!t.u) {
                  var e = t.c,
                    n = t.i,
                    r = pu(t.b),
                    i = new lu(t.s, t.g, t.b, t.f);
                  (i.f = e),
                    (i.b = n),
                    (i.c = $(r || [])),
                    (t.u = i.toString());
                }
                (t.v = new su(t.u)),
                  (function (t) {
                    if (!t.v) throw Error("IfcHandler must be initialized!");
                    !(function (t, e) {
                      t.rb.then(function () {
                        t.a.register(
                          "authEvent",
                          e,
                          xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER")
                        );
                      });
                    })(t.v, function (e) {
                      var n = {};
                      if (e && e.authEvent) {
                        var r = !1;
                        for (e = Go(e.authEvent), n = 0; n < t.h.length; n++)
                          r = t.h[n](e) || r;
                        return ((n = {}).status = r ? "ACK" : "ERROR"), Ae(n);
                      }
                      return (n.status = "ERROR"), Ae(n);
                    });
                  })(t);
              })),
            t.m
          );
        }
        function mu(t) {
          return (
            t.l ||
              ((t.C = t.c ? Pr(t.c, pu(t.b)) : null),
              (t.l = new Xs(t.g, O(t.i), t.C)),
              t.f && oa(t.l, t.f)),
            t.l
          );
        }
        function yu(t, e, n, r, i, o, s, a, u, c, h, l) {
          return (
            ((t = new fu(t, e, n, r, i, l)).l = o),
            (t.g = s),
            (t.i = a),
            (t.b = gt(u || null)),
            (t.f = c),
            t.yb(h).toString()
          );
        }
        function bu(t) {
          if (
            ((this.a =
              t ||
              (e.Z.INTERNAL.reactNative &&
                e.Z.INTERNAL.reactNative.AsyncStorage)),
            !this.a)
          )
            throw new k(
              "internal-error",
              "The React Native compatibility library was not found."
            );
          this.type = "asyncStorage";
        }
        function wu(t) {
          (this.b = t), (this.a = {}), (this.f = I(this.c, this));
        }
        (lu.prototype.toString = function () {
          return (
            this.f ? Un(this.a, "v", this.f) : tr(this.a.b, "v"),
            this.b ? Un(this.a, "eid", this.b) : tr(this.a.b, "eid"),
            this.c.length
              ? Un(this.a, "fw", this.c.join(","))
              : tr(this.a.b, "fw"),
            this.a.toString()
          );
        }),
          (fu.prototype.yb = function (t) {
            return (this.h = t), this;
          }),
          (fu.prototype.toString = function () {
            if (this.v) {
              var t = qn(this.v.url);
              t = Bn(t.c, t.a, t.g, "/emulator/auth/handler");
            } else t = Bn("https", this.u, null, "/__/auth/handler");
            if (
              (Un(t, "apiKey", this.s),
              Un(t, "appName", this.c),
              Un(t, "authType", this.m),
              this.a.isOAuthProvider)
            ) {
              var n = this.a;
              try {
                var r = e.Z.app(this.c).auth().la();
              } catch (t) {
                r = null;
              }
              for (var i in ((n.ob = r),
              Un(t, "providerId", this.a.providerId),
              (n = Ur((r = this.a).Ib))))
                n[i] = n[i].toString();
              (i = r.Qc), (n = gt(n));
              for (var o = 0; o < i.length; o++) {
                var s = i[o];
                s in n && delete n[s];
              }
              r.pb && r.ob && !n[r.pb] && (n[r.pb] = r.ob),
                vt(n) || Un(t, "customParameters", Fr(n));
            }
            if (
              ("function" == typeof this.a.Qb &&
                (r = this.a.Qb()).length &&
                Un(t, "scopes", r.join(",")),
              this.l ? Un(t, "redirectUrl", this.l) : tr(t.b, "redirectUrl"),
              this.g ? Un(t, "eventId", this.g) : tr(t.b, "eventId"),
              this.i ? Un(t, "v", this.i) : tr(t.b, "v"),
              this.b)
            )
              for (var a in this.b)
                this.b.hasOwnProperty(a) && !Vn(t, a) && Un(t, a, this.b[a]);
            return (
              this.h ? Un(t, "tid", this.h) : tr(t.b, "tid"),
              this.f ? Un(t, "eid", this.f) : tr(t.b, "eid"),
              (a = pu(this.c)).length && Un(t, "fw", a.join(",")),
              t.toString()
            );
          }),
          ((t = du.prototype).Ob = function (t, e, n) {
            var r = new k("popup-closed-by-user"),
              i = new k("web-storage-unsupported"),
              o = this,
              s = !1;
            return this.ma()
              .then(function () {
                (function (t) {
                  var e = { type: "webStorageSupport" };
                  return gu(t)
                    .then(function () {
                      return (function (t, e) {
                        return t.rb.then(function () {
                          return new Ie(function (n) {
                            t.a.send(
                              e.type,
                              e,
                              n,
                              xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER")
                            );
                          });
                        });
                      })(t.v, e);
                    })
                    .then(function (t) {
                      if (t && t.length && void 0 !== t[0].webStorageSupport)
                        return t[0].webStorageSupport;
                      throw Error();
                    });
                })(o).then(function (n) {
                  n || (t && gr(t), e(i), (s = !0));
                });
              })
              .o(function () {})
              .then(function () {
                if (!s)
                  return (function (t) {
                    return new Ie(function (e) {
                      return (function n() {
                        Nn(2e3).then(function () {
                          if (t && !t.closed) return n();
                          e();
                        });
                      })();
                    });
                  })(t);
              })
              .then(function () {
                if (!s)
                  return Nn(n).then(function () {
                    e(r);
                  });
              });
          }),
          (t.Xb = function () {
            var t = Dr();
            return !jr(t) && !Br(t);
          }),
          (t.Tb = function () {
            return !1;
          }),
          (t.Mb = function (t, e, n, r, i, o, s, a) {
            if (!t) return Pe(new k("popup-blocked"));
            if (s && !jr())
              return (
                this.ma().o(function (e) {
                  gr(t), i(e);
                }),
                r(),
                Ae()
              );
            this.a || (this.a = vu(mu(this)));
            var u = this;
            return this.a
              .then(function () {
                var e = u.ma().o(function (e) {
                  throw (gr(t), i(e), e);
                });
                return r(), e;
              })
              .then(function () {
                qo(n),
                  s ||
                    pr(
                      yu(
                        u.s,
                        u.g,
                        u.b,
                        e,
                        n,
                        null,
                        o,
                        u.c,
                        void 0,
                        u.i,
                        a,
                        u.f
                      ),
                      t
                    );
              })
              .o(function (t) {
                throw (
                  ("auth/network-request-failed" == t.code && (u.a = null), t)
                );
              });
          }),
          (t.Nb = function (t, e, n, r) {
            this.a || (this.a = vu(mu(this)));
            var i = this;
            return this.a
              .then(function () {
                qo(e),
                  pr(
                    yu(i.s, i.g, i.b, t, e, fr(), n, i.c, void 0, i.i, r, i.f)
                  );
              })
              .o(function (t) {
                throw (
                  ("auth/network-request-failed" == t.code && (i.a = null), t)
                );
              });
          }),
          (t.ma = function () {
            var t = this;
            return gu(this)
              .then(function () {
                return t.v.rb;
              })
              .o(function () {
                throw ((t.a = null), new k("network-request-failed"));
              });
          }),
          (t.$b = function () {
            return !0;
          }),
          (t.Ea = function (t) {
            this.h.push(t);
          }),
          (t.Sa = function (t) {
            X(this.h, function (e) {
              return e == t;
            });
          }),
          ((t = bu.prototype).get = function (t) {
            return Ae(this.a.getItem(t)).then(function (t) {
              return t && Vr(t);
            });
          }),
          (t.set = function (t, e) {
            return Ae(this.a.setItem(t, Fr(e)));
          }),
          (t.U = function (t) {
            return Ae(this.a.removeItem(t));
          }),
          (t.ca = function () {}),
          (t.ia = function () {});
        var _u,
          Iu = [];
        function Eu(t, e, n) {
          vt(t.a) && t.b.addEventListener("message", t.f),
            void 0 === t.a[e] && (t.a[e] = []),
            t.a[e].push(n);
        }
        function Tu(t) {
          this.a = t;
        }
        function Su(t) {
          (this.c = t), (this.b = !1), (this.a = []);
        }
        function Cu(t, e, n, r) {
          var i,
            o,
            s,
            a,
            u = n || {},
            c = null;
          if (t.b) return Pe(Error("connection_unavailable"));
          var h = r ? 800 : 50,
            l =
              "undefined" != typeof MessageChannel
                ? new MessageChannel()
                : null;
          return new Ie(function (n, r) {
            l
              ? ((i = Math.floor(Math.random() * Math.pow(10, 20)).toString()),
                l.port1.start(),
                (s = setTimeout(function () {
                  r(Error("unsupported_event"));
                }, h)),
                (c = {
                  messageChannel: l,
                  onMessage: (o = function (t) {
                    t.data.eventId === i &&
                      ("ack" === t.data.status
                        ? (clearTimeout(s),
                          (a = setTimeout(function () {
                            r(Error("timeout"));
                          }, 3e3)))
                        : "done" === t.data.status
                        ? (clearTimeout(a),
                          void 0 !== t.data.response
                            ? n(t.data.response)
                            : r(Error("unknown_error")))
                        : (clearTimeout(s),
                          clearTimeout(a),
                          r(Error("invalid_response"))));
                  }),
                }),
                t.a.push(c),
                l.port1.addEventListener("message", o),
                t.c.postMessage({ eventType: e, eventId: i, data: u }, [
                  l.port2,
                ]))
              : r(Error("connection_unavailable"));
          })
            .then(function (e) {
              return ku(t, c), e;
            })
            .o(function (e) {
              throw (ku(t, c), e);
            });
        }
        function ku(t, e) {
          if (e) {
            var n = e.messageChannel,
              r = e.onMessage;
            n && (n.port1.removeEventListener("message", r), n.port1.close()),
              X(t.a, function (t) {
                return t == e;
              });
          }
        }
        function Nu() {
          if (!xu()) throw new k("web-storage-unsupported");
          (this.c = {}),
            (this.a = []),
            (this.b = 0),
            (this.m = u.indexedDB),
            (this.type = "indexedDB"),
            (this.g = this.v = this.f = this.l = null),
            (this.s = !1),
            (this.h = null);
          var t = this;
          Er() && self
            ? ((this.v = (function () {
                var t = Er() ? self : null;
                if (
                  (z(Iu, function (n) {
                    n.b == t && (e = n);
                  }),
                  !e)
                ) {
                  var e = new wu(t);
                  Iu.push(e);
                }
                return e;
              })()),
              Eu(this.v, "keyChanged", function (e, n) {
                return ju(t).then(function (e) {
                  return (
                    0 < e.length &&
                      z(t.a, function (t) {
                        t(e);
                      }),
                    { keyProcessed: Q(e, n.key) }
                  );
                });
              }),
              Eu(this.v, "ping", function () {
                return Ae(["keyChanged"]);
              }))
            : (function () {
                var t = u.navigator;
                return t && t.serviceWorker
                  ? Ae()
                      .then(function () {
                        return t.serviceWorker.ready;
                      })
                      .then(function (t) {
                        return t.active || null;
                      })
                      .o(function () {
                        return null;
                      })
                  : Ae(null);
              })().then(function (e) {
                (t.h = e) &&
                  ((t.g = new Su(new Tu(e))),
                  Cu(t.g, "ping", null, !0)
                    .then(function (e) {
                      e[0].fulfilled &&
                        Q(e[0].value, "keyChanged") &&
                        (t.s = !0);
                    })
                    .o(function () {}));
              });
        }
        function Au(t) {
          return new Ie(function (e, n) {
            var r = t.m.open("firebaseLocalStorageDb", 1);
            (r.onerror = function (t) {
              try {
                t.preventDefault();
              } catch (t) {}
              n(Error(t.target.error));
            }),
              (r.onupgradeneeded = function (t) {
                t = t.target.result;
                try {
                  t.createObjectStore("firebaseLocalStorage", {
                    keyPath: "fbase_key",
                  });
                } catch (t) {
                  n(t);
                }
              }),
              (r.onsuccess = function (r) {
                (r = r.target.result).objectStoreNames.contains(
                  "firebaseLocalStorage"
                )
                  ? e(r)
                  : (function (t) {
                      return new Ie(function (e, n) {
                        var r = t.m.deleteDatabase("firebaseLocalStorageDb");
                        (r.onsuccess = function () {
                          e();
                        }),
                          (r.onerror = function (t) {
                            n(Error(t.target.error));
                          });
                      });
                    })(t)
                      .then(function () {
                        return Au(t);
                      })
                      .then(function (t) {
                        e(t);
                      })
                      .o(function (t) {
                        n(t);
                      });
              });
          });
        }
        function Pu(t) {
          return t.i || (t.i = Au(t)), t.i;
        }
        function Du(t, e) {
          var n = 0;
          return new Ie(function r(i, o) {
            Pu(t)
              .then(e)
              .then(i)
              .o(function (e) {
                if (!(3 < ++n))
                  return Pu(t)
                    .then(function (e) {
                      return e.close(), (t.i = void 0), r(i, o);
                    })
                    .o(function (t) {
                      o(t);
                    });
                o(e);
              });
          });
        }
        function xu() {
          try {
            return !!u.indexedDB;
          } catch (t) {
            return !1;
          }
        }
        function Ou(t) {
          return t.objectStore("firebaseLocalStorage");
        }
        function Ru(t, e) {
          return t.transaction(
            ["firebaseLocalStorage"],
            e ? "readwrite" : "readonly"
          );
        }
        function Mu(t) {
          return new Ie(function (e, n) {
            (t.onsuccess = function (t) {
              t && t.target ? e(t.target.result) : e();
            }),
              (t.onerror = function (t) {
                n(t.target.error);
              });
          });
        }
        function Lu(t, e) {
          return t.g &&
            t.h &&
            (function () {
              var t = u.navigator;
              return (
                (t && t.serviceWorker && t.serviceWorker.controller) || null
              );
            })() === t.h
            ? Cu(t.g, "keyChanged", { key: e }, t.s)
                .then(function () {})
                .o(function () {})
            : Ae();
        }
        function ju(t) {
          return Pu(t)
            .then(function (t) {
              var e = Ou(Ru(t, !1));
              return e.getAll
                ? Mu(e.getAll())
                : new Ie(function (t, n) {
                    var r = [],
                      i = e.openCursor();
                    (i.onsuccess = function (e) {
                      (e = e.target.result)
                        ? (r.push(e.value), e.continue())
                        : t(r);
                    }),
                      (i.onerror = function (t) {
                        n(t.target.error);
                      });
                  });
            })
            .then(function (e) {
              var n = {},
                r = [];
              if (0 == t.b) {
                for (r = 0; r < e.length; r++) n[e[r].fbase_key] = e[r].value;
                (r = dr(t.c, n)), (t.c = n);
              }
              return r;
            });
        }
        function Fu(t) {
          t.l && t.l.cancel("STOP_EVENT"),
            t.f && (clearTimeout(t.f), (t.f = null));
        }
        function Uu(t) {
          var e = this,
            n = null;
          (this.a = []),
            (this.type = "indexedDB"),
            (this.c = t),
            (this.b = Ae()
              .then(function () {
                if (xu()) {
                  var t = qr(),
                    r = "__sak" + t;
                  return (
                    _u || (_u = new Nu()),
                    (n = _u)
                      .set(r, t)
                      .then(function () {
                        return n.get(r);
                      })
                      .then(function (e) {
                        if (e !== t) throw Error("indexedDB not supported!");
                        return n.U(r);
                      })
                      .then(function () {
                        return n;
                      })
                      .o(function () {
                        return e.c;
                      })
                  );
                }
                return e.c;
              })
              .then(function (t) {
                return (
                  (e.type = t.type),
                  t.ca(function (t) {
                    z(e.a, function (e) {
                      e(t);
                    });
                  }),
                  t
                );
              }));
        }
        function Vu() {
          (this.a = {}), (this.type = "inMemory");
        }
        function qu() {
          if (
            !(function () {
              var t = "Node" == Tr();
              if (
                !(t =
                  Bu() ||
                  (t && e.Z.INTERNAL.node && e.Z.INTERNAL.node.localStorage))
              )
                return !1;
              try {
                return t.setItem("__sak", "1"), t.removeItem("__sak"), !0;
              } catch (t) {
                return !1;
              }
            })()
          ) {
            if ("Node" == Tr())
              throw new k(
                "internal-error",
                "The LocalStorage compatibility library was not found."
              );
            throw new k("web-storage-unsupported");
          }
          (this.a = Bu() || e.Z.INTERNAL.node.localStorage),
            (this.type = "localStorage");
        }
        function Bu() {
          try {
            var t = u.localStorage,
              e = qr();
            return t && (t.setItem(e, "1"), t.removeItem(e)), t;
          } catch (t) {
            return null;
          }
        }
        function Gu() {
          this.type = "nullStorage";
        }
        function Wu() {
          if (
            !(function () {
              var t = "Node" == Tr();
              if (
                !(t =
                  zu() ||
                  (t && e.Z.INTERNAL.node && e.Z.INTERNAL.node.sessionStorage))
              )
                return !1;
              try {
                return t.setItem("__sak", "1"), t.removeItem("__sak"), !0;
              } catch (t) {
                return !1;
              }
            })()
          ) {
            if ("Node" == Tr())
              throw new k(
                "internal-error",
                "The SessionStorage compatibility library was not found."
              );
            throw new k("web-storage-unsupported");
          }
          (this.a = zu() || e.Z.INTERNAL.node.sessionStorage),
            (this.type = "sessionStorage");
        }
        function zu() {
          try {
            var t = u.sessionStorage,
              e = qr();
            return t && (t.setItem(e, "1"), t.removeItem(e)), t;
          } catch (t) {
            return null;
          }
        }
        function Hu() {
          var t = {};
          (t.Browser = Qu),
            (t.Node = Yu),
            (t.ReactNative = Xu),
            (t.Worker = Zu),
            (this.a = t[Tr()]);
        }
        (wu.prototype.c = function (t) {
          var e = t.data.eventType,
            n = t.data.eventId,
            r = this.a[e];
          if (r && 0 < r.length) {
            t.ports[0].postMessage({
              status: "ack",
              eventId: n,
              eventType: e,
              response: null,
            });
            var i = [];
            z(r, function (e) {
              i.push(
                Ae().then(function () {
                  return e(t.origin, t.data.data);
                })
              );
            }),
              xe(i).then(function (r) {
                var i = [];
                z(r, function (t) {
                  i.push({
                    fulfilled: t.Pb,
                    value: t.value,
                    reason: t.reason ? t.reason.message : void 0,
                  });
                }),
                  z(i, function (t) {
                    for (var e in t) void 0 === t[e] && delete t[e];
                  }),
                  t.ports[0].postMessage({
                    status: "done",
                    eventId: n,
                    eventType: e,
                    response: i,
                  });
              });
          }
        }),
          (Tu.prototype.postMessage = function (t, e) {
            this.a.postMessage(t, e);
          }),
          (Su.prototype.close = function () {
            for (; 0 < this.a.length; ) ku(this, this.a[0]);
            this.b = !0;
          }),
          ((t = Nu.prototype).set = function (t, e) {
            var n = this,
              r = !1;
            return Du(this, function (e) {
              return Mu((e = Ou(Ru(e, !0))).get(t));
            })
              .then(function (i) {
                return Du(n, function (o) {
                  if (((o = Ou(Ru(o, !0))), i))
                    return (i.value = e), Mu(o.put(i));
                  n.b++, (r = !0);
                  var s = {};
                  return (s.fbase_key = t), (s.value = e), Mu(o.add(s));
                });
              })
              .then(function () {
                return (n.c[t] = e), Lu(n, t);
              })
              .oa(function () {
                r && n.b--;
              });
          }),
          (t.get = function (t) {
            return Du(this, function (e) {
              return Mu(Ou(Ru(e, !1)).get(t));
            }).then(function (t) {
              return t && t.value;
            });
          }),
          (t.U = function (t) {
            var e = this,
              n = !1;
            return Du(this, function (r) {
              return (n = !0), e.b++, Mu(Ou(Ru(r, !0)).delete(t));
            })
              .then(function () {
                return delete e.c[t], Lu(e, t);
              })
              .oa(function () {
                n && e.b--;
              });
          }),
          (t.ca = function (t) {
            0 == this.a.length &&
              (function (t) {
                Fu(t),
                  (function e() {
                    t.f = setTimeout(function () {
                      t.l = ju(t)
                        .then(function (e) {
                          0 < e.length &&
                            z(t.a, function (t) {
                              t(e);
                            });
                        })
                        .then(function () {
                          e();
                        })
                        .o(function (t) {
                          "STOP_EVENT" != t.message && e();
                        });
                    }, 800);
                  })();
              })(this),
              this.a.push(t);
          }),
          (t.ia = function (t) {
            X(this.a, function (e) {
              return e == t;
            }),
              0 == this.a.length && Fu(this);
          }),
          ((t = Uu.prototype).get = function (t) {
            return this.b.then(function (e) {
              return e.get(t);
            });
          }),
          (t.set = function (t, e) {
            return this.b.then(function (n) {
              return n.set(t, e);
            });
          }),
          (t.U = function (t) {
            return this.b.then(function (e) {
              return e.U(t);
            });
          }),
          (t.ca = function (t) {
            this.a.push(t);
          }),
          (t.ia = function (t) {
            X(this.a, function (e) {
              return e == t;
            });
          }),
          ((t = Vu.prototype).get = function (t) {
            return Ae(this.a[t]);
          }),
          (t.set = function (t, e) {
            return (this.a[t] = e), Ae();
          }),
          (t.U = function (t) {
            return delete this.a[t], Ae();
          }),
          (t.ca = function () {}),
          (t.ia = function () {}),
          ((t = qu.prototype).get = function (t) {
            var e = this;
            return Ae().then(function () {
              return Vr(e.a.getItem(t));
            });
          }),
          (t.set = function (t, e) {
            var n = this;
            return Ae().then(function () {
              var r = Fr(e);
              null === r ? n.U(t) : n.a.setItem(t, r);
            });
          }),
          (t.U = function (t) {
            var e = this;
            return Ae().then(function () {
              e.a.removeItem(t);
            });
          }),
          (t.ca = function (t) {
            u.window && ln(u.window, "storage", t);
          }),
          (t.ia = function (t) {
            u.window && dn(u.window, "storage", t);
          }),
          ((t = Gu.prototype).get = function () {
            return Ae(null);
          }),
          (t.set = function () {
            return Ae();
          }),
          (t.U = function () {
            return Ae();
          }),
          (t.ca = function () {}),
          (t.ia = function () {}),
          ((t = Wu.prototype).get = function (t) {
            var e = this;
            return Ae().then(function () {
              return Vr(e.a.getItem(t));
            });
          }),
          (t.set = function (t, e) {
            var n = this;
            return Ae().then(function () {
              var r = Fr(e);
              null === r ? n.U(t) : n.a.setItem(t, r);
            });
          }),
          (t.U = function (t) {
            var e = this;
            return Ae().then(function () {
              e.a.removeItem(t);
            });
          }),
          (t.ca = function () {}),
          (t.ia = function () {});
        var Ku,
          Ju,
          Qu = { F: qu, bb: Wu },
          Yu = { F: qu, bb: Wu },
          Xu = { F: bu, bb: Gu },
          Zu = { F: qu, bb: Gu },
          $u = { rd: "local", NONE: "none", td: "session" };
        function tc() {
          var t = !(Br(Dr()) || !Ir()),
            e = jr(),
            n = Or();
          (this.m = t),
            (this.h = e),
            (this.l = n),
            (this.a = {}),
            Ku || (Ku = new Hu()),
            (t = Ku);
          try {
            this.g =
              (!lr() && Kr()) || !u.indexedDB
                ? new t.a.F()
                : new Uu(Er() ? new Vu() : new t.a.F());
          } catch (t) {
            (this.g = new Vu()), (this.h = !0);
          }
          try {
            this.i = new t.a.bb();
          } catch (t) {
            this.i = new Vu();
          }
          (this.v = new Vu()), (this.f = I(this.Yb, this)), (this.b = {});
        }
        function ec() {
          return Ju || (Ju = new tc()), Ju;
        }
        function nc(t, e) {
          switch (e) {
            case "session":
              return t.i;
            case "none":
              return t.v;
            default:
              return t.g;
          }
        }
        function rc(t, e) {
          return "firebase:" + t.name + (e ? ":" + e : "");
        }
        function ic(t, e, n) {
          return (
            (n = rc(e, n)), "local" == e.F && (t.b[n] = null), nc(t, e.F).U(n)
          );
        }
        function oc(t) {
          t.c && (clearInterval(t.c), (t.c = null));
        }
        function sc(t) {
          (this.a = t), (this.b = ec());
        }
        ((t = tc.prototype).get = function (t, e) {
          return nc(this, t.F).get(rc(t, e));
        }),
          (t.set = function (t, e, n) {
            var r = rc(t, n),
              i = this,
              o = nc(this, t.F);
            return o
              .set(r, e)
              .then(function () {
                return o.get(r);
              })
              .then(function (e) {
                "local" == t.F && (i.b[r] = e);
              });
          }),
          (t.addListener = function (t, e, n) {
            (t = rc(t, e)),
              this.l && (this.b[t] = u.localStorage.getItem(t)),
              vt(this.a) &&
                (nc(this, "local").ca(this.f),
                this.h ||
                  ((lr() || !Kr()) && u.indexedDB) ||
                  !this.l ||
                  (function (t) {
                    oc(t),
                      (t.c = setInterval(function () {
                        for (var e in t.a) {
                          var n = u.localStorage.getItem(e),
                            r = t.b[e];
                          n != r &&
                            ((t.b[e] = n),
                            (n = new $e({
                              type: "storage",
                              key: e,
                              target: window,
                              oldValue: r,
                              newValue: n,
                              a: !0,
                            })),
                            t.Yb(n));
                        }
                      }, 1e3));
                  })(this)),
              this.a[t] || (this.a[t] = []),
              this.a[t].push(n);
          }),
          (t.removeListener = function (t, e, n) {
            (t = rc(t, e)),
              this.a[t] &&
                (X(this.a[t], function (t) {
                  return t == n;
                }),
                0 == this.a[t].length && delete this.a[t]),
              vt(this.a) && (nc(this, "local").ia(this.f), oc(this));
          }),
          (t.Yb = function (t) {
            if (t && t.g) {
              var e = t.a.key;
              if (null == e)
                for (var n in this.a) {
                  var r = this.b[n];
                  void 0 === r && (r = null);
                  var i = u.localStorage.getItem(n);
                  i !== r && ((this.b[n] = i), this.mb(n));
                }
              else if (0 == e.indexOf("firebase:") && this.a[e]) {
                if (
                  (void 0 !== t.a.a ? nc(this, "local").ia(this.f) : oc(this),
                  this.m)
                )
                  if (
                    ((n = u.localStorage.getItem(e)), (r = t.a.newValue) !== n)
                  )
                    null !== r
                      ? u.localStorage.setItem(e, r)
                      : u.localStorage.removeItem(e);
                  else if (this.b[e] === r && void 0 === t.a.a) return;
                var o = this;
                (n = function () {
                  (void 0 === t.a.a && o.b[e] === u.localStorage.getItem(e)) ||
                    ((o.b[e] = u.localStorage.getItem(e)), o.mb(e));
                }),
                  Yt &&
                  ue &&
                  10 == ue &&
                  u.localStorage.getItem(e) !== t.a.newValue &&
                  t.a.newValue !== t.a.oldValue
                    ? setTimeout(n, 10)
                    : n();
              }
            } else z(t, I(this.mb, this));
          }),
          (t.mb = function (t) {
            this.a[t] &&
              z(this.a[t], function (t) {
                t();
              });
          });
        var ac,
          uc = { name: "authEvent", F: "local" };
        function cc() {
          this.a = ec();
        }
        function hc(t, e) {
          (this.b = lc),
            (this.f = u.Uint8Array ? new Uint8Array(this.b) : Array(this.b)),
            (this.g = this.c = 0),
            (this.a = []),
            (this.i = t),
            (this.h = e),
            (this.l = u.Int32Array ? new Int32Array(64) : Array(64)),
            void 0 === ac && (ac = u.Int32Array ? new Int32Array(yc) : yc),
            this.reset();
        }
        S(hc, function () {
          this.b = -1;
        });
        for (var lc = 64, fc = lc - 1, pc = [], dc = 0; dc < fc; dc++)
          pc[dc] = 0;
        var vc = Z(128, pc);
        function gc(t) {
          for (var e = t.f, n = t.l, r = 0, i = 0; i < e.length; )
            (n[r++] =
              (e[i] << 24) | (e[i + 1] << 16) | (e[i + 2] << 8) | e[i + 3]),
              (i = 4 * r);
          for (e = 16; 64 > e; e++) {
            (i = 0 | n[e - 15]), (r = 0 | n[e - 2]);
            var o =
                ((0 | n[e - 16]) +
                  (((i >>> 7) | (i << 25)) ^
                    ((i >>> 18) | (i << 14)) ^
                    (i >>> 3))) |
                0,
              s =
                ((0 | n[e - 7]) +
                  (((r >>> 17) | (r << 15)) ^
                    ((r >>> 19) | (r << 13)) ^
                    (r >>> 10))) |
                0;
            n[e] = (o + s) | 0;
          }
          (r = 0 | t.a[0]), (i = 0 | t.a[1]);
          var a = 0 | t.a[2],
            u = 0 | t.a[3],
            c = 0 | t.a[4],
            h = 0 | t.a[5],
            l = 0 | t.a[6];
          for (o = 0 | t.a[7], e = 0; 64 > e; e++) {
            var f =
              ((((r >>> 2) | (r << 30)) ^
                ((r >>> 13) | (r << 19)) ^
                ((r >>> 22) | (r << 10))) +
                ((r & i) ^ (r & a) ^ (i & a))) |
              0;
            (s =
              ((o =
                (o +
                  (((c >>> 6) | (c << 26)) ^
                    ((c >>> 11) | (c << 21)) ^
                    ((c >>> 25) | (c << 7)))) |
                0) +
                (((s = ((s = (c & h) ^ (~c & l)) + (0 | ac[e])) | 0) +
                  (0 | n[e])) |
                  0)) |
              0),
              (o = l),
              (l = h),
              (h = c),
              (c = (u + s) | 0),
              (u = a),
              (a = i),
              (i = r),
              (r = (s + f) | 0);
          }
          (t.a[0] = (t.a[0] + r) | 0),
            (t.a[1] = (t.a[1] + i) | 0),
            (t.a[2] = (t.a[2] + a) | 0),
            (t.a[3] = (t.a[3] + u) | 0),
            (t.a[4] = (t.a[4] + c) | 0),
            (t.a[5] = (t.a[5] + h) | 0),
            (t.a[6] = (t.a[6] + l) | 0),
            (t.a[7] = (t.a[7] + o) | 0);
        }
        function mc(t, e, n) {
          void 0 === n && (n = e.length);
          var r = 0,
            i = t.c;
          if ("string" == typeof e)
            for (; r < n; )
              (t.f[i++] = e.charCodeAt(r++)), i == t.b && (gc(t), (i = 0));
          else {
            if (!d(e)) throw Error("message must be string or array");
            for (; r < n; ) {
              var o = e[r++];
              if (!("number" == typeof o && 0 <= o && 255 >= o && o == (0 | o)))
                throw Error("message must be a byte array");
              (t.f[i++] = o), i == t.b && (gc(t), (i = 0));
            }
          }
          (t.c = i), (t.g += n);
        }
        hc.prototype.reset = function () {
          (this.g = this.c = 0),
            (this.a = u.Int32Array ? new Int32Array(this.h) : $(this.h));
        };
        var yc = [
          1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993,
          2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987,
          1925078388, 2162078206, 2614888103, 3248222580, 3835390401,
          4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692,
          1996064986, 2554220882, 2821834349, 2952996808, 3210313671,
          3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912,
          1294757372, 1396182291, 1695183700, 1986661051, 2177026350,
          2456956037, 2730485921, 2820302411, 3259730800, 3345764771,
          3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616,
          659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779,
          1955562222, 2024104815, 2227730452, 2361852424, 2428436474,
          2756734187, 3204031479, 3329325298,
        ];
        function bc() {
          hc.call(this, 8, wc);
        }
        S(bc, hc);
        var wc = [
          1779033703, 3144134277, 1013904242, 2773480762, 1359893119,
          2600822924, 528734635, 1541459225,
        ];
        function _c(t, e, n, r, i, o) {
          (this.v = t),
            (this.i = e),
            (this.l = n),
            (this.m = r || null),
            (this.u = i || null),
            (this.s = o),
            (this.h = e + ":" + n),
            (this.C = new cc()),
            (this.g = new sc(this.h)),
            (this.f = null),
            (this.b = []),
            (this.a = this.c = null);
        }
        function Ic(t) {
          return new k("invalid-cordova-configuration", t);
        }
        function Ec(t, e) {
          for (var n = 0; n < t.b.length; n++)
            try {
              t.b[n](e);
            } catch (t) {}
        }
        function Tc(t) {
          return (
            t.f ||
              (t.f = t.ma().then(function () {
                return new Ie(function (e) {
                  t.Ea(function n(r) {
                    return e(r), t.Sa(n), !1;
                  }),
                    (function (t) {
                      function e(e) {
                        (r = !0),
                          i && i.cancel(),
                          Sc(t).then(function (r) {
                            var i = n;
                            if (r && e && e.url) {
                              var o = null;
                              -1 !=
                                (i = so(e.url)).indexOf("/__/auth/callback") &&
                                (o = (o =
                                  "object" ==
                                  typeof (o = Vr(
                                    Vn((o = qn(i)), "firebaseError") || null
                                  ))
                                    ? N(o)
                                    : null)
                                  ? new Bo(r.c, r.b, null, null, o, null, r.T())
                                  : new Bo(
                                      r.c,
                                      r.b,
                                      i,
                                      r.f,
                                      null,
                                      null,
                                      r.T()
                                    )),
                                (i = o || n);
                            }
                            Ec(t, i);
                          });
                      }
                      var n = new Bo(
                          "unknown",
                          null,
                          null,
                          null,
                          new k("no-auth-event")
                        ),
                        r = !1,
                        i = Nn(500).then(function () {
                          return Sc(t).then(function () {
                            r || Ec(t, n);
                          });
                        }),
                        o = u.handleOpenURL;
                      (u.handleOpenURL = function (t) {
                        if (
                          (0 ==
                            t
                              .toLowerCase()
                              .indexOf(
                                xr("BuildInfo.packageName", u).toLowerCase() +
                                  "://"
                              ) && e({ url: t }),
                          "function" == typeof o)
                        )
                          try {
                            o(t);
                          } catch (t) {
                            console.error(t);
                          }
                      }),
                        Ho || (Ho = new Wo()),
                        (function (t) {
                          var e = Ho;
                          e.a.push(t),
                            e.b ||
                              ((e.b = function (t) {
                                for (var n = 0; n < e.a.length; n++) e.a[n](t);
                              }),
                              "function" ==
                                typeof (t = xr(
                                  "universalLinks.subscribe",
                                  u
                                )) && t(null, e.b));
                        })(e);
                    })(t);
                });
              })),
            t.f
          );
        }
        function Sc(t) {
          var e = null;
          return (function (t) {
            return t.b.get(uc, t.a).then(function (t) {
              return Go(t);
            });
          })(t.g)
            .then(function (n) {
              return (e = n), ic((n = t.g).b, uc, n.a);
            })
            .then(function () {
              return e;
            });
        }
        function Cc(t) {
          (this.a = t), (this.b = ec());
        }
        ((t = _c.prototype).ma = function () {
          return this.Ia
            ? this.Ia
            : (this.Ia = (
                _r(void 0)
                  ? wr().then(function () {
                      return new Ie(function (t, e) {
                        var n = u.document,
                          r = setTimeout(function () {
                            e(Error("Cordova framework is not ready."));
                          }, 1e3);
                        n.addEventListener(
                          "deviceready",
                          function () {
                            clearTimeout(r), t();
                          },
                          !1
                        );
                      });
                    })
                  : Pe(
                      Error(
                        "Cordova must run in an Android or iOS file scheme."
                      )
                    )
              ).then(
                function () {
                  if ("function" != typeof xr("universalLinks.subscribe", u))
                    throw Ic(
                      "cordova-universal-links-plugin-fix is not installed"
                    );
                  if (void 0 === xr("BuildInfo.packageName", u))
                    throw Ic("cordova-plugin-buildinfo is not installed");
                  if (
                    "function" !=
                    typeof xr("cordova.plugins.browsertab.openUrl", u)
                  )
                    throw Ic("cordova-plugin-browsertab is not installed");
                  if ("function" != typeof xr("cordova.InAppBrowser.open", u))
                    throw Ic("cordova-plugin-inappbrowser is not installed");
                },
                function () {
                  throw new k("cordova-not-ready");
                }
              ));
        }),
          (t.Ob = function (t, e) {
            return (
              e(new k("operation-not-supported-in-this-environment")), Ae()
            );
          }),
          (t.Mb = function () {
            return Pe(new k("operation-not-supported-in-this-environment"));
          }),
          (t.$b = function () {
            return !1;
          }),
          (t.Xb = function () {
            return !0;
          }),
          (t.Tb = function () {
            return !0;
          }),
          (t.Nb = function (t, e, n, r) {
            if (this.c) return Pe(new k("redirect-operation-pending"));
            var i = this,
              o = u.document,
              s = null,
              a = null,
              c = null,
              h = null;
            return (this.c = Ae()
              .then(function () {
                return qo(e), Tc(i);
              })
              .then(function () {
                return (function (t, e, n, r, i) {
                  var o = (function () {
                      for (var t = 20, e = []; 0 < t; )
                        e.push(
                          "1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(
                            Math.floor(62 * Math.random())
                          )
                        ),
                          t--;
                      return e.join("");
                    })(),
                    s = new Bo(e, r, null, o, new k("no-auth-event"), null, i),
                    a = xr("BuildInfo.packageName", u);
                  if ("string" != typeof a)
                    throw new k("invalid-cordova-configuration");
                  var c = xr("BuildInfo.displayName", u),
                    h = {};
                  if (
                    Dr()
                      .toLowerCase()
                      .match(/iphone|ipad|ipod/)
                  )
                    h.ibi = a;
                  else {
                    if (
                      !Dr()
                        .toLowerCase()
                        .match(/android/)
                    )
                      return Pe(
                        new k("operation-not-supported-in-this-environment")
                      );
                    h.apn = a;
                  }
                  c && (h.appDisplayName = c),
                    (o = (function (t) {
                      var e = new bc();
                      mc(e, t), (t = []);
                      var n = 8 * e.g;
                      56 > e.c
                        ? mc(e, vc, 56 - e.c)
                        : mc(e, vc, e.b - (e.c - 56));
                      for (var r = 63; 56 <= r; r--)
                        (e.f[r] = 255 & n), (n /= 256);
                      for (gc(e), r = n = 0; r < e.i; r++)
                        for (var i = 24; 0 <= i; i -= 8)
                          t[n++] = (e.a[r] >> i) & 255;
                      return (function (t) {
                        return K(t, function (t) {
                          return 1 < (t = t.toString(16)).length ? t : "0" + t;
                        }).join("");
                      })(t);
                    })(o)),
                    (h.sessionId = o);
                  var l = yu(t.v, t.i, t.l, e, n, null, r, t.m, h, t.u, i, t.s);
                  return t
                    .ma()
                    .then(function () {
                      var e = t.h;
                      return t.C.a.set(uc, s.w(), e);
                    })
                    .then(function () {
                      var e = xr("cordova.plugins.browsertab.isAvailable", u);
                      if ("function" != typeof e)
                        throw new k("invalid-cordova-configuration");
                      var n = null;
                      e(function (e) {
                        if (e) {
                          if (
                            "function" !=
                            typeof (n = xr(
                              "cordova.plugins.browsertab.openUrl",
                              u
                            ))
                          )
                            throw new k("invalid-cordova-configuration");
                          n(l);
                        } else {
                          if (
                            "function" !=
                            typeof (n = xr("cordova.InAppBrowser.open", u))
                          )
                            throw new k("invalid-cordova-configuration");
                          (e = Dr()),
                            (t.a = n(
                              l,
                              e.match(/(iPad|iPhone|iPod).*OS 7_\d/i) ||
                                e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)
                                ? "_blank"
                                : "_system",
                              "location=yes"
                            ));
                        }
                      });
                    });
                })(i, t, e, n, r);
              })
              .then(function () {
                return new Ie(function (t, e) {
                  (a = function () {
                    var e = xr("cordova.plugins.browsertab.close", u);
                    return (
                      t(),
                      "function" == typeof e && e(),
                      i.a &&
                        "function" == typeof i.a.close &&
                        (i.a.close(), (i.a = null)),
                      !1
                    );
                  }),
                    i.Ea(a),
                    (c = function () {
                      s ||
                        (s = Nn(2e3).then(function () {
                          e(new k("redirect-cancelled-by-user"));
                        }));
                    }),
                    (h = function () {
                      zr() && c();
                    }),
                    o.addEventListener("resume", c, !1),
                    Dr()
                      .toLowerCase()
                      .match(/android/) ||
                      o.addEventListener("visibilitychange", h, !1);
                }).o(function (t) {
                  return Sc(i).then(function () {
                    throw t;
                  });
                });
              })
              .oa(function () {
                c && o.removeEventListener("resume", c, !1),
                  h && o.removeEventListener("visibilitychange", h, !1),
                  s && s.cancel(),
                  a && i.Sa(a),
                  (i.c = null);
              }));
          }),
          (t.Ea = function (t) {
            this.b.push(t),
              Tc(this).o(function (e) {
                "auth/invalid-cordova-configuration" === e.code &&
                  ((e = new Bo(
                    "unknown",
                    null,
                    null,
                    null,
                    new k("no-auth-event")
                  )),
                  t(e));
              });
          }),
          (t.Sa = function (t) {
            X(this.b, function (e) {
              return e == t;
            });
          });
        var kc = { name: "pendingRedirect", F: "session" };
        function Nc(t) {
          return ic(t.b, kc, t.a);
        }
        function Ac(t, e, n, r) {
          (this.i = {}),
            (this.u = 0),
            (this.D = t),
            (this.v = e),
            (this.m = n),
            (this.J = r),
            (this.h = []),
            (this.f = !1),
            (this.l = I(this.s, this)),
            (this.b = new Wc()),
            (this.C = new Qc()),
            (this.g = new Cc(Bc(this.v, this.m))),
            (this.c = {}),
            (this.c.unknown = this.b),
            (this.c.signInViaRedirect = this.b),
            (this.c.linkViaRedirect = this.b),
            (this.c.reauthViaRedirect = this.b),
            (this.c.signInViaPopup = this.C),
            (this.c.linkViaPopup = this.C),
            (this.c.reauthViaPopup = this.C),
            (this.a = Pc(this.D, this.v, this.m, A, this.J));
        }
        function Pc(t, n, r, i, o) {
          var s = e.Z.SDK_VERSION || null;
          return _r() ? new _c(t, n, r, s, i, o) : new du(t, n, r, s, i, o);
        }
        function Dc(t) {
          t.f || ((t.f = !0), t.a.Ea(t.l));
          var e = t.a;
          return t.a.ma().o(function (n) {
            throw (t.a == e && t.reset(), n);
          });
        }
        function xc(t) {
          t.a.Xb() &&
            Dc(t).o(function (e) {
              var n = new Bo(
                "unknown",
                null,
                null,
                null,
                new k("operation-not-supported-in-this-environment")
              );
              Fc(e) && t.s(n);
            }),
            t.a.Tb() || zc(t.b);
        }
        function Oc(t, e) {
          Q(t.h, e) || t.h.push(e),
            t.f ||
              (function (t) {
                return t.b.get(kc, t.a).then(function (t) {
                  return "pending" == t;
                });
              })(t.g)
                .then(function (e) {
                  e
                    ? Nc(t.g).then(function () {
                        Dc(t).o(function (e) {
                          var n = new Bo(
                            "unknown",
                            null,
                            null,
                            null,
                            new k("operation-not-supported-in-this-environment")
                          );
                          Fc(e) && t.s(n);
                        });
                      })
                    : xc(t);
                })
                .o(function () {
                  xc(t);
                });
        }
        function Rc(t, e) {
          X(t.h, function (t) {
            return t == e;
          });
        }
        (Ac.prototype.reset = function () {
          (this.f = !1),
            this.a.Sa(this.l),
            (this.a = Pc(this.D, this.v, this.m, null, this.J)),
            (this.i = {});
        }),
          (Ac.prototype.s = function (t) {
            if (!t) throw new k("invalid-auth-event");
            if (
              (6e5 <= T() - this.u && ((this.i = {}), (this.u = 0)),
              t && t.getUid() && this.i.hasOwnProperty(t.getUid()))
            )
              return !1;
            for (var e = !1, n = 0; n < this.h.length; n++) {
              var r = this.h[n];
              if (r.Fb(t.c, t.b)) {
                (e = this.c[t.c]) &&
                  (e.h(t, r),
                  t &&
                    (t.f || t.b) &&
                    ((this.i[t.getUid()] = !0), (this.u = T()))),
                  (e = !0);
                break;
              }
            }
            return zc(this.b), e;
          });
        var Mc = new Wr(2e3, 1e4),
          Lc = new Wr(3e4, 6e4);
        function jc(t, e, n, r, i, o, s) {
          return t.a.Mb(
            e,
            n,
            r,
            function () {
              t.f || ((t.f = !0), t.a.Ea(t.l));
            },
            function () {
              t.reset();
            },
            i,
            o,
            s
          );
        }
        function Fc(t) {
          return !(!t || "auth/cordova-not-ready" != t.code);
        }
        function Uc(t, e, n, r, i) {
          var o;
          return (function (t) {
            return t.b.set(kc, "pending", t.a);
          })(t.g).then(function () {
            return t.a
              .Nb(e, n, r, i)
              .o(function (e) {
                if (Fc(e))
                  throw new k("operation-not-supported-in-this-environment");
                return (
                  (o = e),
                  Nc(t.g).then(function () {
                    throw o;
                  })
                );
              })
              .then(function () {
                return t.a.$b()
                  ? new Ie(function () {})
                  : Nc(t.g)
                      .then(function () {
                        return t.qa();
                      })
                      .then(function () {})
                      .o(function () {});
              });
          });
        }
        function Vc(t, e, n, r, i) {
          return t.a.Ob(
            r,
            function (t) {
              e.na(n, null, t, i);
            },
            Mc.get()
          );
        }
        Ac.prototype.qa = function () {
          return this.b.qa();
        };
        var qc = {};
        function Bc(t, e, n) {
          return (t = t + ":" + e), n && (t = t + ":" + n.url), t;
        }
        function Gc(t, e, n, r) {
          var i = Bc(e, n, r);
          return qc[i] || (qc[i] = new Ac(t, e, n, r)), qc[i];
        }
        function Wc() {
          (this.b = null),
            (this.f = []),
            (this.c = []),
            (this.a = null),
            (this.i = this.g = !1);
        }
        function zc(t) {
          t.g || ((t.g = !0), Jc(t, !1, null, null));
        }
        function Hc(t) {
          t.g && !t.i && Jc(t, !1, null, null);
        }
        function Kc(t, e) {
          if (
            ((t.b = function () {
              return Ae(e);
            }),
            t.f.length)
          )
            for (var n = 0; n < t.f.length; n++) t.f[n](e);
        }
        function Jc(t, e, n, r) {
          e
            ? r
              ? (function (t, e) {
                  if (
                    ((t.b = function () {
                      return Pe(e);
                    }),
                    t.c.length)
                  )
                    for (var n = 0; n < t.c.length; n++) t.c[n](e);
                })(t, r)
              : Kc(t, n)
            : Kc(t, { user: null }),
            (t.f = []),
            (t.c = []);
        }
        function Qc() {}
        function Yc() {
          (this.ib = !1),
            Object.defineProperty(this, "appVerificationDisabled", {
              get: function () {
                return this.ib;
              },
              set: function (t) {
                this.ib = t;
              },
              enumerable: !1,
            });
        }
        function Xc(t, e) {
          (this.a = e), Zr(this, "verificationId", t);
        }
        function Zc(t, e, n, r) {
          return new Fo(t).fb(e, n).then(function (t) {
            return new Xc(t, r);
          });
        }
        function $c(t) {
          var e = Hi(t);
          if (!(e && e.exp && e.auth_time && e.iat))
            throw new k(
              "internal-error",
              "An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation."
            );
          $r(this, {
            token: t,
            expirationTime: Hr(1e3 * e.exp),
            authTime: Hr(1e3 * e.auth_time),
            issuedAtTime: Hr(1e3 * e.iat),
            signInProvider:
              e.firebase && e.firebase.sign_in_provider
                ? e.firebase.sign_in_provider
                : null,
            signInSecondFactor:
              e.firebase && e.firebase.sign_in_second_factor
                ? e.firebase.sign_in_second_factor
                : null,
            claims: e,
          });
        }
        function th(t, e, n) {
          var r = e && e[nh];
          if (!r)
            throw new k(
              "argument-error",
              "Internal assert: Invalid MultiFactorResolver"
            );
          (this.a = t),
            (this.f = gt(e)),
            (this.g = n),
            (this.c = new ao(null, r)),
            (this.b = []);
          var i = this;
          z(e[eh] || [], function (t) {
            (t = ri(t)) && i.b.push(t);
          }),
            Zr(this, "auth", this.a),
            Zr(this, "session", this.c),
            Zr(this, "hints", this.b);
        }
        (Wc.prototype.reset = function () {
          (this.b = null), this.a && (this.a.cancel(), (this.a = null));
        }),
          (Wc.prototype.h = function (t, e) {
            if (t) {
              this.reset(), (this.g = !0);
              var n = t.c,
                r = t.b,
                i = t.a && "auth/web-storage-unsupported" == t.a.code,
                o =
                  t.a &&
                  "auth/operation-not-supported-in-this-environment" ==
                    t.a.code;
              (this.i = !(!i && !o)),
                "unknown" != n || i || o
                  ? t.a
                    ? (Jc(this, !0, null, t.a), Ae())
                    : e.Fa(n, r)
                    ? (function (t, e, n) {
                        n = n.Fa(e.c, e.b);
                        var r = e.g,
                          i = e.f,
                          o = e.i,
                          s = e.T(),
                          a = !!e.c.match(/Redirect$/);
                        n(r, i, s, o)
                          .then(function (e) {
                            Jc(t, a, e, null);
                          })
                          .o(function (e) {
                            Jc(t, a, null, e);
                          });
                      })(this, t, e)
                    : Pe(new k("invalid-auth-event"))
                  : (Jc(this, !1, null, null), Ae());
            } else Pe(new k("invalid-auth-event"));
          }),
          (Wc.prototype.qa = function () {
            var t = this;
            return new Ie(function (e, n) {
              t.b
                ? t.b().then(e, n)
                : (t.f.push(e),
                  t.c.push(n),
                  (function (t) {
                    var e = new k("timeout");
                    t.a && t.a.cancel(),
                      (t.a = Nn(Lc.get()).then(function () {
                        t.b || ((t.g = !0), Jc(t, !0, null, e));
                      }));
                  })(t));
            });
          }),
          (Qc.prototype.h = function (t, e) {
            if (t) {
              var n = t.c,
                r = t.b;
              t.a
                ? (e.na(t.c, null, t.a, t.b), Ae())
                : e.Fa(n, r)
                ? (function (t, e) {
                    var n = t.b,
                      r = t.c;
                    e.Fa(r, n)(t.g, t.f, t.T(), t.i)
                      .then(function (t) {
                        e.na(r, t, null, n);
                      })
                      .o(function (t) {
                        e.na(r, null, t, n);
                      });
                  })(t, e)
                : Pe(new k("invalid-auth-event"));
            } else Pe(new k("invalid-auth-event"));
          }),
          (Xc.prototype.confirm = function (t) {
            return (t = Uo(this.verificationId, t)), this.a(t);
          });
        var eh = "mfaInfo",
          nh = "mfaPendingCredential";
        function rh(t, e, n, r) {
          k.call(this, "multi-factor-auth-required", r, e),
            (this.b = new th(t, e, n)),
            Zr(this, "resolver", this.b);
        }
        function ih(t, e, n) {
          if (
            t &&
            g(t.serverResponse) &&
            "auth/multi-factor-auth-required" === t.code
          )
            try {
              return new rh(e, t.serverResponse, n, t.message);
            } catch (t) {}
          return null;
        }
        function oh() {}
        function sh(t) {
          Zr(this, "factorId", t.fa), (this.a = t);
        }
        function ah(t) {
          if ((sh.call(this, t), this.a.fa != Fo.PROVIDER_ID))
            throw new k(
              "argument-error",
              "firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential"
            );
        }
        function uh(t, e) {
          for (var n in (Ze.call(this, t), e)) this[n] = e[n];
        }
        function ch(t, e) {
          (this.a = t),
            (this.b = []),
            (this.c = I(this.yc, this)),
            ln(this.a, "userReloaded", this.c);
          var n = [];
          e &&
            e.multiFactor &&
            e.multiFactor.enrolledFactors &&
            z(e.multiFactor.enrolledFactors, function (t) {
              var e = null,
                r = {};
              if (t) {
                t.uid && (r[si] = t.uid),
                  t.displayName && (r[ii] = t.displayName),
                  t.enrollmentTime &&
                    (r[oi] = new Date(t.enrollmentTime).toISOString()),
                  t.phoneNumber && (r[ai] = t.phoneNumber);
                try {
                  e = new ui(r);
                } catch (t) {}
                t = e;
              } else t = null;
              t && n.push(t);
            }),
            hh(this, n);
        }
        function hh(t, e) {
          (t.b = e), Zr(t, "enrolledFactors", e);
        }
        function lh(t, e, n) {
          if (
            ((this.h = t),
            (this.i = e),
            (this.g = n),
            (this.c = 3e4),
            (this.f = 96e4),
            (this.b = null),
            (this.a = this.c),
            this.f < this.c)
          )
            throw Error(
              "Proactive refresh lower bound greater than upper bound!"
            );
        }
        function fh(t, e) {
          t.stop(),
            (t.b = Nn(
              (function (t, e) {
                return e
                  ? ((t.a = t.c), t.g())
                  : ((e = t.a), (t.a *= 2), t.a > t.f && (t.a = t.f), e);
              })(t, e)
            )
              .then(function () {
                return (function () {
                  var t = u.document,
                    e = null;
                  return zr() || !t
                    ? Ae()
                    : new Ie(function (n) {
                        (e = function () {
                          zr() &&
                            (t.removeEventListener("visibilitychange", e, !1),
                            n());
                        }),
                          t.addEventListener("visibilitychange", e, !1);
                      }).o(function (n) {
                        throw (
                          (t.removeEventListener("visibilitychange", e, !1), n)
                        );
                      });
                })();
              })
              .then(function () {
                return t.h();
              })
              .then(function () {
                fh(t, !0);
              })
              .o(function (e) {
                t.i(e) && fh(t, !1);
              }));
        }
        function ph(t) {
          (this.f = t), (this.b = this.a = null), (this.c = Date.now());
        }
        function dh(t, e) {
          void 0 === e && (e = t.b ? (e = t.b).a - e.g : 0),
            (t.c = Date.now() + 1e3 * e);
        }
        function vh(t, e) {
          (t.b = zi(e[$s] || "")),
            (t.a = e.refreshToken),
            dh(t, void 0 !== (e = e.expiresIn) ? Number(e) : void 0);
        }
        function gh(t, e) {
          (this.a = t || null),
            (this.b = e || null),
            $r(this, {
              lastSignInTime: Hr(e || null),
              creationTime: Hr(t || null),
            });
        }
        function mh(t, e, n, r, i, o) {
          $r(this, {
            uid: t,
            displayName: r || null,
            photoURL: i || null,
            email: n || null,
            phoneNumber: o || null,
            providerId: e,
          });
        }
        function yh(t, n, r) {
          (this.J = []),
            (this.l = t.apiKey),
            (this.m = t.appName),
            (this.s = t.authDomain || null);
          var i = e.Z.SDK_VERSION ? Pr(e.Z.SDK_VERSION) : null;
          (this.a = new Xs(this.l, O(A), i)),
            t.emulatorConfig && oa(this.a, t.emulatorConfig),
            (this.b = new ph(this.a)),
            Ch(this, n[$s]),
            vh(this.b, n),
            Zr(this, "refreshToken", this.b.a),
            Ah(this, r || {}),
            En.call(this),
            (this.R = !1),
            this.s && Rr() && (this.i = Gc(this.s, this.l, this.m)),
            (this.S = []),
            (this.h = null),
            (this.u = (function (t) {
              return new lh(
                function () {
                  return t.I(!0);
                },
                function (t) {
                  return !(!t || "auth/network-request-failed" != t.code);
                },
                function () {
                  var e = t.b.c - Date.now() - 3e5;
                  return 0 < e ? e : 0;
                }
              );
            })(this)),
            (this.aa = I(this.hb, this));
          var o = this;
          (this.ya = null),
            (this.Oa = function (t) {
              o.wa(t.h);
            }),
            (this.ja = null),
            (this.Aa = function (t) {
              oa(o.a, t.c);
            }),
            (this.X = null),
            (this.$ = []),
            (this.Ba = function (t) {
              _h(o, t.f);
            }),
            (this.ba = null),
            (this.O = new ch(this, r)),
            Zr(this, "multiFactor", this.O);
        }
        function bh(t, e) {
          t.ja && dn(t.ja, "languageCodeChanged", t.Oa),
            (t.ja = e) && ln(e, "languageCodeChanged", t.Oa);
        }
        function wh(t, e) {
          t.X && dn(t.X, "emulatorConfigChanged", t.Aa),
            (t.X = e) && ln(e, "emulatorConfigChanged", t.Aa);
        }
        function _h(t, n) {
          (t.$ = n), aa(t.a, e.Z.SDK_VERSION ? Pr(e.Z.SDK_VERSION, t.$) : null);
        }
        function Ih(t, e) {
          t.ba && dn(t.ba, "frameworkChanged", t.Ba),
            (t.ba = e) && ln(e, "frameworkChanged", t.Ba);
        }
        function Eh(t) {
          try {
            return e.Z.app(t.m).auth();
          } catch (e) {
            throw new k(
              "internal-error",
              "No firebase.auth.Auth instance is available for the Firebase App '" +
                t.m +
                "'!"
            );
          }
        }
        function Th(t) {
          t.D ||
            t.u.b ||
            (t.u.start(),
            dn(t, "tokenChanged", t.aa),
            ln(t, "tokenChanged", t.aa));
        }
        function Sh(t) {
          dn(t, "tokenChanged", t.aa), t.u.stop();
        }
        function Ch(t, e) {
          (t.za = e), Zr(t, "_lat", e);
        }
        function kh(t) {
          for (var e = [], n = 0; n < t.S.length; n++) e.push(t.S[n](t));
          return xe(e).then(function () {
            return t;
          });
        }
        function Nh(t) {
          t.i && !t.R && ((t.R = !0), Oc(t.i, t));
        }
        function Ah(t, e) {
          $r(t, {
            uid: e.uid,
            displayName: e.displayName || null,
            photoURL: e.photoURL || null,
            email: e.email || null,
            emailVerified: e.emailVerified || !1,
            phoneNumber: e.phoneNumber || null,
            isAnonymous: e.isAnonymous || !1,
            tenantId: e.tenantId || null,
            metadata: new gh(e.createdAt, e.lastLoginAt),
            providerData: [],
          }),
            (t.a.b = t.tenantId);
        }
        function Ph() {}
        function Dh(t) {
          return Ae().then(function () {
            if (t.D) throw new k("app-deleted");
          });
        }
        function xh(t) {
          return K(t.providerData, function (t) {
            return t.providerId;
          });
        }
        function Oh(t, e) {
          e && (Rh(t, e.providerId), t.providerData.push(e));
        }
        function Rh(t, e) {
          X(t.providerData, function (t) {
            return t.providerId == e;
          });
        }
        function Mh(t, e, n) {
          ("uid" != e || n) && t.hasOwnProperty(e) && Zr(t, e, n);
        }
        function Lh(t, e) {
          t != e &&
            ($r(t, {
              uid: e.uid,
              displayName: e.displayName,
              photoURL: e.photoURL,
              email: e.email,
              emailVerified: e.emailVerified,
              phoneNumber: e.phoneNumber,
              isAnonymous: e.isAnonymous,
              tenantId: e.tenantId,
              providerData: [],
            }),
            e.metadata
              ? Zr(
                  t,
                  "metadata",
                  (function (t) {
                    return new gh(t.a, t.b);
                  })(e.metadata)
                )
              : Zr(t, "metadata", new gh()),
            z(e.providerData, function (e) {
              Oh(t, e);
            }),
            (function (t, e) {
              (t.b = e.b), (t.a = e.a), (t.c = e.c);
            })(t.b, e.b),
            Zr(t, "refreshToken", t.b.a),
            hh(t.O, e.O.b));
        }
        function jh(t) {
          return t.I().then(function (e) {
            var n = t.isAnonymous;
            return (function (t, e) {
              return ru(t.a, Ra, { idToken: e }).then(I(t.Kc, t));
            })(t, e).then(function () {
              return n || Mh(t, "isAnonymous", !1), e;
            });
          });
        }
        function Fh(t, e) {
          e[$s] &&
            t.za != e[$s] &&
            (vh(t.b, e),
            t.dispatchEvent(new uh("tokenChanged")),
            Ch(t, e[$s]),
            Mh(t, "refreshToken", t.b.a));
        }
        function Uh(t, e) {
          return jh(t).then(function () {
            if (Q(xh(t), e))
              return kh(t).then(function () {
                throw new k("provider-already-linked");
              });
          });
        }
        function Vh(t, e, n) {
          return ti({
            user: t,
            credential: Vo(e),
            additionalUserInfo: (e = Xi(e)),
            operationType: n,
          });
        }
        function qh(t, e) {
          return (
            Fh(t, e),
            t.reload().then(function () {
              return t;
            })
          );
        }
        function Bh(t, n, r, i, o) {
          if (!Rr())
            return Pe(new k("operation-not-supported-in-this-environment"));
          if (t.h && !o) return Pe(t.h);
          var s = Yi(r.providerId),
            a = qr(t.uid + ":::"),
            u = null;
          (!jr() || Ir()) &&
            t.s &&
            r.isOAuthProvider &&
            (u = yu(
              t.s,
              t.l,
              t.m,
              n,
              r,
              null,
              a,
              e.Z.SDK_VERSION || null,
              null,
              null,
              t.tenantId
            ));
          var c = mr(u, s && s.ua, s && s.ta);
          return (
            (i = i()
              .then(function () {
                if ((Wh(t), !o)) return t.I().then(function () {});
              })
              .then(function () {
                return jc(t.i, c, n, r, a, !!u, t.tenantId);
              })
              .then(function () {
                return new Ie(function (e, r) {
                  t.na(n, null, new k("cancelled-popup-request"), t.g || null),
                    (t.f = e),
                    (t.C = r),
                    (t.g = a),
                    (t.c = Vc(t.i, t, n, c, a));
                });
              })
              .then(function (t) {
                return c && gr(c), t ? ti(t) : null;
              })
              .o(function (t) {
                throw (c && gr(c), t);
              })),
            zh(t, i, o)
          );
        }
        function Gh(t, e, n, r, i) {
          if (!Rr())
            return Pe(new k("operation-not-supported-in-this-environment"));
          if (t.h && !i) return Pe(t.h);
          var o = null,
            s = qr(t.uid + ":::");
          return (
            (r = r()
              .then(function () {
                if ((Wh(t), !i)) return t.I().then(function () {});
              })
              .then(function () {
                return (t.ga = s), kh(t);
              })
              .then(function (e) {
                return t.ha && (e = (e = t.ha).b.set(Jh, t.w(), e.a)), e;
              })
              .then(function () {
                return Uc(t.i, e, n, s, t.tenantId);
              })
              .o(function (e) {
                if (((o = e), t.ha)) return Qh(t.ha);
                throw o;
              })
              .then(function () {
                if (o) throw o;
              })),
            zh(t, r, i)
          );
        }
        function Wh(t) {
          if (!t.i || !t.R) {
            if (t.i && !t.R) throw new k("internal-error");
            throw new k("auth-domain-config-required");
          }
        }
        function zh(t, e, n) {
          var r = (function (t, e, n) {
            return t.h && !n
              ? (e.cancel(), Pe(t.h))
              : e.o(function (e) {
                  throw (
                    (!e ||
                      ("auth/user-disabled" != e.code &&
                        "auth/user-token-expired" != e.code) ||
                      (t.h || t.dispatchEvent(new uh("userInvalidated")),
                      (t.h = e)),
                    e)
                  );
                });
          })(t, e, n);
          return (
            t.J.push(r),
            r.oa(function () {
              Y(t.J, r);
            }),
            r.o(function (e) {
              var n = null;
              throw (
                (e &&
                  "auth/multi-factor-auth-required" === e.code &&
                  (n = ih(e.w(), Eh(t), I(t.jc, t))),
                n || e)
              );
            })
          );
        }
        function Hh(t) {
          if (!t.apiKey) return null;
          var e = {
              apiKey: t.apiKey,
              authDomain: t.authDomain,
              appName: t.appName,
              emulatorConfig: t.emulatorConfig,
            },
            n = {};
          if (!t.stsTokenManager || !t.stsTokenManager.accessToken) return null;
          (n[$s] = t.stsTokenManager.accessToken),
            (n.refreshToken = t.stsTokenManager.refreshToken || null);
          var r = t.stsTokenManager.expirationTime;
          r && (n.expiresIn = (r - Date.now()) / 1e3);
          var i = new yh(e, n, t);
          return (
            t.providerData &&
              z(t.providerData, function (t) {
                t && Oh(i, ti(t));
              }),
            t.redirectEventId && (i.ga = t.redirectEventId),
            i
          );
        }
        function Kh(t) {
          (this.a = t), (this.b = ec());
        }
        (th.prototype.Rc = function (t) {
          var e = this;
          return t.sb(this.a.a, this.c).then(function (t) {
            var n = gt(e.f);
            return delete n[eh], delete n[nh], yt(n, t), e.g(n);
          });
        }),
          S(rh, k),
          (oh.prototype.sb = function (t, e, n) {
            return e.type == uo
              ? (function (t, e, n, r) {
                  return n.Ha().then(function (n) {
                    return (
                      (n = { idToken: n }),
                      void 0 !== r && (n.displayName = r),
                      yt(n, { phoneVerificationInfo: jo(t.a) }),
                      ru(e, xa, n)
                    );
                  });
                })(this, t, e, n)
              : (function (t, e, n) {
                  return n.Ha().then(function (n) {
                    return (
                      yt((n = { mfaPendingCredential: n }), {
                        phoneVerificationInfo: jo(t.a),
                      }),
                      ru(e, Oa, n)
                    );
                  });
                })(this, t, e);
          }),
          S(sh, oh),
          S(ah, sh),
          S(uh, Ze),
          ((t = ch.prototype).yc = function (t) {
            hh(
              this,
              (function (t) {
                var e = [];
                return (
                  z(t.mfaInfo || [], function (t) {
                    (t = ri(t)) && e.push(t);
                  }),
                  e
                );
              })(t.hd)
            );
          }),
          (t.Rb = function () {
            return this.a.I().then(function (t) {
              return new ao(t, null);
            });
          }),
          (t.fc = function (t, e) {
            var n = this,
              r = this.a.a;
            return this.Rb()
              .then(function (n) {
                return t.sb(r, n, e);
              })
              .then(function (t) {
                return Fh(n.a, t), n.a.reload();
              });
          }),
          (t.bd = function (t) {
            var e = this,
              n = "string" == typeof t ? t : t.uid,
              r = this.a.a;
            return this.a
              .I()
              .then(function (t) {
                return ru(r, nu, { idToken: t, mfaEnrollmentId: n });
              })
              .then(function (t) {
                var r = H(e.b, function (t) {
                  return t.uid != n;
                });
                return (
                  hh(e, r),
                  Fh(e.a, t),
                  e.a.reload().o(function (t) {
                    if ("auth/user-token-expired" != t.code) throw t;
                  })
                );
              });
          }),
          (t.w = function () {
            return {
              multiFactor: {
                enrolledFactors: K(this.b, function (t) {
                  return t.w();
                }),
              },
            };
          }),
          (lh.prototype.start = function () {
            (this.a = this.c), fh(this, !0);
          }),
          (lh.prototype.stop = function () {
            this.b && (this.b.cancel(), (this.b = null));
          }),
          (ph.prototype.w = function () {
            return {
              apiKey: this.f.c,
              refreshToken: this.a,
              accessToken: this.b && this.b.toString(),
              expirationTime: this.c,
            };
          }),
          (ph.prototype.getToken = function (t) {
            return (
              (t = !!t),
              this.b && !this.a
                ? Pe(new k("user-token-expired"))
                : t || !this.b || Date.now() > this.c - 3e4
                ? this.a
                  ? (function (t, e) {
                      return (function (t, e) {
                        return new Ie(function (n, r) {
                          ("refresh_token" == e.grant_type &&
                            e.refresh_token) ||
                          ("authorization_code" == e.grant_type && e.code)
                            ? ua(
                                t,
                                t.l + "?key=" + encodeURIComponent(t.c),
                                function (t) {
                                  t
                                    ? t.error
                                      ? r(ou(t))
                                      : t.access_token && t.refresh_token
                                      ? n(t)
                                      : r(new k("internal-error"))
                                    : r(new k("network-request-failed"));
                                },
                                "POST",
                                $n(e).toString(),
                                t.g,
                                t.m.get()
                              )
                            : r(new k("internal-error"));
                        });
                      })(t.f, e)
                        .then(function (e) {
                          return (
                            (t.b = zi(e.access_token)),
                            (t.a = e.refresh_token),
                            dh(t, e.expires_in),
                            { accessToken: t.b.toString(), refreshToken: t.a }
                          );
                        })
                        .o(function (e) {
                          throw (
                            ("auth/user-token-expired" == e.code &&
                              (t.a = null),
                            e)
                          );
                        });
                    })(this, {
                      grant_type: "refresh_token",
                      refresh_token: this.a,
                    })
                  : Ae(null)
                : Ae({ accessToken: this.b.toString(), refreshToken: this.a })
            );
          }),
          (gh.prototype.w = function () {
            return { lastLoginAt: this.b, createdAt: this.a };
          }),
          S(yh, En),
          (yh.prototype.wa = function (t) {
            (this.ya = t), ia(this.a, t);
          }),
          (yh.prototype.la = function () {
            return this.ya;
          }),
          (yh.prototype.Ga = function () {
            return $(this.$);
          }),
          (yh.prototype.hb = function () {
            this.u.b && (this.u.stop(), this.u.start());
          }),
          Zr(yh.prototype, "providerId", "firebase"),
          ((t = yh.prototype).reload = function () {
            var t = this;
            return zh(
              this,
              Dh(this).then(function () {
                return jh(t)
                  .then(function () {
                    return kh(t);
                  })
                  .then(Ph);
              })
            );
          }),
          (t.oc = function (t) {
            return this.I(t).then(function (t) {
              return new $c(t);
            });
          }),
          (t.I = function (t) {
            var e = this;
            return zh(
              this,
              Dh(this)
                .then(function () {
                  return e.b.getToken(t);
                })
                .then(function (t) {
                  if (!t) throw new k("internal-error");
                  return (
                    t.accessToken != e.za &&
                      (Ch(e, t.accessToken),
                      e.dispatchEvent(new uh("tokenChanged"))),
                    Mh(e, "refreshToken", t.refreshToken),
                    t.accessToken
                  );
                })
            );
          }),
          (t.Kc = function (t) {
            if (!(t = t.users) || !t.length) throw new k("internal-error");
            Ah(this, {
              uid: (t = t[0]).localId,
              displayName: t.displayName,
              photoURL: t.photoUrl,
              email: t.email,
              emailVerified: !!t.emailVerified,
              phoneNumber: t.phoneNumber,
              lastLoginAt: t.lastLoginAt,
              createdAt: t.createdAt,
              tenantId: t.tenantId,
            });
            for (
              var e = (function (t) {
                  return (t = t.providerUserInfo) && t.length
                    ? K(t, function (t) {
                        return new mh(
                          t.rawId,
                          t.providerId,
                          t.email,
                          t.displayName,
                          t.photoUrl,
                          t.phoneNumber
                        );
                      })
                    : [];
                })(t),
                n = 0;
              n < e.length;
              n++
            )
              Oh(this, e[n]);
            Mh(
              this,
              "isAnonymous",
              !(
                (this.email && t.passwordHash) ||
                (this.providerData && this.providerData.length)
              )
            ),
              this.dispatchEvent(new uh("userReloaded", { hd: t }));
          }),
          (t.Lc = function (t) {
            return (
              Yr(
                "firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."
              ),
              this.tb(t)
            );
          }),
          (t.tb = function (t) {
            var e = this,
              n = null;
            return zh(
              this,
              t
                .c(this.a, this.uid)
                .then(function (t) {
                  return (
                    Fh(e, t),
                    (n = Vh(e, t, "reauthenticate")),
                    (e.h = null),
                    e.reload()
                  );
                })
                .then(function () {
                  return n;
                }),
              !0
            );
          }),
          (t.Cc = function (t) {
            return (
              Yr(
                "firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."
              ),
              this.qb(t)
            );
          }),
          (t.qb = function (t) {
            var e = this,
              n = null;
            return zh(
              this,
              Uh(this, t.providerId)
                .then(function () {
                  return e.I();
                })
                .then(function (n) {
                  return t.b(e.a, n);
                })
                .then(function (t) {
                  return (n = Vh(e, t, "link")), qh(e, t);
                })
                .then(function () {
                  return n;
                })
            );
          }),
          (t.Dc = function (t, e) {
            var n = this;
            return zh(
              this,
              Uh(this, "phone").then(function () {
                return Zc(Eh(n), t, e, I(n.qb, n));
              })
            );
          }),
          (t.Mc = function (t, e) {
            var n = this;
            return zh(
              this,
              Ae().then(function () {
                return Zc(Eh(n), t, e, I(n.tb, n));
              }),
              !0
            );
          }),
          (t.Bb = function (t) {
            var e = this;
            return zh(
              this,
              this.I()
                .then(function (n) {
                  return e.a.Bb(n, t);
                })
                .then(function (t) {
                  return Fh(e, t), e.reload();
                })
            );
          }),
          (t.ed = function (t) {
            var e = this;
            return zh(
              this,
              this.I()
                .then(function (n) {
                  return t.b(e.a, n);
                })
                .then(function (t) {
                  return Fh(e, t), e.reload();
                })
            );
          }),
          (t.Cb = function (t) {
            var e = this;
            return zh(
              this,
              this.I()
                .then(function (n) {
                  return e.a.Cb(n, t);
                })
                .then(function (t) {
                  return Fh(e, t), e.reload();
                })
            );
          }),
          (t.Db = function (t) {
            if (void 0 === t.displayName && void 0 === t.photoURL)
              return Dh(this);
            var e = this;
            return zh(
              this,
              this.I()
                .then(function (n) {
                  return e.a.Db(n, {
                    displayName: t.displayName,
                    photoUrl: t.photoURL,
                  });
                })
                .then(function (t) {
                  return (
                    Fh(e, t),
                    Mh(e, "displayName", t.displayName || null),
                    Mh(e, "photoURL", t.photoUrl || null),
                    z(e.providerData, function (t) {
                      "password" === t.providerId &&
                        (Zr(t, "displayName", e.displayName),
                        Zr(t, "photoURL", e.photoURL));
                    }),
                    kh(e)
                  );
                })
                .then(Ph)
            );
          }),
          (t.cd = function (t) {
            var e = this;
            return zh(
              this,
              jh(this).then(function (n) {
                return Q(xh(e), t)
                  ? (function (t, e, n) {
                      return ru(t, Aa, { idToken: e, deleteProvider: n });
                    })(e.a, n, [t]).then(function (t) {
                      var n = {};
                      return (
                        z(t.providerUserInfo || [], function (t) {
                          n[t.providerId] = !0;
                        }),
                        z(xh(e), function (t) {
                          n[t] || Rh(e, t);
                        }),
                        n[Fo.PROVIDER_ID] || Zr(e, "phoneNumber", null),
                        kh(e)
                      );
                    })
                  : kh(e).then(function () {
                      throw new k("no-such-provider");
                    });
              })
            );
          }),
          (t.delete = function () {
            var t = this;
            return zh(
              this,
              this.I()
                .then(function (e) {
                  return ru(t.a, Na, { idToken: e });
                })
                .then(function () {
                  t.dispatchEvent(new uh("userDeleted"));
                })
            ).then(function () {
              for (var e = 0; e < t.J.length; e++) t.J[e].cancel("app-deleted");
              bh(t, null),
                wh(t, null),
                Ih(t, null),
                (t.J = []),
                (t.D = !0),
                Sh(t),
                Zr(t, "refreshToken", null),
                t.i && Rc(t.i, t);
            });
          }),
          (t.Fb = function (t, e) {
            return !!(
              ("linkViaPopup" == t && (this.g || null) == e && this.f) ||
              ("reauthViaPopup" == t && (this.g || null) == e && this.f) ||
              ("linkViaRedirect" == t && (this.ga || null) == e) ||
              ("reauthViaRedirect" == t && (this.ga || null) == e)
            );
          }),
          (t.na = function (t, e, n, r) {
            ("linkViaPopup" != t && "reauthViaPopup" != t) ||
              r != (this.g || null) ||
              (n && this.C ? this.C(n) : e && !n && this.f && this.f(e),
              this.c && (this.c.cancel(), (this.c = null)),
              delete this.f,
              delete this.C);
          }),
          (t.Fa = function (t, e) {
            return "linkViaPopup" == t && e == (this.g || null)
              ? I(this.Kb, this)
              : "reauthViaPopup" == t && e == (this.g || null)
              ? I(this.Lb, this)
              : "linkViaRedirect" == t && (this.ga || null) == e
              ? I(this.Kb, this)
              : "reauthViaRedirect" == t && (this.ga || null) == e
              ? I(this.Lb, this)
              : null;
          }),
          (t.Ec = function (t) {
            var e = this;
            return Bh(
              this,
              "linkViaPopup",
              t,
              function () {
                return Uh(e, t.providerId).then(function () {
                  return kh(e);
                });
              },
              !1
            );
          }),
          (t.Nc = function (t) {
            return Bh(
              this,
              "reauthViaPopup",
              t,
              function () {
                return Ae();
              },
              !0
            );
          }),
          (t.Fc = function (t) {
            var e = this;
            return Gh(
              this,
              "linkViaRedirect",
              t,
              function () {
                return Uh(e, t.providerId);
              },
              !1
            );
          }),
          (t.Oc = function (t) {
            return Gh(
              this,
              "reauthViaRedirect",
              t,
              function () {
                return Ae();
              },
              !0
            );
          }),
          (t.Kb = function (t, e, n, r) {
            var i = this;
            this.c && (this.c.cancel(), (this.c = null));
            var o = null;
            return zh(
              this,
              this.I()
                .then(function (n) {
                  return _a(i.a, {
                    requestUri: t,
                    postBody: r,
                    sessionId: e,
                    idToken: n,
                  });
                })
                .then(function (t) {
                  return (o = Vh(i, t, "link")), qh(i, t);
                })
                .then(function () {
                  return o;
                })
            );
          }),
          (t.Lb = function (t, e, n, r) {
            var i = this;
            this.c && (this.c.cancel(), (this.c = null));
            var o = null;
            return zh(
              this,
              Ae()
                .then(function () {
                  return lo(
                    Ia(i.a, {
                      requestUri: t,
                      sessionId: e,
                      postBody: r,
                      tenantId: n,
                    }),
                    i.uid
                  );
                })
                .then(function (t) {
                  return (
                    (o = Vh(i, t, "reauthenticate")),
                    Fh(i, t),
                    (i.h = null),
                    i.reload()
                  );
                })
                .then(function () {
                  return o;
                }),
              !0
            );
          }),
          (t.ub = function (t) {
            var e = this,
              n = null;
            return zh(
              this,
              this.I()
                .then(function (e) {
                  return (n = e), void 0 === t || vt(t) ? {} : Bi(new xi(t));
                })
                .then(function (t) {
                  return e.a.ub(n, t);
                })
                .then(function (t) {
                  if (e.email != t) return e.reload();
                })
                .then(function () {})
            );
          }),
          (t.Eb = function (t, e) {
            var n = this,
              r = null;
            return zh(
              this,
              this.I()
                .then(function (t) {
                  return (r = t), void 0 === e || vt(e) ? {} : Bi(new xi(e));
                })
                .then(function (e) {
                  return n.a.Eb(r, t, e);
                })
                .then(function (t) {
                  if (n.email != t) return n.reload();
                })
                .then(function () {})
            );
          }),
          (t.jc = function (t) {
            var e = null,
              n = this;
            return zh(
              this,
              (t = lo(Ae(t), n.uid)
                .then(function (t) {
                  return (
                    (e = Vh(n, t, "reauthenticate")),
                    Fh(n, t),
                    (n.h = null),
                    n.reload()
                  );
                })
                .then(function () {
                  return e;
                })),
              !0
            );
          }),
          (t.toJSON = function () {
            return this.w();
          }),
          (t.w = function () {
            var t = {
              uid: this.uid,
              displayName: this.displayName,
              photoURL: this.photoURL,
              email: this.email,
              emailVerified: this.emailVerified,
              phoneNumber: this.phoneNumber,
              isAnonymous: this.isAnonymous,
              tenantId: this.tenantId,
              providerData: [],
              apiKey: this.l,
              appName: this.m,
              authDomain: this.s,
              stsTokenManager: this.b.w(),
              redirectEventId: this.ga || null,
            };
            return (
              this.metadata && yt(t, this.metadata.w()),
              z(this.providerData, function (e) {
                t.providerData.push(
                  (function (t) {
                    var e,
                      n = {};
                    for (e in t) t.hasOwnProperty(e) && (n[e] = t[e]);
                    return n;
                  })(e)
                );
              }),
              yt(t, this.O.w()),
              t
            );
          });
        var Jh = { name: "redirectUser", F: "session" };
        function Qh(t) {
          return ic(t.b, Jh, t.a);
        }
        function Yh(t) {
          (this.a = t),
            (this.b = ec()),
            (this.c = null),
            (this.f = (function (t) {
              var e = $h("local"),
                n = $h("session"),
                r = $h("none");
              return (function (t, e, n) {
                var r = rc(e, n),
                  i = nc(t, e.F);
                return t.get(e, n).then(function (o) {
                  var s = null;
                  try {
                    s = Vr(u.localStorage.getItem(r));
                  } catch (t) {}
                  if (s && !o)
                    return u.localStorage.removeItem(r), t.set(e, s, n);
                  s &&
                    o &&
                    "localStorage" != i.type &&
                    u.localStorage.removeItem(r);
                });
              })(t.b, e, t.a)
                .then(function () {
                  return t.b.get(n, t.a);
                })
                .then(function (i) {
                  return i
                    ? n
                    : t.b.get(r, t.a).then(function (n) {
                        return n
                          ? r
                          : t.b.get(e, t.a).then(function (n) {
                              return n
                                ? e
                                : t.b.get(Zh, t.a).then(function (t) {
                                    return t ? $h(t) : e;
                                  });
                            });
                      });
                })
                .then(function (e) {
                  return (t.c = e), Xh(t, e.F);
                })
                .o(function () {
                  t.c || (t.c = e);
                });
            })(this)),
            this.b.addListener($h("local"), this.a, I(this.g, this));
        }
        function Xh(t, e) {
          var n,
            r = [];
          for (n in $u) $u[n] !== e && r.push(ic(t.b, $h($u[n]), t.a));
          return (
            r.push(ic(t.b, Zh, t.a)),
            (function (t) {
              return new Ie(function (e, n) {
                var r = t.length,
                  i = [];
                if (r)
                  for (
                    var o = function (t, n) {
                        r--, (i[t] = n), 0 == r && e(i);
                      },
                      s = function (t) {
                        n(t);
                      },
                      a = 0;
                    a < t.length;
                    a++
                  )
                    De(t[a], E(o, a), s);
                else e(i);
              });
            })(r)
          );
        }
        Yh.prototype.g = function () {
          var t = this,
            e = $h("local");
          rl(this, function () {
            return Ae()
              .then(function () {
                return t.c && "local" != t.c.F ? t.b.get(e, t.a) : null;
              })
              .then(function (n) {
                if (n)
                  return Xh(t, "local").then(function () {
                    t.c = e;
                  });
              });
          });
        };
        var Zh = { name: "persistence", F: "session" };
        function $h(t) {
          return { name: "authUser", F: t };
        }
        function tl(t, e) {
          return rl(t, function () {
            return t.b.set(t.c, e.w(), t.a);
          });
        }
        function el(t) {
          return rl(t, function () {
            return ic(t.b, t.c, t.a);
          });
        }
        function nl(t, e, n) {
          return rl(t, function () {
            return t.b.get(t.c, t.a).then(function (t) {
              return (
                t && e && (t.authDomain = e),
                t && n && (t.emulatorConfig = n),
                Hh(t || {})
              );
            });
          });
        }
        function rl(t, e) {
          return (t.f = t.f.then(e, e)), t.f;
        }
        function il(t) {
          if (
            ((this.l = !1),
            Zr(this, "settings", new Yc()),
            Zr(this, "app", t),
            !fl(this).options || !fl(this).options.apiKey)
          )
            throw new k("invalid-api-key");
          (t = e.Z.SDK_VERSION ? Pr(e.Z.SDK_VERSION) : null),
            (this.a = new Xs(
              fl(this).options && fl(this).options.apiKey,
              O(A),
              t
            )),
            (this.R = []),
            (this.s = []),
            (this.O = []),
            (this.hb = e.Z.INTERNAL.createSubscribe(I(this.zc, this))),
            (this.X = void 0),
            (this.bc = e.Z.INTERNAL.createSubscribe(I(this.Ac, this))),
            hl(this, null),
            (this.i = new Yh(fl(this).options.apiKey + ":" + fl(this).name)),
            (this.D = new Kh(fl(this).options.apiKey + ":" + fl(this).name)),
            (this.$ = gl(
              this,
              (function (t) {
                var e = fl(t).options.authDomain,
                  n = (function (t) {
                    var e = (function (t, e) {
                      return t.b.get(Jh, t.a).then(function (t) {
                        return t && e && (t.authDomain = e), Hh(t || {});
                      });
                    })(t.D, fl(t).options.authDomain).then(function (e) {
                      return (t.m = e) && (e.ha = t.D), Qh(t.D);
                    });
                    return gl(t, e);
                  })(t)
                    .then(function () {
                      return nl(t.i, e, t.P);
                    })
                    .then(function (e) {
                      return e
                        ? ((e.ha = t.D),
                          t.m && (t.m.ga || null) == (e.ga || null)
                            ? e
                            : e
                                .reload()
                                .then(function () {
                                  return tl(t.i, e).then(function () {
                                    return e;
                                  });
                                })
                                .o(function (n) {
                                  return "auth/network-request-failed" == n.code
                                    ? e
                                    : el(t.i);
                                }))
                        : null;
                    })
                    .then(function (e) {
                      hl(t, e || null);
                    });
                return gl(t, n);
              })(this)
            )),
            (this.h = gl(
              this,
              (function (t) {
                return t.$.then(function () {
                  return cl(t);
                })
                  .o(function () {})
                  .then(function () {
                    if (!t.l) return t.ja();
                  })
                  .o(function () {})
                  .then(function () {
                    if (!t.l) {
                      t.ba = !0;
                      var e = t.i;
                      e.b.addListener($h("local"), e.a, t.ja);
                    }
                  });
              })(this)
            )),
            (this.ba = !1),
            (this.ja = I(this.Zc, this)),
            (this.Ba = I(this.da, this)),
            (this.ya = I(this.mc, this)),
            (this.za = I(this.wc, this)),
            (this.Aa = I(this.xc, this)),
            (this.b = null),
            (function (t) {
              var e = fl(t).options.authDomain,
                n = fl(t).options.apiKey;
              e &&
                Rr() &&
                (t.Oa = t.$.then(function () {
                  if (!t.l) {
                    if (
                      ((t.b = Gc(e, n, fl(t).name, t.P)),
                      Oc(t.b, t),
                      pl(t) && Nh(pl(t)),
                      t.m)
                    ) {
                      Nh(t.m);
                      var r = t.m;
                      r.wa(t.la()),
                        bh(r, t),
                        _h((r = t.m), t.J),
                        Ih(r, t),
                        oa((r = t.m).a, t.P),
                        wh(r, t),
                        (t.m = null);
                    }
                    return t.b;
                  }
                }));
            })(this),
            (this.INTERNAL = {}),
            (this.INTERNAL.delete = I(this.delete, this)),
            (this.INTERNAL.logFramework = I(this.Gc, this)),
            (this.u = 0),
            En.call(this),
            (function (t) {
              Object.defineProperty(t, "lc", {
                get: function () {
                  return this.la();
                },
                set: function (t) {
                  this.wa(t);
                },
                enumerable: !1,
              }),
                (t.aa = null),
                Object.defineProperty(t, "ti", {
                  get: function () {
                    return this.T();
                  },
                  set: function (t) {
                    this.yb(t);
                  },
                  enumerable: !1,
                }),
                (t.S = null),
                Object.defineProperty(t, "emulatorConfig", {
                  get: function () {
                    if (this.P) {
                      var t = qn(this.P.url);
                      t = ti({
                        protocol: t.c,
                        host: t.a,
                        port: t.g,
                        options: ti({ disableWarnings: this.P.ec }),
                      });
                    } else t = null;
                    return t;
                  },
                  enumerable: !1,
                });
            })(this),
            (this.J = []),
            (this.P = null);
        }
        function ol(t) {
          Ze.call(this, "languageCodeChanged"), (this.h = t);
        }
        function sl(t) {
          Ze.call(this, "emulatorConfigChanged"), (this.c = t);
        }
        function al(t) {
          Ze.call(this, "frameworkChanged"), (this.f = t);
        }
        function ul(t) {
          return t.Oa || Pe(new k("auth-domain-config-required"));
        }
        function cl(t) {
          if (!Rr())
            return Pe(new k("operation-not-supported-in-this-environment"));
          var e = ul(t)
            .then(function () {
              return t.b.qa();
            })
            .then(function (t) {
              return t ? ti(t) : null;
            });
          return gl(t, e);
        }
        function hl(t, e) {
          pl(t) &&
            ((function (t, e) {
              X(t.S, function (t) {
                return t == e;
              });
            })(pl(t), t.Ba),
            dn(pl(t), "tokenChanged", t.ya),
            dn(pl(t), "userDeleted", t.za),
            dn(pl(t), "userInvalidated", t.Aa),
            Sh(pl(t))),
            e &&
              (e.S.push(t.Ba),
              ln(e, "tokenChanged", t.ya),
              ln(e, "userDeleted", t.za),
              ln(e, "userInvalidated", t.Aa),
              0 < t.u && Th(e)),
            Zr(t, "currentUser", e),
            e &&
              (e.wa(t.la()),
              bh(e, t),
              _h(e, t.J),
              Ih(e, t),
              oa(e.a, t.P),
              wh(e, t));
        }
        function ll(t, e) {
          var n = null,
            r = null;
          return gl(
            t,
            e
              .then(
                function (e) {
                  return (
                    (n = Vo(e)),
                    (r = Xi(e)),
                    (function (t, e) {
                      var n = {};
                      return (
                        (n.apiKey = fl(t).options.apiKey),
                        (n.authDomain = fl(t).options.authDomain),
                        (n.appName = fl(t).name),
                        t.P && (n.emulatorConfig = t.P),
                        t.$.then(function () {
                          return (function (t, e, n, r) {
                            var i = new yh(t, e);
                            return (
                              n && (i.ha = n),
                              r && _h(i, r),
                              i.reload().then(function () {
                                return i;
                              })
                            );
                          })(n, e, t.D, t.Ga());
                        })
                          .then(function (e) {
                            return pl(t) && e.uid == pl(t).uid
                              ? (Lh(pl(t), e), t.da(e))
                              : (hl(t, e), Nh(e), t.da(e));
                          })
                          .then(function () {
                            vl(t);
                          })
                      );
                    })(t, e)
                  );
                },
                function (e) {
                  var n = null;
                  throw (
                    (e &&
                      "auth/multi-factor-auth-required" === e.code &&
                      (n = ih(e.w(), t, I(t.kc, t))),
                    n || e)
                  );
                }
              )
              .then(function () {
                return ti({
                  user: pl(t),
                  credential: n,
                  additionalUserInfo: r,
                  operationType: "signIn",
                });
              })
          );
        }
        function fl(t) {
          return t.app;
        }
        function pl(t) {
          return t.currentUser;
        }
        function dl(t) {
          return (pl(t) && pl(t)._lat) || null;
        }
        function vl(t) {
          if (t.ba) {
            for (var e = 0; e < t.s.length; e++) t.s[e] && t.s[e](dl(t));
            if (t.X !== t.getUid() && t.O.length)
              for (t.X = t.getUid(), e = 0; e < t.O.length; e++)
                t.O[e] && t.O[e](dl(t));
          }
        }
        function gl(t, e) {
          return (
            t.R.push(e),
            e.oa(function () {
              Y(t.R, e);
            }),
            e
          );
        }
        function ml() {}
        function yl() {
          (this.a = {}), (this.b = 1e12);
        }
        (Yh.prototype.xb = function (t) {
          var e = null,
            n = this;
          return (
            (function (t) {
              var e = new k("invalid-persistence-type"),
                n = new k("unsupported-persistence-type");
              t: {
                for (r in $u)
                  if ($u[r] == t) {
                    var r = !0;
                    break t;
                  }
                r = !1;
              }
              if (!r || "string" != typeof t) throw e;
              switch (Tr()) {
                case "ReactNative":
                  if ("session" === t) throw n;
                  break;
                case "Node":
                  if ("none" !== t) throw n;
                  break;
                case "Worker":
                  if ("session" === t || (!xu() && "none" !== t)) throw n;
                  break;
                default:
                  if (!Or() && "none" !== t) throw n;
              }
            })(t),
            rl(this, function () {
              return t != n.c.F
                ? n.b
                    .get(n.c, n.a)
                    .then(function (r) {
                      return (e = r), Xh(n, t);
                    })
                    .then(function () {
                      if (((n.c = $h(t)), e)) return n.b.set(n.c, e, n.a);
                    })
                : Ae();
            })
          );
        }),
          S(il, En),
          S(ol, Ze),
          S(sl, Ze),
          S(al, Ze),
          ((t = il.prototype).xb = function (t) {
            return gl(this, (t = this.i.xb(t)));
          }),
          (t.wa = function (t) {
            this.aa === t ||
              this.l ||
              ((this.aa = t),
              ia(this.a, this.aa),
              this.dispatchEvent(new ol(this.la())));
          }),
          (t.la = function () {
            return this.aa;
          }),
          (t.fd = function () {
            var t = u.navigator;
            this.wa(
              (t &&
                ((t.languages && t.languages[0]) ||
                  t.language ||
                  t.userLanguage)) ||
                null
            );
          }),
          (t.gd = function (t, e) {
            if (!this.P) {
              if (!/^https?:\/\//.test(t))
                throw new k(
                  "argument-error",
                  "Emulator URL must start with a valid scheme (http:// or https://)."
                );
              (function (t) {
                "undefined" != typeof console &&
                  "function" == typeof console.info &&
                  console.info(
                    "WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."
                  ),
                  u.document &&
                    !t &&
                    wr().then(function () {
                      var t = u.document.createElement("div");
                      (t.innerText =
                        "Running in emulator mode. Do not use with production credentials."),
                        (t.style.position = "fixed"),
                        (t.style.width = "100%"),
                        (t.style.backgroundColor = "#ffffff"),
                        (t.style.border = ".1em solid #000000"),
                        (t.style.color = "#ff0000"),
                        (t.style.bottom = "0px"),
                        (t.style.left = "0px"),
                        (t.style.margin = "0px"),
                        (t.style.zIndex = 1e4),
                        (t.style.textAlign = "center"),
                        t.classList.add("firebase-emulator-warning"),
                        u.document.body.appendChild(t);
                    });
              })((e = !!e && !!e.disableWarnings)),
                (this.P = { url: t, ec: e }),
                (this.settings.ib = !0),
                oa(this.a, this.P),
                this.dispatchEvent(new sl(this.P));
            }
          }),
          (t.Gc = function (t) {
            this.J.push(t),
              aa(this.a, e.Z.SDK_VERSION ? Pr(e.Z.SDK_VERSION, this.J) : null),
              this.dispatchEvent(new al(this.J));
          }),
          (t.Ga = function () {
            return $(this.J);
          }),
          (t.yb = function (t) {
            this.S === t || this.l || ((this.S = t), (this.a.b = this.S));
          }),
          (t.T = function () {
            return this.S;
          }),
          (t.toJSON = function () {
            return {
              apiKey: fl(this).options.apiKey,
              authDomain: fl(this).options.authDomain,
              appName: fl(this).name,
              currentUser: pl(this) && pl(this).w(),
            };
          }),
          (t.Fb = function (t, e) {
            switch (t) {
              case "unknown":
              case "signInViaRedirect":
                return !0;
              case "signInViaPopup":
                return this.g == e && !!this.f;
              default:
                return !1;
            }
          }),
          (t.na = function (t, e, n, r) {
            "signInViaPopup" == t &&
              this.g == r &&
              (n && this.C ? this.C(n) : e && !n && this.f && this.f(e),
              this.c && (this.c.cancel(), (this.c = null)),
              delete this.f,
              delete this.C);
          }),
          (t.Fa = function (t, e) {
            return "signInViaRedirect" == t ||
              ("signInViaPopup" == t && this.g == e && this.f)
              ? I(this.ic, this)
              : null;
          }),
          (t.ic = function (t, e, n, r) {
            var i = this,
              o = { requestUri: t, postBody: r, sessionId: e, tenantId: n };
            return (
              this.c && (this.c.cancel(), (this.c = null)),
              i.$.then(function () {
                return ll(i, wa(i.a, o));
              })
            );
          }),
          (t.Xc = function (t) {
            if (!Rr())
              return Pe(new k("operation-not-supported-in-this-environment"));
            var n = this,
              r = Yi(t.providerId),
              i = qr(),
              o = null;
            (!jr() || Ir()) &&
              fl(this).options.authDomain &&
              t.isOAuthProvider &&
              (o = yu(
                fl(this).options.authDomain,
                fl(this).options.apiKey,
                fl(this).name,
                "signInViaPopup",
                t,
                null,
                i,
                e.Z.SDK_VERSION || null,
                null,
                null,
                this.T(),
                this.P
              ));
            var s = mr(o, r && r.ua, r && r.ta);
            return gl(
              this,
              (r = ul(this)
                .then(function (e) {
                  return jc(e, s, "signInViaPopup", t, i, !!o, n.T());
                })
                .then(function () {
                  return new Ie(function (t, e) {
                    n.na(
                      "signInViaPopup",
                      null,
                      new k("cancelled-popup-request"),
                      n.g
                    ),
                      (n.f = t),
                      (n.C = e),
                      (n.g = i),
                      (n.c = Vc(n.b, n, "signInViaPopup", s, i));
                  });
                })
                .then(function (t) {
                  return s && gr(s), t ? ti(t) : null;
                })
                .o(function (t) {
                  throw (s && gr(s), t);
                }))
            );
          }),
          (t.Yc = function (t) {
            if (!Rr())
              return Pe(new k("operation-not-supported-in-this-environment"));
            var e = this;
            return gl(
              this,
              ul(this)
                .then(function () {
                  return (function (t) {
                    return rl(t, function () {
                      return t.b.set(Zh, t.c.F, t.a);
                    });
                  })(e.i);
                })
                .then(function () {
                  return Uc(e.b, "signInViaRedirect", t, void 0, e.T());
                })
            );
          }),
          (t.qa = function () {
            var t = this;
            return cl(this)
              .then(function (e) {
                return t.b && Hc(t.b.b), e;
              })
              .o(function (e) {
                throw (t.b && Hc(t.b.b), e);
              });
          }),
          (t.dd = function (t) {
            if (!t) return Pe(new k("null-user"));
            if (this.S != t.tenantId) return Pe(new k("tenant-id-mismatch"));
            var e = this,
              n = {};
            (n.apiKey = fl(this).options.apiKey),
              (n.authDomain = fl(this).options.authDomain),
              (n.appName = fl(this).name);
            var r = (function (t, e, n, r) {
              var i = t.b,
                o = {};
              return (
                (o[$s] = i.b && i.b.toString()),
                (o.refreshToken = i.a),
                (e = new yh(
                  e || { apiKey: t.l, authDomain: t.s, appName: t.m },
                  o
                )),
                n && (e.ha = n),
                r && _h(e, r),
                Lh(e, t),
                e
              );
            })(t, n, e.D, e.Ga());
            return gl(
              this,
              this.h
                .then(function () {
                  if (fl(e).options.apiKey != t.l) return r.reload();
                })
                .then(function () {
                  return pl(e) && t.uid == pl(e).uid
                    ? (Lh(pl(e), t), e.da(t))
                    : (hl(e, r), Nh(r), e.da(r));
                })
                .then(function () {
                  vl(e);
                })
            );
          }),
          (t.Ab = function () {
            var t = this;
            return gl(
              this,
              this.h.then(function () {
                return (
                  t.b && Hc(t.b.b),
                  pl(t)
                    ? (hl(t, null),
                      el(t.i).then(function () {
                        vl(t);
                      }))
                    : Ae()
                );
              })
            );
          }),
          (t.Zc = function () {
            var t = this;
            return nl(this.i, fl(this).options.authDomain).then(function (e) {
              if (!t.l) {
                var n;
                if ((n = pl(t) && e)) {
                  n = pl(t).uid;
                  var r = e.uid;
                  n = null != n && "" !== n && null != r && "" !== r && n == r;
                }
                if (n) return Lh(pl(t), e), pl(t).I();
                (pl(t) || e) &&
                  (hl(t, e),
                  e && (Nh(e), (e.ha = t.D)),
                  t.b && Oc(t.b, t),
                  vl(t));
              }
            });
          }),
          (t.da = function (t) {
            return tl(this.i, t);
          }),
          (t.mc = function () {
            vl(this), this.da(pl(this));
          }),
          (t.wc = function () {
            this.Ab();
          }),
          (t.xc = function () {
            this.Ab();
          }),
          (t.kc = function (t) {
            var e = this;
            return this.h.then(function () {
              return ll(e, Ae(t));
            });
          }),
          (t.zc = function (t) {
            var e = this;
            this.addAuthTokenListener(function () {
              t.next(pl(e));
            });
          }),
          (t.Ac = function (t) {
            var e = this;
            !(function (t, e) {
              t.O.push(e),
                gl(
                  t,
                  t.h.then(function () {
                    !t.l &&
                      Q(t.O, e) &&
                      t.X !== t.getUid() &&
                      ((t.X = t.getUid()), e(dl(t)));
                  })
                );
            })(this, function () {
              t.next(pl(e));
            });
          }),
          (t.Ic = function (t, e, n) {
            var r = this;
            return (
              this.ba &&
                Promise.resolve().then(function () {
                  "function" == typeof t
                    ? t(pl(r))
                    : "function" == typeof t.next && t.next(pl(r));
                }),
              this.hb(t, e, n)
            );
          }),
          (t.Hc = function (t, e, n) {
            var r = this;
            return (
              this.ba &&
                Promise.resolve().then(function () {
                  (r.X = r.getUid()),
                    "function" == typeof t
                      ? t(pl(r))
                      : "function" == typeof t.next && t.next(pl(r));
                }),
              this.bc(t, e, n)
            );
          }),
          (t.nc = function (t) {
            var e = this;
            return gl(
              this,
              this.h.then(function () {
                return pl(e)
                  ? pl(e)
                      .I(t)
                      .then(function (t) {
                        return { accessToken: t };
                      })
                  : null;
              })
            );
          }),
          (t.Tc = function (t) {
            var e = this;
            return this.h
              .then(function () {
                return ll(e, ru(e.a, Xa, { token: t }));
              })
              .then(function (t) {
                var n = t.user;
                return Mh(n, "isAnonymous", !1), e.da(n), t;
              });
          }),
          (t.Uc = function (t, e) {
            var n = this;
            return this.h.then(function () {
              return ll(n, ru(n.a, Za, { email: t, password: e }));
            });
          }),
          (t.dc = function (t, e) {
            var n = this;
            return this.h.then(function () {
              return ll(n, ru(n.a, Ca, { email: t, password: e }));
            });
          }),
          (t.$a = function (t) {
            var e = this;
            return this.h.then(function () {
              return ll(e, t.ka(e.a));
            });
          }),
          (t.Sc = function (t) {
            return (
              Yr(
                "firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."
              ),
              this.$a(t)
            );
          }),
          (t.zb = function () {
            var t = this;
            return this.h.then(function () {
              var e = pl(t);
              if (e && e.isAnonymous) {
                var n = ti({ providerId: null, isNewUser: !1 });
                return ti({
                  user: e,
                  credential: null,
                  additionalUserInfo: n,
                  operationType: "signIn",
                });
              }
              return ll(t, t.a.zb()).then(function (e) {
                var n = e.user;
                return Mh(n, "isAnonymous", !0), t.da(n), e;
              });
            });
          }),
          (t.getUid = function () {
            return (pl(this) && pl(this).uid) || null;
          }),
          (t.cc = function (t) {
            this.addAuthTokenListener(t),
              this.u++,
              0 < this.u && pl(this) && Th(pl(this));
          }),
          (t.Pc = function (t) {
            var e = this;
            z(this.s, function (n) {
              n == t && e.u--;
            }),
              0 > this.u && (this.u = 0),
              0 == this.u && pl(this) && Sh(pl(this)),
              this.removeAuthTokenListener(t);
          }),
          (t.addAuthTokenListener = function (t) {
            var e = this;
            this.s.push(t),
              gl(
                this,
                this.h.then(function () {
                  e.l || (Q(e.s, t) && t(dl(e)));
                })
              );
          }),
          (t.removeAuthTokenListener = function (t) {
            X(this.s, function (e) {
              return e == t;
            });
          }),
          (t.delete = function () {
            this.l = !0;
            for (var t = 0; t < this.R.length; t++)
              this.R[t].cancel("app-deleted");
            return (
              (this.R = []),
              this.i &&
                (t = this.i).b.removeListener($h("local"), t.a, this.ja),
              this.b && (Rc(this.b, this), Hc(this.b.b)),
              Promise.resolve()
            );
          }),
          (t.hc = function (t) {
            return gl(
              this,
              (function (t, e) {
                return ru(t, ka, {
                  identifier: e,
                  continueUri: Mr() ? fr() : "http://localhost",
                }).then(function (t) {
                  return t.signinMethods || [];
                });
              })(this.a, t)
            );
          }),
          (t.Bc = function (t) {
            return !!Ro(t);
          }),
          (t.wb = function (t, e) {
            var n = this;
            return gl(
              this,
              Ae()
                .then(function () {
                  var t = new xi(e);
                  if (!t.c)
                    throw new k(
                      "argument-error",
                      Mi + " must be true when sending sign in link to email"
                    );
                  return Bi(t);
                })
                .then(function (e) {
                  return n.a.wb(t, e);
                })
                .then(function () {})
            );
          }),
          (t.jd = function (t) {
            return this.Ra(t).then(function (t) {
              return t.data.email;
            });
          }),
          (t.nb = function (t, e) {
            return gl(
              this,
              this.a.nb(t, e).then(function () {})
            );
          }),
          (t.Ra = function (t) {
            return gl(
              this,
              this.a.Ra(t).then(function (t) {
                return new ci(t);
              })
            );
          }),
          (t.jb = function (t) {
            return gl(
              this,
              this.a.jb(t).then(function () {})
            );
          }),
          (t.vb = function (t, e) {
            var n = this;
            return gl(
              this,
              Ae()
                .then(function () {
                  return void 0 === e || vt(e) ? {} : Bi(new xi(e));
                })
                .then(function (e) {
                  return n.a.vb(t, e);
                })
                .then(function () {})
            );
          }),
          (t.Wc = function (t, e) {
            return gl(this, Zc(this, t, e, I(this.$a, this)));
          }),
          (t.Vc = function (t, e) {
            var n = this;
            return gl(
              this,
              Ae().then(function () {
                var r = e || fr(),
                  i = Oo(t, r);
                if (!(r = Ro(r)))
                  throw new k("argument-error", "Invalid email link!");
                if (r.tenantId !== n.T()) throw new k("tenant-id-mismatch");
                return n.$a(i);
              })
            );
          }),
          (ml.prototype.render = function () {}),
          (ml.prototype.reset = function () {}),
          (ml.prototype.getResponse = function () {}),
          (ml.prototype.execute = function () {});
        var bl = null;
        function wl(t, e) {
          return ((e = _l(e)) && t.a[e]) || null;
        }
        function _l(t) {
          return (t = void 0 === t ? 1e12 : t) ? t.toString() : null;
        }
        function Il(t, e) {
          (this.g = !1),
            (this.c = e),
            (this.a = this.b = null),
            (this.h = "invisible" !== this.c.size),
            (this.f = he(t));
          var n = this;
          (this.i = function () {
            n.execute();
          }),
            this.h ? this.execute() : ln(this.f, "click", this.i);
        }
        function El(t) {
          if (t.g) throw Error("reCAPTCHA mock was already deleted!");
        }
        function Tl() {}
        function Sl() {}
        (yl.prototype.render = function (t, e) {
          return (this.a[this.b.toString()] = new Il(t, e)), this.b++;
        }),
          (yl.prototype.reset = function (t) {
            var e = wl(this, t);
            (t = _l(t)), e && t && (e.delete(), delete this.a[t]);
          }),
          (yl.prototype.getResponse = function (t) {
            return (t = wl(this, t)) ? t.getResponse() : null;
          }),
          (yl.prototype.execute = function (t) {
            (t = wl(this, t)) && t.execute();
          }),
          (Il.prototype.getResponse = function () {
            return El(this), this.b;
          }),
          (Il.prototype.execute = function () {
            El(this);
            var t = this;
            this.a ||
              (this.a = setTimeout(function () {
                t.b = (function () {
                  for (var t = 50, e = []; 0 < t; )
                    e.push(
                      "1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(
                        Math.floor(62 * Math.random())
                      )
                    ),
                      t--;
                  return e.join("");
                })();
                var e = t.c.callback,
                  n = t.c["expired-callback"];
                if (e)
                  try {
                    e(t.b);
                  } catch (t) {}
                t.a = setTimeout(function () {
                  if (((t.a = null), (t.b = null), n))
                    try {
                      n();
                    } catch (t) {}
                  t.h && t.execute();
                }, 6e4);
              }, 500));
          }),
          (Il.prototype.delete = function () {
            El(this),
              (this.g = !0),
              clearTimeout(this.a),
              (this.a = null),
              dn(this.f, "click", this.i);
          }),
          Zr(Tl, "FACTOR_ID", "phone"),
          (Sl.prototype.g = function () {
            return bl || (bl = new yl()), Ae(bl);
          }),
          (Sl.prototype.c = function () {});
        var Cl = null;
        function kl() {
          (this.b = u.grecaptcha ? 1 / 0 : 0),
            (this.f = null),
            (this.a = "__rcb" + Math.floor(1e6 * Math.random()).toString());
        }
        var Nl = new wt(
            Tt,
            "https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"
          ),
          Al = new Wr(3e4, 6e4);
        (kl.prototype.g = function (t) {
          var e = this;
          return new Ie(function (n, r) {
            var i = setTimeout(function () {
              r(new k("network-request-failed"));
            }, Al.get());
            !u.grecaptcha || (t !== e.f && !e.b)
              ? ((u[e.a] = function () {
                  if (u.grecaptcha) {
                    e.f = t;
                    var o = u.grecaptcha.render;
                    (u.grecaptcha.render = function (t, n) {
                      return (t = o(t, n)), e.b++, t;
                    }),
                      clearTimeout(i),
                      n(u.grecaptcha);
                  } else clearTimeout(i), r(new k("internal-error"));
                  delete u[e.a];
                }),
                Ae(Ws(Nt(Nl, { onload: e.a, hl: t || "" }))).o(function () {
                  clearTimeout(i),
                    r(
                      new k(
                        "internal-error",
                        "Unable to load external reCAPTCHA dependencies!"
                      )
                    );
                }))
              : (clearTimeout(i), n(u.grecaptcha));
          });
        }),
          (kl.prototype.c = function () {
            this.b--;
          });
        var Pl = null;
        function Dl(t, e, n, r, i, o, s) {
          if (
            (Zr(this, "type", "recaptcha"),
            (this.c = this.f = null),
            (this.D = !1),
            (this.v = e),
            (this.g = null),
            s
              ? (Cl || (Cl = new Sl()), (s = Cl))
              : (Pl || (Pl = new kl()), (s = Pl)),
            (this.m = s),
            (this.a = n || { theme: "light", type: "image" }),
            (this.h = []),
            this.a[Rl])
          )
            throw new k(
              "argument-error",
              "sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project."
            );
          if (((this.i = "invisible" === this.a[Ml]), !u.document))
            throw new k(
              "operation-not-supported-in-this-environment",
              "RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support."
            );
          if (!he(e) || (!this.i && he(e).hasChildNodes()))
            throw new k(
              "argument-error",
              "reCAPTCHA container is either not found or already contains inner elements!"
            );
          (this.s = new Xs(t, o || null, i || null)),
            (this.u =
              r ||
              function () {
                return null;
              });
          var a = this;
          this.l = [];
          var c = this.a[xl];
          this.a[xl] = function (t) {
            if ((Ll(a, t), "function" == typeof c)) c(t);
            else if ("string" == typeof c) {
              var e = xr(c, u);
              "function" == typeof e && e(t);
            }
          };
          var h = this.a[Ol];
          this.a[Ol] = function () {
            if ((Ll(a, null), "function" == typeof h)) h();
            else if ("string" == typeof h) {
              var t = xr(h, u);
              "function" == typeof t && t();
            }
          };
        }
        var xl = "callback",
          Ol = "expired-callback",
          Rl = "sitekey",
          Ml = "size";
        function Ll(t, e) {
          for (var n = 0; n < t.l.length; n++)
            try {
              t.l[n](e);
            } catch (t) {}
        }
        function jl(t, e) {
          return (
            t.h.push(e),
            e.oa(function () {
              Y(t.h, e);
            }),
            e
          );
        }
        function Fl(t) {
          if (t.D)
            throw new k(
              "internal-error",
              "RecaptchaVerifier instance has been destroyed."
            );
        }
        function Ul(t, n, r) {
          var i = !1;
          try {
            this.b = r || e.Z.app();
          } catch (t) {
            throw new k(
              "argument-error",
              "No firebase.app.App instance is currently initialized."
            );
          }
          if (!this.b.options || !this.b.options.apiKey)
            throw new k("invalid-api-key");
          r = this.b.options.apiKey;
          var o = this,
            s = null;
          try {
            s = this.b.auth().Ga();
          } catch (t) {}
          try {
            i = this.b.auth().settings.appVerificationDisabledForTesting;
          } catch (t) {}
          (s = e.Z.SDK_VERSION ? Pr(e.Z.SDK_VERSION, s) : null),
            Dl.call(
              this,
              r,
              t,
              n,
              function () {
                try {
                  var t = o.b.auth().la();
                } catch (e) {
                  t = null;
                }
                return t;
              },
              s,
              O(A),
              i
            );
        }
        function Vl(t, e, n, r) {
          t: {
            n = Array.prototype.slice.call(n);
            for (var i = 0, o = !1, s = 0; s < e.length; s++)
              if (e[s].optional) o = !0;
              else {
                if (o)
                  throw new k(
                    "internal-error",
                    "Argument validator encountered a required argument after an optional argument."
                  );
                i++;
              }
            if (((o = e.length), n.length < i || o < n.length))
              r =
                "Expected " +
                (i == o
                  ? 1 == i
                    ? "1 argument"
                    : i + " arguments"
                  : i + "-" + o + " arguments") +
                " but got " +
                n.length +
                ".";
            else {
              for (i = 0; i < n.length; i++)
                if (
                  ((o = e[i].optional && void 0 === n[i]), !e[i].M(n[i]) && !o)
                ) {
                  if (((e = e[i]), 0 > i || i >= ql.length))
                    throw new k(
                      "internal-error",
                      "Argument validator received an unsupported number of arguments."
                    );
                  (n = ql[i]),
                    (r =
                      (r ? "" : n + " argument ") +
                      (e.name ? '"' + e.name + '" ' : "") +
                      "must be " +
                      e.K +
                      ".");
                  break t;
                }
              r = null;
            }
          }
          if (r) throw new k("argument-error", t + " failed: " + r);
        }
        ((t = Dl.prototype).Ia = function () {
          var t = this;
          return this.f
            ? this.f
            : (this.f = jl(
                this,
                Ae()
                  .then(function () {
                    if (Mr() && !Er()) return wr();
                    throw new k(
                      "operation-not-supported-in-this-environment",
                      "RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment."
                    );
                  })
                  .then(function () {
                    return t.m.g(t.u());
                  })
                  .then(function (e) {
                    return (t.g = e), ru(t.s, Va, {});
                  })
                  .then(function (e) {
                    t.a[Rl] = e.recaptchaSiteKey;
                  })
                  .o(function (e) {
                    throw ((t.f = null), e);
                  })
              ));
        }),
          (t.render = function () {
            Fl(this);
            var t = this;
            return jl(
              this,
              this.Ia().then(function () {
                if (null === t.c) {
                  var e = t.v;
                  if (!t.i) {
                    var n = he(e);
                    (e = (function (t, e, n) {
                      var r = arguments,
                        i = document,
                        o = String(r[0]),
                        s = r[1];
                      if (!ce && s && (s.name || s.type)) {
                        if (
                          ((o = ["<", o]),
                          s.name && o.push(' name="', zt(s.name), '"'),
                          s.type)
                        ) {
                          o.push(' type="', zt(s.type), '"');
                          var a = {};
                          yt(a, s), delete a.type, (s = a);
                        }
                        o.push(">"), (o = o.join(""));
                      }
                      return (
                        (o = ge(i, o)),
                        s &&
                          ("string" == typeof s
                            ? (o.className = s)
                            : Array.isArray(s)
                            ? (o.className = s.join(" "))
                            : le(o, s)),
                        2 < r.length && ve(i, o, r),
                        o
                      );
                    })("DIV")),
                      n.appendChild(e);
                  }
                  t.c = t.g.render(e, t.a);
                }
                return t.c;
              })
            );
          }),
          (t.verify = function () {
            Fl(this);
            var t = this;
            return jl(
              this,
              this.render().then(function (e) {
                return new Ie(function (n) {
                  var r = t.g.getResponse(e);
                  if (r) n(r);
                  else {
                    var i = function (e) {
                      e &&
                        ((function (t, e) {
                          X(t.l, function (t) {
                            return t == e;
                          });
                        })(t, i),
                        n(e));
                    };
                    t.l.push(i), t.i && t.g.execute(t.c);
                  }
                });
              })
            );
          }),
          (t.reset = function () {
            Fl(this), null !== this.c && this.g.reset(this.c);
          }),
          (t.clear = function () {
            Fl(this), (this.D = !0), this.m.c();
            for (var t = 0; t < this.h.length; t++)
              this.h[t].cancel(
                "RecaptchaVerifier instance has been destroyed."
              );
            if (!this.i) {
              t = he(this.v);
              for (var e; (e = t.firstChild); ) t.removeChild(e);
            }
          }),
          S(Ul, Dl);
        var ql =
          "First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(
            " "
          );
        function Bl(t, e) {
          return {
            name: t || "",
            K: "a valid string",
            optional: !!e,
            M: function (t) {
              return "string" == typeof t;
            },
          };
        }
        function Gl(t, e) {
          return {
            name: t || "",
            K: "a boolean",
            optional: !!e,
            M: function (t) {
              return "boolean" == typeof t;
            },
          };
        }
        function Wl(t, e) {
          return { name: t || "", K: "a valid object", optional: !!e, M: g };
        }
        function zl(t, e) {
          return {
            name: t || "",
            K: "a function",
            optional: !!e,
            M: function (t) {
              return "function" == typeof t;
            },
          };
        }
        function Hl(t, e) {
          return {
            name: t || "",
            K: "null",
            optional: !!e,
            M: function (t) {
              return null === t;
            },
          };
        }
        function Kl(t) {
          return {
            name: t ? t + "Credential" : "credential",
            K: t ? "a valid " + t + " credential" : "a valid credential",
            optional: !1,
            M: function (e) {
              if (!e) return !1;
              var n = !t || e.providerId === t;
              return !(!e.ka || !n);
            },
          };
        }
        function Jl(t, e) {
          return (
            g(t) &&
            "string" == typeof t.type &&
            t.type === e &&
            "function" == typeof t.Ha
          );
        }
        function Ql(t) {
          return g(t) && "string" == typeof t.uid;
        }
        function Yl(t, e, n, r) {
          return {
            name: n || "",
            K: t.K + " or " + e.K,
            optional: !!r,
            M: function (n) {
              return t.M(n) || e.M(n);
            },
          };
        }
        function Xl(t, e) {
          for (var n in e) {
            var r = e[n].name;
            t[r] = tf(r, t[n], e[n].j);
          }
        }
        function Zl(t, e) {
          for (var n in e) {
            var r = e[n].name;
            r !== n &&
              Object.defineProperty(t, r, {
                get: E(function (t) {
                  return this[t];
                }, n),
                set: E(
                  function (t, e, n, r) {
                    Vl(t, [n], [r], !0), (this[e] = r);
                  },
                  r,
                  n,
                  e[n].kb
                ),
                enumerable: !0,
              });
          }
        }
        function $l(t, e, n, r) {
          t[e] = tf(e, n, r);
        }
        function tf(t, e, n) {
          function r() {
            var t = Array.prototype.slice.call(arguments);
            return Vl(o, n, t), e.apply(this, t);
          }
          if (!n) return e;
          var i,
            o = (function (t) {
              return (t = t.split("."))[t.length - 1];
            })(t);
          for (i in e) r[i] = e[i];
          for (i in e.prototype) r.prototype[i] = e.prototype[i];
          return r;
        }
        Xl(il.prototype, {
          jb: { name: "applyActionCode", j: [Bl("code")] },
          Ra: { name: "checkActionCode", j: [Bl("code")] },
          nb: {
            name: "confirmPasswordReset",
            j: [Bl("code"), Bl("newPassword")],
          },
          dc: {
            name: "createUserWithEmailAndPassword",
            j: [Bl("email"), Bl("password")],
          },
          hc: { name: "fetchSignInMethodsForEmail", j: [Bl("email")] },
          qa: { name: "getRedirectResult", j: [] },
          Bc: { name: "isSignInWithEmailLink", j: [Bl("emailLink")] },
          Hc: {
            name: "onAuthStateChanged",
            j: [
              Yl(Wl(), zl(), "nextOrObserver"),
              zl("opt_error", !0),
              zl("opt_completed", !0),
            ],
          },
          Ic: {
            name: "onIdTokenChanged",
            j: [
              Yl(Wl(), zl(), "nextOrObserver"),
              zl("opt_error", !0),
              zl("opt_completed", !0),
            ],
          },
          vb: {
            name: "sendPasswordResetEmail",
            j: [
              Bl("email"),
              Yl(
                Wl("opt_actionCodeSettings", !0),
                Hl(null, !0),
                "opt_actionCodeSettings",
                !0
              ),
            ],
          },
          wb: {
            name: "sendSignInLinkToEmail",
            j: [Bl("email"), Wl("actionCodeSettings")],
          },
          xb: { name: "setPersistence", j: [Bl("persistence")] },
          Sc: { name: "signInAndRetrieveDataWithCredential", j: [Kl()] },
          zb: { name: "signInAnonymously", j: [] },
          $a: { name: "signInWithCredential", j: [Kl()] },
          Tc: { name: "signInWithCustomToken", j: [Bl("token")] },
          Uc: {
            name: "signInWithEmailAndPassword",
            j: [Bl("email"), Bl("password")],
          },
          Vc: {
            name: "signInWithEmailLink",
            j: [Bl("email"), Bl("emailLink", !0)],
          },
          Wc: {
            name: "signInWithPhoneNumber",
            j: [
              Bl("phoneNumber"),
              {
                name: "applicationVerifier",
                K: "an implementation of firebase.auth.ApplicationVerifier",
                optional: !1,
                M: function (t) {
                  return !(
                    !t ||
                    "string" != typeof t.type ||
                    "function" != typeof t.verify
                  );
                },
              },
            ],
          },
          Xc: {
            name: "signInWithPopup",
            j: [
              {
                name: "authProvider",
                K: "a valid Auth provider",
                optional: !1,
                M: function (t) {
                  return !!(
                    t &&
                    t.providerId &&
                    t.hasOwnProperty &&
                    t.hasOwnProperty("isOAuthProvider")
                  );
                },
              },
            ],
          },
          Yc: {
            name: "signInWithRedirect",
            j: [
              {
                name: "authProvider",
                K: "a valid Auth provider",
                optional: !1,
                M: function (t) {
                  return !!(
                    t &&
                    t.providerId &&
                    t.hasOwnProperty &&
                    t.hasOwnProperty("isOAuthProvider")
                  );
                },
              },
            ],
          },
          dd: {
            name: "updateCurrentUser",
            j: [
              Yl(
                {
                  name: "user",
                  K: "an instance of Firebase User",
                  optional: !1,
                  M: function (t) {
                    return !!(t && t instanceof yh);
                  },
                },
                Hl(),
                "user"
              ),
            ],
          },
          Ab: { name: "signOut", j: [] },
          toJSON: { name: "toJSON", j: [Bl(null, !0)] },
          fd: { name: "useDeviceLanguage", j: [] },
          gd: { name: "useEmulator", j: [Bl("url"), Wl("options", !0)] },
          jd: { name: "verifyPasswordResetCode", j: [Bl("code")] },
        }),
          Zl(il.prototype, {
            lc: { name: "languageCode", kb: Yl(Bl(), Hl(), "languageCode") },
            ti: { name: "tenantId", kb: Yl(Bl(), Hl(), "tenantId") },
          }),
          (il.Persistence = $u),
          (il.Persistence.LOCAL = "local"),
          (il.Persistence.SESSION = "session"),
          (il.Persistence.NONE = "none"),
          Xl(yh.prototype, {
            delete: { name: "delete", j: [] },
            oc: { name: "getIdTokenResult", j: [Gl("opt_forceRefresh", !0)] },
            I: { name: "getIdToken", j: [Gl("opt_forceRefresh", !0)] },
            Cc: { name: "linkAndRetrieveDataWithCredential", j: [Kl()] },
            qb: { name: "linkWithCredential", j: [Kl()] },
            Dc: {
              name: "linkWithPhoneNumber",
              j: [
                Bl("phoneNumber"),
                {
                  name: "applicationVerifier",
                  K: "an implementation of firebase.auth.ApplicationVerifier",
                  optional: !1,
                  M: function (t) {
                    return !(
                      !t ||
                      "string" != typeof t.type ||
                      "function" != typeof t.verify
                    );
                  },
                },
              ],
            },
            Ec: {
              name: "linkWithPopup",
              j: [
                {
                  name: "authProvider",
                  K: "a valid Auth provider",
                  optional: !1,
                  M: function (t) {
                    return !!(
                      t &&
                      t.providerId &&
                      t.hasOwnProperty &&
                      t.hasOwnProperty("isOAuthProvider")
                    );
                  },
                },
              ],
            },
            Fc: {
              name: "linkWithRedirect",
              j: [
                {
                  name: "authProvider",
                  K: "a valid Auth provider",
                  optional: !1,
                  M: function (t) {
                    return !!(
                      t &&
                      t.providerId &&
                      t.hasOwnProperty &&
                      t.hasOwnProperty("isOAuthProvider")
                    );
                  },
                },
              ],
            },
            Lc: {
              name: "reauthenticateAndRetrieveDataWithCredential",
              j: [Kl()],
            },
            tb: { name: "reauthenticateWithCredential", j: [Kl()] },
            Mc: {
              name: "reauthenticateWithPhoneNumber",
              j: [
                Bl("phoneNumber"),
                {
                  name: "applicationVerifier",
                  K: "an implementation of firebase.auth.ApplicationVerifier",
                  optional: !1,
                  M: function (t) {
                    return !(
                      !t ||
                      "string" != typeof t.type ||
                      "function" != typeof t.verify
                    );
                  },
                },
              ],
            },
            Nc: {
              name: "reauthenticateWithPopup",
              j: [
                {
                  name: "authProvider",
                  K: "a valid Auth provider",
                  optional: !1,
                  M: function (t) {
                    return !!(
                      t &&
                      t.providerId &&
                      t.hasOwnProperty &&
                      t.hasOwnProperty("isOAuthProvider")
                    );
                  },
                },
              ],
            },
            Oc: {
              name: "reauthenticateWithRedirect",
              j: [
                {
                  name: "authProvider",
                  K: "a valid Auth provider",
                  optional: !1,
                  M: function (t) {
                    return !!(
                      t &&
                      t.providerId &&
                      t.hasOwnProperty &&
                      t.hasOwnProperty("isOAuthProvider")
                    );
                  },
                },
              ],
            },
            reload: { name: "reload", j: [] },
            ub: {
              name: "sendEmailVerification",
              j: [
                Yl(
                  Wl("opt_actionCodeSettings", !0),
                  Hl(null, !0),
                  "opt_actionCodeSettings",
                  !0
                ),
              ],
            },
            toJSON: { name: "toJSON", j: [Bl(null, !0)] },
            cd: { name: "unlink", j: [Bl("provider")] },
            Bb: { name: "updateEmail", j: [Bl("email")] },
            Cb: { name: "updatePassword", j: [Bl("password")] },
            ed: { name: "updatePhoneNumber", j: [Kl("phone")] },
            Db: { name: "updateProfile", j: [Wl("profile")] },
            Eb: {
              name: "verifyBeforeUpdateEmail",
              j: [
                Bl("email"),
                Yl(
                  Wl("opt_actionCodeSettings", !0),
                  Hl(null, !0),
                  "opt_actionCodeSettings",
                  !0
                ),
              ],
            },
          }),
          Xl(yl.prototype, {
            execute: { name: "execute" },
            render: { name: "render" },
            reset: { name: "reset" },
            getResponse: { name: "getResponse" },
          }),
          Xl(ml.prototype, {
            execute: { name: "execute" },
            render: { name: "render" },
            reset: { name: "reset" },
            getResponse: { name: "getResponse" },
          }),
          Xl(Ie.prototype, {
            oa: { name: "finally" },
            o: { name: "catch" },
            then: { name: "then" },
          }),
          Zl(Yc.prototype, {
            appVerificationDisabled: {
              name: "appVerificationDisabledForTesting",
              kb: Gl("appVerificationDisabledForTesting"),
            },
          }),
          Xl(Xc.prototype, {
            confirm: { name: "confirm", j: [Bl("verificationCode")] },
          }),
          $l(
            ho,
            "fromJSON",
            function (t) {
              t = "string" == typeof t ? JSON.parse(t) : t;
              for (var e, n = [yo, Do, Lo, vo], r = 0; r < n.length; r++)
                if ((e = n[r](t))) return e;
              return null;
            },
            [Yl(Bl(), Wl(), "json")]
          ),
          $l(
            xo,
            "credential",
            function (t, e) {
              return new Po(t, e);
            },
            [Bl("email"), Bl("password")]
          ),
          Xl(Po.prototype, { w: { name: "toJSON", j: [Bl(null, !0)] } }),
          Xl(Io.prototype, {
            Ca: { name: "addScope", j: [Bl("scope")] },
            Ka: {
              name: "setCustomParameters",
              j: [Wl("customOAuthParameters")],
            },
          }),
          $l(Io, "credential", Eo, [Yl(Bl(), Wl(), "token")]),
          $l(xo, "credentialWithLink", Oo, [Bl("email"), Bl("emailLink")]),
          Xl(To.prototype, {
            Ca: { name: "addScope", j: [Bl("scope")] },
            Ka: {
              name: "setCustomParameters",
              j: [Wl("customOAuthParameters")],
            },
          }),
          $l(To, "credential", So, [Yl(Bl(), Wl(), "token")]),
          Xl(Co.prototype, {
            Ca: { name: "addScope", j: [Bl("scope")] },
            Ka: {
              name: "setCustomParameters",
              j: [Wl("customOAuthParameters")],
            },
          }),
          $l(Co, "credential", ko, [
            Yl(Bl(), Yl(Wl(), Hl()), "idToken"),
            Yl(Bl(), Hl(), "accessToken", !0),
          ]),
          Xl(No.prototype, {
            Ka: {
              name: "setCustomParameters",
              j: [Wl("customOAuthParameters")],
            },
          }),
          $l(No, "credential", Ao, [Yl(Bl(), Wl(), "token"), Bl("secret", !0)]),
          Xl(_o.prototype, {
            Ca: { name: "addScope", j: [Bl("scope")] },
            credential: {
              name: "credential",
              j: [
                Yl(Bl(), Yl(Wl(), Hl()), "optionsOrIdToken"),
                Yl(Bl(), Hl(), "accessToken", !0),
              ],
            },
            Ka: {
              name: "setCustomParameters",
              j: [Wl("customOAuthParameters")],
            },
          }),
          Xl(go.prototype, { w: { name: "toJSON", j: [Bl(null, !0)] } }),
          Xl(fo.prototype, { w: { name: "toJSON", j: [Bl(null, !0)] } }),
          $l(Fo, "credential", Uo, [
            Bl("verificationId"),
            Bl("verificationCode"),
          ]),
          Xl(Fo.prototype, {
            fb: {
              name: "verifyPhoneNumber",
              j: [
                Yl(
                  Bl(),
                  {
                    name: "phoneInfoOptions",
                    K: "valid phone info options",
                    optional: !1,
                    M: function (t) {
                      return (
                        !!t &&
                        (t.session && t.phoneNumber
                          ? Jl(t.session, uo) &&
                            "string" == typeof t.phoneNumber
                          : t.session && t.multiFactorHint
                          ? Jl(t.session, co) && Ql(t.multiFactorHint)
                          : t.session && t.multiFactorUid
                          ? Jl(t.session, co) &&
                            "string" == typeof t.multiFactorUid
                          : !!t.phoneNumber && "string" == typeof t.phoneNumber)
                      );
                    },
                  },
                  "phoneInfoOptions"
                ),
                {
                  name: "applicationVerifier",
                  K: "an implementation of firebase.auth.ApplicationVerifier",
                  optional: !1,
                  M: function (t) {
                    return !(
                      !t ||
                      "string" != typeof t.type ||
                      "function" != typeof t.verify
                    );
                  },
                },
              ],
            },
          }),
          Xl(Mo.prototype, { w: { name: "toJSON", j: [Bl(null, !0)] } }),
          Xl(k.prototype, { toJSON: { name: "toJSON", j: [Bl(null, !0)] } }),
          Xl(Jo.prototype, { toJSON: { name: "toJSON", j: [Bl(null, !0)] } }),
          Xl(Ko.prototype, { toJSON: { name: "toJSON", j: [Bl(null, !0)] } }),
          Xl(rh.prototype, { toJSON: { name: "toJSON", j: [Bl(null, !0)] } }),
          Xl(th.prototype, {
            Rc: {
              name: "resolveSignIn",
              j: [
                {
                  name: "multiFactorAssertion",
                  K: "a valid multiFactorAssertion",
                  optional: !1,
                  M: function (t) {
                    return !!t && !!t.sb;
                  },
                },
              ],
            },
          }),
          Xl(ch.prototype, {
            Rb: { name: "getSession", j: [] },
            fc: {
              name: "enroll",
              j: [
                {
                  name: "multiFactorAssertion",
                  K: "a valid multiFactorAssertion",
                  optional: !1,
                  M: function (t) {
                    return !!t && !!t.sb;
                  },
                },
                Bl("displayName", !0),
              ],
            },
            bd: {
              name: "unenroll",
              j: [
                Yl(
                  {
                    name: "multiFactorInfo",
                    K: "a valid multiFactorInfo",
                    optional: !1,
                    M: Ql,
                  },
                  Bl(),
                  "multiFactorInfoIdentifier"
                ),
              ],
            },
          }),
          Xl(Ul.prototype, {
            clear: { name: "clear", j: [] },
            render: { name: "render", j: [] },
            verify: { name: "verify", j: [] },
          }),
          $l(Ei, "parseLink", Di, [Bl("link")]),
          $l(
            Tl,
            "assertion",
            function (t) {
              return new ah(t);
            },
            [Kl("phone")]
          ),
          (function () {
            if (
              void 0 === e.Z ||
              !e.Z.INTERNAL ||
              !e.Z.INTERNAL.registerComponent
            )
              throw Error(
                "Cannot find the firebase namespace; be sure to include firebase-app.js before this library."
              );
            var t = {
              ActionCodeInfo: {
                Operation: {
                  EMAIL_SIGNIN: li,
                  PASSWORD_RESET: "PASSWORD_RESET",
                  RECOVER_EMAIL: "RECOVER_EMAIL",
                  REVERT_SECOND_FACTOR_ADDITION: hi,
                  VERIFY_AND_CHANGE_EMAIL: fi,
                  VERIFY_EMAIL: "VERIFY_EMAIL",
                },
              },
              Auth: il,
              AuthCredential: ho,
              Error: k,
            };
            $l(t, "EmailAuthProvider", xo, []),
              $l(t, "FacebookAuthProvider", Io, []),
              $l(t, "GithubAuthProvider", To, []),
              $l(t, "GoogleAuthProvider", Co, []),
              $l(t, "TwitterAuthProvider", No, []),
              $l(t, "OAuthProvider", _o, [Bl("providerId")]),
              $l(t, "SAMLAuthProvider", wo, [Bl("providerId")]),
              $l(t, "PhoneAuthProvider", Fo, [
                {
                  name: "auth",
                  K: "an instance of Firebase Auth",
                  optional: !0,
                  M: function (t) {
                    return !!(t && t instanceof il);
                  },
                },
              ]),
              $l(t, "RecaptchaVerifier", Ul, [
                Yl(
                  Bl(),
                  {
                    name: "",
                    K: "an HTML element",
                    optional: !1,
                    M: function (t) {
                      return !!(t && t instanceof Element);
                    },
                  },
                  "recaptchaContainer"
                ),
                Wl("recaptchaParameters", !0),
                {
                  name: "app",
                  K: "an instance of Firebase App",
                  optional: !0,
                  M: function (t) {
                    return !!(t && t instanceof e.Z.app.App);
                  },
                },
              ]),
              $l(t, "ActionCodeURL", Ei, []),
              $l(t, "PhoneMultiFactorGenerator", Tl, []),
              e.Z.INTERNAL.registerComponent({
                name: "auth",
                instanceFactory: function (t) {
                  return new il((t = t.getProvider("app").getImmediate()));
                },
                multipleInstances: !1,
                serviceProps: t,
                instantiationMode: "LAZY",
                type: "PUBLIC",
              }),
              e.Z.INTERNAL.registerComponent({
                name: "auth-internal",
                instanceFactory: function (t) {
                  return {
                    getUid: I(
                      (t = t.getProvider("auth").getImmediate()).getUid,
                      t
                    ),
                    getToken: I(t.nc, t),
                    addAuthTokenListener: I(t.cc, t),
                    removeAuthTokenListener: I(t.Pc, t),
                  };
                },
                multipleInstances: !1,
                instantiationMode: "LAZY",
                type: "PRIVATE",
              }),
              e.Z.registerVersion("@firebase/auth", "0.16.4"),
              e.Z.INTERNAL.extendNamespace({ User: yh });
          })();
      }.apply(
        void 0 !== n.g
          ? n.g
          : "undefined" != typeof self
          ? self
          : "undefined" != typeof window
          ? window
          : {}
      ),
        n(930));
      var r = n(270),
        i = n(36),
        o = function (t, e) {
          return (o =
            Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array &&
              function (t, e) {
                t.__proto__ = e;
              }) ||
            function (t, e) {
              for (var n in e)
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
            })(t, e);
        };
      function s(t) {
        var e = "function" == typeof Symbol && Symbol.iterator,
          n = e && t[e],
          r = 0;
        if (n) return n.call(t);
        if (t && "number" == typeof t.length)
          return {
            next: function () {
              return (
                t && r >= t.length && (t = void 0),
                { value: t && t[r++], done: !t }
              );
            },
          };
        throw new TypeError(
          e ? "Object is not iterable." : "Symbol.iterator is not defined."
        );
      }
      var a,
        u =
          "undefined" != typeof globalThis
            ? globalThis
            : "undefined" != typeof window
            ? window
            : void 0 !== n.g
            ? n.g
            : "undefined" != typeof self
            ? self
            : {},
        c = c || {},
        h = u || self;
      function l() {}
      function f(t) {
        var e = typeof t;
        return (
          "array" ==
            (e =
              "object" != e
                ? e
                : t
                ? Array.isArray(t)
                  ? "array"
                  : e
                : "null") ||
          ("object" == e && "number" == typeof t.length)
        );
      }
      function p(t) {
        var e = typeof t;
        return ("object" == e && null != t) || "function" == e;
      }
      var d = "closure_uid_" + ((1e9 * Math.random()) >>> 0),
        v = 0;
      function g(t, e, n) {
        return t.call.apply(t.bind, arguments);
      }
      function m(t, e, n) {
        if (!t) throw Error();
        if (2 < arguments.length) {
          var r = Array.prototype.slice.call(arguments, 2);
          return function () {
            var n = Array.prototype.slice.call(arguments);
            return Array.prototype.unshift.apply(n, r), t.apply(e, n);
          };
        }
        return function () {
          return t.apply(e, arguments);
        };
      }
      function y(t, e, n) {
        return (y =
          Function.prototype.bind &&
          -1 != Function.prototype.bind.toString().indexOf("native code")
            ? g
            : m).apply(null, arguments);
      }
      function b(t, e) {
        var n = Array.prototype.slice.call(arguments, 1);
        return function () {
          var e = n.slice();
          return e.push.apply(e, arguments), t.apply(this, e);
        };
      }
      function w() {
        return Date.now();
      }
      function _(t, e) {
        function n() {}
        (n.prototype = e.prototype),
          (t.X = e.prototype),
          (t.prototype = new n()),
          (t.prototype.constructor = t),
          (t.Kb = function (t, n, r) {
            for (
              var i = Array(arguments.length - 2), o = 2;
              o < arguments.length;
              o++
            )
              i[o - 2] = arguments[o];
            return e.prototype[n].apply(t, i);
          });
      }
      function I() {
        (this.j = this.j), (this.i = this.i);
      }
      (I.prototype.j = !1),
        (I.prototype.ja = function () {
          !this.j &&
            ((this.j = !0), this.G(), 0) &&
            (function (t) {
              (Object.prototype.hasOwnProperty.call(t, d) && t[d]) ||
                (t[d] = ++v);
            })(this);
        }),
        (I.prototype.G = function () {
          if (this.i) for (; this.i.length; ) this.i.shift()();
        });
      var E = Array.prototype.indexOf
          ? function (t, e) {
              return Array.prototype.indexOf.call(t, e, void 0);
            }
          : function (t, e) {
              if ("string" == typeof t)
                return "string" != typeof e || 1 != e.length
                  ? -1
                  : t.indexOf(e, 0);
              for (var n = 0; n < t.length; n++)
                if (n in t && t[n] === e) return n;
              return -1;
            },
        T = Array.prototype.forEach
          ? function (t, e, n) {
              Array.prototype.forEach.call(t, e, n);
            }
          : function (t, e, n) {
              for (
                var r = t.length,
                  i = "string" == typeof t ? t.split("") : t,
                  o = 0;
                o < r;
                o++
              )
                o in i && e.call(n, i[o], o, t);
            };
      function S(t) {
        return Array.prototype.concat.apply([], arguments);
      }
      function C(t) {
        var e = t.length;
        if (0 < e) {
          for (var n = Array(e), r = 0; r < e; r++) n[r] = t[r];
          return n;
        }
        return [];
      }
      function k(t) {
        return /^[\s\xa0]*$/.test(t);
      }
      var N,
        A = String.prototype.trim
          ? function (t) {
              return t.trim();
            }
          : function (t) {
              return /^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1];
            };
      function P(t, e) {
        return -1 != t.indexOf(e);
      }
      function D(t, e) {
        return t < e ? -1 : t > e ? 1 : 0;
      }
      t: {
        var x = h.navigator;
        if (x) {
          var O = x.userAgent;
          if (O) {
            N = O;
            break t;
          }
        }
        N = "";
      }
      function R(t, e, n) {
        for (var r in t) e.call(n, t[r], r, t);
      }
      function M(t) {
        var e = {};
        for (var n in t) e[n] = t[n];
        return e;
      }
      var L =
        "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(
          " "
        );
      function j(t, e) {
        for (var n, r, i = 1; i < arguments.length; i++) {
          for (n in (r = arguments[i])) t[n] = r[n];
          for (var o = 0; o < L.length; o++)
            (n = L[o]),
              Object.prototype.hasOwnProperty.call(r, n) && (t[n] = r[n]);
        }
      }
      function F(t) {
        return F[" "](t), t;
      }
      F[" "] = l;
      var U,
        V,
        q = P(N, "Opera"),
        B = P(N, "Trident") || P(N, "MSIE"),
        G = P(N, "Edge"),
        W = G || B,
        z =
          P(N, "Gecko") &&
          !(P(N.toLowerCase(), "webkit") && !P(N, "Edge")) &&
          !(P(N, "Trident") || P(N, "MSIE")) &&
          !P(N, "Edge"),
        H = P(N.toLowerCase(), "webkit") && !P(N, "Edge");
      function K() {
        var t = h.document;
        return t ? t.documentMode : void 0;
      }
      t: {
        var J = "",
          Q =
            ((V = N),
            z
              ? /rv:([^\);]+)(\)|;)/.exec(V)
              : G
              ? /Edge\/([\d\.]+)/.exec(V)
              : B
              ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(V)
              : H
              ? /WebKit\/(\S+)/.exec(V)
              : q
              ? /(?:Version)[ \/]?(\S+)/.exec(V)
              : void 0);
        if ((Q && (J = Q ? Q[1] : ""), B)) {
          var Y = K();
          if (null != Y && Y > parseFloat(J)) {
            U = String(Y);
            break t;
          }
        }
        U = J;
      }
      var X,
        Z = {};
      function $(t) {
        return (function (t, e) {
          var n = Z;
          return Object.prototype.hasOwnProperty.call(n, t)
            ? n[t]
            : (n[t] = e());
        })(t, function () {
          for (
            var e = 0,
              n = A(String(U)).split("."),
              r = A(String(t)).split("."),
              i = Math.max(n.length, r.length),
              o = 0;
            0 == e && o < i;
            o++
          ) {
            var s = n[o] || "",
              a = r[o] || "";
            do {
              if (
                ((s = /(\d*)(\D*)(.*)/.exec(s) || ["", "", "", ""]),
                (a = /(\d*)(\D*)(.*)/.exec(a) || ["", "", "", ""]),
                0 == s[0].length && 0 == a[0].length)
              )
                break;
              (e =
                D(
                  0 == s[1].length ? 0 : parseInt(s[1], 10),
                  0 == a[1].length ? 0 : parseInt(a[1], 10)
                ) ||
                D(0 == s[2].length, 0 == a[2].length) ||
                D(s[2], a[2])),
                (s = s[3]),
                (a = a[3]);
            } while (0 == e);
          }
          return 0 <= e;
        });
      }
      h.document && B ? (X = K() || parseInt(U, 10) || void 0) : (X = void 0);
      var tt = X,
        et = !B || 9 <= Number(tt),
        nt = B && !$("9"),
        rt = (function () {
          if (!h.addEventListener || !Object.defineProperty) return !1;
          var t = !1,
            e = Object.defineProperty({}, "passive", {
              get: function () {
                t = !0;
              },
            });
          try {
            h.addEventListener("test", l, e),
              h.removeEventListener("test", l, e);
          } catch (t) {}
          return t;
        })();
      function it(t, e) {
        (this.type = t),
          (this.a = this.target = e),
          (this.defaultPrevented = !1);
      }
      function ot(t, e) {
        if (
          (it.call(this, t ? t.type : ""),
          (this.relatedTarget = this.a = this.target = null),
          (this.button =
            this.screenY =
            this.screenX =
            this.clientY =
            this.clientX =
              0),
          (this.key = ""),
          (this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1),
          (this.pointerId = 0),
          (this.pointerType = ""),
          (this.c = null),
          t)
        ) {
          var n = (this.type = t.type),
            r =
              t.changedTouches && t.changedTouches.length
                ? t.changedTouches[0]
                : null;
          if (
            ((this.target = t.target || t.srcElement),
            (this.a = e),
            (e = t.relatedTarget))
          ) {
            if (z) {
              t: {
                try {
                  F(e.nodeName);
                  var i = !0;
                  break t;
                } catch (t) {}
                i = !1;
              }
              i || (e = null);
            }
          } else
            "mouseover" == n
              ? (e = t.fromElement)
              : "mouseout" == n && (e = t.toElement);
          (this.relatedTarget = e),
            r
              ? ((this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX),
                (this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY),
                (this.screenX = r.screenX || 0),
                (this.screenY = r.screenY || 0))
              : ((this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX),
                (this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY),
                (this.screenX = t.screenX || 0),
                (this.screenY = t.screenY || 0)),
            (this.button = t.button),
            (this.key = t.key || ""),
            (this.ctrlKey = t.ctrlKey),
            (this.altKey = t.altKey),
            (this.shiftKey = t.shiftKey),
            (this.metaKey = t.metaKey),
            (this.pointerId = t.pointerId || 0),
            (this.pointerType =
              "string" == typeof t.pointerType
                ? t.pointerType
                : st[t.pointerType] || ""),
            (this.c = t),
            t.defaultPrevented && this.b();
        }
      }
      (it.prototype.b = function () {
        this.defaultPrevented = !0;
      }),
        _(ot, it);
      var st = { 2: "touch", 3: "pen", 4: "mouse" };
      ot.prototype.b = function () {
        ot.X.b.call(this);
        var t = this.c;
        if (t.preventDefault) t.preventDefault();
        else if (((t.returnValue = !1), nt))
          try {
            (t.ctrlKey || (112 <= t.keyCode && 123 >= t.keyCode)) &&
              (t.keyCode = -1);
          } catch (t) {}
      };
      var at = "closure_listenable_" + ((1e6 * Math.random()) | 0),
        ut = 0;
      function ct(t, e, n, r, i) {
        (this.listener = t),
          (this.proxy = null),
          (this.src = e),
          (this.type = n),
          (this.capture = !!r),
          (this.ca = i),
          (this.key = ++ut),
          (this.Y = this.Z = !1);
      }
      function ht(t) {
        (t.Y = !0),
          (t.listener = null),
          (t.proxy = null),
          (t.src = null),
          (t.ca = null);
      }
      function lt(t) {
        (this.src = t), (this.a = {}), (this.b = 0);
      }
      function ft(t, e) {
        var n = e.type;
        if (n in t.a) {
          var r,
            i = t.a[n],
            o = E(i, e);
          (r = 0 <= o) && Array.prototype.splice.call(i, o, 1),
            r && (ht(e), 0 == t.a[n].length && (delete t.a[n], t.b--));
        }
      }
      function pt(t, e, n, r) {
        for (var i = 0; i < t.length; ++i) {
          var o = t[i];
          if (!o.Y && o.listener == e && o.capture == !!n && o.ca == r)
            return i;
        }
        return -1;
      }
      lt.prototype.add = function (t, e, n, r, i) {
        var o = t.toString();
        (t = this.a[o]) || ((t = this.a[o] = []), this.b++);
        var s = pt(t, e, r, i);
        return (
          -1 < s
            ? ((e = t[s]), n || (e.Z = !1))
            : (((e = new ct(e, this.src, o, !!r, i)).Z = n), t.push(e)),
          e
        );
      };
      var dt = "closure_lm_" + ((1e6 * Math.random()) | 0),
        vt = {};
      function gt(t, e, n, r, i) {
        if (r && r.once) return yt(t, e, n, r, i);
        if (Array.isArray(e)) {
          for (var o = 0; o < e.length; o++) gt(t, e[o], n, r, i);
          return null;
        }
        return (
          (n = Ct(n)),
          t && t[at]
            ? t.va(e, n, p(r) ? !!r.capture : !!r, i)
            : mt(t, e, n, !1, r, i)
        );
      }
      function mt(t, e, n, r, i, o) {
        if (!e) throw Error("Invalid event type");
        var s = p(i) ? !!i.capture : !!i;
        if (s && !et) return null;
        var a = Tt(t);
        if ((a || (t[dt] = a = new lt(t)), (n = a.add(e, n, r, s, o)).proxy))
          return n;
        if (
          ((r = (function () {
            var t = Et,
              e = et
                ? function (n) {
                    return t.call(e.src, e.listener, n);
                  }
                : function (n) {
                    if (!(n = t.call(e.src, e.listener, n))) return n;
                  };
            return e;
          })()),
          (n.proxy = r),
          (r.src = t),
          (r.listener = n),
          t.addEventListener)
        )
          rt || (i = s),
            void 0 === i && (i = !1),
            t.addEventListener(e.toString(), r, i);
        else if (t.attachEvent) t.attachEvent(_t(e.toString()), r);
        else {
          if (!t.addListener || !t.removeListener)
            throw Error("addEventListener and attachEvent are unavailable.");
          t.addListener(r);
        }
        return n;
      }
      function yt(t, e, n, r, i) {
        if (Array.isArray(e)) {
          for (var o = 0; o < e.length; o++) yt(t, e[o], n, r, i);
          return null;
        }
        return (
          (n = Ct(n)),
          t && t[at]
            ? t.wa(e, n, p(r) ? !!r.capture : !!r, i)
            : mt(t, e, n, !0, r, i)
        );
      }
      function bt(t, e, n, r, i) {
        if (Array.isArray(e))
          for (var o = 0; o < e.length; o++) bt(t, e[o], n, r, i);
        else
          (r = p(r) ? !!r.capture : !!r),
            (n = Ct(n)),
            t && t[at]
              ? ((t = t.c),
                (e = String(e).toString()) in t.a &&
                  -1 < (n = pt((o = t.a[e]), n, r, i)) &&
                  (ht(o[n]),
                  Array.prototype.splice.call(o, n, 1),
                  0 == o.length && (delete t.a[e], t.b--)))
              : t &&
                (t = Tt(t)) &&
                ((e = t.a[e.toString()]),
                (t = -1),
                e && (t = pt(e, n, r, i)),
                (n = -1 < t ? e[t] : null) && wt(n));
      }
      function wt(t) {
        if ("number" != typeof t && t && !t.Y) {
          var e = t.src;
          if (e && e[at]) ft(e.c, t);
          else {
            var n = t.type,
              r = t.proxy;
            e.removeEventListener
              ? e.removeEventListener(n, r, t.capture)
              : e.detachEvent
              ? e.detachEvent(_t(n), r)
              : e.addListener && e.removeListener && e.removeListener(r),
              (n = Tt(e))
                ? (ft(n, t), 0 == n.b && ((n.src = null), (e[dt] = null)))
                : ht(t);
          }
        }
      }
      function _t(t) {
        return t in vt ? vt[t] : (vt[t] = "on" + t);
      }
      function It(t, e) {
        var n = t.listener,
          r = t.ca || t.src;
        return t.Z && wt(t), n.call(r, e);
      }
      function Et(t, e) {
        if (t.Y) return !0;
        if (!et) {
          if (!e)
            t: {
              e = ["window", "event"];
              for (var n = h, r = 0; r < e.length; r++)
                if (null == (n = n[e[r]])) {
                  e = null;
                  break t;
                }
              e = n;
            }
          return It(t, (e = new ot(e, this)));
        }
        return It(t, new ot(e, this));
      }
      function Tt(t) {
        return (t = t[dt]) instanceof lt ? t : null;
      }
      var St = "__closure_events_fn_" + ((1e9 * Math.random()) >>> 0);
      function Ct(t) {
        return "function" == typeof t
          ? t
          : (t[St] ||
              (t[St] = function (e) {
                return t.handleEvent(e);
              }),
            t[St]);
      }
      function kt() {
        I.call(this), (this.c = new lt(this)), (this.J = this), (this.C = null);
      }
      function Nt(t, e) {
        var n,
          r = t.C;
        if (r) for (n = []; r; r = r.C) n.push(r);
        if (((t = t.J), (r = e.type || e), "string" == typeof e))
          e = new it(e, t);
        else if (e instanceof it) e.target = e.target || t;
        else {
          var i = e;
          j((e = new it(r, t)), i);
        }
        if (((i = !0), n))
          for (var o = n.length - 1; 0 <= o; o--) {
            var s = (e.a = n[o]);
            i = At(s, r, !0, e) && i;
          }
        if (
          ((i = At((s = e.a = t), r, !0, e) && i),
          (i = At(s, r, !1, e) && i),
          n)
        )
          for (o = 0; o < n.length; o++)
            i = At((s = e.a = n[o]), r, !1, e) && i;
      }
      function At(t, e, n, r) {
        if (!(e = t.c.a[String(e)])) return !0;
        e = e.concat();
        for (var i = !0, o = 0; o < e.length; ++o) {
          var s = e[o];
          if (s && !s.Y && s.capture == n) {
            var a = s.listener,
              u = s.ca || s.src;
            s.Z && ft(t.c, s), (i = !1 !== a.call(u, r) && i);
          }
        }
        return i && !r.defaultPrevented;
      }
      _(kt, I),
        (kt.prototype[at] = !0),
        ((a = kt.prototype).addEventListener = function (t, e, n, r) {
          gt(this, t, e, n, r);
        }),
        (a.removeEventListener = function (t, e, n, r) {
          bt(this, t, e, n, r);
        }),
        (a.G = function () {
          if ((kt.X.G.call(this), this.c)) {
            var t,
              e = this.c;
            for (t in e.a) {
              for (var n = e.a[t], r = 0; r < n.length; r++) ht(n[r]);
              delete e.a[t], e.b--;
            }
          }
          this.C = null;
        }),
        (a.va = function (t, e, n, r) {
          return this.c.add(String(t), e, !1, n, r);
        }),
        (a.wa = function (t, e, n, r) {
          return this.c.add(String(t), e, !0, n, r);
        });
      var Pt = h.JSON.stringify;
      function Dt() {
        this.b = this.a = null;
      }
      var xt,
        Ot = new ((function () {
          function t(t, e) {
            (this.c = t), (this.f = e), (this.b = 0), (this.a = null);
          }
          return (
            (t.prototype.get = function () {
              var t;
              return (
                0 < this.b
                  ? (this.b--, (t = this.a), (this.a = t.next), (t.next = null))
                  : (t = this.c()),
                t
              );
            }),
            t
          );
        })())(
          function () {
            return new Mt();
          },
          function (t) {
            t.reset();
          }
        );
      function Rt() {
        var t = Ut,
          e = null;
        return (
          t.a &&
            ((e = t.a), (t.a = t.a.next), t.a || (t.b = null), (e.next = null)),
          e
        );
      }
      function Mt() {
        this.next = this.b = this.a = null;
      }
      function Lt(t) {
        h.setTimeout(function () {
          throw t;
        }, 0);
      }
      function jt(t, e) {
        xt ||
          (function () {
            var t = h.Promise.resolve(void 0);
            xt = function () {
              t.then(Vt);
            };
          })(),
          Ft || (xt(), (Ft = !0)),
          Ut.add(t, e);
      }
      (Dt.prototype.add = function (t, e) {
        var n = Ot.get();
        n.set(t, e), this.b ? (this.b.next = n) : (this.a = n), (this.b = n);
      }),
        (Mt.prototype.set = function (t, e) {
          (this.a = t), (this.b = e), (this.next = null);
        }),
        (Mt.prototype.reset = function () {
          this.next = this.b = this.a = null;
        });
      var Ft = !1,
        Ut = new Dt();
      function Vt() {
        for (var t; (t = Rt()); ) {
          try {
            t.a.call(t.b);
          } catch (t) {
            Lt(t);
          }
          var e = Ot;
          e.f(t), 100 > e.b && (e.b++, (t.next = e.a), (e.a = t));
        }
        Ft = !1;
      }
      function qt(t, e) {
        kt.call(this),
          (this.b = t || 1),
          (this.a = e || h),
          (this.f = y(this.Za, this)),
          (this.g = w());
      }
      function Bt(t) {
        (t.aa = !1), t.M && (t.a.clearTimeout(t.M), (t.M = null));
      }
      function Gt(t, e, n) {
        if ("function" == typeof t) n && (t = y(t, n));
        else {
          if (!t || "function" != typeof t.handleEvent)
            throw Error("Invalid listener argument");
          t = y(t.handleEvent, t);
        }
        return 2147483647 < Number(e) ? -1 : h.setTimeout(t, e || 0);
      }
      function Wt(t) {
        t.a = Gt(function () {
          (t.a = null), t.c && ((t.c = !1), Wt(t));
        }, t.h);
        var e = t.b;
        (t.b = null), t.g.apply(null, e);
      }
      _(qt, kt),
        ((a = qt.prototype).aa = !1),
        (a.M = null),
        (a.Za = function () {
          if (this.aa) {
            var t = w() - this.g;
            0 < t && t < 0.8 * this.b
              ? (this.M = this.a.setTimeout(this.f, this.b - t))
              : (this.M && (this.a.clearTimeout(this.M), (this.M = null)),
                Nt(this, "tick"),
                this.aa && (Bt(this), this.start()));
          }
        }),
        (a.start = function () {
          (this.aa = !0),
            this.M ||
              ((this.M = this.a.setTimeout(this.f, this.b)), (this.g = w()));
        }),
        (a.G = function () {
          qt.X.G.call(this), Bt(this), delete this.a;
        });
      var zt = (function (t) {
        function e(e, n) {
          var r = t.call(this) || this;
          return (
            (r.g = e), (r.h = n), (r.b = null), (r.c = !1), (r.a = null), r
          );
        }
        return (
          (function (t, e) {
            function n() {
              this.constructor = t;
            }
            o(t, e),
              (t.prototype =
                null === e
                  ? Object.create(e)
                  : ((n.prototype = e.prototype), new n()));
          })(e, t),
          (e.prototype.f = function (t) {
            (this.b = arguments), this.a ? (this.c = !0) : Wt(this);
          }),
          (e.prototype.G = function () {
            t.prototype.G.call(this),
              this.a &&
                (h.clearTimeout(this.a),
                (this.a = null),
                (this.c = !1),
                (this.b = null));
          }),
          e
        );
      })(I);
      function Ht(t) {
        I.call(this), (this.b = t), (this.a = {});
      }
      _(Ht, I);
      var Kt = [];
      function Jt(t, e, n, r) {
        Array.isArray(n) || (n && (Kt[0] = n.toString()), (n = Kt));
        for (var i = 0; i < n.length; i++) {
          var o = gt(e, n[i], r || t.handleEvent, !1, t.b || t);
          if (!o) break;
          t.a[o.key] = o;
        }
      }
      function Qt(t) {
        R(
          t.a,
          function (t, e) {
            this.a.hasOwnProperty(e) && wt(t);
          },
          t
        ),
          (t.a = {});
      }
      function Yt() {
        this.a = !0;
      }
      function Xt(t, e, n, r) {
        t.info(function () {
          return (
            "XMLHTTP TEXT (" +
            e +
            "): " +
            (function (t, e) {
              if (!t.a) return e;
              if (!e) return null;
              try {
                var n = JSON.parse(e);
                if (n)
                  for (t = 0; t < n.length; t++)
                    if (Array.isArray(n[t])) {
                      var r = n[t];
                      if (!(2 > r.length)) {
                        var i = r[1];
                        if (Array.isArray(i) && !(1 > i.length)) {
                          var o = i[0];
                          if ("noop" != o && "stop" != o && "close" != o)
                            for (var s = 1; s < i.length; s++) i[s] = "";
                        }
                      }
                    }
                return Pt(n);
              } catch (t) {
                return e;
              }
            })(t, n) +
            (r ? " " + r : "")
          );
        });
      }
      (Ht.prototype.G = function () {
        Ht.X.G.call(this), Qt(this);
      }),
        (Ht.prototype.handleEvent = function () {
          throw Error("EventHandler.handleEvent not implemented");
        }),
        (Yt.prototype.info = function () {});
      var Zt = {},
        $t = null;
      function te() {
        return ($t = $t || new kt());
      }
      function ee(t) {
        it.call(this, Zt.Fa, t);
      }
      function ne(t) {
        var e = te();
        Nt(e, new ee(e, t));
      }
      function re(t, e) {
        it.call(this, Zt.STAT_EVENT, t), (this.stat = e);
      }
      function ie(t) {
        var e = te();
        Nt(e, new re(e, t));
      }
      function oe(t) {
        it.call(this, Zt.Ga, t);
      }
      function se(t, e) {
        if ("function" != typeof t)
          throw Error("Fn must not be null and must be a function");
        return h.setTimeout(function () {
          t();
        }, e);
      }
      (Zt.Fa = "serverreachability"),
        _(ee, it),
        (Zt.STAT_EVENT = "statevent"),
        _(re, it),
        (Zt.Ga = "timingevent"),
        _(oe, it);
      var ae = {
          NO_ERROR: 0,
          $a: 1,
          nb: 2,
          mb: 3,
          hb: 4,
          lb: 5,
          ob: 6,
          Da: 7,
          TIMEOUT: 8,
          rb: 9,
        },
        ue = {
          fb: "complete",
          Bb: "success",
          Ea: "error",
          Da: "abort",
          tb: "ready",
          ub: "readystatechange",
          TIMEOUT: "timeout",
          pb: "incrementaldata",
          sb: "progress",
          ib: "downloadprogress",
          Jb: "uploadprogress",
        };
      function ce() {}
      function he(t) {
        var e;
        return (e = t.a) || (e = t.a = {}), e;
      }
      function le() {}
      ce.prototype.a = null;
      var fe,
        pe = { OPEN: "a", eb: "b", Ea: "c", qb: "d" };
      function de() {
        it.call(this, "d");
      }
      function ve() {
        it.call(this, "c");
      }
      function ge() {}
      function me(t, e, n, r) {
        (this.g = t),
          (this.c = e),
          (this.f = n),
          (this.S = r || 1),
          (this.J = new Ht(this)),
          (this.P = ye),
          (t = W ? 125 : void 0),
          (this.R = new qt(t)),
          (this.B = null),
          (this.b = !1),
          (this.j = this.l = this.i = this.H = this.u = this.T = this.o = null),
          (this.s = []),
          (this.a = null),
          (this.D = 0),
          (this.h = this.m = null),
          (this.N = -1),
          (this.A = !1),
          (this.O = 0),
          (this.F = null),
          (this.V = this.C = this.U = this.I = !1);
      }
      _(de, it), _(ve, it), _(ge, ce), (fe = new ge());
      var ye = 45e3,
        be = {},
        we = {};
      function _e(t, e, n) {
        (t.H = 1), (t.i = Ge(je(e))), (t.j = n), (t.I = !0), Ie(t, null);
      }
      function Ie(t, e) {
        (t.u = w()), Se(t), (t.l = je(t.i));
        var n = t.l,
          r = t.S;
        Array.isArray(r) || (r = [String(r)]),
          nn(n.b, "t", r),
          (t.D = 0),
          (t.a = Xn(t.g, t.g.C ? e : null)),
          0 < t.O && (t.F = new zt(y(t.Ca, t, t.a), t.O)),
          Jt(t.J, t.a, "readystatechange", t.Xa),
          (e = t.B ? M(t.B) : {}),
          t.j
            ? (t.m || (t.m = "POST"),
              (e["Content-Type"] = "application/x-www-form-urlencoded"),
              t.a.ba(t.l, t.m, t.j, e))
            : ((t.m = "GET"), t.a.ba(t.l, t.m, null, e)),
          ne(1),
          (function (t, e, n, r, i, o) {
            t.info(function () {
              if (t.a)
                if (o)
                  for (var s = "", a = o.split("&"), u = 0; u < a.length; u++) {
                    var c = a[u].split("=");
                    if (1 < c.length) {
                      var h = c[0];
                      c = c[1];
                      var l = h.split("_");
                      s =
                        2 <= l.length && "type" == l[1]
                          ? s + (h + "=") + c + "&"
                          : s + (h + "=redacted&");
                    }
                  }
                else s = null;
              else s = o;
              return (
                "XMLHTTP REQ (" +
                r +
                ") [attempt " +
                i +
                "]: " +
                e +
                "\n" +
                n +
                "\n" +
                s
              );
            });
          })(t.c, t.m, t.l, t.f, t.S, t.j);
      }
      function Ee(t, e, n) {
        for (var r = !0; !t.A && t.D < n.length; ) {
          var i = Te(t, n);
          if (i == we) {
            4 == e && ((t.h = 4), ie(14), (r = !1)),
              Xt(t.c, t.f, null, "[Incomplete Response]");
            break;
          }
          if (i == be) {
            (t.h = 4), ie(15), Xt(t.c, t.f, n, "[Invalid Chunk]"), (r = !1);
            break;
          }
          Xt(t.c, t.f, i, null), Pe(t, i);
        }
        4 == e && 0 == n.length && ((t.h = 1), ie(16), (r = !1)),
          (t.b = t.b && r),
          r
            ? 0 < n.length &&
              !t.V &&
              ((t.V = !0),
              (e = t.g).a == t &&
                e.U &&
                !e.F &&
                (e.c.info(
                  "Great, no buffering proxy detected. Bytes received: " +
                    n.length
                ),
                Gn(e),
                (e.F = !0),
                ie(11)))
            : (Xt(t.c, t.f, n, "[Invalid Chunked Response]"), Ae(t), Ne(t));
      }
      function Te(t, e) {
        var n = t.D,
          r = e.indexOf("\n", n);
        return -1 == r
          ? we
          : ((n = Number(e.substring(n, r))),
            isNaN(n)
              ? be
              : (r += 1) + n > e.length
              ? we
              : ((e = e.substr(r, n)), (t.D = r + n), e));
      }
      function Se(t) {
        (t.T = w() + t.P), Ce(t, t.P);
      }
      function Ce(t, e) {
        if (null != t.o) throw Error("WatchDog timer not null");
        t.o = se(y(t.Va, t), e);
      }
      function ke(t) {
        t.o && (h.clearTimeout(t.o), (t.o = null));
      }
      function Ne(t) {
        0 == t.g.v || t.A || Hn(t.g, t);
      }
      function Ae(t) {
        ke(t);
        var e = t.F;
        e && "function" == typeof e.ja && e.ja(),
          (t.F = null),
          Bt(t.R),
          Qt(t.J),
          t.a && ((e = t.a), (t.a = null), e.abort(), e.ja());
      }
      function Pe(t, e) {
        try {
          var n = t.g;
          if (0 != n.v && (n.a == t || hn(n.b, t)))
            if (((n.I = t.N), !t.C && hn(n.b, t) && 3 == n.v)) {
              try {
                var r = n.ka.a.parse(e);
              } catch (t) {
                r = null;
              }
              if (Array.isArray(r) && 3 == r.length) {
                var i = r;
                if (0 == i[0]) {
                  t: if (!n.j) {
                    if (n.a) {
                      if (!(n.a.u + 3e3 < t.u)) break t;
                      zn(n), Rn(n);
                    }
                    Bn(n), ie(18);
                  }
                } else
                  (n.oa = i[1]),
                    0 < n.oa - n.P &&
                      37500 > i[2] &&
                      n.H &&
                      0 == n.o &&
                      !n.m &&
                      (n.m = se(y(n.Sa, n), 6e3));
                if (1 >= cn(n.b) && n.ea) {
                  try {
                    n.ea();
                  } catch (t) {}
                  n.ea = void 0;
                }
              } else Jn(n, 11);
            } else if (((t.C || n.a == t) && zn(n), !k(e)))
              for (e = r = n.ka.a.parse(e), r = 0; r < e.length; r++)
                if (((i = e[r]), (n.P = i[0]), (i = i[1]), 2 == n.v))
                  if ("c" == i[0]) {
                    (n.J = i[1]), (n.ga = i[2]);
                    var o = i[3];
                    null != o && ((n.ha = o), n.c.info("VER=" + n.ha));
                    var s = i[4];
                    null != s && ((n.pa = s), n.c.info("SVER=" + n.pa));
                    var a = i[5];
                    if (null != a && "number" == typeof a && 0 < a) {
                      var u = 1.5 * a;
                      (n.D = u), n.c.info("backChannelRequestTimeoutMs_=" + u);
                    }
                    u = n;
                    var c = t.a;
                    if (c) {
                      var h = c.a
                        ? c.a.getResponseHeader("X-Client-Wire-Protocol")
                        : null;
                      if (h) {
                        var l = u.b;
                        !l.a &&
                          (P(h, "spdy") || P(h, "quic") || P(h, "h2")) &&
                          ((l.f = l.g),
                          (l.a = new Set()),
                          l.b && (ln(l, l.b), (l.b = null)));
                      }
                      if (u.A) {
                        var f = c.a
                          ? c.a.getResponseHeader("X-HTTP-Session-Id")
                          : null;
                        f && ((u.na = f), Be(u.B, u.A, f));
                      }
                    }
                    (n.v = 3),
                      n.f && n.f.ta(),
                      n.U &&
                        ((n.N = w() - t.u),
                        n.c.info("Handshake RTT: " + n.N + "ms"));
                    var p = t;
                    if ((((u = n).la = Yn(u, u.C ? u.ga : null, u.fa)), p.C)) {
                      fn(u.b, p);
                      var d = p,
                        v = u.D;
                      v && d.setTimeout(v), d.o && (ke(d), Se(d)), (u.a = p);
                    } else qn(u);
                    0 < n.g.length && jn(n);
                  } else ("stop" != i[0] && "close" != i[0]) || Jn(n, 7);
                else
                  3 == n.v &&
                    ("stop" == i[0] || "close" == i[0]
                      ? "stop" == i[0]
                        ? Jn(n, 7)
                        : On(n)
                      : "noop" != i[0] && n.f && n.f.sa(i),
                    (n.o = 0));
          ne(4);
        } catch (t) {}
      }
      function De(t, e) {
        if (t.forEach && "function" == typeof t.forEach) t.forEach(e, void 0);
        else if (f(t) || "string" == typeof t) T(t, e, void 0);
        else {
          if (t.L && "function" == typeof t.L) var n = t.L();
          else if (t.K && "function" == typeof t.K) n = void 0;
          else if (f(t) || "string" == typeof t) {
            n = [];
            for (var r = t.length, i = 0; i < r; i++) n.push(i);
          } else for (i in ((n = []), (r = 0), t)) n[r++] = i;
          i = (r = (function (t) {
            if (t.K && "function" == typeof t.K) return t.K();
            if ("string" == typeof t) return t.split("");
            if (f(t)) {
              for (var e = [], n = t.length, r = 0; r < n; r++) e.push(t[r]);
              return e;
            }
            for (r in ((e = []), (n = 0), t)) e[n++] = t[r];
            return e;
          })(t)).length;
          for (var o = 0; o < i; o++) e.call(void 0, r[o], n && n[o], t);
        }
      }
      function xe(t, e) {
        (this.b = {}), (this.a = []), (this.c = 0);
        var n = arguments.length;
        if (1 < n) {
          if (n % 2) throw Error("Uneven number of arguments");
          for (var r = 0; r < n; r += 2)
            this.set(arguments[r], arguments[r + 1]);
        } else if (t)
          if (t instanceof xe)
            for (n = t.L(), r = 0; r < n.length; r++)
              this.set(n[r], t.get(n[r]));
          else for (r in t) this.set(r, t[r]);
      }
      function Oe(t) {
        if (t.c != t.a.length) {
          for (var e = 0, n = 0; e < t.a.length; ) {
            var r = t.a[e];
            Re(t.b, r) && (t.a[n++] = r), e++;
          }
          t.a.length = n;
        }
        if (t.c != t.a.length) {
          var i = {};
          for (n = e = 0; e < t.a.length; )
            Re(i, (r = t.a[e])) || ((t.a[n++] = r), (i[r] = 1)), e++;
          t.a.length = n;
        }
      }
      function Re(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e);
      }
      ((a = me.prototype).setTimeout = function (t) {
        this.P = t;
      }),
        (a.Xa = function (t) {
          t = t.target;
          var e = this.F;
          e && 3 == An(t) ? e.f() : this.Ca(t);
        }),
        (a.Ca = function (t) {
          try {
            if (t == this.a)
              t: {
                var e = An(this.a),
                  n = this.a.ua(),
                  r = this.a.W();
                if (!(3 > e || (3 == e && !W && !this.a.$()))) {
                  this.A || 4 != e || 7 == n || ne(8 == n || 0 >= r ? 3 : 2),
                    ke(this);
                  var i = this.a.W();
                  this.N = i;
                  var o = this.a.$();
                  if (
                    ((this.b = 200 == i),
                    (function (t, e, n, r, i, o, s) {
                      t.info(function () {
                        return (
                          "XMLHTTP RESP (" +
                          r +
                          ") [ attempt " +
                          i +
                          "]: " +
                          e +
                          "\n" +
                          n +
                          "\n" +
                          o +
                          " " +
                          s
                        );
                      });
                    })(this.c, this.m, this.l, this.f, this.S, e, i),
                    this.b)
                  ) {
                    if (this.U && !this.C) {
                      e: {
                        if (this.a) {
                          var s,
                            a = this.a;
                          if (
                            (s = a.a
                              ? a.a.getResponseHeader("X-HTTP-Initial-Response")
                              : null) &&
                            !k(s)
                          ) {
                            var u = s;
                            break e;
                          }
                        }
                        u = null;
                      }
                      if (!u) {
                        (this.b = !1), (this.h = 3), ie(12), Ae(this), Ne(this);
                        break t;
                      }
                      Xt(
                        this.c,
                        this.f,
                        u,
                        "Initial handshake response via X-HTTP-Initial-Response"
                      ),
                        (this.C = !0),
                        Pe(this, u);
                    }
                    this.I
                      ? (Ee(this, e, o),
                        W &&
                          this.b &&
                          3 == e &&
                          (Jt(this.J, this.R, "tick", this.Wa), this.R.start()))
                      : (Xt(this.c, this.f, o, null), Pe(this, o)),
                      4 == e && Ae(this),
                      this.b &&
                        !this.A &&
                        (4 == e ? Hn(this.g, this) : ((this.b = !1), Se(this)));
                  } else
                    400 == i && 0 < o.indexOf("Unknown SID")
                      ? ((this.h = 3), ie(12))
                      : ((this.h = 0), ie(13)),
                      Ae(this),
                      Ne(this);
                }
              }
          } catch (t) {}
        }),
        (a.Wa = function () {
          if (this.a) {
            var t = An(this.a),
              e = this.a.$();
            this.D < e.length &&
              (ke(this), Ee(this, t, e), this.b && 4 != t && Se(this));
          }
        }),
        (a.cancel = function () {
          (this.A = !0), Ae(this);
        }),
        (a.Va = function () {
          this.o = null;
          var t = w();
          0 <= t - this.T
            ? ((function (t, e) {
                t.info(function () {
                  return "TIMEOUT: " + e;
                });
              })(this.c, this.l),
              2 != this.H && (ne(3), ie(17)),
              Ae(this),
              (this.h = 2),
              Ne(this))
            : Ce(this, this.T - t);
        }),
        ((a = xe.prototype).K = function () {
          Oe(this);
          for (var t = [], e = 0; e < this.a.length; e++)
            t.push(this.b[this.a[e]]);
          return t;
        }),
        (a.L = function () {
          return Oe(this), this.a.concat();
        }),
        (a.get = function (t, e) {
          return Re(this.b, t) ? this.b[t] : e;
        }),
        (a.set = function (t, e) {
          Re(this.b, t) || (this.c++, this.a.push(t)), (this.b[t] = e);
        }),
        (a.forEach = function (t, e) {
          for (var n = this.L(), r = 0; r < n.length; r++) {
            var i = n[r],
              o = this.get(i);
            t.call(e, o, i, this);
          }
        });
      var Me =
        /^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;
      function Le(t, e) {
        if (
          ((this.c = this.j = this.f = ""),
          (this.h = null),
          (this.i = this.g = ""),
          (this.a = !1),
          t instanceof Le)
        ) {
          (this.a = void 0 !== e ? e : t.a),
            Fe(this, t.f),
            (this.j = t.j),
            Ue(this, t.c),
            Ve(this, t.h),
            (this.g = t.g),
            (e = t.b);
          var n = new Ze();
          (n.c = e.c),
            e.a && ((n.a = new xe(e.a)), (n.b = e.b)),
            qe(this, n),
            (this.i = t.i);
        } else
          t && (n = String(t).match(Me))
            ? ((this.a = !!e),
              Fe(this, n[1] || "", !0),
              (this.j = We(n[2] || "")),
              Ue(this, n[3] || "", !0),
              Ve(this, n[4]),
              (this.g = We(n[5] || "", !0)),
              qe(this, n[6] || "", !0),
              (this.i = We(n[7] || "")))
            : ((this.a = !!e), (this.b = new Ze(null, this.a)));
      }
      function je(t) {
        return new Le(t);
      }
      function Fe(t, e, n) {
        (t.f = n ? We(e, !0) : e), t.f && (t.f = t.f.replace(/:$/, ""));
      }
      function Ue(t, e, n) {
        t.c = n ? We(e, !0) : e;
      }
      function Ve(t, e) {
        if (e) {
          if (((e = Number(e)), isNaN(e) || 0 > e))
            throw Error("Bad port number " + e);
          t.h = e;
        } else t.h = null;
      }
      function qe(t, e, n) {
        e instanceof Ze
          ? ((t.b = e),
            (function (t, e) {
              e &&
                !t.f &&
                ($e(t),
                (t.c = null),
                t.a.forEach(function (t, e) {
                  var n = e.toLowerCase();
                  e != n && (tn(this, e), nn(this, n, t));
                }, t)),
                (t.f = e);
            })(t.b, t.a))
          : (n || (e = ze(e, Ye)), (t.b = new Ze(e, t.a)));
      }
      function Be(t, e, n) {
        t.b.set(e, n);
      }
      function Ge(t) {
        return (
          Be(
            t,
            "zx",
            Math.floor(2147483648 * Math.random()).toString(36) +
              Math.abs(Math.floor(2147483648 * Math.random()) ^ w()).toString(
                36
              )
          ),
          t
        );
      }
      function We(t, e) {
        return t
          ? e
            ? decodeURI(t.replace(/%25/g, "%2525"))
            : decodeURIComponent(t)
          : "";
      }
      function ze(t, e, n) {
        return "string" == typeof t
          ? ((t = encodeURI(t).replace(e, He)),
            n && (t = t.replace(/%25([0-9a-fA-F]{2})/g, "%$1")),
            t)
          : null;
      }
      function He(t) {
        return (
          "%" +
          (((t = t.charCodeAt(0)) >> 4) & 15).toString(16) +
          (15 & t).toString(16)
        );
      }
      Le.prototype.toString = function () {
        var t = [],
          e = this.f;
        e && t.push(ze(e, Ke, !0), ":");
        var n = this.c;
        return (
          (n || "file" == e) &&
            (t.push("//"),
            (e = this.j) && t.push(ze(e, Ke, !0), "@"),
            t.push(
              encodeURIComponent(String(n)).replace(
                /%25([0-9a-fA-F]{2})/g,
                "%$1"
              )
            ),
            null != (n = this.h) && t.push(":", String(n))),
          (n = this.g) &&
            (this.c && "/" != n.charAt(0) && t.push("/"),
            t.push(ze(n, "/" == n.charAt(0) ? Qe : Je, !0))),
          (n = this.b.toString()) && t.push("?", n),
          (n = this.i) && t.push("#", ze(n, Xe)),
          t.join("")
        );
      };
      var Ke = /[#\/\?@]/g,
        Je = /[#\?:]/g,
        Qe = /[#\?]/g,
        Ye = /[#\?@]/g,
        Xe = /#/g;
      function Ze(t, e) {
        (this.b = this.a = null), (this.c = t || null), (this.f = !!e);
      }
      function $e(t) {
        t.a ||
          ((t.a = new xe()),
          (t.b = 0),
          t.c &&
            (function (t, e) {
              if (t) {
                t = t.split("&");
                for (var n = 0; n < t.length; n++) {
                  var r = t[n].indexOf("="),
                    i = null;
                  if (0 <= r) {
                    var o = t[n].substring(0, r);
                    i = t[n].substring(r + 1);
                  } else o = t[n];
                  e(o, i ? decodeURIComponent(i.replace(/\+/g, " ")) : "");
                }
              }
            })(t.c, function (e, n) {
              t.add(decodeURIComponent(e.replace(/\+/g, " ")), n);
            }));
      }
      function tn(t, e) {
        $e(t),
          (e = rn(t, e)),
          Re(t.a.b, e) &&
            ((t.c = null),
            (t.b -= t.a.get(e).length),
            Re((t = t.a).b, e) &&
              (delete t.b[e], t.c--, t.a.length > 2 * t.c && Oe(t)));
      }
      function en(t, e) {
        return $e(t), (e = rn(t, e)), Re(t.a.b, e);
      }
      function nn(t, e, n) {
        tn(t, e),
          0 < n.length &&
            ((t.c = null), t.a.set(rn(t, e), C(n)), (t.b += n.length));
      }
      function rn(t, e) {
        return (e = String(e)), t.f && (e = e.toLowerCase()), e;
      }
      ((a = Ze.prototype).add = function (t, e) {
        $e(this), (this.c = null), (t = rn(this, t));
        var n = this.a.get(t);
        return n || this.a.set(t, (n = [])), n.push(e), (this.b += 1), this;
      }),
        (a.forEach = function (t, e) {
          $e(this),
            this.a.forEach(function (n, r) {
              T(
                n,
                function (n) {
                  t.call(e, n, r, this);
                },
                this
              );
            }, this);
        }),
        (a.L = function () {
          $e(this);
          for (
            var t = this.a.K(), e = this.a.L(), n = [], r = 0;
            r < e.length;
            r++
          )
            for (var i = t[r], o = 0; o < i.length; o++) n.push(e[r]);
          return n;
        }),
        (a.K = function (t) {
          $e(this);
          var e = [];
          if ("string" == typeof t)
            en(this, t) && (e = S(e, this.a.get(rn(this, t))));
          else {
            t = this.a.K();
            for (var n = 0; n < t.length; n++) e = S(e, t[n]);
          }
          return e;
        }),
        (a.set = function (t, e) {
          return (
            $e(this),
            (this.c = null),
            en(this, (t = rn(this, t))) && (this.b -= this.a.get(t).length),
            this.a.set(t, [e]),
            (this.b += 1),
            this
          );
        }),
        (a.get = function (t, e) {
          return t && 0 < (t = this.K(t)).length ? String(t[0]) : e;
        }),
        (a.toString = function () {
          if (this.c) return this.c;
          if (!this.a) return "";
          for (var t = [], e = this.a.L(), n = 0; n < e.length; n++) {
            var r = e[n],
              i = encodeURIComponent(String(r));
            r = this.K(r);
            for (var o = 0; o < r.length; o++) {
              var s = i;
              "" !== r[o] && (s += "=" + encodeURIComponent(String(r[o]))),
                t.push(s);
            }
          }
          return (this.c = t.join("&"));
        });
      var on = function (t, e) {
        (this.b = t), (this.a = e);
      };
      function sn(t) {
        (this.g = t || an),
          (t = h.PerformanceNavigationTiming
            ? 0 < (t = h.performance.getEntriesByType("navigation")).length &&
              ("hq" == t[0].nextHopProtocol || "h2" == t[0].nextHopProtocol)
            : !!(h.ia && h.ia.ya && h.ia.ya() && h.ia.ya().Lb)),
          (this.f = t ? this.g : 1),
          (this.a = null),
          1 < this.f && (this.a = new Set()),
          (this.b = null),
          (this.c = []);
      }
      var an = 10;
      function un(t) {
        return !!t.b || (!!t.a && t.a.size >= t.f);
      }
      function cn(t) {
        return t.b ? 1 : t.a ? t.a.size : 0;
      }
      function hn(t, e) {
        return t.b ? t.b == e : !!t.a && t.a.has(e);
      }
      function ln(t, e) {
        t.a ? t.a.add(e) : (t.b = e);
      }
      function fn(t, e) {
        t.b && t.b == e ? (t.b = null) : t.a && t.a.has(e) && t.a.delete(e);
      }
      function pn(t) {
        var e, n;
        if (null != t.b) return t.c.concat(t.b.s);
        if (null != t.a && 0 !== t.a.size) {
          var r = t.c;
          try {
            for (var i = s(t.a.values()), o = i.next(); !o.done; o = i.next()) {
              var a = o.value;
              r = r.concat(a.s);
            }
          } catch (t) {
            e = { error: t };
          } finally {
            try {
              o && !o.done && (n = i.return) && n.call(i);
            } finally {
              if (e) throw e.error;
            }
          }
          return r;
        }
        return C(t.c);
      }
      function dn() {}
      function vn() {
        this.a = new dn();
      }
      function gn(t, e, n) {
        var r = n || "";
        try {
          De(t, function (t, n) {
            var i = t;
            p(t) && (i = Pt(t)), e.push(r + n + "=" + encodeURIComponent(i));
          });
        } catch (t) {
          throw (e.push(r + "type=" + encodeURIComponent("_badmap")), t);
        }
      }
      function mn(t, e, n, r, i) {
        try {
          (e.onload = null),
            (e.onerror = null),
            (e.onabort = null),
            (e.ontimeout = null),
            i(r);
        } catch (t) {}
      }
      (sn.prototype.cancel = function () {
        var t, e;
        if (((this.c = pn(this)), this.b)) this.b.cancel(), (this.b = null);
        else if (this.a && 0 !== this.a.size) {
          try {
            for (
              var n = s(this.a.values()), r = n.next();
              !r.done;
              r = n.next()
            )
              r.value.cancel();
          } catch (e) {
            t = { error: e };
          } finally {
            try {
              r && !r.done && (e = n.return) && e.call(n);
            } finally {
              if (t) throw t.error;
            }
          }
          this.a.clear();
        }
      }),
        (dn.prototype.stringify = function (t) {
          return h.JSON.stringify(t, void 0);
        }),
        (dn.prototype.parse = function (t) {
          return h.JSON.parse(t, void 0);
        });
      var yn = h.JSON.parse;
      function bn(t) {
        kt.call(this),
          (this.headers = new xe()),
          (this.H = t || null),
          (this.b = !1),
          (this.s = this.a = null),
          (this.B = ""),
          (this.h = 0),
          (this.f = ""),
          (this.g = this.A = this.l = this.u = !1),
          (this.o = 0),
          (this.m = null),
          (this.I = wn),
          (this.D = this.F = !1);
      }
      _(bn, kt);
      var wn = "",
        _n = /^https?$/i,
        In = ["POST", "PUT"];
      function En(t) {
        return "content-type" == t.toLowerCase();
      }
      function Tn(t, e) {
        (t.b = !1),
          t.a && ((t.g = !0), t.a.abort(), (t.g = !1)),
          (t.f = e),
          (t.h = 5),
          Sn(t),
          kn(t);
      }
      function Sn(t) {
        t.u || ((t.u = !0), Nt(t, "complete"), Nt(t, "error"));
      }
      function Cn(t) {
        if (t.b && void 0 !== c && (!t.s[1] || 4 != An(t) || 2 != t.W()))
          if (t.l && 4 == An(t)) Gt(t.za, 0, t);
          else if ((Nt(t, "readystatechange"), 4 == An(t))) {
            t.b = !1;
            try {
              var e,
                n = t.W();
              t: switch (n) {
                case 200:
                case 201:
                case 202:
                case 204:
                case 206:
                case 304:
                case 1223:
                  var r = !0;
                  break t;
                default:
                  r = !1;
              }
              if (!(e = r)) {
                var i;
                if ((i = 0 === n)) {
                  var o = String(t.B).match(Me)[1] || null;
                  if (!o && h.self && h.self.location) {
                    var s = h.self.location.protocol;
                    o = s.substr(0, s.length - 1);
                  }
                  i = !_n.test(o ? o.toLowerCase() : "");
                }
                e = i;
              }
              if (e) Nt(t, "complete"), Nt(t, "success");
              else {
                t.h = 6;
                try {
                  var a = 2 < An(t) ? t.a.statusText : "";
                } catch (n) {
                  a = "";
                }
                (t.f = a + " [" + t.W() + "]"), Sn(t);
              }
            } finally {
              kn(t);
            }
          }
      }
      function kn(t, e) {
        if (t.a) {
          Nn(t);
          var n = t.a,
            r = t.s[0] ? l : null;
          (t.a = null), (t.s = null), e || Nt(t, "ready");
          try {
            n.onreadystatechange = r;
          } catch (t) {}
        }
      }
      function Nn(t) {
        t.a && t.D && (t.a.ontimeout = null),
          t.m && (h.clearTimeout(t.m), (t.m = null));
      }
      function An(t) {
        return t.a ? t.a.readyState : 0;
      }
      function Pn(t, e, n) {
        t: {
          for (r in n) {
            var r = !1;
            break t;
          }
          r = !0;
        }
        r ||
          ((n = (function (t) {
            var e = "";
            return (
              R(t, function (t, n) {
                (e += n), (e += ":"), (e += t), (e += "\r\n");
              }),
              e
            );
          })(n)),
          "string" == typeof t
            ? null != n && encodeURIComponent(String(n))
            : Be(t, e, n));
      }
      function Dn(t, e, n) {
        return (
          (n && n.internalChannelParams && n.internalChannelParams[t]) || e
        );
      }
      function xn(t) {
        (this.pa = 0),
          (this.g = []),
          (this.c = new Yt()),
          (this.ga =
            this.la =
            this.B =
            this.fa =
            this.a =
            this.na =
            this.A =
            this.V =
            this.i =
            this.O =
            this.l =
              null),
          (this.Oa = this.R = 0),
          (this.La = Dn("failFast", !1, t)),
          (this.H = this.m = this.j = this.h = this.f = null),
          (this.S = !0),
          (this.I = this.oa = this.P = -1),
          (this.T = this.o = this.u = 0),
          (this.Ha = Dn("baseRetryDelayMs", 5e3, t)),
          (this.Ra = Dn("retryDelaySeedMs", 1e4, t)),
          (this.Ma = Dn("forwardChannelMaxRetries", 2, t)),
          (this.ma = Dn("forwardChannelRequestTimeoutMs", 2e4, t)),
          (this.Na = (t && t.g) || void 0),
          (this.D = void 0),
          (this.C = (t && t.supportsCrossDomainXhr) || !1),
          (this.J = ""),
          (this.b = new sn(t && t.concurrentRequestLimit)),
          (this.ka = new vn()),
          (this.da = (t && t.fastHandshake) || !1),
          (this.Ia = (t && t.b) || !1),
          t && t.f && (this.c.a = !1),
          t && t.forceLongPolling && (this.S = !1),
          (this.U = (!this.da && this.S && t && t.detectBufferingProxy) || !1),
          (this.ea = void 0),
          (this.N = 0),
          (this.F = !1),
          (this.s = null),
          (this.Ka = (t && t.c) || !1) &&
            this.c.info("Opt-in to enable Chrome Origin Trials.");
      }
      function On(t) {
        if ((Mn(t), 3 == t.v)) {
          var e = t.R++,
            n = je(t.B);
          Be(n, "SID", t.J),
            Be(n, "RID", e),
            Be(n, "TYPE", "terminate"),
            Un(t, n),
            ((e = new me(t, t.c, e, void 0)).H = 2),
            (e.i = Ge(je(n))),
            (n = !1),
            h.navigator &&
              h.navigator.sendBeacon &&
              (n = h.navigator.sendBeacon(e.i.toString(), "")),
            !n && h.Image && ((new Image().src = e.i), (n = !0)),
            n || ((e.a = Xn(e.g, null)), e.a.ba(e.i)),
            (e.u = w()),
            Se(e);
        }
        Qn(t);
      }
      function Rn(t) {
        t.a && (Gn(t), t.a.cancel(), (t.a = null));
      }
      function Mn(t) {
        Rn(t),
          t.j && (h.clearTimeout(t.j), (t.j = null)),
          zn(t),
          t.b.cancel(),
          t.h && ("number" == typeof t.h && h.clearTimeout(t.h), (t.h = null));
      }
      function Ln(t, e) {
        t.g.push(new on(t.Oa++, e)), 3 == t.v && jn(t);
      }
      function jn(t) {
        un(t.b) || t.h || ((t.h = !0), jt(t.Ba, t), (t.u = 0));
      }
      function Fn(t, e) {
        var n;
        n = e ? e.f : t.R++;
        var r = je(t.B);
        Be(r, "SID", t.J),
          Be(r, "RID", n),
          Be(r, "AID", t.P),
          Un(t, r),
          t.i && t.l && Pn(r, t.i, t.l),
          (n = new me(t, t.c, n, t.u + 1)),
          null === t.i && (n.B = t.l),
          e && (t.g = e.s.concat(t.g)),
          (e = Vn(t, n, 1e3)),
          n.setTimeout(
            Math.round(0.5 * t.ma) + Math.round(0.5 * t.ma * Math.random())
          ),
          ln(t.b, n),
          _e(n, r, e);
      }
      function Un(t, e) {
        t.f &&
          De({}, function (t, n) {
            Be(e, n, t);
          });
      }
      function Vn(t, e, n) {
        n = Math.min(t.g.length, n);
        var r = t.f ? y(t.f.Ja, t.f, t) : null;
        t: for (var i = t.g, o = -1; ; ) {
          var s = ["count=" + n];
          -1 == o
            ? 0 < n
              ? ((o = i[0].b), s.push("ofs=" + o))
              : (o = 0)
            : s.push("ofs=" + o);
          for (var a = !0, u = 0; u < n; u++) {
            var c = i[u].b,
              h = i[u].a;
            if (0 > (c -= o)) (o = Math.max(0, i[u].b - 100)), (a = !1);
            else
              try {
                gn(h, s, "req" + c + "_");
              } catch (t) {
                r && r(h);
              }
          }
          if (a) {
            r = s.join("&");
            break t;
          }
        }
        return (t = t.g.splice(0, n)), (e.s = t), r;
      }
      function qn(t) {
        t.a || t.j || ((t.T = 1), jt(t.Aa, t), (t.o = 0));
      }
      function Bn(t) {
        return !(
          t.a ||
          t.j ||
          3 <= t.o ||
          (t.T++, (t.j = se(y(t.Aa, t), Kn(t, t.o))), t.o++, 0)
        );
      }
      function Gn(t) {
        null != t.s && (h.clearTimeout(t.s), (t.s = null));
      }
      function Wn(t) {
        (t.a = new me(t, t.c, "rpc", t.T)),
          null === t.i && (t.a.B = t.l),
          (t.a.O = 0);
        var e = je(t.la);
        Be(e, "RID", "rpc"),
          Be(e, "SID", t.J),
          Be(e, "CI", t.H ? "0" : "1"),
          Be(e, "AID", t.P),
          Un(t, e),
          Be(e, "TYPE", "xmlhttp"),
          t.i && t.l && Pn(e, t.i, t.l),
          t.D && t.a.setTimeout(t.D);
        var n = t.a;
        (t = t.ga),
          (n.H = 1),
          (n.i = Ge(je(e))),
          (n.j = null),
          (n.I = !0),
          Ie(n, t);
      }
      function zn(t) {
        null != t.m && (h.clearTimeout(t.m), (t.m = null));
      }
      function Hn(t, e) {
        var n = null;
        if (t.a == e) {
          zn(t), Gn(t), (t.a = null);
          var r = 2;
        } else {
          if (!hn(t.b, e)) return;
          (n = e.s), fn(t.b, e), (r = 1);
        }
        if (((t.I = e.N), 0 != t.v))
          if (e.b)
            if (1 == r) {
              (n = e.j ? e.j.length : 0), (e = w() - e.u);
              var i = t.u;
              Nt((r = te()), new oe(r, n, e, i)), jn(t);
            } else qn(t);
          else if (
            3 == (i = e.h) ||
            (0 == i && 0 < t.I) ||
            !(
              (1 == r &&
                (function (t, e) {
                  return !(
                    cn(t.b) >= t.b.f - (t.h ? 1 : 0) ||
                    (t.h
                      ? ((t.g = e.s.concat(t.g)), 0)
                      : 1 == t.v ||
                        2 == t.v ||
                        t.u >= (t.La ? 0 : t.Ma) ||
                        ((t.h = se(y(t.Ba, t, e), Kn(t, t.u))), t.u++, 0))
                  );
                })(t, e)) ||
              (2 == r && Bn(t))
            )
          )
            switch (
              (n && 0 < n.length && ((e = t.b), (e.c = e.c.concat(n))), i)
            ) {
              case 1:
                Jn(t, 5);
                break;
              case 4:
                Jn(t, 10);
                break;
              case 3:
                Jn(t, 6);
                break;
              default:
                Jn(t, 2);
            }
      }
      function Kn(t, e) {
        var n = t.Ha + Math.floor(Math.random() * t.Ra);
        return t.f || (n *= 2), n * e;
      }
      function Jn(t, e) {
        if ((t.c.info("Error code " + e), 2 == e)) {
          var n = null;
          t.f && (n = null);
          var r = y(t.Ya, t);
          n ||
            ((n = new Le("//www.google.com/images/cleardot.gif")),
            (h.location && "http" == h.location.protocol) || Fe(n, "https"),
            Ge(n)),
            (function (t, e) {
              var n = new Yt();
              if (h.Image) {
                var r = new Image();
                (r.onload = b(mn, n, r, "TestLoadImage: loaded", !0, e)),
                  (r.onerror = b(mn, n, r, "TestLoadImage: error", !1, e)),
                  (r.onabort = b(mn, n, r, "TestLoadImage: abort", !1, e)),
                  (r.ontimeout = b(mn, n, r, "TestLoadImage: timeout", !1, e)),
                  h.setTimeout(function () {
                    r.ontimeout && r.ontimeout();
                  }, 1e4),
                  (r.src = t);
              } else e(!1);
            })(n.toString(), r);
        } else ie(2);
        (t.v = 0), t.f && t.f.ra(e), Qn(t), Mn(t);
      }
      function Qn(t) {
        (t.v = 0),
          (t.I = -1),
          t.f &&
            ((0 == pn(t.b).length && 0 == t.g.length) ||
              ((t.b.c.length = 0), C(t.g), (t.g.length = 0)),
            t.f.qa());
      }
      function Yn(t, e, n) {
        var r = (function (t) {
          return t instanceof Le ? je(t) : new Le(t, void 0);
        })(n);
        if ("" != r.c) e && Ue(r, e + "." + r.c), Ve(r, r.h);
        else {
          var i = h.location;
          r = (function (t, e, n, r) {
            var i = new Le(null, void 0);
            return (
              t && Fe(i, t), e && Ue(i, e), n && Ve(i, n), r && (i.g = r), i
            );
          })(i.protocol, e ? e + "." + i.hostname : i.hostname, +i.port, n);
        }
        return (
          t.V &&
            R(t.V, function (t, e) {
              Be(r, e, t);
            }),
          (e = t.A),
          (n = t.na),
          e && n && Be(r, e, n),
          Be(r, "VER", t.ha),
          Un(t, r),
          r
        );
      }
      function Xn(t, e) {
        if (e && !t.C)
          throw Error("Can't create secondary domain capable XhrIo object.");
        return ((e = new bn(t.Na)).F = t.C), e;
      }
      function Zn() {}
      function $n() {
        if (B && !(10 <= Number(tt)))
          throw Error("Environmental error: no available transport.");
      }
      function tr(t, e) {
        kt.call(this),
          (this.a = new xn(e)),
          (this.o = t),
          (this.b = (e && e.messageUrlParams) || null),
          (t = (e && e.messageHeaders) || null),
          e &&
            e.clientProtocolHeaderRequired &&
            (t
              ? (t["X-Client-Protocol"] = "webchannel")
              : (t = { "X-Client-Protocol": "webchannel" })),
          (this.a.l = t),
          (t = (e && e.initMessageHeaders) || null),
          e &&
            e.messageContentType &&
            (t
              ? (t["X-WebChannel-Content-Type"] = e.messageContentType)
              : (t = { "X-WebChannel-Content-Type": e.messageContentType })),
          e &&
            e.a &&
            (t
              ? (t["X-WebChannel-Client-Profile"] = e.a)
              : (t = { "X-WebChannel-Client-Profile": e.a })),
          (this.a.O = t),
          (t = e && e.httpHeadersOverwriteParam) && !k(t) && (this.a.i = t),
          (this.m = (e && e.supportsCrossDomainXhr) || !1),
          (this.l = (e && e.sendRawJson) || !1),
          (e = e && e.httpSessionIdParam) &&
            !k(e) &&
            ((this.a.A = e),
            null !== (t = this.b) &&
              e in t &&
              e in (t = this.b) &&
              delete t[e]),
          (this.f = new rr(this));
      }
      function er(t) {
        de.call(this);
        var e = t.__sm__;
        if (e) {
          t: {
            for (var n in e) {
              t = n;
              break t;
            }
            t = void 0;
          }
          (this.c = t)
            ? ((t = this.c), (this.data = null !== e && t in e ? e[t] : void 0))
            : (this.data = e);
        } else this.data = t;
      }
      function nr() {
        ve.call(this), (this.status = 1);
      }
      function rr(t) {
        this.a = t;
      }
      ((a = bn.prototype).ba = function (t, e, n, r) {
        if (this.a)
          throw Error(
            "[goog.net.XhrIo] Object is active with another request=" +
              this.B +
              "; newUri=" +
              t
          );
        (e = e ? e.toUpperCase() : "GET"),
          (this.B = t),
          (this.f = ""),
          (this.h = 0),
          (this.u = !1),
          (this.b = !0),
          (this.a = new XMLHttpRequest()),
          (this.s = this.H ? he(this.H) : he(fe)),
          (this.a.onreadystatechange = y(this.za, this));
        try {
          (this.A = !0), this.a.open(e, String(t), !0), (this.A = !1);
        } catch (t) {
          return void Tn(this, t);
        }
        t = n || "";
        var i = new xe(this.headers);
        r &&
          De(r, function (t, e) {
            i.set(e, t);
          }),
          (r = (function (t) {
            t: {
              for (
                var e = En,
                  n = t.length,
                  r = "string" == typeof t ? t.split("") : t,
                  i = 0;
                i < n;
                i++
              )
                if (i in r && e.call(void 0, r[i], i, t)) {
                  e = i;
                  break t;
                }
              e = -1;
            }
            return 0 > e ? null : "string" == typeof t ? t.charAt(e) : t[e];
          })(i.L())),
          (n = h.FormData && t instanceof h.FormData),
          !(0 <= E(In, e)) ||
            r ||
            n ||
            i.set(
              "Content-Type",
              "application/x-www-form-urlencoded;charset=utf-8"
            ),
          i.forEach(function (t, e) {
            this.a.setRequestHeader(e, t);
          }, this),
          this.I && (this.a.responseType = this.I),
          "withCredentials" in this.a &&
            this.a.withCredentials !== this.F &&
            (this.a.withCredentials = this.F);
        try {
          Nn(this),
            0 < this.o &&
              ((this.D = (function (t) {
                return (
                  B &&
                  $(9) &&
                  "number" == typeof t.timeout &&
                  void 0 !== t.ontimeout
                );
              })(this.a))
                ? ((this.a.timeout = this.o),
                  (this.a.ontimeout = y(this.xa, this)))
                : (this.m = Gt(this.xa, this.o, this))),
            (this.l = !0),
            this.a.send(t),
            (this.l = !1);
        } catch (t) {
          Tn(this, t);
        }
      }),
        (a.xa = function () {
          void 0 !== c &&
            this.a &&
            ((this.f = "Timed out after " + this.o + "ms, aborting"),
            (this.h = 8),
            Nt(this, "timeout"),
            this.abort(8));
        }),
        (a.abort = function (t) {
          this.a &&
            this.b &&
            ((this.b = !1),
            (this.g = !0),
            this.a.abort(),
            (this.g = !1),
            (this.h = t || 7),
            Nt(this, "complete"),
            Nt(this, "abort"),
            kn(this));
        }),
        (a.G = function () {
          this.a &&
            (this.b &&
              ((this.b = !1), (this.g = !0), this.a.abort(), (this.g = !1)),
            kn(this, !0)),
            bn.X.G.call(this);
        }),
        (a.za = function () {
          this.j || (this.A || this.l || this.g ? Cn(this) : this.Ua());
        }),
        (a.Ua = function () {
          Cn(this);
        }),
        (a.W = function () {
          try {
            return 2 < An(this) ? this.a.status : -1;
          } catch (t) {
            return -1;
          }
        }),
        (a.$ = function () {
          try {
            return this.a ? this.a.responseText : "";
          } catch (t) {
            return "";
          }
        }),
        (a.Pa = function (t) {
          if (this.a) {
            var e = this.a.responseText;
            return t && 0 == e.indexOf(t) && (e = e.substring(t.length)), yn(e);
          }
        }),
        (a.ua = function () {
          return this.h;
        }),
        (a.Qa = function () {
          return "string" == typeof this.f ? this.f : String(this.f);
        }),
        ((a = xn.prototype).ha = 8),
        (a.v = 1),
        (a.Ba = function (t) {
          if (this.h)
            if (((this.h = null), 1 == this.v)) {
              if (!t) {
                (this.R = Math.floor(1e5 * Math.random())), (t = this.R++);
                var e,
                  n = new me(this, this.c, t, void 0),
                  r = this.l;
                if (
                  (this.O && (r ? j((r = M(r)), this.O) : (r = this.O)),
                  null === this.i && (n.B = r),
                  this.da)
                )
                  t: {
                    for (var i = (e = 0); i < this.g.length; i++) {
                      var o = this.g[i];
                      if (
                        void 0 ===
                        (o =
                          "__data__" in o.a &&
                          "string" == typeof (o = o.a.__data__)
                            ? o.length
                            : void 0)
                      )
                        break;
                      if (4096 < (e += o)) {
                        e = i;
                        break t;
                      }
                      if (4096 === e || i === this.g.length - 1) {
                        e = i + 1;
                        break t;
                      }
                    }
                    e = 1e3;
                  }
                else e = 1e3;
                (e = Vn(this, n, e)),
                  Be((i = je(this.B)), "RID", t),
                  Be(i, "CVER", 22),
                  this.A && Be(i, "X-HTTP-Session-Id", this.A),
                  Un(this, i),
                  this.i && r && Pn(i, this.i, r),
                  ln(this.b, n),
                  this.Ia && Be(i, "TYPE", "init"),
                  this.da
                    ? (Be(i, "$req", e),
                      Be(i, "SID", "null"),
                      (n.U = !0),
                      _e(n, i, null))
                    : _e(n, i, e),
                  (this.v = 2);
              }
            } else
              3 == this.v &&
                (t
                  ? Fn(this, t)
                  : 0 == this.g.length || un(this.b) || Fn(this));
        }),
        (a.Aa = function () {
          if (
            ((this.j = null),
            Wn(this),
            this.U && !(this.F || null == this.a || 0 >= this.N))
          ) {
            var t = 2 * this.N;
            this.c.info("BP detection timer enabled: " + t),
              (this.s = se(y(this.Ta, this), t));
          }
        }),
        (a.Ta = function () {
          this.s &&
            ((this.s = null),
            this.c.info("BP detection timeout reached."),
            this.c.info("Buffering proxy detected and switch to long-polling!"),
            (this.H = !1),
            (this.F = !0),
            ie(10),
            Rn(this),
            Wn(this));
        }),
        (a.Sa = function () {
          null != this.m && ((this.m = null), Rn(this), Bn(this), ie(19));
        }),
        (a.Ya = function (t) {
          t
            ? (this.c.info("Successfully pinged google.com"), ie(2))
            : (this.c.info("Failed to ping google.com"), ie(1));
        }),
        ((a = Zn.prototype).ta = function () {}),
        (a.sa = function () {}),
        (a.ra = function () {}),
        (a.qa = function () {}),
        (a.Ja = function () {}),
        ($n.prototype.a = function (t, e) {
          return new tr(t, e);
        }),
        _(tr, kt),
        (tr.prototype.g = function () {
          (this.a.f = this.f), this.m && (this.a.C = !0);
          var t = this.a,
            e = this.o,
            n = this.b || void 0;
          ie(0),
            (t.fa = e),
            (t.V = n || {}),
            (t.H = t.S),
            (t.B = Yn(t, null, t.fa)),
            jn(t);
        }),
        (tr.prototype.close = function () {
          On(this.a);
        }),
        (tr.prototype.h = function (t) {
          if ("string" == typeof t) {
            var e = {};
            (e.__data__ = t), Ln(this.a, e);
          } else
            this.l
              ? (((e = {}).__data__ = Pt(t)), Ln(this.a, e))
              : Ln(this.a, t);
        }),
        (tr.prototype.G = function () {
          (this.a.f = null),
            delete this.f,
            On(this.a),
            delete this.a,
            tr.X.G.call(this);
        }),
        _(er, de),
        _(nr, ve),
        _(rr, Zn),
        (rr.prototype.ta = function () {
          Nt(this.a, "a");
        }),
        (rr.prototype.sa = function (t) {
          Nt(this.a, new er(t));
        }),
        (rr.prototype.ra = function (t) {
          Nt(this.a, new nr(t));
        }),
        (rr.prototype.qa = function () {
          Nt(this.a, "b");
        }),
        ($n.prototype.createWebChannel = $n.prototype.a),
        (tr.prototype.send = tr.prototype.h),
        (tr.prototype.open = tr.prototype.g),
        (tr.prototype.close = tr.prototype.close),
        (ae.NO_ERROR = 0),
        (ae.TIMEOUT = 8),
        (ae.HTTP_ERROR = 6),
        (ue.COMPLETE = "complete"),
        (le.EventType = pe),
        (pe.OPEN = "a"),
        (pe.CLOSE = "b"),
        (pe.ERROR = "c"),
        (pe.MESSAGE = "d"),
        (kt.prototype.listen = kt.prototype.va),
        (bn.prototype.listenOnce = bn.prototype.wa),
        (bn.prototype.getLastError = bn.prototype.Qa),
        (bn.prototype.getLastErrorCode = bn.prototype.ua),
        (bn.prototype.getStatus = bn.prototype.W),
        (bn.prototype.getResponseJson = bn.prototype.Pa),
        (bn.prototype.getResponseText = bn.prototype.$),
        (bn.prototype.send = bn.prototype.ba);
      var ir = ae,
        or = ue,
        sr = Zt,
        ar = 10,
        ur = 11,
        cr = le,
        hr = bn,
        lr = n(15),
        fr = function (t, e, n, r, i, o) {
          (this.t = t),
            (this.persistenceKey = e),
            (this.host = n),
            (this.ssl = r),
            (this.forceLongPolling = i),
            (this.i = o);
        },
        pr = (function () {
          function t(t, e) {
            (this.projectId = t), (this.database = e || "(default)");
          }
          return (
            Object.defineProperty(t.prototype, "o", {
              get: function () {
                return "(default)" === this.database;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.isEqual = function (e) {
              return (
                e instanceof t &&
                e.projectId === this.projectId &&
                e.database === this.database
              );
            }),
            t
          );
        })(),
        dr = new r.Yd("@firebase/firestore");
      function vr() {
        return dr.logLevel;
      }
      function gr(t) {
        for (var e = [], n = 1; n < arguments.length; n++)
          e[n - 1] = arguments[n];
        if (dr.logLevel <= r.in.DEBUG) {
          var i = e.map(br);
          dr.debug.apply(dr, (0, lr.ev)(["Firestore (8.3.0): " + t], i));
        }
      }
      function mr(t) {
        for (var e = [], n = 1; n < arguments.length; n++)
          e[n - 1] = arguments[n];
        if (dr.logLevel <= r.in.ERROR) {
          var i = e.map(br);
          dr.error.apply(dr, (0, lr.ev)(["Firestore (8.3.0): " + t], i));
        }
      }
      function yr(t) {
        for (var e = [], n = 1; n < arguments.length; n++)
          e[n - 1] = arguments[n];
        if (dr.logLevel <= r.in.WARN) {
          var i = e.map(br);
          dr.warn.apply(dr, (0, lr.ev)(["Firestore (8.3.0): " + t], i));
        }
      }
      function br(t) {
        if ("string" == typeof t) return t;
        try {
          return (e = t), JSON.stringify(e);
        } catch (e) {
          return t;
        }
        var e;
      }
      function wr(t) {
        void 0 === t && (t = "Unexpected state");
        var e = "FIRESTORE (8.3.0) INTERNAL ASSERTION FAILED: " + t;
        throw (mr(e), new Error(e));
      }
      function _r(t, e) {
        t || wr();
      }
      function Ir(t, e) {
        return t;
      }
      function Er(t) {
        var e = "undefined" != typeof self && (self.crypto || self.msCrypto),
          n = new Uint8Array(t);
        if (e && "function" == typeof e.getRandomValues) e.getRandomValues(n);
        else for (var r = 0; r < t; r++) n[r] = Math.floor(256 * Math.random());
        return n;
      }
      var Tr = (function () {
        function t() {}
        return (
          (t.u = function () {
            for (
              var t =
                  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",
                e = Math.floor(256 / t.length) * t.length,
                n = "";
              n.length < 20;

            )
              for (var r = Er(40), i = 0; i < r.length; ++i)
                n.length < 20 && r[i] < e && (n += t.charAt(r[i] % t.length));
            return n;
          }),
          t
        );
      })();
      function Sr(t, e) {
        return t < e ? -1 : t > e ? 1 : 0;
      }
      function Cr(t, e, n) {
        return (
          t.length === e.length &&
          t.every(function (t, r) {
            return n(t, e[r]);
          })
        );
      }
      function kr(t) {
        return t + "\0";
      }
      var Nr = (function () {
        function t(t) {
          this.h = t;
        }
        return (
          (t.fromBase64String = function (e) {
            return new t(atob(e));
          }),
          (t.fromUint8Array = function (e) {
            return new t(
              (function (t) {
                for (var e = "", n = 0; n < t.length; ++n)
                  e += String.fromCharCode(t[n]);
                return e;
              })(e)
            );
          }),
          (t.prototype.toBase64 = function () {
            return (t = this.h), btoa(t);
            var t;
          }),
          (t.prototype.toUint8Array = function () {
            return (function (t) {
              for (var e = new Uint8Array(t.length), n = 0; n < t.length; n++)
                e[n] = t.charCodeAt(n);
              return e;
            })(this.h);
          }),
          (t.prototype.l = function () {
            return 2 * this.h.length;
          }),
          (t.prototype._ = function (t) {
            return Sr(this.h, t.h);
          }),
          (t.prototype.isEqual = function (t) {
            return this.h === t.h;
          }),
          t
        );
      })();
      Nr.T = new Nr("");
      var Ar = {
          OK: "ok",
          CANCELLED: "cancelled",
          UNKNOWN: "unknown",
          INVALID_ARGUMENT: "invalid-argument",
          DEADLINE_EXCEEDED: "deadline-exceeded",
          NOT_FOUND: "not-found",
          ALREADY_EXISTS: "already-exists",
          PERMISSION_DENIED: "permission-denied",
          UNAUTHENTICATED: "unauthenticated",
          RESOURCE_EXHAUSTED: "resource-exhausted",
          FAILED_PRECONDITION: "failed-precondition",
          ABORTED: "aborted",
          OUT_OF_RANGE: "out-of-range",
          UNIMPLEMENTED: "unimplemented",
          INTERNAL: "internal",
          UNAVAILABLE: "unavailable",
          DATA_LOSS: "data-loss",
        },
        Pr = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this, n) || this).code = e),
              (r.message = n),
              (r.name = "FirebaseError"),
              (r.toString = function () {
                return r.name + ": [code=" + r.code + "]: " + r.message;
              }),
              r
            );
          }
          return (0, lr.ZT)(e, t), e;
        })(Error),
        Dr = (function () {
          function t(t) {
            this.I = t;
          }
          return (
            (t.fromBase64String = function (e) {
              try {
                return new t(Nr.fromBase64String(e));
              } catch (e) {
                throw new Pr(
                  Ar.INVALID_ARGUMENT,
                  "Failed to construct data from Base64 string: " + e
                );
              }
            }),
            (t.fromUint8Array = function (e) {
              return new t(Nr.fromUint8Array(e));
            }),
            (t.prototype.toBase64 = function () {
              return this.I.toBase64();
            }),
            (t.prototype.toUint8Array = function () {
              return this.I.toUint8Array();
            }),
            (t.prototype.toString = function () {
              return "Bytes(base64: " + this.toBase64() + ")";
            }),
            (t.prototype.isEqual = function (t) {
              return this.I.isEqual(t.I);
            }),
            t
          );
        })(),
        xr = (function () {
          function t(t) {
            this.uid = t;
          }
          return (
            (t.prototype.m = function () {
              return null != this.uid;
            }),
            (t.prototype.A = function () {
              return this.m() ? "uid:" + this.uid : "anonymous-user";
            }),
            (t.prototype.isEqual = function (t) {
              return t.uid === this.uid;
            }),
            t
          );
        })();
      (xr.UNAUTHENTICATED = new xr(null)),
        (xr.R = new xr("google-credentials-uid")),
        (xr.P = new xr("first-party-uid"));
      var Or = function (t, e) {
          (this.user = e),
            (this.type = "OAuth"),
            (this.g = {}),
            (this.g.Authorization = "Bearer " + t);
        },
        Rr = (function () {
          function t() {
            this.V = null;
          }
          return (
            (t.prototype.getToken = function () {
              return Promise.resolve(null);
            }),
            (t.prototype.p = function () {}),
            (t.prototype.v = function (t) {
              (this.V = t), t(xr.UNAUTHENTICATED);
            }),
            (t.prototype.S = function () {
              this.V = null;
            }),
            t
          );
        })(),
        Mr = (function () {
          function t(t) {
            var e = this;
            (this.D = null),
              (this.currentUser = xr.UNAUTHENTICATED),
              (this.C = !1),
              (this.N = 0),
              (this.V = null),
              (this.forceRefresh = !1),
              (this.D = function () {
                e.N++,
                  (e.currentUser = e.$()),
                  (e.C = !0),
                  e.V && e.V(e.currentUser);
              }),
              (this.N = 0),
              (this.auth = t.getImmediate({ optional: !0 })),
              this.auth
                ? this.auth.addAuthTokenListener(this.D)
                : (this.D(null),
                  t.get().then(
                    function (t) {
                      (e.auth = t), e.D && e.auth.addAuthTokenListener(e.D);
                    },
                    function () {}
                  ));
          }
          return (
            (t.prototype.getToken = function () {
              var t = this,
                e = this.N,
                n = this.forceRefresh;
              return (
                (this.forceRefresh = !1),
                this.auth
                  ? this.auth.getToken(n).then(function (n) {
                      return t.N !== e
                        ? (gr(
                            "FirebaseCredentialsProvider",
                            "getToken aborted due to token change."
                          ),
                          t.getToken())
                        : n
                        ? (_r("string" == typeof n.accessToken),
                          new Or(n.accessToken, t.currentUser))
                        : null;
                    })
                  : Promise.resolve(null)
              );
            }),
            (t.prototype.p = function () {
              this.forceRefresh = !0;
            }),
            (t.prototype.v = function (t) {
              (this.V = t), this.C && t(this.currentUser);
            }),
            (t.prototype.S = function () {
              this.auth && this.auth.removeAuthTokenListener(this.D),
                (this.D = null),
                (this.V = null);
            }),
            (t.prototype.$ = function () {
              var t = this.auth && this.auth.getUid();
              return _r(null === t || "string" == typeof t), new xr(t);
            }),
            t
          );
        })(),
        Lr = (function () {
          function t(t, e) {
            (this.F = t),
              (this.O = e),
              (this.type = "FirstParty"),
              (this.user = xr.P);
          }
          return (
            Object.defineProperty(t.prototype, "g", {
              get: function () {
                var t = { "X-Goog-AuthUser": this.O },
                  e = this.F.auth.getAuthHeaderValueForFirstParty([]);
                return e && (t.Authorization = e), t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        jr = (function () {
          function t(t, e) {
            (this.F = t), (this.O = e);
          }
          return (
            (t.prototype.getToken = function () {
              return Promise.resolve(new Lr(this.F, this.O));
            }),
            (t.prototype.v = function (t) {
              t(xr.P);
            }),
            (t.prototype.S = function () {}),
            (t.prototype.p = function () {}),
            t
          );
        })(),
        Fr = (function () {
          function t(t, e) {
            var n = this;
            (this.previousValue = t),
              e &&
                ((e.k = function (t) {
                  return n.M(t);
                }),
                (this.L = function (t) {
                  return e.B(t);
                }));
          }
          return (
            (t.prototype.M = function (t) {
              return (
                (this.previousValue = Math.max(t, this.previousValue)),
                this.previousValue
              );
            }),
            (t.prototype.next = function () {
              var t = ++this.previousValue;
              return this.L && this.L(t), t;
            }),
            t
          );
        })();
      Fr.q = -1;
      var Ur = (function () {
          function t(t, e) {
            if (((this.seconds = t), (this.nanoseconds = e), e < 0))
              throw new Pr(
                Ar.INVALID_ARGUMENT,
                "Timestamp nanoseconds out of range: " + e
              );
            if (e >= 1e9)
              throw new Pr(
                Ar.INVALID_ARGUMENT,
                "Timestamp nanoseconds out of range: " + e
              );
            if (t < -62135596800)
              throw new Pr(
                Ar.INVALID_ARGUMENT,
                "Timestamp seconds out of range: " + t
              );
            if (t >= 253402300800)
              throw new Pr(
                Ar.INVALID_ARGUMENT,
                "Timestamp seconds out of range: " + t
              );
          }
          return (
            (t.now = function () {
              return t.fromMillis(Date.now());
            }),
            (t.fromDate = function (e) {
              return t.fromMillis(e.getTime());
            }),
            (t.fromMillis = function (e) {
              var n = Math.floor(e / 1e3);
              return new t(n, 1e6 * (e - 1e3 * n));
            }),
            (t.prototype.toDate = function () {
              return new Date(this.toMillis());
            }),
            (t.prototype.toMillis = function () {
              return 1e3 * this.seconds + this.nanoseconds / 1e6;
            }),
            (t.prototype.U = function (t) {
              return this.seconds === t.seconds
                ? Sr(this.nanoseconds, t.nanoseconds)
                : Sr(this.seconds, t.seconds);
            }),
            (t.prototype.isEqual = function (t) {
              return (
                t.seconds === this.seconds && t.nanoseconds === this.nanoseconds
              );
            }),
            (t.prototype.toString = function () {
              return (
                "Timestamp(seconds=" +
                this.seconds +
                ", nanoseconds=" +
                this.nanoseconds +
                ")"
              );
            }),
            (t.prototype.toJSON = function () {
              return { seconds: this.seconds, nanoseconds: this.nanoseconds };
            }),
            (t.prototype.valueOf = function () {
              var t = this.seconds - -62135596800;
              return (
                String(t).padStart(12, "0") +
                "." +
                String(this.nanoseconds).padStart(9, "0")
              );
            }),
            t
          );
        })(),
        Vr = (function () {
          function t(t) {
            this.timestamp = t;
          }
          return (
            (t.K = function (e) {
              return new t(e);
            }),
            (t.min = function () {
              return new t(new Ur(0, 0));
            }),
            (t.prototype._ = function (t) {
              return this.timestamp.U(t.timestamp);
            }),
            (t.prototype.isEqual = function (t) {
              return this.timestamp.isEqual(t.timestamp);
            }),
            (t.prototype.W = function () {
              return (
                1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3
              );
            }),
            (t.prototype.toString = function () {
              return "SnapshotVersion(" + this.timestamp.toString() + ")";
            }),
            (t.prototype.j = function () {
              return this.timestamp;
            }),
            t
          );
        })(),
        qr = (function () {
          function t(t, e, n) {
            void 0 === e ? (e = 0) : e > t.length && wr(),
              void 0 === n ? (n = t.length - e) : n > t.length - e && wr(),
              (this.segments = t),
              (this.offset = e),
              (this.G = n);
          }
          return (
            Object.defineProperty(t.prototype, "length", {
              get: function () {
                return this.G;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.isEqual = function (e) {
              return 0 === t.H(this, e);
            }),
            (t.prototype.child = function (e) {
              var n = this.segments.slice(this.offset, this.limit());
              return (
                e instanceof t
                  ? e.forEach(function (t) {
                      n.push(t);
                    })
                  : n.push(e),
                this.J(n)
              );
            }),
            (t.prototype.limit = function () {
              return this.offset + this.length;
            }),
            (t.prototype.Y = function (t) {
              return (
                (t = void 0 === t ? 1 : t),
                this.J(this.segments, this.offset + t, this.length - t)
              );
            }),
            (t.prototype.X = function () {
              return this.J(this.segments, this.offset, this.length - 1);
            }),
            (t.prototype.Z = function () {
              return this.segments[this.offset];
            }),
            (t.prototype.tt = function () {
              return this.get(this.length - 1);
            }),
            (t.prototype.get = function (t) {
              return this.segments[this.offset + t];
            }),
            (t.prototype.et = function () {
              return 0 === this.length;
            }),
            (t.prototype.nt = function (t) {
              if (t.length < this.length) return !1;
              for (var e = 0; e < this.length; e++)
                if (this.get(e) !== t.get(e)) return !1;
              return !0;
            }),
            (t.prototype.st = function (t) {
              if (this.length + 1 !== t.length) return !1;
              for (var e = 0; e < this.length; e++)
                if (this.get(e) !== t.get(e)) return !1;
              return !0;
            }),
            (t.prototype.forEach = function (t) {
              for (var e = this.offset, n = this.limit(); e < n; e++)
                t(this.segments[e]);
            }),
            (t.prototype.it = function () {
              return this.segments.slice(this.offset, this.limit());
            }),
            (t.H = function (t, e) {
              for (var n = Math.min(t.length, e.length), r = 0; r < n; r++) {
                var i = t.get(r),
                  o = e.get(r);
                if (i < o) return -1;
                if (i > o) return 1;
              }
              return t.length < e.length ? -1 : t.length > e.length ? 1 : 0;
            }),
            t
          );
        })(),
        Br = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.J = function (t, n, r) {
              return new e(t, n, r);
            }),
            (e.prototype.rt = function () {
              return this.it().join("/");
            }),
            (e.prototype.toString = function () {
              return this.rt();
            }),
            (e.ot = function () {
              for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
              for (var r = [], i = 0, o = t; i < o.length; i++) {
                var s = o[i];
                if (s.indexOf("//") >= 0)
                  throw new Pr(
                    Ar.INVALID_ARGUMENT,
                    "Invalid segment (" +
                      s +
                      "). Paths must not contain // in them."
                  );
                r.push.apply(
                  r,
                  s.split("/").filter(function (t) {
                    return t.length > 0;
                  })
                );
              }
              return new e(r);
            }),
            (e.ct = function () {
              return new e([]);
            }),
            e
          );
        })(qr),
        Gr = /^[_a-zA-Z][_a-zA-Z0-9]*$/,
        Wr = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.J = function (t, n, r) {
              return new e(t, n, r);
            }),
            (e.at = function (t) {
              return Gr.test(t);
            }),
            (e.prototype.rt = function () {
              return this.it()
                .map(function (t) {
                  return (
                    (t = t.replace(/\\/g, "\\\\").replace(/`/g, "\\`")),
                    e.at(t) || (t = "`" + t + "`"),
                    t
                  );
                })
                .join(".");
            }),
            (e.prototype.toString = function () {
              return this.rt();
            }),
            (e.prototype.ut = function () {
              return 1 === this.length && "__name__" === this.get(0);
            }),
            (e.ht = function () {
              return new e(["__name__"]);
            }),
            (e.lt = function (t) {
              for (
                var n = [],
                  r = "",
                  i = 0,
                  o = function () {
                    if (0 === r.length)
                      throw new Pr(
                        Ar.INVALID_ARGUMENT,
                        "Invalid field path (" +
                          t +
                          "). Paths must not be empty, begin with '.', end with '.', or contain '..'"
                      );
                    n.push(r), (r = "");
                  },
                  s = !1;
                i < t.length;

              ) {
                var a = t[i];
                if ("\\" === a) {
                  if (i + 1 === t.length)
                    throw new Pr(
                      Ar.INVALID_ARGUMENT,
                      "Path has trailing escape character: " + t
                    );
                  var u = t[i + 1];
                  if ("\\" !== u && "." !== u && "`" !== u)
                    throw new Pr(
                      Ar.INVALID_ARGUMENT,
                      "Path has invalid escape sequence: " + t
                    );
                  (r += u), (i += 2);
                } else
                  "`" === a
                    ? ((s = !s), i++)
                    : "." !== a || s
                    ? ((r += a), i++)
                    : (o(), i++);
              }
              if ((o(), s))
                throw new Pr(
                  Ar.INVALID_ARGUMENT,
                  "Unterminated ` in path: " + t
                );
              return new e(n);
            }),
            (e.ct = function () {
              return new e([]);
            }),
            e
          );
        })(qr),
        zr = (function () {
          function t(t) {
            this.path = t;
          }
          return (
            (t._t = function (e) {
              return new t(Br.ot(e));
            }),
            (t.ft = function (e) {
              return new t(Br.ot(e).Y(5));
            }),
            (t.prototype.dt = function (t) {
              return (
                this.path.length >= 2 &&
                this.path.get(this.path.length - 2) === t
              );
            }),
            (t.prototype.isEqual = function (t) {
              return null !== t && 0 === Br.H(this.path, t.path);
            }),
            (t.prototype.toString = function () {
              return this.path.toString();
            }),
            (t.H = function (t, e) {
              return Br.H(t.path, e.path);
            }),
            (t.wt = function (t) {
              return t.length % 2 == 0;
            }),
            (t.Et = function (e) {
              return new t(new Br(e.slice()));
            }),
            t
          );
        })();
      function Hr(t) {
        var e = 0;
        for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && e++;
        return e;
      }
      function Kr(t, e) {
        for (var n in t)
          Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);
      }
      function Jr(t) {
        for (var e in t)
          if (Object.prototype.hasOwnProperty.call(t, e)) return !1;
        return !0;
      }
      var Qr = (function () {
          function t(t) {
            (this.fields = t), t.sort(Wr.H);
          }
          return (
            (t.prototype.Tt = function (t) {
              for (var e = 0, n = this.fields; e < n.length; e++)
                if (n[e].nt(t)) return !0;
              return !1;
            }),
            (t.prototype.isEqual = function (t) {
              return Cr(this.fields, t.fields, function (t, e) {
                return t.isEqual(e);
              });
            }),
            t
          );
        })(),
        Yr = new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
      function Xr(t) {
        if ((_r(!!t), "string" == typeof t)) {
          var e = 0,
            n = Yr.exec(t);
          if ((_r(!!n), n[1])) {
            var r = n[1];
            (r = (r + "000000000").substr(0, 9)), (e = Number(r));
          }
          var i = new Date(t);
          return { seconds: Math.floor(i.getTime() / 1e3), nanos: e };
        }
        return { seconds: Zr(t.seconds), nanos: Zr(t.nanos) };
      }
      function Zr(t) {
        return "number" == typeof t ? t : "string" == typeof t ? Number(t) : 0;
      }
      function $r(t) {
        return "string" == typeof t
          ? Nr.fromBase64String(t)
          : Nr.fromUint8Array(t);
      }
      function ti(t) {
        var e, n;
        return (
          "server_timestamp" ===
          (null ===
            (n = (
              (null === (e = null == t ? void 0 : t.mapValue) || void 0 === e
                ? void 0
                : e.fields) || {}
            ).__type__) || void 0 === n
            ? void 0
            : n.stringValue)
        );
      }
      function ei(t) {
        var e = t.mapValue.fields.__previous_value__;
        return ti(e) ? ei(e) : e;
      }
      function ni(t) {
        var e = Xr(t.mapValue.fields.__local_write_time__.timestampValue);
        return new Ur(e.seconds, e.nanos);
      }
      function ri(t) {
        return null == t;
      }
      function ii(t) {
        return 0 === t && 1 / t == -1 / 0;
      }
      function oi(t) {
        return (
          "number" == typeof t &&
          Number.isInteger(t) &&
          !ii(t) &&
          t <= Number.MAX_SAFE_INTEGER &&
          t >= Number.MIN_SAFE_INTEGER
        );
      }
      function si(t) {
        return "nullValue" in t
          ? 0
          : "booleanValue" in t
          ? 1
          : "integerValue" in t || "doubleValue" in t
          ? 2
          : "timestampValue" in t
          ? 3
          : "stringValue" in t
          ? 5
          : "bytesValue" in t
          ? 6
          : "referenceValue" in t
          ? 7
          : "geoPointValue" in t
          ? 8
          : "arrayValue" in t
          ? 9
          : "mapValue" in t
          ? ti(t)
            ? 4
            : 10
          : wr();
      }
      function ai(t, e) {
        var n = si(t);
        if (n !== si(e)) return !1;
        switch (n) {
          case 0:
            return !0;
          case 1:
            return t.booleanValue === e.booleanValue;
          case 4:
            return ni(t).isEqual(ni(e));
          case 3:
            return (function (t, e) {
              if (
                "string" == typeof t.timestampValue &&
                "string" == typeof e.timestampValue &&
                t.timestampValue.length === e.timestampValue.length
              )
                return t.timestampValue === e.timestampValue;
              var n = Xr(t.timestampValue),
                r = Xr(e.timestampValue);
              return n.seconds === r.seconds && n.nanos === r.nanos;
            })(t, e);
          case 5:
            return t.stringValue === e.stringValue;
          case 6:
            return (function (t, e) {
              return $r(t.bytesValue).isEqual($r(e.bytesValue));
            })(t, e);
          case 7:
            return t.referenceValue === e.referenceValue;
          case 8:
            return (function (t, e) {
              return (
                Zr(t.geoPointValue.latitude) === Zr(e.geoPointValue.latitude) &&
                Zr(t.geoPointValue.longitude) === Zr(e.geoPointValue.longitude)
              );
            })(t, e);
          case 2:
            return (function (t, e) {
              if ("integerValue" in t && "integerValue" in e)
                return Zr(t.integerValue) === Zr(e.integerValue);
              if ("doubleValue" in t && "doubleValue" in e) {
                var n = Zr(t.doubleValue),
                  r = Zr(e.doubleValue);
                return n === r ? ii(n) === ii(r) : isNaN(n) && isNaN(r);
              }
              return !1;
            })(t, e);
          case 9:
            return Cr(t.arrayValue.values || [], e.arrayValue.values || [], ai);
          case 10:
            return (function (t, e) {
              var n = t.mapValue.fields || {},
                r = e.mapValue.fields || {};
              if (Hr(n) !== Hr(r)) return !1;
              for (var i in n)
                if (n.hasOwnProperty(i) && (void 0 === r[i] || !ai(n[i], r[i])))
                  return !1;
              return !0;
            })(t, e);
          default:
            return wr();
        }
      }
      function ui(t, e) {
        return (
          void 0 !==
          (t.values || []).find(function (t) {
            return ai(t, e);
          })
        );
      }
      function ci(t, e) {
        var n = si(t),
          r = si(e);
        if (n !== r) return Sr(n, r);
        switch (n) {
          case 0:
            return 0;
          case 1:
            return Sr(t.booleanValue, e.booleanValue);
          case 2:
            return (function (t, e) {
              var n = Zr(t.integerValue || t.doubleValue),
                r = Zr(e.integerValue || e.doubleValue);
              return n < r
                ? -1
                : n > r
                ? 1
                : n === r
                ? 0
                : isNaN(n)
                ? isNaN(r)
                  ? 0
                  : -1
                : 1;
            })(t, e);
          case 3:
            return hi(t.timestampValue, e.timestampValue);
          case 4:
            return hi(ni(t), ni(e));
          case 5:
            return Sr(t.stringValue, e.stringValue);
          case 6:
            return (function (t, e) {
              var n = $r(t),
                r = $r(e);
              return n._(r);
            })(t.bytesValue, e.bytesValue);
          case 7:
            return (function (t, e) {
              for (
                var n = t.split("/"), r = e.split("/"), i = 0;
                i < n.length && i < r.length;
                i++
              ) {
                var o = Sr(n[i], r[i]);
                if (0 !== o) return o;
              }
              return Sr(n.length, r.length);
            })(t.referenceValue, e.referenceValue);
          case 8:
            return (function (t, e) {
              var n = Sr(Zr(t.latitude), Zr(e.latitude));
              return 0 !== n ? n : Sr(Zr(t.longitude), Zr(e.longitude));
            })(t.geoPointValue, e.geoPointValue);
          case 9:
            return (function (t, e) {
              for (
                var n = t.values || [], r = e.values || [], i = 0;
                i < n.length && i < r.length;
                ++i
              ) {
                var o = ci(n[i], r[i]);
                if (o) return o;
              }
              return Sr(n.length, r.length);
            })(t.arrayValue, e.arrayValue);
          case 10:
            return (function (t, e) {
              var n = t.fields || {},
                r = Object.keys(n),
                i = e.fields || {},
                o = Object.keys(i);
              r.sort(), o.sort();
              for (var s = 0; s < r.length && s < o.length; ++s) {
                var a = Sr(r[s], o[s]);
                if (0 !== a) return a;
                var u = ci(n[r[s]], i[o[s]]);
                if (0 !== u) return u;
              }
              return Sr(r.length, o.length);
            })(t.mapValue, e.mapValue);
          default:
            throw wr();
        }
      }
      function hi(t, e) {
        if (
          "string" == typeof t &&
          "string" == typeof e &&
          t.length === e.length
        )
          return Sr(t, e);
        var n = Xr(t),
          r = Xr(e),
          i = Sr(n.seconds, r.seconds);
        return 0 !== i ? i : Sr(n.nanos, r.nanos);
      }
      function li(t) {
        return fi(t);
      }
      function fi(t) {
        return "nullValue" in t
          ? "null"
          : "booleanValue" in t
          ? "" + t.booleanValue
          : "integerValue" in t
          ? "" + t.integerValue
          : "doubleValue" in t
          ? "" + t.doubleValue
          : "timestampValue" in t
          ? (function (t) {
              var e = Xr(t);
              return "time(" + e.seconds + "," + e.nanos + ")";
            })(t.timestampValue)
          : "stringValue" in t
          ? t.stringValue
          : "bytesValue" in t
          ? $r(t.bytesValue).toBase64()
          : "referenceValue" in t
          ? ((n = t.referenceValue), zr.ft(n).toString())
          : "geoPointValue" in t
          ? "geo(" + (e = t.geoPointValue).latitude + "," + e.longitude + ")"
          : "arrayValue" in t
          ? (function (t) {
              for (
                var e = "[", n = !0, r = 0, i = t.values || [];
                r < i.length;
                r++
              )
                n ? (n = !1) : (e += ","), (e += fi(i[r]));
              return e + "]";
            })(t.arrayValue)
          : "mapValue" in t
          ? (function (t) {
              for (
                var e = "{",
                  n = !0,
                  r = 0,
                  i = Object.keys(t.fields || {}).sort();
                r < i.length;
                r++
              ) {
                var o = i[r];
                n ? (n = !1) : (e += ","), (e += o + ":" + fi(t.fields[o]));
              }
              return e + "}";
            })(t.mapValue)
          : wr();
        var e, n;
      }
      function pi(t, e) {
        return {
          referenceValue:
            "projects/" +
            t.projectId +
            "/databases/" +
            t.database +
            "/documents/" +
            e.path.rt(),
        };
      }
      function di(t) {
        return !!t && "integerValue" in t;
      }
      function vi(t) {
        return !!t && "arrayValue" in t;
      }
      function gi(t) {
        return !!t && "nullValue" in t;
      }
      function mi(t) {
        return !!t && "doubleValue" in t && isNaN(Number(t.doubleValue));
      }
      function yi(t) {
        return !!t && "mapValue" in t;
      }
      var bi = (function () {
          function t(t) {
            this.proto = t;
          }
          return (
            (t.empty = function () {
              return new t({ mapValue: {} });
            }),
            (t.prototype.field = function (t) {
              if (t.et()) return this.proto;
              for (var e = this.proto, n = 0; n < t.length - 1; ++n) {
                if (!e.mapValue.fields) return null;
                if (!yi((e = e.mapValue.fields[t.get(n)]))) return null;
              }
              return (e = (e.mapValue.fields || {})[t.tt()]) || null;
            }),
            (t.prototype.isEqual = function (t) {
              return ai(this.proto, t.proto);
            }),
            t
          );
        })(),
        wi = (function () {
          function t(t) {
            void 0 === t && (t = bi.empty()),
              (this.It = t),
              (this.At = new Map());
          }
          return (
            (t.prototype.set = function (t, e) {
              return this.Rt(t, e), this;
            }),
            (t.prototype.delete = function (t) {
              return this.Rt(t, null), this;
            }),
            (t.prototype.Rt = function (t, e) {
              for (var n = this.At, r = 0; r < t.length - 1; ++r) {
                var i = t.get(r),
                  o = n.get(i);
                o instanceof Map
                  ? (n = o)
                  : o && 10 === si(o)
                  ? ((o = new Map(Object.entries(o.mapValue.fields || {}))),
                    n.set(i, o),
                    (n = o))
                  : ((o = new Map()), n.set(i, o), (n = o));
              }
              n.set(t.tt(), e);
            }),
            (t.prototype.Pt = function () {
              var t = this.yt(Wr.ct(), this.At);
              return null != t ? new bi(t) : this.It;
            }),
            (t.prototype.yt = function (t, e) {
              var n = this,
                r = !1,
                i = this.It.field(t),
                o = yi(i) ? Object.assign({}, i.mapValue.fields) : {};
              return (
                e.forEach(function (e, i) {
                  if (e instanceof Map) {
                    var s = n.yt(t.child(i), e);
                    null != s && ((o[i] = s), (r = !0));
                  } else null !== e ? ((o[i] = e), (r = !0)) : o.hasOwnProperty(i) && (delete o[i], (r = !0));
                }),
                r ? { mapValue: { fields: o } } : null
              );
            }),
            t
          );
        })();
      function _i(t) {
        var e = [];
        return (
          Kr(t.fields || {}, function (t, n) {
            var r = new Wr([t]);
            if (yi(n)) {
              var i = _i(n.mapValue).fields;
              if (0 === i.length) e.push(r);
              else
                for (var o = 0, s = i; o < s.length; o++) {
                  var a = s[o];
                  e.push(r.child(a));
                }
            } else e.push(r);
          }),
          new Qr(e)
        );
      }
      var Ii = function (t, e) {
          (this.key = t), (this.version = e);
        },
        Ei = (function (t) {
          function e(e, n, r, i) {
            var o = this;
            return (
              ((o = t.call(this, e, n) || this).gt = r),
              (o.Vt = !!i.Vt),
              (o.hasCommittedMutations = !!i.hasCommittedMutations),
              o
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.field = function (t) {
              return this.gt.field(t);
            }),
            (e.prototype.data = function () {
              return this.gt;
            }),
            (e.prototype.bt = function () {
              return this.gt.proto;
            }),
            (e.prototype.isEqual = function (t) {
              return (
                t instanceof e &&
                this.key.isEqual(t.key) &&
                this.version.isEqual(t.version) &&
                this.Vt === t.Vt &&
                this.hasCommittedMutations === t.hasCommittedMutations &&
                this.gt.isEqual(t.gt)
              );
            }),
            (e.prototype.toString = function () {
              return (
                "Document(" +
                this.key +
                ", " +
                this.version +
                ", " +
                this.gt.toString() +
                ", {hasLocalMutations: " +
                this.Vt +
                "}), {hasCommittedMutations: " +
                this.hasCommittedMutations +
                "})"
              );
            }),
            Object.defineProperty(e.prototype, "hasPendingWrites", {
              get: function () {
                return this.Vt || this.hasCommittedMutations;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(Ii),
        Ti = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this, e, n) || this).hasCommittedMutations = !(
                !r || !r.hasCommittedMutations
              )),
              i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.toString = function () {
              return "NoDocument(" + this.key + ", " + this.version + ")";
            }),
            Object.defineProperty(e.prototype, "hasPendingWrites", {
              get: function () {
                return this.hasCommittedMutations;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.isEqual = function (t) {
              return (
                t instanceof e &&
                t.hasCommittedMutations === this.hasCommittedMutations &&
                t.version.isEqual(this.version) &&
                t.key.isEqual(this.key)
              );
            }),
            e
          );
        })(Ii),
        Si = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.toString = function () {
              return "UnknownDocument(" + this.key + ", " + this.version + ")";
            }),
            Object.defineProperty(e.prototype, "hasPendingWrites", {
              get: function () {
                return !0;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.isEqual = function (t) {
              return (
                t instanceof e &&
                t.version.isEqual(this.version) &&
                t.key.isEqual(this.key)
              );
            }),
            e
          );
        })(Ii),
        Ci = function (t, e, n, r, i, o, s) {
          void 0 === e && (e = null),
            void 0 === n && (n = []),
            void 0 === r && (r = []),
            void 0 === i && (i = null),
            void 0 === o && (o = null),
            void 0 === s && (s = null),
            (this.path = t),
            (this.collectionGroup = e),
            (this.orderBy = n),
            (this.filters = r),
            (this.limit = i),
            (this.startAt = o),
            (this.endAt = s),
            (this.vt = null);
        };
      function ki(t, e, n, r, i, o, s) {
        return (
          void 0 === e && (e = null),
          void 0 === n && (n = []),
          void 0 === r && (r = []),
          void 0 === i && (i = null),
          void 0 === o && (o = null),
          void 0 === s && (s = null),
          new Ci(t, e, n, r, i, o, s)
        );
      }
      function Ni(t) {
        var e = Ir(t);
        if (null === e.vt) {
          var n = e.path.rt();
          null !== e.collectionGroup && (n += "|cg:" + e.collectionGroup),
            (n += "|f:"),
            (n += e.filters
              .map(function (t) {
                return (function (t) {
                  return t.field.rt() + t.op.toString() + li(t.value);
                })(t);
              })
              .join(",")),
            (n += "|ob:"),
            (n += e.orderBy
              .map(function (t) {
                return (function (t) {
                  return t.field.rt() + t.dir;
                })(t);
              })
              .join(",")),
            ri(e.limit) || ((n += "|l:"), (n += e.limit)),
            e.startAt && ((n += "|lb:"), (n += qi(e.startAt))),
            e.endAt && ((n += "|ub:"), (n += qi(e.endAt))),
            (e.vt = n);
        }
        return e.vt;
      }
      function Ai(t, e) {
        if (t.limit !== e.limit) return !1;
        if (t.orderBy.length !== e.orderBy.length) return !1;
        for (var n = 0; n < t.orderBy.length; n++)
          if (!Gi(t.orderBy[n], e.orderBy[n])) return !1;
        if (t.filters.length !== e.filters.length) return !1;
        for (var r = 0; r < t.filters.length; r++)
          if (
            ((i = t.filters[r]),
            (o = e.filters[r]),
            i.op !== o.op || !i.field.isEqual(o.field) || !ai(i.value, o.value))
          )
            return !1;
        var i, o;
        return (
          t.collectionGroup === e.collectionGroup &&
          !!t.path.isEqual(e.path) &&
          !!zi(t.startAt, e.startAt) &&
          zi(t.endAt, e.endAt)
        );
      }
      function Pi(t) {
        return (
          zr.wt(t.path) && null === t.collectionGroup && 0 === t.filters.length
        );
      }
      var Di = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this) || this).field = e),
              (i.op = n),
              (i.value = r),
              i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.create = function (t, n, r) {
              return t.ut()
                ? "in" === n || "not-in" === n
                  ? this.St(t, n, r)
                  : new xi(t, n, r)
                : "array-contains" === n
                ? new Li(t, r)
                : "in" === n
                ? new ji(t, r)
                : "not-in" === n
                ? new Fi(t, r)
                : "array-contains-any" === n
                ? new Ui(t, r)
                : new e(t, n, r);
            }),
            (e.St = function (t, e, n) {
              return "in" === e ? new Oi(t, n) : new Ri(t, n);
            }),
            (e.prototype.matches = function (t) {
              var e = t.field(this.field);
              return "!=" === this.op
                ? null !== e && this.Dt(ci(e, this.value))
                : null !== e &&
                    si(this.value) === si(e) &&
                    this.Dt(ci(e, this.value));
            }),
            (e.prototype.Dt = function (t) {
              switch (this.op) {
                case "<":
                  return t < 0;
                case "<=":
                  return t <= 0;
                case "==":
                  return 0 === t;
                case "!=":
                  return 0 !== t;
                case ">":
                  return t > 0;
                case ">=":
                  return t >= 0;
                default:
                  return wr();
              }
            }),
            (e.prototype.Ct = function () {
              return (
                ["<", "<=", ">", ">=", "!=", "not-in"].indexOf(this.op) >= 0
              );
            }),
            e
          );
        })(function () {}),
        xi = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this, e, n, r) || this).key = zr.ft(
                r.referenceValue
              )),
              i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.matches = function (t) {
              var e = zr.H(t.key, this.key);
              return this.Dt(e);
            }),
            e
          );
        })(Di),
        Oi = (function (t) {
          function e(e, n) {
            var r = this;
            return ((r = t.call(this, e, "in", n) || this).keys = Mi(0, n)), r;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.matches = function (t) {
              return this.keys.some(function (e) {
                return e.isEqual(t.key);
              });
            }),
            e
          );
        })(Di),
        Ri = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this, e, "not-in", n) || this).keys = Mi(0, n)), r
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.matches = function (t) {
              return !this.keys.some(function (e) {
                return e.isEqual(t.key);
              });
            }),
            e
          );
        })(Di);
      function Mi(t, e) {
        var n;
        return (
          (null === (n = e.arrayValue) || void 0 === n ? void 0 : n.values) ||
          []
        ).map(function (t) {
          return zr.ft(t.referenceValue);
        });
      }
      var Li = (function (t) {
          function e(e, n) {
            return t.call(this, e, "array-contains", n) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.matches = function (t) {
              var e = t.field(this.field);
              return vi(e) && ui(e.arrayValue, this.value);
            }),
            e
          );
        })(Di),
        ji = (function (t) {
          function e(e, n) {
            return t.call(this, e, "in", n) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.matches = function (t) {
              var e = t.field(this.field);
              return null !== e && ui(this.value.arrayValue, e);
            }),
            e
          );
        })(Di),
        Fi = (function (t) {
          function e(e, n) {
            return t.call(this, e, "not-in", n) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.matches = function (t) {
              if (ui(this.value.arrayValue, { nullValue: "NULL_VALUE" }))
                return !1;
              var e = t.field(this.field);
              return null !== e && !ui(this.value.arrayValue, e);
            }),
            e
          );
        })(Di),
        Ui = (function (t) {
          function e(e, n) {
            return t.call(this, e, "array-contains-any", n) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.matches = function (t) {
              var e = this,
                n = t.field(this.field);
              return (
                !(!vi(n) || !n.arrayValue.values) &&
                n.arrayValue.values.some(function (t) {
                  return ui(e.value.arrayValue, t);
                })
              );
            }),
            e
          );
        })(Di),
        Vi = function (t, e) {
          (this.position = t), (this.before = e);
        };
      function qi(t) {
        return (
          (t.before ? "b" : "a") +
          ":" +
          t.position
            .map(function (t) {
              return li(t);
            })
            .join(",")
        );
      }
      var Bi = function (t, e) {
        void 0 === e && (e = "asc"), (this.field = t), (this.dir = e);
      };
      function Gi(t, e) {
        return t.dir === e.dir && t.field.isEqual(e.field);
      }
      function Wi(t, e, n) {
        for (var r = 0, i = 0; i < t.position.length; i++) {
          var o = e[i],
            s = t.position[i];
          if (
            ((r = o.field.ut()
              ? zr.H(zr.ft(s.referenceValue), n.key)
              : ci(s, n.field(o.field))),
            "desc" === o.dir && (r *= -1),
            0 !== r)
          )
            break;
        }
        return t.before ? r <= 0 : r < 0;
      }
      function zi(t, e) {
        if (null === t) return null === e;
        if (null === e) return !1;
        if (t.before !== e.before || t.position.length !== e.position.length)
          return !1;
        for (var n = 0; n < t.position.length; n++)
          if (!ai(t.position[n], e.position[n])) return !1;
        return !0;
      }
      var Hi = function (t, e, n, r, i, o, s, a) {
        void 0 === e && (e = null),
          void 0 === n && (n = []),
          void 0 === r && (r = []),
          void 0 === i && (i = null),
          void 0 === o && (o = "F"),
          void 0 === s && (s = null),
          void 0 === a && (a = null),
          (this.path = t),
          (this.collectionGroup = e),
          (this.xt = n),
          (this.filters = r),
          (this.limit = i),
          (this.limitType = o),
          (this.startAt = s),
          (this.endAt = a),
          (this.Nt = null),
          (this.$t = null),
          this.startAt,
          this.endAt;
      };
      function Ki(t, e, n, r, i, o, s, a) {
        return new Hi(t, e, n, r, i, o, s, a);
      }
      function Ji(t) {
        return new Hi(t);
      }
      function Qi(t) {
        return !ri(t.limit) && "F" === t.limitType;
      }
      function Yi(t) {
        return !ri(t.limit) && "L" === t.limitType;
      }
      function Xi(t) {
        return t.xt.length > 0 ? t.xt[0].field : null;
      }
      function Zi(t) {
        for (var e = 0, n = t.filters; e < n.length; e++) {
          var r = n[e];
          if (r.Ct()) return r.field;
        }
        return null;
      }
      function $i(t) {
        return null !== t.collectionGroup;
      }
      function to(t) {
        var e = Ir(t);
        if (null === e.Nt) {
          e.Nt = [];
          var n = Zi(e),
            r = Xi(e);
          if (null !== n && null === r)
            n.ut() || e.Nt.push(new Bi(n)), e.Nt.push(new Bi(Wr.ht(), "asc"));
          else {
            for (var i = !1, o = 0, s = e.xt; o < s.length; o++) {
              var a = s[o];
              e.Nt.push(a), a.field.ut() && (i = !0);
            }
            if (!i) {
              var u = e.xt.length > 0 ? e.xt[e.xt.length - 1].dir : "asc";
              e.Nt.push(new Bi(Wr.ht(), u));
            }
          }
        }
        return e.Nt;
      }
      function eo(t) {
        var e = Ir(t);
        if (!e.$t)
          if ("F" === e.limitType)
            e.$t = ki(
              e.path,
              e.collectionGroup,
              to(e),
              e.filters,
              e.limit,
              e.startAt,
              e.endAt
            );
          else {
            for (var n = [], r = 0, i = to(e); r < i.length; r++) {
              var o = i[r],
                s = "desc" === o.dir ? "asc" : "desc";
              n.push(new Bi(o.field, s));
            }
            var a = e.endAt ? new Vi(e.endAt.position, !e.endAt.before) : null,
              u = e.startAt
                ? new Vi(e.startAt.position, !e.startAt.before)
                : null;
            e.$t = ki(e.path, e.collectionGroup, n, e.filters, e.limit, a, u);
          }
        return e.$t;
      }
      function no(t, e, n) {
        return new Hi(
          t.path,
          t.collectionGroup,
          t.xt.slice(),
          t.filters.slice(),
          e,
          n,
          t.startAt,
          t.endAt
        );
      }
      function ro(t, e) {
        return Ai(eo(t), eo(e)) && t.limitType === e.limitType;
      }
      function io(t) {
        return Ni(eo(t)) + "|lt:" + t.limitType;
      }
      function oo(t) {
        return (
          "Query(target=" +
          (function (t) {
            var e = t.path.rt();
            return (
              null !== t.collectionGroup &&
                (e += " collectionGroup=" + t.collectionGroup),
              t.filters.length > 0 &&
                (e +=
                  ", filters: [" +
                  t.filters
                    .map(function (t) {
                      return (
                        (e = t).field.rt() + " " + e.op + " " + li(e.value)
                      );
                      var e;
                    })
                    .join(", ") +
                  "]"),
              ri(t.limit) || (e += ", limit: " + t.limit),
              t.orderBy.length > 0 &&
                (e +=
                  ", orderBy: [" +
                  t.orderBy
                    .map(function (t) {
                      return (function (t) {
                        return t.field.rt() + " (" + t.dir + ")";
                      })(t);
                    })
                    .join(", ") +
                  "]"),
              t.startAt && (e += ", startAt: " + qi(t.startAt)),
              t.endAt && (e += ", endAt: " + qi(t.endAt)),
              "Target(" + e + ")"
            );
          })(eo(t)) +
          "; limitType=" +
          t.limitType +
          ")"
        );
      }
      function so(t, e) {
        return (
          (function (t, e) {
            var n = e.key.path;
            return null !== t.collectionGroup
              ? e.key.dt(t.collectionGroup) && t.path.nt(n)
              : zr.wt(t.path)
              ? t.path.isEqual(n)
              : t.path.st(n);
          })(t, e) &&
          (function (t, e) {
            for (var n = 0, r = t.xt; n < r.length; n++) {
              var i = r[n];
              if (!i.field.ut() && null === e.field(i.field)) return !1;
            }
            return !0;
          })(t, e) &&
          (function (t, e) {
            for (var n = 0, r = t.filters; n < r.length; n++)
              if (!r[n].matches(e)) return !1;
            return !0;
          })(t, e) &&
          (function (t, e) {
            return !(
              (t.startAt && !Wi(t.startAt, to(t), e)) ||
              (t.endAt && Wi(t.endAt, to(t), e))
            );
          })(t, e)
        );
      }
      function ao(t) {
        return function (e, n) {
          for (var r = !1, i = 0, o = to(t); i < o.length; i++) {
            var s = o[i],
              a = uo(s, e, n);
            if (0 !== a) return a;
            r = r || s.field.ut();
          }
          return 0;
        };
      }
      function uo(t, e, n) {
        var r = t.field.ut()
          ? zr.H(e.key, n.key)
          : (function (t, e, n) {
              var r = e.field(t),
                i = n.field(t);
              return null !== r && null !== i ? ci(r, i) : wr();
            })(t.field, e, n);
        switch (t.dir) {
          case "asc":
            return r;
          case "desc":
            return -1 * r;
          default:
            return wr();
        }
      }
      var co = (function () {
        function t(t, e, n, r, i, o, s) {
          void 0 === i && (i = Vr.min()),
            void 0 === o && (o = Vr.min()),
            void 0 === s && (s = Nr.T),
            (this.target = t),
            (this.targetId = e),
            (this.Ft = n),
            (this.sequenceNumber = r),
            (this.Ot = i),
            (this.lastLimboFreeSnapshotVersion = o),
            (this.resumeToken = s);
        }
        return (
          (t.prototype.kt = function (e) {
            return new t(
              this.target,
              this.targetId,
              this.Ft,
              e,
              this.Ot,
              this.lastLimboFreeSnapshotVersion,
              this.resumeToken
            );
          }),
          (t.prototype.Mt = function (e, n) {
            return new t(
              this.target,
              this.targetId,
              this.Ft,
              this.sequenceNumber,
              n,
              this.lastLimboFreeSnapshotVersion,
              e
            );
          }),
          (t.prototype.Lt = function (e) {
            return new t(
              this.target,
              this.targetId,
              this.Ft,
              this.sequenceNumber,
              this.Ot,
              e,
              this.resumeToken
            );
          }),
          t
        );
      })();
      function ho(t, e) {
        if (t.Bt) {
          if (isNaN(e)) return { doubleValue: "NaN" };
          if (e === 1 / 0) return { doubleValue: "Infinity" };
          if (e === -1 / 0) return { doubleValue: "-Infinity" };
        }
        return { doubleValue: ii(e) ? "-0" : e };
      }
      function lo(t) {
        return { integerValue: "" + t };
      }
      function fo(t, e) {
        return oi(e) ? lo(e) : ho(t, e);
      }
      var po = function () {
        this.qt = void 0;
      };
      function vo(t, e, n) {
        return t instanceof yo
          ? (function (t, e) {
              var n = {
                fields: {
                  __type__: { stringValue: "server_timestamp" },
                  __local_write_time__: {
                    timestampValue: {
                      seconds: t.seconds,
                      nanos: t.nanoseconds,
                    },
                  },
                },
              };
              return e && (n.fields.__previous_value__ = e), { mapValue: n };
            })(n, e)
          : t instanceof bo
          ? wo(t, e)
          : t instanceof _o
          ? Io(t, e)
          : (function (t, e) {
              var n = mo(t, e),
                r = To(n) + To(t.Ut);
              return di(n) && di(t.Ut) ? lo(r) : ho(t.Qt, r);
            })(t, e);
      }
      function go(t, e, n) {
        return t instanceof bo ? wo(t, e) : t instanceof _o ? Io(t, e) : n;
      }
      function mo(t, e) {
        return t instanceof Eo
          ? di((n = e)) ||
            (function (t) {
              return !!t && "doubleValue" in t;
            })(n)
            ? e
            : { integerValue: 0 }
          : null;
        var n;
      }
      var yo = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (0, lr.ZT)(e, t), e;
        })(po),
        bo = (function (t) {
          function e(e) {
            var n = this;
            return ((n = t.call(this) || this).elements = e), n;
          }
          return (0, lr.ZT)(e, t), e;
        })(po);
      function wo(t, e) {
        for (
          var n = So(e),
            r = function (t) {
              n.some(function (e) {
                return ai(e, t);
              }) || n.push(t);
            },
            i = 0,
            o = t.elements;
          i < o.length;
          i++
        )
          r(o[i]);
        return { arrayValue: { values: n } };
      }
      var _o = (function (t) {
        function e(e) {
          var n = this;
          return ((n = t.call(this) || this).elements = e), n;
        }
        return (0, lr.ZT)(e, t), e;
      })(po);
      function Io(t, e) {
        for (
          var n = So(e),
            r = function (t) {
              n = n.filter(function (e) {
                return !ai(e, t);
              });
            },
            i = 0,
            o = t.elements;
          i < o.length;
          i++
        )
          r(o[i]);
        return { arrayValue: { values: n } };
      }
      var Eo = (function (t) {
        function e(e, n) {
          var r = this;
          return ((r = t.call(this) || this).Qt = e), (r.Ut = n), r;
        }
        return (0, lr.ZT)(e, t), e;
      })(po);
      function To(t) {
        return Zr(t.integerValue || t.doubleValue);
      }
      function So(t) {
        return vi(t) && t.arrayValue.values ? t.arrayValue.values.slice() : [];
      }
      var Co = function (t, e) {
          (this.field = t), (this.transform = e);
        },
        ko = function (t, e) {
          (this.version = t), (this.transformResults = e);
        },
        No = (function () {
          function t(t, e) {
            (this.updateTime = t), (this.exists = e);
          }
          return (
            (t.Kt = function () {
              return new t();
            }),
            (t.exists = function (e) {
              return new t(void 0, e);
            }),
            (t.updateTime = function (e) {
              return new t(e);
            }),
            Object.defineProperty(t.prototype, "Wt", {
              get: function () {
                return void 0 === this.updateTime && void 0 === this.exists;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.isEqual = function (t) {
              return (
                this.exists === t.exists &&
                (this.updateTime
                  ? !!t.updateTime && this.updateTime.isEqual(t.updateTime)
                  : !t.updateTime)
              );
            }),
            t
          );
        })();
      function Ao(t, e) {
        return void 0 !== t.updateTime
          ? e instanceof Ei && e.version.isEqual(t.updateTime)
          : void 0 === t.exists || t.exists === e instanceof Ei;
      }
      var Po = function () {};
      function Do(t, e, n) {
        return t instanceof Lo
          ? (function (t, e, n) {
              var r = t.value,
                i = Uo(t.fieldTransforms, e, n.transformResults);
              return (
                (r = qo(t.fieldTransforms, r, i)),
                new Ei(t.key, n.version, r, { hasCommittedMutations: !0 })
              );
            })(t, e, n)
          : t instanceof jo
          ? (function (t, e, n) {
              if (!Ao(t.jt, e)) return new Si(t.key, n.version);
              var r = Fo(t, e, Uo(t.fieldTransforms, e, n.transformResults));
              return new Ei(t.key, n.version, r, { hasCommittedMutations: !0 });
            })(t, e, n)
          : (function (t, e, n) {
              return new Ti(t.key, n.version, { hasCommittedMutations: !0 });
            })(t, 0, n);
      }
      function xo(t, e, n) {
        return t instanceof Lo
          ? (function (t, e, n) {
              if (!Ao(t.jt, e)) return e;
              var r = t.value,
                i = Vo(t.fieldTransforms, n, e);
              r = qo(t.fieldTransforms, r, i);
              var o = Mo(e);
              return new Ei(t.key, o, r, { Vt: !0 });
            })(t, e, n)
          : t instanceof jo
          ? (function (t, e, n) {
              if (!Ao(t.jt, e)) return e;
              var r = Mo(e),
                i = Fo(t, e, Vo(t.fieldTransforms, n, e));
              return new Ei(t.key, r, i, { Vt: !0 });
            })(t, e, n)
          : (function (t, e) {
              return Ao(t.jt, e) ? new Ti(t.key, Vr.min()) : e;
            })(t, e);
      }
      function Oo(t, e) {
        return (function (t, e) {
          for (var n = null, r = 0, i = t; r < i.length; r++) {
            var o = i[r],
              s = e instanceof Ei ? e.field(o.field) : void 0,
              a = mo(o.transform, s || null);
            null != a &&
              (n = null == n ? new wi().set(o.field, a) : n.set(o.field, a));
          }
          return n ? n.Pt() : null;
        })(t.fieldTransforms, e);
      }
      function Ro(t, e) {
        return (
          t.type === e.type &&
          !!t.key.isEqual(e.key) &&
          !!t.jt.isEqual(e.jt) &&
          !!(function (t, e) {
            return (
              (void 0 === t && void 0 === e) ||
              (!(!t || !e) &&
                Cr(t, e, function (t, e) {
                  return (function (t, e) {
                    return (
                      t.field.isEqual(e.field) &&
                      (function (t, e) {
                        return (t instanceof bo && e instanceof bo) ||
                          (t instanceof _o && e instanceof _o)
                          ? Cr(t.elements, e.elements, ai)
                          : t instanceof Eo && e instanceof Eo
                          ? ai(t.Ut, e.Ut)
                          : t instanceof yo && e instanceof yo;
                      })(t.transform, e.transform)
                    );
                  })(t, e);
                }))
            );
          })(t.fieldTransforms, e.fieldTransforms) &&
          (0 === t.type
            ? t.value.isEqual(e.value)
            : 1 !== t.type || (t.data.isEqual(e.data) && t.Gt.isEqual(e.Gt)))
        );
      }
      function Mo(t) {
        return t instanceof Ei ? t.version : Vr.min();
      }
      var Lo = (function (t) {
          function e(e, n, r, i) {
            void 0 === i && (i = []);
            var o = this;
            return (
              ((o = t.call(this) || this).key = e),
              (o.value = n),
              (o.jt = r),
              (o.fieldTransforms = i),
              (o.type = 0),
              o
            );
          }
          return (0, lr.ZT)(e, t), e;
        })(Po),
        jo = (function (t) {
          function e(e, n, r, i, o) {
            void 0 === o && (o = []);
            var s = this;
            return (
              ((s = t.call(this) || this).key = e),
              (s.data = n),
              (s.Gt = r),
              (s.jt = i),
              (s.fieldTransforms = o),
              (s.type = 1),
              s
            );
          }
          return (0, lr.ZT)(e, t), e;
        })(Po);
      function Fo(t, e, n) {
        var r;
        return (
          (r = (function (t, e) {
            var n = new wi(e);
            return (
              t.Gt.fields.forEach(function (e) {
                if (!e.et()) {
                  var r = t.data.field(e);
                  null !== r ? n.set(e, r) : n.delete(e);
                }
              }),
              n.Pt()
            );
          })(t, (r = e instanceof Ei ? e.data() : bi.empty()))),
          qo(t.fieldTransforms, r, n)
        );
      }
      function Uo(t, e, n) {
        var r = [];
        _r(t.length === n.length);
        for (var i = 0; i < n.length; i++) {
          var o = t[i],
            s = o.transform,
            a = null;
          e instanceof Ei && (a = e.field(o.field)), r.push(go(s, a, n[i]));
        }
        return r;
      }
      function Vo(t, e, n) {
        for (var r = [], i = 0, o = t; i < o.length; i++) {
          var s = o[i],
            a = s.transform,
            u = null;
          n instanceof Ei && (u = n.field(s.field)), r.push(vo(a, u, e));
        }
        return r;
      }
      function qo(t, e, n) {
        for (var r = new wi(e), i = 0; i < t.length; i++) {
          var o = t[i];
          r.set(o.field, n[i]);
        }
        return r.Pt();
      }
      var Bo,
        Go,
        Wo = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this) || this).key = e),
              (r.jt = n),
              (r.type = 2),
              (r.fieldTransforms = []),
              r
            );
          }
          return (0, lr.ZT)(e, t), e;
        })(Po),
        zo = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this) || this).key = e),
              (r.jt = n),
              (r.type = 3),
              (r.fieldTransforms = []),
              r
            );
          }
          return (0, lr.ZT)(e, t), e;
        })(Po),
        Ho = function (t) {
          this.count = t;
        };
      function Ko(t) {
        switch (t) {
          case Ar.OK:
            return wr();
          case Ar.CANCELLED:
          case Ar.UNKNOWN:
          case Ar.DEADLINE_EXCEEDED:
          case Ar.RESOURCE_EXHAUSTED:
          case Ar.INTERNAL:
          case Ar.UNAVAILABLE:
          case Ar.UNAUTHENTICATED:
            return !1;
          case Ar.INVALID_ARGUMENT:
          case Ar.NOT_FOUND:
          case Ar.ALREADY_EXISTS:
          case Ar.PERMISSION_DENIED:
          case Ar.FAILED_PRECONDITION:
          case Ar.ABORTED:
          case Ar.OUT_OF_RANGE:
          case Ar.UNIMPLEMENTED:
          case Ar.DATA_LOSS:
            return !0;
          default:
            return wr();
        }
      }
      function Jo(t) {
        if (void 0 === t) return mr("GRPC error has no .code"), Ar.UNKNOWN;
        switch (t) {
          case Bo.OK:
            return Ar.OK;
          case Bo.CANCELLED:
            return Ar.CANCELLED;
          case Bo.UNKNOWN:
            return Ar.UNKNOWN;
          case Bo.DEADLINE_EXCEEDED:
            return Ar.DEADLINE_EXCEEDED;
          case Bo.RESOURCE_EXHAUSTED:
            return Ar.RESOURCE_EXHAUSTED;
          case Bo.INTERNAL:
            return Ar.INTERNAL;
          case Bo.UNAVAILABLE:
            return Ar.UNAVAILABLE;
          case Bo.UNAUTHENTICATED:
            return Ar.UNAUTHENTICATED;
          case Bo.INVALID_ARGUMENT:
            return Ar.INVALID_ARGUMENT;
          case Bo.NOT_FOUND:
            return Ar.NOT_FOUND;
          case Bo.ALREADY_EXISTS:
            return Ar.ALREADY_EXISTS;
          case Bo.PERMISSION_DENIED:
            return Ar.PERMISSION_DENIED;
          case Bo.FAILED_PRECONDITION:
            return Ar.FAILED_PRECONDITION;
          case Bo.ABORTED:
            return Ar.ABORTED;
          case Bo.OUT_OF_RANGE:
            return Ar.OUT_OF_RANGE;
          case Bo.UNIMPLEMENTED:
            return Ar.UNIMPLEMENTED;
          case Bo.DATA_LOSS:
            return Ar.DATA_LOSS;
          default:
            return wr();
        }
      }
      ((Go = Bo || (Bo = {}))[(Go.OK = 0)] = "OK"),
        (Go[(Go.CANCELLED = 1)] = "CANCELLED"),
        (Go[(Go.UNKNOWN = 2)] = "UNKNOWN"),
        (Go[(Go.INVALID_ARGUMENT = 3)] = "INVALID_ARGUMENT"),
        (Go[(Go.DEADLINE_EXCEEDED = 4)] = "DEADLINE_EXCEEDED"),
        (Go[(Go.NOT_FOUND = 5)] = "NOT_FOUND"),
        (Go[(Go.ALREADY_EXISTS = 6)] = "ALREADY_EXISTS"),
        (Go[(Go.PERMISSION_DENIED = 7)] = "PERMISSION_DENIED"),
        (Go[(Go.UNAUTHENTICATED = 16)] = "UNAUTHENTICATED"),
        (Go[(Go.RESOURCE_EXHAUSTED = 8)] = "RESOURCE_EXHAUSTED"),
        (Go[(Go.FAILED_PRECONDITION = 9)] = "FAILED_PRECONDITION"),
        (Go[(Go.ABORTED = 10)] = "ABORTED"),
        (Go[(Go.OUT_OF_RANGE = 11)] = "OUT_OF_RANGE"),
        (Go[(Go.UNIMPLEMENTED = 12)] = "UNIMPLEMENTED"),
        (Go[(Go.INTERNAL = 13)] = "INTERNAL"),
        (Go[(Go.UNAVAILABLE = 14)] = "UNAVAILABLE"),
        (Go[(Go.DATA_LOSS = 15)] = "DATA_LOSS");
      var Qo = (function () {
          function t(t, e) {
            (this.H = t), (this.root = e || Xo.EMPTY);
          }
          return (
            (t.prototype.zt = function (e, n) {
              return new t(
                this.H,
                this.root.zt(e, n, this.H).copy(null, null, Xo.Ht, null, null)
              );
            }),
            (t.prototype.remove = function (e) {
              return new t(
                this.H,
                this.root.remove(e, this.H).copy(null, null, Xo.Ht, null, null)
              );
            }),
            (t.prototype.get = function (t) {
              for (var e = this.root; !e.et(); ) {
                var n = this.H(t, e.key);
                if (0 === n) return e.value;
                n < 0 ? (e = e.left) : n > 0 && (e = e.right);
              }
              return null;
            }),
            (t.prototype.indexOf = function (t) {
              for (var e = 0, n = this.root; !n.et(); ) {
                var r = this.H(t, n.key);
                if (0 === r) return e + n.left.size;
                r < 0 ? (n = n.left) : ((e += n.left.size + 1), (n = n.right));
              }
              return -1;
            }),
            (t.prototype.et = function () {
              return this.root.et();
            }),
            Object.defineProperty(t.prototype, "size", {
              get: function () {
                return this.root.size;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.Jt = function () {
              return this.root.Jt();
            }),
            (t.prototype.Yt = function () {
              return this.root.Yt();
            }),
            (t.prototype.Xt = function (t) {
              return this.root.Xt(t);
            }),
            (t.prototype.forEach = function (t) {
              this.Xt(function (e, n) {
                return t(e, n), !1;
              });
            }),
            (t.prototype.toString = function () {
              var t = [];
              return (
                this.Xt(function (e, n) {
                  return t.push(e + ":" + n), !1;
                }),
                "{" + t.join(", ") + "}"
              );
            }),
            (t.prototype.Zt = function (t) {
              return this.root.Zt(t);
            }),
            (t.prototype.te = function () {
              return new Yo(this.root, null, this.H, !1);
            }),
            (t.prototype.ee = function (t) {
              return new Yo(this.root, t, this.H, !1);
            }),
            (t.prototype.ne = function () {
              return new Yo(this.root, null, this.H, !0);
            }),
            (t.prototype.se = function (t) {
              return new Yo(this.root, t, this.H, !0);
            }),
            t
          );
        })(),
        Yo = (function () {
          function t(t, e, n, r) {
            (this.ie = r), (this.re = []);
            for (var i = 1; !t.et(); )
              if (((i = e ? n(t.key, e) : 1), r && (i *= -1), i < 0))
                t = this.ie ? t.left : t.right;
              else {
                if (0 === i) {
                  this.re.push(t);
                  break;
                }
                this.re.push(t), (t = this.ie ? t.right : t.left);
              }
          }
          return (
            (t.prototype.oe = function () {
              var t = this.re.pop(),
                e = { key: t.key, value: t.value };
              if (this.ie)
                for (t = t.left; !t.et(); ) this.re.push(t), (t = t.right);
              else for (t = t.right; !t.et(); ) this.re.push(t), (t = t.left);
              return e;
            }),
            (t.prototype.ce = function () {
              return this.re.length > 0;
            }),
            (t.prototype.ae = function () {
              if (0 === this.re.length) return null;
              var t = this.re[this.re.length - 1];
              return { key: t.key, value: t.value };
            }),
            t
          );
        })(),
        Xo = (function () {
          function t(e, n, r, i, o) {
            (this.key = e),
              (this.value = n),
              (this.color = null != r ? r : t.RED),
              (this.left = null != i ? i : t.EMPTY),
              (this.right = null != o ? o : t.EMPTY),
              (this.size = this.left.size + 1 + this.right.size);
          }
          return (
            (t.prototype.copy = function (e, n, r, i, o) {
              return new t(
                null != e ? e : this.key,
                null != n ? n : this.value,
                null != r ? r : this.color,
                null != i ? i : this.left,
                null != o ? o : this.right
              );
            }),
            (t.prototype.et = function () {
              return !1;
            }),
            (t.prototype.Xt = function (t) {
              return (
                this.left.Xt(t) || t(this.key, this.value) || this.right.Xt(t)
              );
            }),
            (t.prototype.Zt = function (t) {
              return (
                this.right.Zt(t) || t(this.key, this.value) || this.left.Zt(t)
              );
            }),
            (t.prototype.min = function () {
              return this.left.et() ? this : this.left.min();
            }),
            (t.prototype.Jt = function () {
              return this.min().key;
            }),
            (t.prototype.Yt = function () {
              return this.right.et() ? this.key : this.right.Yt();
            }),
            (t.prototype.zt = function (t, e, n) {
              var r = this,
                i = n(t, r.key);
              return (r =
                i < 0
                  ? r.copy(null, null, null, r.left.zt(t, e, n), null)
                  : 0 === i
                  ? r.copy(null, e, null, null, null)
                  : r.copy(null, null, null, null, r.right.zt(t, e, n))).ue();
            }),
            (t.prototype.he = function () {
              if (this.left.et()) return t.EMPTY;
              var e = this;
              return (
                e.left.le() || e.left.left.le() || (e = e._e()),
                (e = e.copy(null, null, null, e.left.he(), null)).ue()
              );
            }),
            (t.prototype.remove = function (e, n) {
              var r,
                i = this;
              if (n(e, i.key) < 0)
                i.left.et() || i.left.le() || i.left.left.le() || (i = i._e()),
                  (i = i.copy(null, null, null, i.left.remove(e, n), null));
              else {
                if (
                  (i.left.le() && (i = i.fe()),
                  i.right.et() ||
                    i.right.le() ||
                    i.right.left.le() ||
                    (i = i.de()),
                  0 === n(e, i.key))
                ) {
                  if (i.right.et()) return t.EMPTY;
                  (r = i.right.min()),
                    (i = i.copy(r.key, r.value, null, null, i.right.he()));
                }
                i = i.copy(null, null, null, null, i.right.remove(e, n));
              }
              return i.ue();
            }),
            (t.prototype.le = function () {
              return this.color;
            }),
            (t.prototype.ue = function () {
              var t = this;
              return (
                t.right.le() && !t.left.le() && (t = t.we()),
                t.left.le() && t.left.left.le() && (t = t.fe()),
                t.left.le() && t.right.le() && (t = t.Ee()),
                t
              );
            }),
            (t.prototype._e = function () {
              var t = this.Ee();
              return (
                t.right.left.le() &&
                  (t = (t = (t = t.copy(
                    null,
                    null,
                    null,
                    null,
                    t.right.fe()
                  )).we()).Ee()),
                t
              );
            }),
            (t.prototype.de = function () {
              var t = this.Ee();
              return t.left.left.le() && (t = (t = t.fe()).Ee()), t;
            }),
            (t.prototype.we = function () {
              var e = this.copy(null, null, t.RED, null, this.right.left);
              return this.right.copy(null, null, this.color, e, null);
            }),
            (t.prototype.fe = function () {
              var e = this.copy(null, null, t.RED, this.left.right, null);
              return this.left.copy(null, null, this.color, null, e);
            }),
            (t.prototype.Ee = function () {
              var t = this.left.copy(null, null, !this.left.color, null, null),
                e = this.right.copy(null, null, !this.right.color, null, null);
              return this.copy(null, null, !this.color, t, e);
            }),
            (t.prototype.Te = function () {
              var t = this.Ie();
              return Math.pow(2, t) <= this.size + 1;
            }),
            (t.prototype.Ie = function () {
              if (this.le() && this.left.le()) throw wr();
              if (this.right.le()) throw wr();
              var t = this.left.Ie();
              if (t !== this.right.Ie()) throw wr();
              return t + (this.le() ? 0 : 1);
            }),
            t
          );
        })();
      (Xo.EMPTY = null),
        (Xo.RED = !0),
        (Xo.Ht = !1),
        (Xo.EMPTY = new ((function () {
          function t() {
            this.size = 0;
          }
          return (
            Object.defineProperty(t.prototype, "key", {
              get: function () {
                throw wr();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "value", {
              get: function () {
                throw wr();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "color", {
              get: function () {
                throw wr();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "left", {
              get: function () {
                throw wr();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "right", {
              get: function () {
                throw wr();
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.copy = function (t, e, n, r, i) {
              return this;
            }),
            (t.prototype.zt = function (t, e, n) {
              return new Xo(t, e);
            }),
            (t.prototype.remove = function (t, e) {
              return this;
            }),
            (t.prototype.et = function () {
              return !0;
            }),
            (t.prototype.Xt = function (t) {
              return !1;
            }),
            (t.prototype.Zt = function (t) {
              return !1;
            }),
            (t.prototype.Jt = function () {
              return null;
            }),
            (t.prototype.Yt = function () {
              return null;
            }),
            (t.prototype.le = function () {
              return !1;
            }),
            (t.prototype.Te = function () {
              return !0;
            }),
            (t.prototype.Ie = function () {
              return 0;
            }),
            t
          );
        })())());
      var Zo = (function () {
          function t(t) {
            (this.H = t), (this.data = new Qo(this.H));
          }
          return (
            (t.prototype.has = function (t) {
              return null !== this.data.get(t);
            }),
            (t.prototype.first = function () {
              return this.data.Jt();
            }),
            (t.prototype.last = function () {
              return this.data.Yt();
            }),
            Object.defineProperty(t.prototype, "size", {
              get: function () {
                return this.data.size;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.indexOf = function (t) {
              return this.data.indexOf(t);
            }),
            (t.prototype.forEach = function (t) {
              this.data.Xt(function (e, n) {
                return t(e), !1;
              });
            }),
            (t.prototype.me = function (t, e) {
              for (var n = this.data.ee(t[0]); n.ce(); ) {
                var r = n.oe();
                if (this.H(r.key, t[1]) >= 0) return;
                e(r.key);
              }
            }),
            (t.prototype.Ae = function (t, e) {
              var n;
              for (
                n = void 0 !== e ? this.data.ee(e) : this.data.te();
                n.ce();

              )
                if (!t(n.oe().key)) return;
            }),
            (t.prototype.Re = function (t) {
              var e = this.data.ee(t);
              return e.ce() ? e.oe().key : null;
            }),
            (t.prototype.te = function () {
              return new $o(this.data.te());
            }),
            (t.prototype.ee = function (t) {
              return new $o(this.data.ee(t));
            }),
            (t.prototype.add = function (t) {
              return this.copy(this.data.remove(t).zt(t, !0));
            }),
            (t.prototype.delete = function (t) {
              return this.has(t) ? this.copy(this.data.remove(t)) : this;
            }),
            (t.prototype.et = function () {
              return this.data.et();
            }),
            (t.prototype.Pe = function (t) {
              var e = this;
              return (
                e.size < t.size && ((e = t), (t = this)),
                t.forEach(function (t) {
                  e = e.add(t);
                }),
                e
              );
            }),
            (t.prototype.isEqual = function (e) {
              if (!(e instanceof t)) return !1;
              if (this.size !== e.size) return !1;
              for (var n = this.data.te(), r = e.data.te(); n.ce(); ) {
                var i = n.oe().key,
                  o = r.oe().key;
                if (0 !== this.H(i, o)) return !1;
              }
              return !0;
            }),
            (t.prototype.it = function () {
              var t = [];
              return (
                this.forEach(function (e) {
                  t.push(e);
                }),
                t
              );
            }),
            (t.prototype.toString = function () {
              var t = [];
              return (
                this.forEach(function (e) {
                  return t.push(e);
                }),
                "SortedSet(" + t.toString() + ")"
              );
            }),
            (t.prototype.copy = function (e) {
              var n = new t(this.H);
              return (n.data = e), n;
            }),
            t
          );
        })(),
        $o = (function () {
          function t(t) {
            this.ye = t;
          }
          return (
            (t.prototype.oe = function () {
              return this.ye.oe().key;
            }),
            (t.prototype.ce = function () {
              return this.ye.ce();
            }),
            t
          );
        })(),
        ts = new Qo(zr.H);
      function es() {
        return ts;
      }
      function ns() {
        return es();
      }
      var rs = new Qo(zr.H);
      function is() {
        return rs;
      }
      var os = new Qo(zr.H);
      function ss() {
        return os;
      }
      var as = new Zo(zr.H);
      function us() {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        for (var n = as, r = 0, i = t; r < i.length; r++) {
          var o = i[r];
          n = n.add(o);
        }
        return n;
      }
      var cs = new Zo(Sr);
      function hs() {
        return cs;
      }
      var ls = (function () {
          function t(t) {
            (this.H = t
              ? function (e, n) {
                  return t(e, n) || zr.H(e.key, n.key);
                }
              : function (t, e) {
                  return zr.H(t.key, e.key);
                }),
              (this.ge = is()),
              (this.Ve = new Qo(this.H));
          }
          return (
            (t.pe = function (e) {
              return new t(e.H);
            }),
            (t.prototype.has = function (t) {
              return null != this.ge.get(t);
            }),
            (t.prototype.get = function (t) {
              return this.ge.get(t);
            }),
            (t.prototype.first = function () {
              return this.Ve.Jt();
            }),
            (t.prototype.last = function () {
              return this.Ve.Yt();
            }),
            (t.prototype.et = function () {
              return this.Ve.et();
            }),
            (t.prototype.indexOf = function (t) {
              var e = this.ge.get(t);
              return e ? this.Ve.indexOf(e) : -1;
            }),
            Object.defineProperty(t.prototype, "size", {
              get: function () {
                return this.Ve.size;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.forEach = function (t) {
              this.Ve.Xt(function (e, n) {
                return t(e), !1;
              });
            }),
            (t.prototype.add = function (t) {
              var e = this.delete(t.key);
              return e.copy(e.ge.zt(t.key, t), e.Ve.zt(t, null));
            }),
            (t.prototype.delete = function (t) {
              var e = this.get(t);
              return e ? this.copy(this.ge.remove(t), this.Ve.remove(e)) : this;
            }),
            (t.prototype.isEqual = function (e) {
              if (!(e instanceof t)) return !1;
              if (this.size !== e.size) return !1;
              for (var n = this.Ve.te(), r = e.Ve.te(); n.ce(); ) {
                var i = n.oe().key,
                  o = r.oe().key;
                if (!i.isEqual(o)) return !1;
              }
              return !0;
            }),
            (t.prototype.toString = function () {
              var t = [];
              return (
                this.forEach(function (e) {
                  t.push(e.toString());
                }),
                0 === t.length
                  ? "DocumentSet ()"
                  : "DocumentSet (\n  " + t.join("  \n") + "\n)"
              );
            }),
            (t.prototype.copy = function (e, n) {
              var r = new t();
              return (r.H = this.H), (r.ge = e), (r.Ve = n), r;
            }),
            t
          );
        })(),
        fs = (function () {
          function t() {
            this.be = new Qo(zr.H);
          }
          return (
            (t.prototype.track = function (t) {
              var e = t.doc.key,
                n = this.be.get(e);
              n
                ? 0 !== t.type && 3 === n.type
                  ? (this.be = this.be.zt(e, t))
                  : 3 === t.type && 1 !== n.type
                  ? (this.be = this.be.zt(e, { type: n.type, doc: t.doc }))
                  : 2 === t.type && 2 === n.type
                  ? (this.be = this.be.zt(e, { type: 2, doc: t.doc }))
                  : 2 === t.type && 0 === n.type
                  ? (this.be = this.be.zt(e, { type: 0, doc: t.doc }))
                  : 1 === t.type && 0 === n.type
                  ? (this.be = this.be.remove(e))
                  : 1 === t.type && 2 === n.type
                  ? (this.be = this.be.zt(e, { type: 1, doc: n.doc }))
                  : 0 === t.type && 1 === n.type
                  ? (this.be = this.be.zt(e, { type: 2, doc: t.doc }))
                  : wr()
                : (this.be = this.be.zt(e, t));
            }),
            (t.prototype.ve = function () {
              var t = [];
              return (
                this.be.Xt(function (e, n) {
                  t.push(n);
                }),
                t
              );
            }),
            t
          );
        })(),
        ps = (function () {
          function t(t, e, n, r, i, o, s, a) {
            (this.query = t),
              (this.docs = e),
              (this.Se = n),
              (this.docChanges = r),
              (this.De = i),
              (this.fromCache = o),
              (this.Ce = s),
              (this.xe = a);
          }
          return (
            (t.Ne = function (e, n, r, i) {
              var o = [];
              return (
                n.forEach(function (t) {
                  o.push({ type: 0, doc: t });
                }),
                new t(e, n, ls.pe(n), o, r, i, !0, !1)
              );
            }),
            Object.defineProperty(t.prototype, "hasPendingWrites", {
              get: function () {
                return !this.De.et();
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.isEqual = function (t) {
              if (
                !(
                  this.fromCache === t.fromCache &&
                  this.Ce === t.Ce &&
                  this.De.isEqual(t.De) &&
                  ro(this.query, t.query) &&
                  this.docs.isEqual(t.docs) &&
                  this.Se.isEqual(t.Se)
                )
              )
                return !1;
              var e = this.docChanges,
                n = t.docChanges;
              if (e.length !== n.length) return !1;
              for (var r = 0; r < e.length; r++)
                if (e[r].type !== n[r].type || !e[r].doc.isEqual(n[r].doc))
                  return !1;
              return !0;
            }),
            t
          );
        })(),
        ds = (function () {
          function t(t, e, n, r, i) {
            (this.Ot = t),
              (this.$e = e),
              (this.Fe = n),
              (this.Oe = r),
              (this.ke = i);
          }
          return (
            (t.Me = function (e, n) {
              var r = new Map();
              return (
                r.set(e, vs.Le(e, n)), new t(Vr.min(), r, hs(), es(), us())
              );
            }),
            t
          );
        })(),
        vs = (function () {
          function t(t, e, n, r, i) {
            (this.resumeToken = t),
              (this.Be = e),
              (this.qe = n),
              (this.Ue = r),
              (this.Qe = i);
          }
          return (
            (t.Le = function (e, n) {
              return new t(Nr.T, n, us(), us(), us());
            }),
            t
          );
        })(),
        gs = function (t, e, n, r) {
          (this.Ke = t),
            (this.removedTargetIds = e),
            (this.key = n),
            (this.We = r);
        },
        ms = function (t, e) {
          (this.targetId = t), (this.je = e);
        },
        ys = function (t, e, n, r) {
          void 0 === n && (n = Nr.T),
            void 0 === r && (r = null),
            (this.state = t),
            (this.targetIds = e),
            (this.resumeToken = n),
            (this.cause = r);
        },
        bs = (function () {
          function t() {
            (this.Ge = 0),
              (this.ze = Is()),
              (this.He = Nr.T),
              (this.Je = !1),
              (this.Ye = !0);
          }
          return (
            Object.defineProperty(t.prototype, "Be", {
              get: function () {
                return this.Je;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "resumeToken", {
              get: function () {
                return this.He;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "Xe", {
              get: function () {
                return 0 !== this.Ge;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "Ze", {
              get: function () {
                return this.Ye;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.tn = function (t) {
              t.l() > 0 && ((this.Ye = !0), (this.He = t));
            }),
            (t.prototype.en = function () {
              var t = us(),
                e = us(),
                n = us();
              return (
                this.ze.forEach(function (r, i) {
                  switch (i) {
                    case 0:
                      t = t.add(r);
                      break;
                    case 2:
                      e = e.add(r);
                      break;
                    case 1:
                      n = n.add(r);
                      break;
                    default:
                      wr();
                  }
                }),
                new vs(this.He, this.Je, t, e, n)
              );
            }),
            (t.prototype.nn = function () {
              (this.Ye = !1), (this.ze = Is());
            }),
            (t.prototype.sn = function (t, e) {
              (this.Ye = !0), (this.ze = this.ze.zt(t, e));
            }),
            (t.prototype.rn = function (t) {
              (this.Ye = !0), (this.ze = this.ze.remove(t));
            }),
            (t.prototype.on = function () {
              this.Ge += 1;
            }),
            (t.prototype.cn = function () {
              this.Ge -= 1;
            }),
            (t.prototype.an = function () {
              (this.Ye = !0), (this.Je = !0);
            }),
            t
          );
        })(),
        ws = (function () {
          function t(t) {
            (this.un = t),
              (this.hn = new Map()),
              (this.ln = es()),
              (this._n = _s()),
              (this.fn = new Zo(Sr));
          }
          return (
            (t.prototype.dn = function (t) {
              for (var e = 0, n = t.Ke; e < n.length; e++) {
                var r = n[e];
                t.We instanceof Ei
                  ? this.wn(r, t.We)
                  : t.We instanceof Ti && this.En(r, t.key, t.We);
              }
              for (var i = 0, o = t.removedTargetIds; i < o.length; i++)
                (r = o[i]), this.En(r, t.key, t.We);
            }),
            (t.prototype.Tn = function (t) {
              var e = this;
              this.In(t, function (n) {
                var r = e.mn(n);
                switch (t.state) {
                  case 0:
                    e.An(n) && r.tn(t.resumeToken);
                    break;
                  case 1:
                    r.cn(), r.Xe || r.nn(), r.tn(t.resumeToken);
                    break;
                  case 2:
                    r.cn(), r.Xe || e.removeTarget(n);
                    break;
                  case 3:
                    e.An(n) && (r.an(), r.tn(t.resumeToken));
                    break;
                  case 4:
                    e.An(n) && (e.Rn(n), r.tn(t.resumeToken));
                    break;
                  default:
                    wr();
                }
              });
            }),
            (t.prototype.In = function (t, e) {
              var n = this;
              t.targetIds.length > 0
                ? t.targetIds.forEach(e)
                : this.hn.forEach(function (t, r) {
                    n.An(r) && e(r);
                  });
            }),
            (t.prototype.Pn = function (t) {
              var e = t.targetId,
                n = t.je.count,
                r = this.yn(e);
              if (r) {
                var i = r.target;
                if (Pi(i))
                  if (0 === n) {
                    var o = new zr(i.path);
                    this.En(e, o, new Ti(o, Vr.min()));
                  } else _r(1 === n);
                else
                  this.gn(e) !== n && (this.Rn(e), (this.fn = this.fn.add(e)));
              }
            }),
            (t.prototype.Vn = function (t) {
              var e = this,
                n = new Map();
              this.hn.forEach(function (r, i) {
                var o = e.yn(i);
                if (o) {
                  if (r.Be && Pi(o.target)) {
                    var s = new zr(o.target.path);
                    null !== e.ln.get(s) ||
                      e.pn(i, s) ||
                      e.En(i, s, new Ti(s, t));
                  }
                  r.Ze && (n.set(i, r.en()), r.nn());
                }
              });
              var r = us();
              this._n.forEach(function (t, n) {
                var i = !0;
                n.Ae(function (t) {
                  var n = e.yn(t);
                  return !n || 2 === n.Ft || ((i = !1), !1);
                }),
                  i && (r = r.add(t));
              });
              var i = new ds(t, n, this.fn, this.ln, r);
              return (
                (this.ln = es()), (this._n = _s()), (this.fn = new Zo(Sr)), i
              );
            }),
            (t.prototype.wn = function (t, e) {
              if (this.An(t)) {
                var n = this.pn(t, e.key) ? 2 : 0;
                this.mn(t).sn(e.key, n),
                  (this.ln = this.ln.zt(e.key, e)),
                  (this._n = this._n.zt(e.key, this.bn(e.key).add(t)));
              }
            }),
            (t.prototype.En = function (t, e, n) {
              if (this.An(t)) {
                var r = this.mn(t);
                this.pn(t, e) ? r.sn(e, 1) : r.rn(e),
                  (this._n = this._n.zt(e, this.bn(e).delete(t))),
                  n && (this.ln = this.ln.zt(e, n));
              }
            }),
            (t.prototype.removeTarget = function (t) {
              this.hn.delete(t);
            }),
            (t.prototype.gn = function (t) {
              var e = this.mn(t).en();
              return this.un.vn(t).size + e.qe.size - e.Qe.size;
            }),
            (t.prototype.on = function (t) {
              this.mn(t).on();
            }),
            (t.prototype.mn = function (t) {
              var e = this.hn.get(t);
              return e || ((e = new bs()), this.hn.set(t, e)), e;
            }),
            (t.prototype.bn = function (t) {
              var e = this._n.get(t);
              return e || ((e = new Zo(Sr)), (this._n = this._n.zt(t, e))), e;
            }),
            (t.prototype.An = function (t) {
              var e = null !== this.yn(t);
              return (
                e || gr("WatchChangeAggregator", "Detected inactive target", t),
                e
              );
            }),
            (t.prototype.yn = function (t) {
              var e = this.hn.get(t);
              return e && e.Xe ? null : this.un.Sn(t);
            }),
            (t.prototype.Rn = function (t) {
              var e = this;
              this.hn.set(t, new bs()),
                this.un.vn(t).forEach(function (n) {
                  e.En(t, n, null);
                });
            }),
            (t.prototype.pn = function (t, e) {
              return this.un.vn(t).has(e);
            }),
            t
          );
        })();
      function _s() {
        return new Qo(zr.H);
      }
      function Is() {
        return new Qo(zr.H);
      }
      var Es = { asc: "ASCENDING", desc: "DESCENDING" },
        Ts = {
          "<": "LESS_THAN",
          "<=": "LESS_THAN_OR_EQUAL",
          ">": "GREATER_THAN",
          ">=": "GREATER_THAN_OR_EQUAL",
          "==": "EQUAL",
          "!=": "NOT_EQUAL",
          "array-contains": "ARRAY_CONTAINS",
          in: "IN",
          "not-in": "NOT_IN",
          "array-contains-any": "ARRAY_CONTAINS_ANY",
        },
        Ss = function (t, e) {
          (this.t = t), (this.Bt = e);
        };
      function Cs(t, e) {
        return t.Bt
          ? new Date(1e3 * e.seconds)
              .toISOString()
              .replace(/\.\d*/, "")
              .replace("Z", "") +
              "." +
              ("000000000" + e.nanoseconds).slice(-9) +
              "Z"
          : { seconds: "" + e.seconds, nanos: e.nanoseconds };
      }
      function ks(t, e) {
        return t.Bt ? e.toBase64() : e.toUint8Array();
      }
      function Ns(t, e) {
        return Cs(t, e.j());
      }
      function As(t) {
        return (
          _r(!!t),
          Vr.K(
            (function (t) {
              var e = Xr(t);
              return new Ur(e.seconds, e.nanos);
            })(t)
          )
        );
      }
      function Ps(t, e) {
        return (function (t) {
          return new Br(["projects", t.projectId, "databases", t.database]);
        })(t)
          .child("documents")
          .child(e)
          .rt();
      }
      function Ds(t) {
        var e = Br.ot(t);
        return _r(ea(e)), e;
      }
      function xs(t, e) {
        return Ps(t.t, e.path);
      }
      function Os(t, e) {
        var n = Ds(e);
        if (n.get(1) !== t.t.projectId)
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Tried to deserialize key from different project: " +
              n.get(1) +
              " vs " +
              t.t.projectId
          );
        if (n.get(3) !== t.t.database)
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Tried to deserialize key from different database: " +
              n.get(3) +
              " vs " +
              t.t.database
          );
        return new zr(js(n));
      }
      function Rs(t, e) {
        return Ps(t.t, e);
      }
      function Ms(t) {
        var e = Ds(t);
        return 4 === e.length ? Br.ct() : js(e);
      }
      function Ls(t) {
        return new Br([
          "projects",
          t.t.projectId,
          "databases",
          t.t.database,
        ]).rt();
      }
      function js(t) {
        return _r(t.length > 4 && "documents" === t.get(4)), t.Y(5);
      }
      function Fs(t, e, n) {
        return { name: xs(t, e), fields: n.proto.mapValue.fields };
      }
      function Us(t, e, n) {
        var r = Os(t, e.name),
          i = As(e.updateTime),
          o = new bi({ mapValue: { fields: e.fields } });
        return new Ei(r, i, o, { hasCommittedMutations: !!n });
      }
      function Vs(t, e) {
        var n;
        if (e instanceof Lo) n = { update: Fs(t, e.key, e.value) };
        else if (e instanceof Wo) n = { delete: xs(t, e.key) };
        else if (e instanceof jo)
          n = { update: Fs(t, e.key, e.data), updateMask: ta(e.Gt) };
        else {
          if (!(e instanceof zo)) return wr();
          n = { verify: xs(t, e.key) };
        }
        return (
          e.fieldTransforms.length > 0 &&
            (n.updateTransforms = e.fieldTransforms.map(function (t) {
              return (function (t, e) {
                var n = e.transform;
                if (n instanceof yo)
                  return {
                    fieldPath: e.field.rt(),
                    setToServerValue: "REQUEST_TIME",
                  };
                if (n instanceof bo)
                  return {
                    fieldPath: e.field.rt(),
                    appendMissingElements: { values: n.elements },
                  };
                if (n instanceof _o)
                  return {
                    fieldPath: e.field.rt(),
                    removeAllFromArray: { values: n.elements },
                  };
                if (n instanceof Eo)
                  return { fieldPath: e.field.rt(), increment: n.Ut };
                throw wr();
              })(0, t);
            })),
          e.jt.Wt ||
            (n.currentDocument = (function (t, e) {
              return void 0 !== e.updateTime
                ? { updateTime: Ns(t, e.updateTime) }
                : void 0 !== e.exists
                ? { exists: e.exists }
                : wr();
            })(t, e.jt)),
          n
        );
      }
      function qs(t, e) {
        var n = e.currentDocument
            ? (function (t) {
                return void 0 !== t.updateTime
                  ? No.updateTime(As(t.updateTime))
                  : void 0 !== t.exists
                  ? No.exists(t.exists)
                  : No.Kt();
              })(e.currentDocument)
            : No.Kt(),
          r = e.updateTransforms
            ? e.updateTransforms.map(function (e) {
                return (function (t, e) {
                  var n = null;
                  if ("setToServerValue" in e)
                    _r("REQUEST_TIME" === e.setToServerValue), (n = new yo());
                  else if ("appendMissingElements" in e) {
                    var r = e.appendMissingElements.values || [];
                    n = new bo(r);
                  } else if ("removeAllFromArray" in e) {
                    var i = e.removeAllFromArray.values || [];
                    n = new _o(i);
                  } else "increment" in e ? (n = new Eo(t, e.increment)) : wr();
                  var o = Wr.lt(e.fieldPath);
                  return new Co(o, n);
                })(t, e);
              })
            : [];
        if (e.update) {
          e.update.name;
          var i = Os(t, e.update.name),
            o = new bi({ mapValue: { fields: e.update.fields } });
          if (e.updateMask) {
            var s = (function (t) {
              var e = t.fieldPaths || [];
              return new Qr(
                e.map(function (t) {
                  return Wr.lt(t);
                })
              );
            })(e.updateMask);
            return new jo(i, o, s, n, r);
          }
          return new Lo(i, o, n, r);
        }
        if (e.delete) {
          var a = Os(t, e.delete);
          return new Wo(a, n);
        }
        if (e.verify) {
          var u = Os(t, e.verify);
          return new zo(u, n);
        }
        return wr();
      }
      function Bs(t, e) {
        return { documents: [Rs(t, e.path)] };
      }
      function Gs(t, e) {
        var n = { structuredQuery: {} },
          r = e.path;
        null !== e.collectionGroup
          ? ((n.parent = Rs(t, r)),
            (n.structuredQuery.from = [
              { collectionId: e.collectionGroup, allDescendants: !0 },
            ]))
          : ((n.parent = Rs(t, r.X())),
            (n.structuredQuery.from = [{ collectionId: r.tt() }]));
        var i = (function (t) {
          if (0 !== t.length) {
            var e = t.map(function (t) {
              return (function (t) {
                if ("==" === t.op) {
                  if (mi(t.value))
                    return {
                      unaryFilter: { field: Ys(t.field), op: "IS_NAN" },
                    };
                  if (gi(t.value))
                    return {
                      unaryFilter: { field: Ys(t.field), op: "IS_NULL" },
                    };
                } else if ("!=" === t.op) {
                  if (mi(t.value))
                    return {
                      unaryFilter: { field: Ys(t.field), op: "IS_NOT_NAN" },
                    };
                  if (gi(t.value))
                    return {
                      unaryFilter: { field: Ys(t.field), op: "IS_NOT_NULL" },
                    };
                }
                return {
                  fieldFilter: {
                    field: Ys(t.field),
                    op: Qs(t.op),
                    value: t.value,
                  },
                };
              })(t);
            });
            return 1 === e.length
              ? e[0]
              : { compositeFilter: { op: "AND", filters: e } };
          }
        })(e.filters);
        i && (n.structuredQuery.where = i);
        var o = (function (t) {
          if (0 !== t.length)
            return t.map(function (t) {
              return (function (t) {
                return { field: Ys(t.field), direction: Js(t.dir) };
              })(t);
            });
        })(e.orderBy);
        o && (n.structuredQuery.orderBy = o);
        var s = (function (t, e) {
          return t.Bt || ri(e) ? e : { value: e };
        })(t, e.limit);
        return (
          null !== s && (n.structuredQuery.limit = s),
          e.startAt && (n.structuredQuery.startAt = Hs(e.startAt)),
          e.endAt && (n.structuredQuery.endAt = Hs(e.endAt)),
          n
        );
      }
      function Ws(t) {
        var e = Ms(t.parent),
          n = t.structuredQuery,
          r = n.from ? n.from.length : 0,
          i = null;
        if (r > 0) {
          _r(1 === r);
          var o = n.from[0];
          o.allDescendants
            ? (i = o.collectionId)
            : (e = e.child(o.collectionId));
        }
        var s = [];
        n.where && (s = zs(n.where));
        var a = [];
        n.orderBy &&
          (a = n.orderBy.map(function (t) {
            return (function (t) {
              return new Bi(
                Xs(t.field),
                (function (t) {
                  switch (t) {
                    case "ASCENDING":
                      return "asc";
                    case "DESCENDING":
                      return "desc";
                    default:
                      return;
                  }
                })(t.direction)
              );
            })(t);
          }));
        var u = null;
        n.limit &&
          (u = (function (t) {
            var e;
            return ri((e = "object" == typeof t ? t.value : t)) ? null : e;
          })(n.limit));
        var c = null;
        n.startAt && (c = Ks(n.startAt));
        var h = null;
        return n.endAt && (h = Ks(n.endAt)), Ki(e, i, a, s, u, "F", c, h);
      }
      function zs(t) {
        return t
          ? void 0 !== t.unaryFilter
            ? [$s(t)]
            : void 0 !== t.fieldFilter
            ? [Zs(t)]
            : void 0 !== t.compositeFilter
            ? t.compositeFilter.filters
                .map(function (t) {
                  return zs(t);
                })
                .reduce(function (t, e) {
                  return t.concat(e);
                })
            : wr()
          : [];
      }
      function Hs(t) {
        return { before: t.before, values: t.position };
      }
      function Ks(t) {
        var e = !!t.before,
          n = t.values || [];
        return new Vi(n, e);
      }
      function Js(t) {
        return Es[t];
      }
      function Qs(t) {
        return Ts[t];
      }
      function Ys(t) {
        return { fieldPath: t.rt() };
      }
      function Xs(t) {
        return Wr.lt(t.fieldPath);
      }
      function Zs(t) {
        return Di.create(
          Xs(t.fieldFilter.field),
          (function (t) {
            switch (t) {
              case "EQUAL":
                return "==";
              case "NOT_EQUAL":
                return "!=";
              case "GREATER_THAN":
                return ">";
              case "GREATER_THAN_OR_EQUAL":
                return ">=";
              case "LESS_THAN":
                return "<";
              case "LESS_THAN_OR_EQUAL":
                return "<=";
              case "ARRAY_CONTAINS":
                return "array-contains";
              case "IN":
                return "in";
              case "NOT_IN":
                return "not-in";
              case "ARRAY_CONTAINS_ANY":
                return "array-contains-any";
              case "OPERATOR_UNSPECIFIED":
              default:
                return wr();
            }
          })(t.fieldFilter.op),
          t.fieldFilter.value
        );
      }
      function $s(t) {
        switch (t.unaryFilter.op) {
          case "IS_NAN":
            var e = Xs(t.unaryFilter.field);
            return Di.create(e, "==", { doubleValue: NaN });
          case "IS_NULL":
            var n = Xs(t.unaryFilter.field);
            return Di.create(n, "==", { nullValue: "NULL_VALUE" });
          case "IS_NOT_NAN":
            var r = Xs(t.unaryFilter.field);
            return Di.create(r, "!=", { doubleValue: NaN });
          case "IS_NOT_NULL":
            var i = Xs(t.unaryFilter.field);
            return Di.create(i, "!=", { nullValue: "NULL_VALUE" });
          case "OPERATOR_UNSPECIFIED":
          default:
            return wr();
        }
      }
      function ta(t) {
        var e = [];
        return (
          t.fields.forEach(function (t) {
            return e.push(t.rt());
          }),
          { fieldPaths: e }
        );
      }
      function ea(t) {
        return (
          t.length >= 4 && "projects" === t.get(0) && "databases" === t.get(2)
        );
      }
      var na = function () {
          var t = this;
          this.promise = new Promise(function (e, n) {
            (t.resolve = e), (t.reject = n);
          });
        },
        ra = (function () {
          function t(t) {
            var e = this;
            (this.Dn = null),
              (this.Cn = null),
              (this.result = void 0),
              (this.error = void 0),
              (this.xn = !1),
              (this.Nn = !1),
              t(
                function (t) {
                  (e.xn = !0), (e.result = t), e.Dn && e.Dn(t);
                },
                function (t) {
                  (e.xn = !0), (e.error = t), e.Cn && e.Cn(t);
                }
              );
          }
          return (
            (t.prototype.catch = function (t) {
              return this.next(void 0, t);
            }),
            (t.prototype.next = function (e, n) {
              var r = this;
              return (
                this.Nn && wr(),
                (this.Nn = !0),
                this.xn
                  ? this.error
                    ? this.$n(n, this.error)
                    : this.Fn(e, this.result)
                  : new t(function (t, i) {
                      (r.Dn = function (n) {
                        r.Fn(e, n).next(t, i);
                      }),
                        (r.Cn = function (e) {
                          r.$n(n, e).next(t, i);
                        });
                    })
              );
            }),
            (t.prototype.On = function () {
              var t = this;
              return new Promise(function (e, n) {
                t.next(e, n);
              });
            }),
            (t.prototype.kn = function (e) {
              try {
                var n = e();
                return n instanceof t ? n : t.resolve(n);
              } catch (e) {
                return t.reject(e);
              }
            }),
            (t.prototype.Fn = function (e, n) {
              return e
                ? this.kn(function () {
                    return e(n);
                  })
                : t.resolve(n);
            }),
            (t.prototype.$n = function (e, n) {
              return e
                ? this.kn(function () {
                    return e(n);
                  })
                : t.reject(n);
            }),
            (t.resolve = function (e) {
              return new t(function (t, n) {
                t(e);
              });
            }),
            (t.reject = function (e) {
              return new t(function (t, n) {
                n(e);
              });
            }),
            (t.Mn = function (e) {
              return new t(function (t, n) {
                var r = 0,
                  i = 0,
                  o = !1;
                e.forEach(function (e) {
                  ++r,
                    e.next(
                      function () {
                        ++i, o && i === r && t();
                      },
                      function (t) {
                        return n(t);
                      }
                    );
                }),
                  (o = !0),
                  i === r && t();
              });
            }),
            (t.Ln = function (e) {
              for (
                var n = t.resolve(!1),
                  r = function (e) {
                    n = n.next(function (n) {
                      return n ? t.resolve(n) : e();
                    });
                  },
                  i = 0,
                  o = e;
                i < o.length;
                i++
              )
                r(o[i]);
              return n;
            }),
            (t.forEach = function (t, e) {
              var n = this,
                r = [];
              return (
                t.forEach(function (t, i) {
                  r.push(e.call(n, t, i));
                }),
                this.Mn(r)
              );
            }),
            t
          );
        })(),
        ia = (function () {
          function t(t, e) {
            var n = this;
            (this.action = t),
              (this.transaction = e),
              (this.aborted = !1),
              (this.Bn = new na()),
              (this.transaction.oncomplete = function () {
                n.Bn.resolve();
              }),
              (this.transaction.onabort = function () {
                e.error ? n.Bn.reject(new aa(t, e.error)) : n.Bn.resolve();
              }),
              (this.transaction.onerror = function (e) {
                var r = fa(e.target.error);
                n.Bn.reject(new aa(t, r));
              });
          }
          return (
            (t.open = function (e, n, r, i) {
              try {
                return new t(n, e.transaction(i, r));
              } catch (e) {
                throw new aa(n, e);
              }
            }),
            Object.defineProperty(t.prototype, "qn", {
              get: function () {
                return this.Bn.promise;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.abort = function (t) {
              t && this.Bn.reject(t),
                this.aborted ||
                  (gr(
                    "SimpleDb",
                    "Aborting transaction:",
                    t ? t.message : "Client-initiated abort"
                  ),
                  (this.aborted = !0),
                  this.transaction.abort());
            }),
            (t.prototype.store = function (t) {
              var e = this.transaction.objectStore(t);
              return new ca(e);
            }),
            t
          );
        })(),
        oa = (function () {
          function t(e, n, r) {
            (this.name = e),
              (this.version = n),
              (this.Un = r),
              12.2 === t.Qn((0, i.z$)()) &&
                mr(
                  "Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."
                );
          }
          return (
            (t.delete = function (t) {
              return (
                gr("SimpleDb", "Removing database:", t),
                ha(window.indexedDB.deleteDatabase(t)).On()
              );
            }),
            (t.Kn = function () {
              if ("undefined" == typeof indexedDB) return !1;
              if (t.Wn()) return !0;
              var e = (0, i.z$)(),
                n = t.Qn(e),
                r = 0 < n && n < 10,
                o = t.jn(e),
                s = 0 < o && o < 4.5;
              return !(
                e.indexOf("MSIE ") > 0 ||
                e.indexOf("Trident/") > 0 ||
                e.indexOf("Edge/") > 0 ||
                r ||
                s
              );
            }),
            (t.Wn = function () {
              var t;
              return (
                "undefined" != typeof process &&
                "YES" ===
                  (null === (t = process.env) || void 0 === t ? void 0 : t.Gn)
              );
            }),
            (t.zn = function (t, e) {
              return t.store(e);
            }),
            (t.Qn = function (t) {
              var e = t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),
                n = e ? e[1].split("_").slice(0, 2).join(".") : "-1";
              return Number(n);
            }),
            (t.jn = function (t) {
              var e = t.match(/Android ([\d.]+)/i),
                n = e ? e[1].split(".").slice(0, 2).join(".") : "-1";
              return Number(n);
            }),
            (t.prototype.Hn = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var e,
                  n = this;
                return (0, lr.Jh)(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return this.db
                        ? [3, 2]
                        : (gr("SimpleDb", "Opening database:", this.name),
                          (e = this),
                          [
                            4,
                            new Promise(function (e, r) {
                              var i = indexedDB.open(n.name, n.version);
                              (i.onsuccess = function (t) {
                                var n = t.target.result;
                                e(n);
                              }),
                                (i.onblocked = function () {
                                  r(
                                    new aa(
                                      t,
                                      "Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."
                                    )
                                  );
                                }),
                                (i.onerror = function (e) {
                                  var n = e.target.error;
                                  "VersionError" === n.name
                                    ? r(
                                        new Pr(
                                          Ar.FAILED_PRECONDITION,
                                          "A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."
                                        )
                                      )
                                    : r(new aa(t, n));
                                }),
                                (i.onupgradeneeded = function (t) {
                                  gr(
                                    "SimpleDb",
                                    'Database "' +
                                      n.name +
                                      '" requires upgrade from version:',
                                    t.oldVersion
                                  );
                                  var e = t.target.result;
                                  n.Un.Jn(
                                    e,
                                    i.transaction,
                                    t.oldVersion,
                                    n.version
                                  ).next(function () {
                                    gr(
                                      "SimpleDb",
                                      "Database upgrade to version " +
                                        n.version +
                                        " complete"
                                    );
                                  });
                                });
                            }),
                          ]);
                    case 1:
                      (e.db = r.sent()), (r.label = 2);
                    case 2:
                      return [
                        2,
                        (this.Yn &&
                          (this.db.onversionchange = function (t) {
                            return n.Yn(t);
                          }),
                        this.db),
                      ];
                  }
                });
              });
            }),
            (t.prototype.Xn = function (t) {
              (this.Yn = t),
                this.db &&
                  (this.db.onversionchange = function (e) {
                    return t(e);
                  });
            }),
            (t.prototype.runTransaction = function (t, e, n, r) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var i, o, s, a, u;
                return (0, lr.Jh)(this, function (c) {
                  switch (c.label) {
                    case 0:
                      (i = "readonly" === e),
                        (o = 0),
                        (s = function () {
                          var e, s, u, c, h;
                          return (0, lr.Jh)(this, function (l) {
                            switch (l.label) {
                              case 0:
                                ++o, (l.label = 1);
                              case 1:
                                return l.trys.push([1, 4, , 5]), [4, a.Hn(t)];
                              case 2:
                                return (
                                  (a.db = l.sent()),
                                  (e = ia.open(
                                    a.db,
                                    t,
                                    i ? "readonly" : "readwrite",
                                    n
                                  )),
                                  (s = r(e)
                                    .catch(function (t) {
                                      return e.abort(t), ra.reject(t);
                                    })
                                    .On()),
                                  (u = {}),
                                  s.catch(function () {}),
                                  [4, e.qn]
                                );
                              case 3:
                                return [2, ((u.value = (l.sent(), s)), u)];
                              case 4:
                                return (
                                  (c = l.sent()),
                                  (h = "FirebaseError" !== c.name && o < 3),
                                  gr(
                                    "SimpleDb",
                                    "Transaction failed with error:",
                                    c.message,
                                    "Retrying:",
                                    h
                                  ),
                                  a.close(),
                                  h ? [3, 5] : [2, { value: Promise.reject(c) }]
                                );
                              case 5:
                                return [2];
                            }
                          });
                        }),
                        (a = this),
                        (c.label = 1);
                    case 1:
                      return [5, s()];
                    case 2:
                      if ("object" == typeof (u = c.sent()))
                        return [2, u.value];
                      c.label = 3;
                    case 3:
                      return [3, 1];
                    case 4:
                      return [2];
                  }
                });
              });
            }),
            (t.prototype.close = function () {
              this.db && this.db.close(), (this.db = void 0);
            }),
            t
          );
        })(),
        sa = (function () {
          function t(t) {
            (this.Zn = t), (this.ts = !1), (this.es = null);
          }
          return (
            Object.defineProperty(t.prototype, "xn", {
              get: function () {
                return this.ts;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "ns", {
              get: function () {
                return this.es;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "cursor", {
              set: function (t) {
                this.Zn = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.done = function () {
              this.ts = !0;
            }),
            (t.prototype.ss = function (t) {
              this.es = t;
            }),
            (t.prototype.delete = function () {
              return ha(this.Zn.delete());
            }),
            t
          );
        })(),
        aa = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r =
                t.call(
                  this,
                  Ar.UNAVAILABLE,
                  "IndexedDB transaction '" + e + "' failed: " + n
                ) || this).name = "IndexedDbTransactionError"),
              r
            );
          }
          return (0, lr.ZT)(e, t), e;
        })(Pr);
      function ua(t) {
        return "IndexedDbTransactionError" === t.name;
      }
      var ca = (function () {
        function t(t) {
          this.store = t;
        }
        return (
          (t.prototype.put = function (t, e) {
            var n;
            return (
              void 0 !== e
                ? (gr("SimpleDb", "PUT", this.store.name, t, e),
                  (n = this.store.put(e, t)))
                : (gr("SimpleDb", "PUT", this.store.name, "<auto-key>", t),
                  (n = this.store.put(t))),
              ha(n)
            );
          }),
          (t.prototype.add = function (t) {
            return (
              gr("SimpleDb", "ADD", this.store.name, t, t),
              ha(this.store.add(t))
            );
          }),
          (t.prototype.get = function (t) {
            var e = this;
            return ha(this.store.get(t)).next(function (n) {
              return (
                void 0 === n && (n = null),
                gr("SimpleDb", "GET", e.store.name, t, n),
                n
              );
            });
          }),
          (t.prototype.delete = function (t) {
            return (
              gr("SimpleDb", "DELETE", this.store.name, t),
              ha(this.store.delete(t))
            );
          }),
          (t.prototype.count = function () {
            return (
              gr("SimpleDb", "COUNT", this.store.name), ha(this.store.count())
            );
          }),
          (t.prototype.rs = function (t, e) {
            var n = this.cursor(this.options(t, e)),
              r = [];
            return this.os(n, function (t, e) {
              r.push(e);
            }).next(function () {
              return r;
            });
          }),
          (t.prototype.cs = function (t, e) {
            gr("SimpleDb", "DELETE ALL", this.store.name);
            var n = this.options(t, e);
            n.us = !1;
            var r = this.cursor(n);
            return this.os(r, function (t, e, n) {
              return n.delete();
            });
          }),
          (t.prototype.hs = function (t, e) {
            var n;
            e ? (n = t) : ((n = {}), (e = t));
            var r = this.cursor(n);
            return this.os(r, e);
          }),
          (t.prototype.ls = function (t) {
            var e = this.cursor({});
            return new ra(function (n, r) {
              (e.onerror = function (t) {
                var e = fa(t.target.error);
                r(e);
              }),
                (e.onsuccess = function (e) {
                  var r = e.target.result;
                  r
                    ? t(r.primaryKey, r.value).next(function (t) {
                        t ? r.continue() : n();
                      })
                    : n();
                });
            });
          }),
          (t.prototype.os = function (t, e) {
            var n = [];
            return new ra(function (r, i) {
              (t.onerror = function (t) {
                i(t.target.error);
              }),
                (t.onsuccess = function (t) {
                  var i = t.target.result;
                  if (i) {
                    var o = new sa(i),
                      s = e(i.primaryKey, i.value, o);
                    if (s instanceof ra) {
                      var a = s.catch(function (t) {
                        return o.done(), ra.reject(t);
                      });
                      n.push(a);
                    }
                    o.xn
                      ? r()
                      : null === o.ns
                      ? i.continue()
                      : i.continue(o.ns);
                  } else r();
                });
            }).next(function () {
              return ra.Mn(n);
            });
          }),
          (t.prototype.options = function (t, e) {
            var n;
            return (
              void 0 !== t && ("string" == typeof t ? (n = t) : (e = t)),
              { index: n, range: e }
            );
          }),
          (t.prototype.cursor = function (t) {
            var e = "next";
            if ((t.reverse && (e = "prev"), t.index)) {
              var n = this.store.index(t.index);
              return t.us
                ? n.openKeyCursor(t.range, e)
                : n.openCursor(t.range, e);
            }
            return this.store.openCursor(t.range, e);
          }),
          t
        );
      })();
      function ha(t) {
        return new ra(function (e, n) {
          (t.onsuccess = function (t) {
            var n = t.target.result;
            e(n);
          }),
            (t.onerror = function (t) {
              var e = fa(t.target.error);
              n(e);
            });
        });
      }
      var la = !1;
      function fa(t) {
        var e = oa.Qn((0, i.z$)());
        if (e >= 12.2 && e < 13) {
          var n =
            "An internal error was encountered in the Indexed Database server";
          if (t.message.indexOf(n) >= 0) {
            var r = new Pr(
              "internal",
              "IOS_INDEXEDDB_BUG1: IndexedDb has thrown '" +
                n +
                "'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."
            );
            return (
              la ||
                ((la = !0),
                setTimeout(function () {
                  throw r;
                }, 0)),
              r
            );
          }
        }
        return t;
      }
      var pa = (function () {
        function t(t, e, n, r, i) {
          (this._s = t),
            (this.fs = e),
            (this.ds = n),
            (this.op = r),
            (this.ws = i),
            (this.Es = new na()),
            (this.then = this.Es.promise.then.bind(this.Es.promise)),
            this.Es.promise.catch(function (t) {});
        }
        return (
          (t.Ts = function (e, n, r, i, o) {
            var s = new t(e, n, Date.now() + r, i, o);
            return s.start(r), s;
          }),
          (t.prototype.start = function (t) {
            var e = this;
            this.Is = setTimeout(function () {
              return e.As();
            }, t);
          }),
          (t.prototype.Rs = function () {
            return this.As();
          }),
          (t.prototype.cancel = function (t) {
            null !== this.Is &&
              (this.clearTimeout(),
              this.Es.reject(
                new Pr(
                  Ar.CANCELLED,
                  "Operation cancelled" + (t ? ": " + t : "")
                )
              ));
          }),
          (t.prototype.As = function () {
            var t = this;
            this._s.Ps(function () {
              return null !== t.Is
                ? (t.clearTimeout(),
                  t.op().then(function (e) {
                    return t.Es.resolve(e);
                  }))
                : Promise.resolve();
            });
          }),
          (t.prototype.clearTimeout = function () {
            null !== this.Is &&
              (this.ws(this), clearTimeout(this.Is), (this.Is = null));
          }),
          t
        );
      })();
      function da(t, e) {
        if ((mr("AsyncQueue", e + ": " + t), ua(t)))
          return new Pr(Ar.UNAVAILABLE, e + ": " + t);
        throw t;
      }
      var va =
          "The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",
        ga = (function () {
          function t() {
            this.ys = [];
          }
          return (
            (t.prototype.gs = function (t) {
              this.ys.push(t);
            }),
            (t.prototype.Vs = function () {
              this.ys.forEach(function (t) {
                return t();
              });
            }),
            t
          );
        })();
      function ma(t) {
        for (var e = "", n = 0; n < t.length; n++)
          e.length > 0 && (e = ba(e)), (e = ya(t.get(n), e));
        return ba(e);
      }
      function ya(t, e) {
        for (var n = e, r = t.length, i = 0; i < r; i++) {
          var o = t.charAt(i);
          switch (o) {
            case "\0":
              n += "";
              break;
            case "":
              n += "";
              break;
            default:
              n += o;
          }
        }
        return n;
      }
      function ba(t) {
        return t + "";
      }
      function wa(t) {
        var e = t.length;
        if ((_r(e >= 2), 2 === e))
          return _r("" === t.charAt(0) && "" === t.charAt(1)), Br.ct();
        for (var n = e - 2, r = [], i = "", o = 0; o < e; ) {
          var s = t.indexOf("", o);
          switch (((s < 0 || s > n) && wr(), t.charAt(s + 1))) {
            case "":
              var a = t.substring(o, s),
                u = void 0;
              0 === i.length ? (u = a) : ((u = i += a), (i = "")), r.push(u);
              break;
            case "":
              (i += t.substring(o, s)), (i += "\0");
              break;
            case "":
              i += t.substring(o, s + 1);
              break;
            default:
              wr();
          }
          o = s + 2;
        }
        return new Br(r);
      }
      var _a = function (t, e) {
          (this.seconds = t), (this.nanoseconds = e);
        },
        Ia = function (t, e, n) {
          (this.ownerId = t),
            (this.allowTabSynchronization = e),
            (this.leaseTimestampMs = n);
        };
      (Ia.store = "owner"), (Ia.key = "owner");
      var Ea = function (t, e, n) {
        (this.userId = t),
          (this.lastAcknowledgedBatchId = e),
          (this.lastStreamToken = n);
      };
      (Ea.store = "mutationQueues"), (Ea.keyPath = "userId");
      var Ta = function (t, e, n, r, i) {
        (this.userId = t),
          (this.batchId = e),
          (this.localWriteTimeMs = n),
          (this.baseMutations = r),
          (this.mutations = i);
      };
      (Ta.store = "mutations"),
        (Ta.keyPath = "batchId"),
        (Ta.userMutationsIndex = "userMutationsIndex"),
        (Ta.userMutationsKeyPath = ["userId", "batchId"]);
      var Sa = (function () {
        function t() {}
        return (
          (t.prefixForUser = function (t) {
            return [t];
          }),
          (t.prefixForPath = function (t, e) {
            return [t, ma(e)];
          }),
          (t.key = function (t, e, n) {
            return [t, ma(e), n];
          }),
          t
        );
      })();
      (Sa.store = "documentMutations"), (Sa.PLACEHOLDER = new Sa());
      var Ca = function (t, e) {
          (this.path = t), (this.readTime = e);
        },
        ka = function (t, e) {
          (this.path = t), (this.version = e);
        },
        Na = function (t, e, n, r, i, o) {
          (this.unknownDocument = t),
            (this.noDocument = e),
            (this.document = n),
            (this.hasCommittedMutations = r),
            (this.readTime = i),
            (this.parentPath = o);
        };
      (Na.store = "remoteDocuments"),
        (Na.readTimeIndex = "readTimeIndex"),
        (Na.readTimeIndexPath = "readTime"),
        (Na.collectionReadTimeIndex = "collectionReadTimeIndex"),
        (Na.collectionReadTimeIndexPath = ["parentPath", "readTime"]);
      var Aa = function (t) {
        this.byteSize = t;
      };
      (Aa.store = "remoteDocumentGlobal"), (Aa.key = "remoteDocumentGlobalKey");
      var Pa = function (t, e, n, r, i, o, s) {
        (this.targetId = t),
          (this.canonicalId = e),
          (this.readTime = n),
          (this.resumeToken = r),
          (this.lastListenSequenceNumber = i),
          (this.lastLimboFreeSnapshotVersion = o),
          (this.query = s);
      };
      (Pa.store = "targets"),
        (Pa.keyPath = "targetId"),
        (Pa.queryTargetsIndexName = "queryTargetsIndex"),
        (Pa.queryTargetsKeyPath = ["canonicalId", "targetId"]);
      var Da = function (t, e, n) {
        (this.targetId = t), (this.path = e), (this.sequenceNumber = n);
      };
      (Da.store = "targetDocuments"),
        (Da.keyPath = ["targetId", "path"]),
        (Da.documentTargetsIndex = "documentTargetsIndex"),
        (Da.documentTargetsKeyPath = ["path", "targetId"]);
      var xa = function (t, e, n, r) {
        (this.highestTargetId = t),
          (this.highestListenSequenceNumber = e),
          (this.lastRemoteSnapshotVersion = n),
          (this.targetCount = r);
      };
      (xa.key = "targetGlobalKey"), (xa.store = "targetGlobal");
      var Oa = function (t, e) {
        (this.collectionId = t), (this.parent = e);
      };
      (Oa.store = "collectionParents"),
        (Oa.keyPath = ["collectionId", "parent"]);
      var Ra = function (t, e, n, r) {
        (this.clientId = t),
          (this.updateTimeMs = e),
          (this.networkEnabled = n),
          (this.inForeground = r);
      };
      (Ra.store = "clientMetadata"), (Ra.keyPath = "clientId");
      var Ma = function (t, e, n) {
        (this.bundleId = t), (this.createTime = e), (this.version = n);
      };
      (Ma.store = "bundles"), (Ma.keyPath = "bundleId");
      var La = function (t, e, n) {
        (this.name = t), (this.readTime = e), (this.bundledQuery = n);
      };
      (La.store = "namedQueries"), (La.keyPath = "name");
      var ja = (0, lr.ev)(
          (0, lr.ev)(
            [],
            (0, lr.ev)(
              (0, lr.ev)(
                [],
                (0, lr.ev)(
                  (0, lr.ev)(
                    [],
                    (0, lr.ev)(
                      (0, lr.ev)(
                        [],
                        [
                          Ea.store,
                          Ta.store,
                          Sa.store,
                          Na.store,
                          Pa.store,
                          Ia.store,
                          xa.store,
                          Da.store,
                        ]
                      ),
                      [Ra.store]
                    )
                  ),
                  [Aa.store]
                )
              ),
              [Oa.store]
            )
          ),
          [Ma.store, La.store]
        ),
        Fa = (function (t) {
          function e(e, n) {
            var r = this;
            return ((r = t.call(this) || this).ps = e), (r.bs = n), r;
          }
          return (0, lr.ZT)(e, t), e;
        })(ga);
      function Ua(t, e) {
        var n = Ir(t);
        return oa.zn(n.ps, e);
      }
      var Va = (function () {
          function t(t, e, n, r) {
            (this.batchId = t),
              (this.vs = e),
              (this.baseMutations = n),
              (this.mutations = r);
          }
          return (
            (t.prototype.Ss = function (t, e, n) {
              for (var r = n.Ds, i = 0; i < this.mutations.length; i++) {
                var o = this.mutations[i];
                o.key.isEqual(t) && (e = Do(o, e, r[i]));
              }
              return e;
            }),
            (t.prototype.Cs = function (t, e) {
              for (var n = 0, r = this.baseMutations; n < r.length; n++)
                (s = r[n]).key.isEqual(t) && (e = xo(s, e, this.vs));
              for (var i = 0, o = this.mutations; i < o.length; i++) {
                var s;
                (s = o[i]).key.isEqual(t) && (e = xo(s, e, this.vs));
              }
              return e;
            }),
            (t.prototype.xs = function (t) {
              var e = this,
                n = t;
              return (
                this.mutations.forEach(function (r) {
                  var i = e.Cs(r.key, t.get(r.key));
                  i && (n = n.zt(r.key, i));
                }),
                n
              );
            }),
            (t.prototype.keys = function () {
              return this.mutations.reduce(function (t, e) {
                return t.add(e.key);
              }, us());
            }),
            (t.prototype.isEqual = function (t) {
              return (
                this.batchId === t.batchId &&
                Cr(this.mutations, t.mutations, function (t, e) {
                  return Ro(t, e);
                }) &&
                Cr(this.baseMutations, t.baseMutations, function (t, e) {
                  return Ro(t, e);
                })
              );
            }),
            t
          );
        })(),
        qa = (function () {
          function t(t, e, n, r) {
            (this.batch = t), (this.Ns = e), (this.Ds = n), (this.$s = r);
          }
          return (
            (t.from = function (e, n, r) {
              _r(e.mutations.length === r.length);
              for (var i = ss(), o = e.mutations, s = 0; s < o.length; s++)
                i = i.zt(o[s].key, r[s].version);
              return new t(e, n, r, i);
            }),
            t
          );
        })(),
        Ba = function (t) {
          this.Fs = t;
        };
      function Ga(t, e) {
        if (e.document) return Us(t.Fs, e.document, !!e.hasCommittedMutations);
        if (e.noDocument) {
          var n = zr.Et(e.noDocument.path),
            r = Ja(e.noDocument.readTime);
          return new Ti(n, r, {
            hasCommittedMutations: !!e.hasCommittedMutations,
          });
        }
        if (e.unknownDocument) {
          var i = zr.Et(e.unknownDocument.path);
          return (r = Ja(e.unknownDocument.version)), new Si(i, r);
        }
        return wr();
      }
      function Wa(t, e, n) {
        var r = za(n),
          i = e.key.path.X().it();
        if (e instanceof Ei) {
          var o = (function (t, e) {
              return {
                name: xs(t, e.key),
                fields: e.bt().mapValue.fields,
                updateTime: Cs(t, e.version.j()),
              };
            })(t.Fs, e),
            s = e.hasCommittedMutations;
          return new Na(null, null, o, s, r, i);
        }
        if (e instanceof Ti) {
          var a = e.key.path.it(),
            u = Ka(e.version);
          return (
            (s = e.hasCommittedMutations),
            new Na(null, new Ca(a, u), null, s, r, i)
          );
        }
        if (e instanceof Si) {
          var c = e.key.path.it(),
            h = Ka(e.version);
          return new Na(new ka(c, h), null, null, !0, r, i);
        }
        return wr();
      }
      function za(t) {
        var e = t.j();
        return [e.seconds, e.nanoseconds];
      }
      function Ha(t) {
        var e = new Ur(t[0], t[1]);
        return Vr.K(e);
      }
      function Ka(t) {
        var e = t.j();
        return new _a(e.seconds, e.nanoseconds);
      }
      function Ja(t) {
        var e = new Ur(t.seconds, t.nanoseconds);
        return Vr.K(e);
      }
      function Qa(t, e) {
        for (
          var n = (e.baseMutations || []).map(function (e) {
              return qs(t.Fs, e);
            }),
            r = 0;
          r < e.mutations.length - 1;
          ++r
        ) {
          var i = e.mutations[r];
          if (
            r + 1 < e.mutations.length &&
            void 0 !== e.mutations[r + 1].transform
          ) {
            var o = e.mutations[r + 1];
            (i.updateTransforms = o.transform.fieldTransforms),
              e.mutations.splice(r + 1, 1),
              ++r;
          }
        }
        var s = e.mutations.map(function (e) {
            return qs(t.Fs, e);
          }),
          a = Ur.fromMillis(e.localWriteTimeMs);
        return new Va(e.batchId, a, n, s);
      }
      function Ya(t) {
        var e,
          n,
          r = Ja(t.readTime),
          i =
            void 0 !== t.lastLimboFreeSnapshotVersion
              ? Ja(t.lastLimboFreeSnapshotVersion)
              : Vr.min();
        return (
          void 0 !== t.query.documents
            ? (_r(1 === (n = t.query).documents.length),
              (e = eo(Ji(Ms(n.documents[0])))))
            : (e = (function (t) {
                return eo(Ws(t));
              })(t.query)),
          new co(
            e,
            t.targetId,
            0,
            t.lastListenSequenceNumber,
            r,
            i,
            Nr.fromBase64String(t.resumeToken)
          )
        );
      }
      function Xa(t, e) {
        var n,
          r = Ka(e.Ot),
          i = Ka(e.lastLimboFreeSnapshotVersion);
        n = Pi(e.target) ? Bs(t.Fs, e.target) : Gs(t.Fs, e.target);
        var o = e.resumeToken.toBase64();
        return new Pa(e.targetId, Ni(e.target), r, o, e.sequenceNumber, i, n);
      }
      function Za(t) {
        var e = Ws({ parent: t.parent, structuredQuery: t.structuredQuery });
        return "LAST" === t.limitType ? no(e, e.limit, "L") : e;
      }
      var $a = (function () {
        function t() {}
        return (
          (t.prototype.Os = function (t, e) {
            return tu(t)
              .get(e)
              .next(function (t) {
                if (t)
                  return {
                    id: (e = t).bundleId,
                    createTime: Ja(e.createTime),
                    version: e.version,
                  };
                var e;
              });
          }),
          (t.prototype.ks = function (t, e) {
            return tu(t).put({
              bundleId: (n = e).id,
              createTime: Ka(As(n.createTime)),
              version: n.version,
            });
            var n;
          }),
          (t.prototype.Ms = function (t, e) {
            return eu(t)
              .get(e)
              .next(function (t) {
                if (t)
                  return {
                    name: (e = t).name,
                    query: Za(e.bundledQuery),
                    readTime: Ja(e.readTime),
                  };
                var e;
              });
          }),
          (t.prototype.Ls = function (t, e) {
            return eu(t).put(
              (function (t) {
                return {
                  name: t.name,
                  readTime: Ka(As(t.readTime)),
                  bundledQuery: t.bundledQuery,
                };
              })(e)
            );
          }),
          t
        );
      })();
      function tu(t) {
        return Ua(t, Ma.store);
      }
      function eu(t) {
        return Ua(t, La.store);
      }
      var nu = (function () {
          function t() {
            this.Bs = new ru();
          }
          return (
            (t.prototype.qs = function (t, e) {
              return this.Bs.add(e), ra.resolve();
            }),
            (t.prototype.Us = function (t, e) {
              return ra.resolve(this.Bs.getEntries(e));
            }),
            t
          );
        })(),
        ru = (function () {
          function t() {
            this.index = {};
          }
          return (
            (t.prototype.add = function (t) {
              var e = t.tt(),
                n = t.X(),
                r = this.index[e] || new Zo(Br.H),
                i = !r.has(n);
              return (this.index[e] = r.add(n)), i;
            }),
            (t.prototype.has = function (t) {
              var e = t.tt(),
                n = t.X(),
                r = this.index[e];
              return r && r.has(n);
            }),
            (t.prototype.getEntries = function (t) {
              return (this.index[t] || new Zo(Br.H)).it();
            }),
            t
          );
        })(),
        iu = (function () {
          function t() {
            this.Qs = new ru();
          }
          return (
            (t.prototype.qs = function (t, e) {
              var n = this;
              if (!this.Qs.has(e)) {
                var r = e.tt(),
                  i = e.X();
                t.gs(function () {
                  n.Qs.add(e);
                });
                var o = { collectionId: r, parent: ma(i) };
                return ou(t).put(o);
              }
              return ra.resolve();
            }),
            (t.prototype.Us = function (t, e) {
              var n = [],
                r = IDBKeyRange.bound([e, ""], [kr(e), ""], !1, !0);
              return ou(t)
                .rs(r)
                .next(function (t) {
                  for (var r = 0, i = t; r < i.length; r++) {
                    var o = i[r];
                    if (o.collectionId !== e) break;
                    n.push(wa(o.parent));
                  }
                  return n;
                });
            }),
            t
          );
        })();
      function ou(t) {
        return Ua(t, Oa.store);
      }
      var su = { Ks: !1, Ws: 0, js: 0, Gs: 0 },
        au = (function () {
          function t(t, e, n) {
            (this.zs = t), (this.Hs = e), (this.Js = n);
          }
          return (
            (t.Ys = function (e) {
              return new t(e, t.Xs, t.Zs);
            }),
            t
          );
        })();
      function uu(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          return (0, lr.Jh)(this, function (e) {
            if (t.code !== Ar.FAILED_PRECONDITION || t.message !== va) throw t;
            return gr("LocalStore", "Unexpectedly lost primary lease"), [2];
          });
        });
      }
      (au.Xs = 10),
        (au.Zs = 1e3),
        (au.ti = new au(41943040, au.Xs, au.Zs)),
        (au.ei = new au(-1, 0, 0));
      var cu = (function () {
          function t(t, e) {
            (this.ni = t), (this.si = e), (this.ii = {});
          }
          return (
            (t.prototype.get = function (t) {
              var e = this.ni(t),
                n = this.ii[e];
              if (void 0 !== n)
                for (var r = 0, i = n; r < i.length; r++) {
                  var o = i[r],
                    s = o[0],
                    a = o[1];
                  if (this.si(s, t)) return a;
                }
            }),
            (t.prototype.has = function (t) {
              return void 0 !== this.get(t);
            }),
            (t.prototype.set = function (t, e) {
              var n = this.ni(t),
                r = this.ii[n];
              if (void 0 !== r) {
                for (var i = 0; i < r.length; i++)
                  if (this.si(r[i][0], t)) return void (r[i] = [t, e]);
                r.push([t, e]);
              } else this.ii[n] = [[t, e]];
            }),
            (t.prototype.delete = function (t) {
              var e = this.ni(t),
                n = this.ii[e];
              if (void 0 === n) return !1;
              for (var r = 0; r < n.length; r++)
                if (this.si(n[r][0], t))
                  return (
                    1 === n.length ? delete this.ii[e] : n.splice(r, 1), !0
                  );
              return !1;
            }),
            (t.prototype.forEach = function (t) {
              Kr(this.ii, function (e, n) {
                for (var r = 0, i = n; r < i.length; r++) {
                  var o = i[r],
                    s = o[0],
                    a = o[1];
                  t(s, a);
                }
              });
            }),
            (t.prototype.et = function () {
              return Jr(this.ii);
            }),
            t
          );
        })(),
        hu = (function () {
          function t() {
            (this.ri = new cu(
              function (t) {
                return t.toString();
              },
              function (t, e) {
                return t.isEqual(e);
              }
            )),
              (this.oi = !1);
          }
          return (
            (t.prototype.ci = function (t) {
              var e = this.ri.get(t);
              return e ? e.readTime : Vr.min();
            }),
            (t.prototype.ai = function (t, e) {
              this.ui(), this.ri.set(t.key, { hi: t, readTime: e });
            }),
            (t.prototype.li = function (t, e) {
              void 0 === e && (e = null),
                this.ui(),
                this.ri.set(t, { hi: null, readTime: e });
            }),
            (t.prototype._i = function (t, e) {
              this.ui();
              var n = this.ri.get(e);
              return void 0 !== n ? ra.resolve(n.hi) : this.fi(t, e);
            }),
            (t.prototype.getEntries = function (t, e) {
              return this.di(t, e);
            }),
            (t.prototype.apply = function (t) {
              return this.ui(), (this.oi = !0), this.wi(t);
            }),
            (t.prototype.ui = function () {}),
            t
          );
        })();
      function lu(t, e, n) {
        var r = t.store(Ta.store),
          i = t.store(Sa.store),
          o = [],
          s = IDBKeyRange.only(n.batchId),
          a = 0,
          u = r.hs({ range: s }, function (t, e, n) {
            return a++, n.delete();
          });
        o.push(
          u.next(function () {
            _r(1 === a);
          })
        );
        for (var c = [], h = 0, l = n.mutations; h < l.length; h++) {
          var f = l[h],
            p = Sa.key(e, f.key.path, n.batchId);
          o.push(i.delete(p)), c.push(f.key);
        }
        return ra.Mn(o).next(function () {
          return c;
        });
      }
      function fu(t) {
        var e;
        if (t.document) e = t.document;
        else if (t.unknownDocument) e = t.unknownDocument;
        else {
          if (!t.noDocument) throw wr();
          e = t.noDocument;
        }
        return JSON.stringify(e).length;
      }
      var pu = (function () {
        function t(t, e, n, r) {
          (this.userId = t),
            (this.Qt = e),
            (this.Ei = n),
            (this.Ti = r),
            (this.Ii = {});
        }
        return (
          (t.mi = function (e, n, r, i) {
            return _r("" !== e.uid), new t(e.m() ? e.uid : "", n, r, i);
          }),
          (t.prototype.Ai = function (t) {
            var e = !0,
              n = IDBKeyRange.bound(
                [this.userId, Number.NEGATIVE_INFINITY],
                [this.userId, Number.POSITIVE_INFINITY]
              );
            return vu(t)
              .hs(
                { index: Ta.userMutationsIndex, range: n },
                function (t, n, r) {
                  (e = !1), r.done();
                }
              )
              .next(function () {
                return e;
              });
          }),
          (t.prototype.Ri = function (t, e, n, r) {
            var i = this,
              o = gu(t),
              s = vu(t);
            return s.add({}).next(function (a) {
              _r("number" == typeof a);
              for (
                var u = new Va(a, e, n, r),
                  c = (function (t, e, n) {
                    var r = n.baseMutations.map(function (e) {
                        return Vs(t.Fs, e);
                      }),
                      i = n.mutations.map(function (e) {
                        return Vs(t.Fs, e);
                      });
                    return new Ta(e, n.batchId, n.vs.toMillis(), r, i);
                  })(i.Qt, i.userId, u),
                  h = [],
                  l = new Zo(function (t, e) {
                    return Sr(t.rt(), e.rt());
                  }),
                  f = 0,
                  p = r;
                f < p.length;
                f++
              ) {
                var d = p[f],
                  v = Sa.key(i.userId, d.key.path, a);
                (l = l.add(d.key.path.X())),
                  h.push(s.put(c)),
                  h.push(o.put(v, Sa.PLACEHOLDER));
              }
              return (
                l.forEach(function (e) {
                  h.push(i.Ei.qs(t, e));
                }),
                t.gs(function () {
                  i.Ii[a] = u.keys();
                }),
                ra.Mn(h).next(function () {
                  return u;
                })
              );
            });
          }),
          (t.prototype.Pi = function (t, e) {
            var n = this;
            return vu(t)
              .get(e)
              .next(function (t) {
                return t ? (_r(t.userId === n.userId), Qa(n.Qt, t)) : null;
              });
          }),
          (t.prototype.yi = function (t, e) {
            var n = this;
            return this.Ii[e]
              ? ra.resolve(this.Ii[e])
              : this.Pi(t, e).next(function (t) {
                  if (t) {
                    var r = t.keys();
                    return (n.Ii[e] = r), r;
                  }
                  return null;
                });
          }),
          (t.prototype.gi = function (t, e) {
            var n = this,
              r = e + 1,
              i = IDBKeyRange.lowerBound([this.userId, r]),
              o = null;
            return vu(t)
              .hs(
                { index: Ta.userMutationsIndex, range: i },
                function (t, e, i) {
                  e.userId === n.userId &&
                    (_r(e.batchId >= r), (o = Qa(n.Qt, e))),
                    i.done();
                }
              )
              .next(function () {
                return o;
              });
          }),
          (t.prototype.Vi = function (t) {
            var e = IDBKeyRange.upperBound([
                this.userId,
                Number.POSITIVE_INFINITY,
              ]),
              n = -1;
            return vu(t)
              .hs(
                { index: Ta.userMutationsIndex, range: e, reverse: !0 },
                function (t, e, r) {
                  (n = e.batchId), r.done();
                }
              )
              .next(function () {
                return n;
              });
          }),
          (t.prototype.pi = function (t) {
            var e = this,
              n = IDBKeyRange.bound(
                [this.userId, -1],
                [this.userId, Number.POSITIVE_INFINITY]
              );
            return vu(t)
              .rs(Ta.userMutationsIndex, n)
              .next(function (t) {
                return t.map(function (t) {
                  return Qa(e.Qt, t);
                });
              });
          }),
          (t.prototype.bi = function (t, e) {
            var n = this,
              r = Sa.prefixForPath(this.userId, e.path),
              i = IDBKeyRange.lowerBound(r),
              o = [];
            return gu(t)
              .hs({ range: i }, function (r, i, s) {
                var a = r[0],
                  u = r[1],
                  c = r[2],
                  h = wa(u);
                if (a === n.userId && e.path.isEqual(h))
                  return vu(t)
                    .get(c)
                    .next(function (t) {
                      if (!t) throw wr();
                      _r(t.userId === n.userId), o.push(Qa(n.Qt, t));
                    });
                s.done();
              })
              .next(function () {
                return o;
              });
          }),
          (t.prototype.vi = function (t, e) {
            var n = this,
              r = new Zo(Sr),
              i = [];
            return (
              e.forEach(function (e) {
                var o = Sa.prefixForPath(n.userId, e.path),
                  s = IDBKeyRange.lowerBound(o),
                  a = gu(t).hs({ range: s }, function (t, i, o) {
                    var s = t[0],
                      a = t[1],
                      u = t[2],
                      c = wa(a);
                    s === n.userId && e.path.isEqual(c)
                      ? (r = r.add(u))
                      : o.done();
                  });
                i.push(a);
              }),
              ra.Mn(i).next(function () {
                return n.Si(t, r);
              })
            );
          }),
          (t.prototype.Di = function (t, e) {
            var n = this,
              r = e.path,
              i = r.length + 1,
              o = Sa.prefixForPath(this.userId, r),
              s = IDBKeyRange.lowerBound(o),
              a = new Zo(Sr);
            return gu(t)
              .hs({ range: s }, function (t, e, o) {
                var s = t[0],
                  u = t[1],
                  c = t[2],
                  h = wa(u);
                s === n.userId && r.nt(h)
                  ? h.length === i && (a = a.add(c))
                  : o.done();
              })
              .next(function () {
                return n.Si(t, a);
              });
          }),
          (t.prototype.Si = function (t, e) {
            var n = this,
              r = [],
              i = [];
            return (
              e.forEach(function (e) {
                i.push(
                  vu(t)
                    .get(e)
                    .next(function (t) {
                      if (null === t) throw wr();
                      _r(t.userId === n.userId), r.push(Qa(n.Qt, t));
                    })
                );
              }),
              ra.Mn(i).next(function () {
                return r;
              })
            );
          }),
          (t.prototype.Ci = function (t, e) {
            var n = this;
            return lu(t.ps, this.userId, e).next(function (r) {
              return (
                t.gs(function () {
                  n.xi(e.batchId);
                }),
                ra.forEach(r, function (e) {
                  return n.Ti.Ni(t, e);
                })
              );
            });
          }),
          (t.prototype.xi = function (t) {
            delete this.Ii[t];
          }),
          (t.prototype.$i = function (t) {
            var e = this;
            return this.Ai(t).next(function (n) {
              if (!n) return ra.resolve();
              var r = IDBKeyRange.lowerBound(Sa.prefixForUser(e.userId)),
                i = [];
              return gu(t)
                .hs({ range: r }, function (t, n, r) {
                  if (t[0] === e.userId) {
                    var o = wa(t[1]);
                    i.push(o);
                  } else r.done();
                })
                .next(function () {
                  _r(0 === i.length);
                });
            });
          }),
          (t.prototype.Fi = function (t, e) {
            return du(t, this.userId, e);
          }),
          (t.prototype.Oi = function (t) {
            var e = this;
            return mu(t)
              .get(this.userId)
              .next(function (t) {
                return t || new Ea(e.userId, -1, "");
              });
          }),
          t
        );
      })();
      function du(t, e, n) {
        var r = Sa.prefixForPath(e, n.path),
          i = r[1],
          o = IDBKeyRange.lowerBound(r),
          s = !1;
        return gu(t)
          .hs({ range: o, us: !0 }, function (t, n, r) {
            var o = t[0],
              a = t[1];
            t[2], o === e && a === i && (s = !0), r.done();
          })
          .next(function () {
            return s;
          });
      }
      function vu(t) {
        return Ua(t, Ta.store);
      }
      function gu(t) {
        return Ua(t, Sa.store);
      }
      function mu(t) {
        return Ua(t, Ea.store);
      }
      var yu = (function () {
          function t(t) {
            this.ki = t;
          }
          return (
            (t.prototype.next = function () {
              return (this.ki += 2), this.ki;
            }),
            (t.Mi = function () {
              return new t(0);
            }),
            (t.Li = function () {
              return new t(-1);
            }),
            t
          );
        })(),
        bu = (function () {
          function t(t, e) {
            (this.Ti = t), (this.Qt = e);
          }
          return (
            (t.prototype.Bi = function (t) {
              var e = this;
              return this.qi(t).next(function (n) {
                var r = new yu(n.highestTargetId);
                return (
                  (n.highestTargetId = r.next()),
                  e.Ui(t, n).next(function () {
                    return n.highestTargetId;
                  })
                );
              });
            }),
            (t.prototype.Qi = function (t) {
              return this.qi(t).next(function (t) {
                return Vr.K(
                  new Ur(
                    t.lastRemoteSnapshotVersion.seconds,
                    t.lastRemoteSnapshotVersion.nanoseconds
                  )
                );
              });
            }),
            (t.prototype.Ki = function (t) {
              return this.qi(t).next(function (t) {
                return t.highestListenSequenceNumber;
              });
            }),
            (t.prototype.Wi = function (t, e, n) {
              var r = this;
              return this.qi(t).next(function (i) {
                return (
                  (i.highestListenSequenceNumber = e),
                  n && (i.lastRemoteSnapshotVersion = n.j()),
                  e > i.highestListenSequenceNumber &&
                    (i.highestListenSequenceNumber = e),
                  r.Ui(t, i)
                );
              });
            }),
            (t.prototype.ji = function (t, e) {
              var n = this;
              return this.Gi(t, e).next(function () {
                return n.qi(t).next(function (r) {
                  return (r.targetCount += 1), n.zi(e, r), n.Ui(t, r);
                });
              });
            }),
            (t.prototype.Hi = function (t, e) {
              return this.Gi(t, e);
            }),
            (t.prototype.Ji = function (t, e) {
              var n = this;
              return this.Yi(t, e.targetId)
                .next(function () {
                  return wu(t).delete(e.targetId);
                })
                .next(function () {
                  return n.qi(t);
                })
                .next(function (e) {
                  return (
                    _r(e.targetCount > 0), (e.targetCount -= 1), n.Ui(t, e)
                  );
                });
            }),
            (t.prototype.Xi = function (t, e, n) {
              var r = this,
                i = 0,
                o = [];
              return wu(t)
                .hs(function (s, a) {
                  var u = Ya(a);
                  u.sequenceNumber <= e &&
                    null === n.get(u.targetId) &&
                    (i++, o.push(r.Ji(t, u)));
                })
                .next(function () {
                  return ra.Mn(o);
                })
                .next(function () {
                  return i;
                });
            }),
            (t.prototype.In = function (t, e) {
              return wu(t).hs(function (t, n) {
                var r = Ya(n);
                e(r);
              });
            }),
            (t.prototype.qi = function (t) {
              return _u(t)
                .get(xa.key)
                .next(function (t) {
                  return _r(null !== t), t;
                });
            }),
            (t.prototype.Ui = function (t, e) {
              return _u(t).put(xa.key, e);
            }),
            (t.prototype.Gi = function (t, e) {
              return wu(t).put(Xa(this.Qt, e));
            }),
            (t.prototype.zi = function (t, e) {
              var n = !1;
              return (
                t.targetId > e.highestTargetId &&
                  ((e.highestTargetId = t.targetId), (n = !0)),
                t.sequenceNumber > e.highestListenSequenceNumber &&
                  ((e.highestListenSequenceNumber = t.sequenceNumber),
                  (n = !0)),
                n
              );
            }),
            (t.prototype.Zi = function (t) {
              return this.qi(t).next(function (t) {
                return t.targetCount;
              });
            }),
            (t.prototype.tr = function (t, e) {
              var n = Ni(e),
                r = IDBKeyRange.bound(
                  [n, Number.NEGATIVE_INFINITY],
                  [n, Number.POSITIVE_INFINITY]
                ),
                i = null;
              return wu(t)
                .hs(
                  { range: r, index: Pa.queryTargetsIndexName },
                  function (t, n, r) {
                    var o = Ya(n);
                    Ai(e, o.target) && ((i = o), r.done());
                  }
                )
                .next(function () {
                  return i;
                });
            }),
            (t.prototype.er = function (t, e, n) {
              var r = this,
                i = [],
                o = Iu(t);
              return (
                e.forEach(function (e) {
                  var s = ma(e.path);
                  i.push(o.put(new Da(n, s))), i.push(r.Ti.nr(t, n, e));
                }),
                ra.Mn(i)
              );
            }),
            (t.prototype.sr = function (t, e, n) {
              var r = this,
                i = Iu(t);
              return ra.forEach(e, function (e) {
                var o = ma(e.path);
                return ra.Mn([i.delete([n, o]), r.Ti.ir(t, n, e)]);
              });
            }),
            (t.prototype.Yi = function (t, e) {
              var n = Iu(t),
                r = IDBKeyRange.bound([e], [e + 1], !1, !0);
              return n.delete(r);
            }),
            (t.prototype.rr = function (t, e) {
              var n = IDBKeyRange.bound([e], [e + 1], !1, !0),
                r = Iu(t),
                i = us();
              return r
                .hs({ range: n, us: !0 }, function (t, e, n) {
                  var r = wa(t[1]),
                    o = new zr(r);
                  i = i.add(o);
                })
                .next(function () {
                  return i;
                });
            }),
            (t.prototype.Fi = function (t, e) {
              var n = ma(e.path),
                r = IDBKeyRange.bound([n], [kr(n)], !1, !0),
                i = 0;
              return Iu(t)
                .hs(
                  { index: Da.documentTargetsIndex, us: !0, range: r },
                  function (t, e, n) {
                    var r = t[0];
                    t[1], 0 !== r && (i++, n.done());
                  }
                )
                .next(function () {
                  return i > 0;
                });
            }),
            (t.prototype.Sn = function (t, e) {
              return wu(t)
                .get(e)
                .next(function (t) {
                  return t ? Ya(t) : null;
                });
            }),
            t
          );
        })();
      function wu(t) {
        return Ua(t, Pa.store);
      }
      function _u(t) {
        return Ua(t, xa.store);
      }
      function Iu(t) {
        return Ua(t, Da.store);
      }
      function Eu(t, e) {
        var n = t[0],
          r = t[1],
          i = e[0],
          o = e[1],
          s = Sr(n, i);
        return 0 === s ? Sr(r, o) : s;
      }
      var Tu = (function () {
          function t(t) {
            (this.cr = t), (this.buffer = new Zo(Eu)), (this.ar = 0);
          }
          return (
            (t.prototype.ur = function () {
              return ++this.ar;
            }),
            (t.prototype.hr = function (t) {
              var e = [t, this.ur()];
              if (this.buffer.size < this.cr) this.buffer = this.buffer.add(e);
              else {
                var n = this.buffer.last();
                Eu(e, n) < 0 && (this.buffer = this.buffer.delete(n).add(e));
              }
            }),
            Object.defineProperty(t.prototype, "maxValue", {
              get: function () {
                return this.buffer.last()[0];
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        Su = (function () {
          function t(t, e) {
            (this.lr = t), (this._s = e), (this._r = !1), (this.dr = null);
          }
          return (
            (t.prototype.start = function (t) {
              -1 !== this.lr.params.zs && this.wr(t);
            }),
            (t.prototype.stop = function () {
              this.dr && (this.dr.cancel(), (this.dr = null));
            }),
            Object.defineProperty(t.prototype, "Er", {
              get: function () {
                return null !== this.dr;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.wr = function (t) {
              var e = this,
                n = this._r ? 3e5 : 6e4;
              gr(
                "LruGarbageCollector",
                "Garbage collection scheduled in " + n + "ms"
              ),
                (this.dr = this._s.Tr("lru_garbage_collection", n, function () {
                  return (0, lr.mG)(e, void 0, void 0, function () {
                    var e;
                    return (0, lr.Jh)(this, function (n) {
                      switch (n.label) {
                        case 0:
                          (this.dr = null), (this._r = !0), (n.label = 1);
                        case 1:
                          return n.trys.push([1, 3, , 7]), [4, t.Ir(this.lr)];
                        case 2:
                          return n.sent(), [3, 7];
                        case 3:
                          return ua((e = n.sent()))
                            ? (gr(
                                "LruGarbageCollector",
                                "Ignoring IndexedDB error during garbage collection: ",
                                e
                              ),
                              [3, 6])
                            : [3, 4];
                        case 4:
                          return [4, uu(e)];
                        case 5:
                          n.sent(), (n.label = 6);
                        case 6:
                          return [3, 7];
                        case 7:
                          return [4, this.wr(t)];
                        case 8:
                          return n.sent(), [2];
                      }
                    });
                  });
                }));
            }),
            t
          );
        })(),
        Cu = (function () {
          function t(t, e) {
            (this.mr = t), (this.params = e);
          }
          return (
            (t.prototype.Ar = function (t, e) {
              return this.mr.Rr(t).next(function (t) {
                return Math.floor((e / 100) * t);
              });
            }),
            (t.prototype.Pr = function (t, e) {
              var n = this;
              if (0 === e) return ra.resolve(Fr.q);
              var r = new Tu(e);
              return this.mr
                .In(t, function (t) {
                  return r.hr(t.sequenceNumber);
                })
                .next(function () {
                  return n.mr.yr(t, function (t) {
                    return r.hr(t);
                  });
                })
                .next(function () {
                  return r.maxValue;
                });
            }),
            (t.prototype.Xi = function (t, e, n) {
              return this.mr.Xi(t, e, n);
            }),
            (t.prototype.gr = function (t, e) {
              return this.mr.gr(t, e);
            }),
            (t.prototype.Vr = function (t, e) {
              var n = this;
              return -1 === this.params.zs
                ? (gr(
                    "LruGarbageCollector",
                    "Garbage collection skipped; disabled"
                  ),
                  ra.resolve(su))
                : this.pr(t).next(function (r) {
                    return r < n.params.zs
                      ? (gr(
                          "LruGarbageCollector",
                          "Garbage collection skipped; Cache size " +
                            r +
                            " is lower than threshold " +
                            n.params.zs
                        ),
                        su)
                      : n.br(t, e);
                  });
            }),
            (t.prototype.pr = function (t) {
              return this.mr.pr(t);
            }),
            (t.prototype.br = function (t, e) {
              var n,
                i,
                o,
                s,
                a,
                u,
                c,
                h = this,
                l = Date.now();
              return this.Ar(t, this.params.Hs)
                .next(function (e) {
                  return (
                    e > h.params.Js
                      ? (gr(
                          "LruGarbageCollector",
                          "Capping sequence numbers to collect down to the maximum of " +
                            h.params.Js +
                            " from " +
                            e
                        ),
                        (i = h.params.Js))
                      : (i = e),
                    (s = Date.now()),
                    h.Pr(t, i)
                  );
                })
                .next(function (r) {
                  return (n = r), (a = Date.now()), h.Xi(t, n, e);
                })
                .next(function (e) {
                  return (o = e), (u = Date.now()), h.gr(t, n);
                })
                .next(function (t) {
                  return (
                    (c = Date.now()),
                    vr() <= r.in.DEBUG &&
                      gr(
                        "LruGarbageCollector",
                        "LRU Garbage Collection\n\tCounted targets in " +
                          (s - l) +
                          "ms\n\tDetermined least recently used " +
                          i +
                          " in " +
                          (a - s) +
                          "ms\n\tRemoved " +
                          o +
                          " targets in " +
                          (u - a) +
                          "ms\n\tRemoved " +
                          t +
                          " documents in " +
                          (c - u) +
                          "ms\nTotal Duration: " +
                          (c - l) +
                          "ms"
                      ),
                    ra.resolve({ Ks: !0, Ws: i, js: o, Gs: t })
                  );
                });
            }),
            t
          );
        })(),
        ku = (function () {
          function t(t, e) {
            (this.db = t),
              (this.lr = (function (t, e) {
                return new Cu(t, e);
              })(this, e));
          }
          return (
            (t.prototype.Rr = function (t) {
              var e = this.vr(t);
              return this.db
                .Sr()
                .Zi(t)
                .next(function (t) {
                  return e.next(function (e) {
                    return t + e;
                  });
                });
            }),
            (t.prototype.vr = function (t) {
              var e = 0;
              return this.yr(t, function (t) {
                e++;
              }).next(function () {
                return e;
              });
            }),
            (t.prototype.In = function (t, e) {
              return this.db.Sr().In(t, e);
            }),
            (t.prototype.yr = function (t, e) {
              return this.Dr(t, function (t, n) {
                return e(n);
              });
            }),
            (t.prototype.nr = function (t, e, n) {
              return Nu(t, n);
            }),
            (t.prototype.ir = function (t, e, n) {
              return Nu(t, n);
            }),
            (t.prototype.Xi = function (t, e, n) {
              return this.db.Sr().Xi(t, e, n);
            }),
            (t.prototype.Ni = function (t, e) {
              return Nu(t, e);
            }),
            (t.prototype.Cr = function (t, e) {
              return (function (t, e) {
                var n = !1;
                return mu(t)
                  .ls(function (r) {
                    return du(t, r, e).next(function (t) {
                      return t && (n = !0), ra.resolve(!t);
                    });
                  })
                  .next(function () {
                    return n;
                  });
              })(t, e);
            }),
            (t.prototype.gr = function (t, e) {
              var n = this,
                r = this.db.$r().Nr(),
                i = [],
                o = 0;
              return this.Dr(t, function (s, a) {
                if (a <= e) {
                  var u = n.Cr(t, s).next(function (e) {
                    if (!e)
                      return (
                        o++,
                        r._i(t, s).next(function () {
                          return r.li(s), Iu(t).delete([0, ma(s.path)]);
                        })
                      );
                  });
                  i.push(u);
                }
              })
                .next(function () {
                  return ra.Mn(i);
                })
                .next(function () {
                  return r.apply(t);
                })
                .next(function () {
                  return o;
                });
            }),
            (t.prototype.removeTarget = function (t, e) {
              var n = e.kt(t.bs);
              return this.db.Sr().Hi(t, n);
            }),
            (t.prototype.Fr = function (t, e) {
              return Nu(t, e);
            }),
            (t.prototype.Dr = function (t, e) {
              var n,
                r = Iu(t),
                i = Fr.q;
              return r
                .hs({ index: Da.documentTargetsIndex }, function (t, r) {
                  var o = t[0],
                    s = (t[1], r.path),
                    a = r.sequenceNumber;
                  0 === o
                    ? (i !== Fr.q && e(new zr(wa(n)), i), (i = a), (n = s))
                    : (i = Fr.q);
                })
                .next(function () {
                  i !== Fr.q && e(new zr(wa(n)), i);
                });
            }),
            (t.prototype.pr = function (t) {
              return this.db.$r().Or(t);
            }),
            t
          );
        })();
      function Nu(t, e) {
        return Iu(t).put(
          (function (t, e) {
            return new Da(0, ma(t.path), e);
          })(e, t.bs)
        );
      }
      var Au = (function () {
          function t(t, e) {
            (this.Qt = t), (this.Ei = e);
          }
          return (
            (t.prototype.ai = function (t, e, n) {
              return xu(t).put(Ou(e), n);
            }),
            (t.prototype.li = function (t, e) {
              var n = xu(t),
                r = Ou(e);
              return n.delete(r);
            }),
            (t.prototype.updateMetadata = function (t, e) {
              var n = this;
              return this.getMetadata(t).next(function (r) {
                return (r.byteSize += e), n.kr(t, r);
              });
            }),
            (t.prototype._i = function (t, e) {
              var n = this;
              return xu(t)
                .get(Ou(e))
                .next(function (t) {
                  return n.Mr(t);
                });
            }),
            (t.prototype.Lr = function (t, e) {
              var n = this;
              return xu(t)
                .get(Ou(e))
                .next(function (t) {
                  var e = n.Mr(t);
                  return e ? { hi: e, size: fu(t) } : null;
                });
            }),
            (t.prototype.getEntries = function (t, e) {
              var n = this,
                r = ns();
              return this.Br(t, e, function (t, e) {
                var i = n.Mr(e);
                r = r.zt(t, i);
              }).next(function () {
                return r;
              });
            }),
            (t.prototype.qr = function (t, e) {
              var n = this,
                r = ns(),
                i = new Qo(zr.H);
              return this.Br(t, e, function (t, e) {
                var o = n.Mr(e);
                o
                  ? ((r = r.zt(t, o)), (i = i.zt(t, fu(e))))
                  : ((r = r.zt(t, null)), (i = i.zt(t, 0)));
              }).next(function () {
                return { Ur: r, Qr: i };
              });
            }),
            (t.prototype.Br = function (t, e, n) {
              if (e.et()) return ra.resolve();
              var r = IDBKeyRange.bound(
                  e.first().path.it(),
                  e.last().path.it()
                ),
                i = e.te(),
                o = i.oe();
              return xu(t)
                .hs({ range: r }, function (t, e, r) {
                  for (var s = zr.Et(t); o && zr.H(o, s) < 0; )
                    n(o, null), (o = i.oe());
                  o && o.isEqual(s) && (n(o, e), (o = i.ce() ? i.oe() : null)),
                    o ? r.ss(o.path.it()) : r.done();
                })
                .next(function () {
                  for (; o; ) n(o, null), (o = i.ce() ? i.oe() : null);
                });
            }),
            (t.prototype.Kr = function (t, e, n) {
              var r = this,
                i = is(),
                o = e.path.length + 1,
                s = {};
              if (n.isEqual(Vr.min())) {
                var a = e.path.it();
                s.range = IDBKeyRange.lowerBound(a);
              } else {
                var u = e.path.it(),
                  c = za(n);
                (s.range = IDBKeyRange.lowerBound([u, c], !0)),
                  (s.index = Na.collectionReadTimeIndex);
              }
              return xu(t)
                .hs(s, function (t, n, s) {
                  if (t.length === o) {
                    var a = Ga(r.Qt, n);
                    e.path.nt(a.key.path)
                      ? a instanceof Ei && so(e, a) && (i = i.zt(a.key, a))
                      : s.done();
                  }
                })
                .next(function () {
                  return i;
                });
            }),
            (t.prototype.Nr = function (t) {
              return new Pu(this, !!t && t.Wr);
            }),
            (t.prototype.Or = function (t) {
              return this.getMetadata(t).next(function (t) {
                return t.byteSize;
              });
            }),
            (t.prototype.getMetadata = function (t) {
              return Du(t)
                .get(Aa.key)
                .next(function (t) {
                  return _r(!!t), t;
                });
            }),
            (t.prototype.kr = function (t, e) {
              return Du(t).put(Aa.key, e);
            }),
            (t.prototype.Mr = function (t) {
              if (t) {
                var e = Ga(this.Qt, t);
                return e instanceof Ti && e.version.isEqual(Vr.min())
                  ? null
                  : e;
              }
              return null;
            }),
            t
          );
        })(),
        Pu = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this) || this).jr = e),
              (r.Wr = n),
              (r.Gr = new cu(
                function (t) {
                  return t.toString();
                },
                function (t, e) {
                  return t.isEqual(e);
                }
              )),
              r
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.wi = function (t) {
              var e = this,
                n = [],
                r = 0,
                i = new Zo(function (t, e) {
                  return Sr(t.rt(), e.rt());
                });
              return (
                this.ri.forEach(function (o, s) {
                  var a = e.Gr.get(o);
                  if (s.hi) {
                    var u = Wa(e.jr.Qt, s.hi, e.ci(o));
                    i = i.add(o.path.X());
                    var c = fu(u);
                    (r += c - a), n.push(e.jr.ai(t, o, u));
                  } else if (((r -= a), e.Wr)) {
                    var h = Wa(e.jr.Qt, new Ti(o, Vr.min()), e.ci(o));
                    n.push(e.jr.ai(t, o, h));
                  } else n.push(e.jr.li(t, o));
                }),
                i.forEach(function (r) {
                  n.push(e.jr.Ei.qs(t, r));
                }),
                n.push(this.jr.updateMetadata(t, r)),
                ra.Mn(n)
              );
            }),
            (e.prototype.fi = function (t, e) {
              var n = this;
              return this.jr.Lr(t, e).next(function (t) {
                return null === t
                  ? (n.Gr.set(e, 0), null)
                  : (n.Gr.set(e, t.size), t.hi);
              });
            }),
            (e.prototype.di = function (t, e) {
              var n = this;
              return this.jr.qr(t, e).next(function (t) {
                var e = t.Ur;
                return (
                  t.Qr.forEach(function (t, e) {
                    n.Gr.set(t, e);
                  }),
                  e
                );
              });
            }),
            e
          );
        })(hu);
      function Du(t) {
        return Ua(t, Aa.store);
      }
      function xu(t) {
        return Ua(t, Na.store);
      }
      function Ou(t) {
        return t.path.it();
      }
      var Ru = (function () {
        function t(t) {
          this.Qt = t;
        }
        return (
          (t.prototype.Jn = function (t, e, n, r) {
            var i = this;
            _r(n < r && n >= 0 && r <= 11);
            var o = new ia("createOrUpgrade", e);
            n < 1 &&
              r >= 1 &&
              ((function (t) {
                t.createObjectStore(Ia.store);
              })(t),
              (function (t) {
                t.createObjectStore(Ea.store, { keyPath: Ea.keyPath }),
                  t
                    .createObjectStore(Ta.store, {
                      keyPath: Ta.keyPath,
                      autoIncrement: !0,
                    })
                    .createIndex(
                      Ta.userMutationsIndex,
                      Ta.userMutationsKeyPath,
                      { unique: !0 }
                    ),
                  t.createObjectStore(Sa.store);
              })(t),
              Mu(t),
              (function (t) {
                t.createObjectStore(Na.store);
              })(t));
            var s = ra.resolve();
            return (
              n < 3 &&
                r >= 3 &&
                (0 !== n &&
                  ((function (t) {
                    t.deleteObjectStore(Da.store),
                      t.deleteObjectStore(Pa.store),
                      t.deleteObjectStore(xa.store);
                  })(t),
                  Mu(t)),
                (s = s.next(function () {
                  return (function (t) {
                    var e = t.store(xa.store),
                      n = new xa(0, 0, Vr.min().j(), 0);
                    return e.put(xa.key, n);
                  })(o);
                }))),
              n < 4 &&
                r >= 4 &&
                (0 !== n &&
                  (s = s.next(function () {
                    return (function (t, e) {
                      return e
                        .store(Ta.store)
                        .rs()
                        .next(function (n) {
                          t.deleteObjectStore(Ta.store),
                            t
                              .createObjectStore(Ta.store, {
                                keyPath: Ta.keyPath,
                                autoIncrement: !0,
                              })
                              .createIndex(
                                Ta.userMutationsIndex,
                                Ta.userMutationsKeyPath,
                                { unique: !0 }
                              );
                          var r = e.store(Ta.store),
                            i = n.map(function (t) {
                              return r.put(t);
                            });
                          return ra.Mn(i);
                        });
                    })(t, o);
                  })),
                (s = s.next(function () {
                  !(function (t) {
                    t.createObjectStore(Ra.store, { keyPath: Ra.keyPath });
                  })(t);
                }))),
              n < 5 &&
                r >= 5 &&
                (s = s.next(function () {
                  return i.zr(o);
                })),
              n < 6 &&
                r >= 6 &&
                (s = s.next(function () {
                  return (
                    (function (t) {
                      t.createObjectStore(Aa.store);
                    })(t),
                    i.Hr(o)
                  );
                })),
              n < 7 &&
                r >= 7 &&
                (s = s.next(function () {
                  return i.Jr(o);
                })),
              n < 8 &&
                r >= 8 &&
                (s = s.next(function () {
                  return i.Yr(t, o);
                })),
              n < 9 &&
                r >= 9 &&
                (s = s.next(function () {
                  !(function (t) {
                    t.objectStoreNames.contains("remoteDocumentChanges") &&
                      t.deleteObjectStore("remoteDocumentChanges");
                  })(t),
                    (function (t) {
                      var e = t.objectStore(Na.store);
                      e.createIndex(Na.readTimeIndex, Na.readTimeIndexPath, {
                        unique: !1,
                      }),
                        e.createIndex(
                          Na.collectionReadTimeIndex,
                          Na.collectionReadTimeIndexPath,
                          { unique: !1 }
                        );
                    })(e);
                })),
              n < 10 &&
                r >= 10 &&
                (s = s.next(function () {
                  return i.Xr(o);
                })),
              n < 11 &&
                r >= 11 &&
                (s = s.next(function () {
                  !(function (t) {
                    t.createObjectStore(Ma.store, { keyPath: Ma.keyPath });
                  })(t),
                    (function (t) {
                      t.createObjectStore(La.store, { keyPath: La.keyPath });
                    })(t);
                })),
              s
            );
          }),
          (t.prototype.Hr = function (t) {
            var e = 0;
            return t
              .store(Na.store)
              .hs(function (t, n) {
                e += fu(n);
              })
              .next(function () {
                var n = new Aa(e);
                return t.store(Aa.store).put(Aa.key, n);
              });
          }),
          (t.prototype.zr = function (t) {
            var e = this,
              n = t.store(Ea.store),
              r = t.store(Ta.store);
            return n.rs().next(function (n) {
              return ra.forEach(n, function (n) {
                var i = IDBKeyRange.bound(
                  [n.userId, -1],
                  [n.userId, n.lastAcknowledgedBatchId]
                );
                return r.rs(Ta.userMutationsIndex, i).next(function (r) {
                  return ra.forEach(r, function (r) {
                    _r(r.userId === n.userId);
                    var i = Qa(e.Qt, r);
                    return lu(t, n.userId, i).next(function () {});
                  });
                });
              });
            });
          }),
          (t.prototype.Jr = function (t) {
            var e = t.store(Da.store),
              n = t.store(Na.store);
            return t
              .store(xa.store)
              .get(xa.key)
              .next(function (t) {
                var r = [];
                return n
                  .hs(function (n, i) {
                    var o = new Br(n),
                      s = (function (t) {
                        return [0, ma(t)];
                      })(o);
                    r.push(
                      e.get(s).next(function (n) {
                        return n
                          ? ra.resolve()
                          : (function (n) {
                              return e.put(
                                new Da(0, ma(n), t.highestListenSequenceNumber)
                              );
                            })(o);
                      })
                    );
                  })
                  .next(function () {
                    return ra.Mn(r);
                  });
              });
          }),
          (t.prototype.Yr = function (t, e) {
            t.createObjectStore(Oa.store, { keyPath: Oa.keyPath });
            var n = e.store(Oa.store),
              r = new ru(),
              i = function (t) {
                if (r.add(t)) {
                  var e = t.tt(),
                    i = t.X();
                  return n.put({ collectionId: e, parent: ma(i) });
                }
              };
            return e
              .store(Na.store)
              .hs({ us: !0 }, function (t, e) {
                var n = new Br(t);
                return i(n.X());
              })
              .next(function () {
                return e.store(Sa.store).hs({ us: !0 }, function (t, e) {
                  t[0];
                  var n = t[1],
                    r = (t[2], wa(n));
                  return i(r.X());
                });
              });
          }),
          (t.prototype.Xr = function (t) {
            var e = this,
              n = t.store(Pa.store);
            return n.hs(function (t, r) {
              var i = Ya(r),
                o = Xa(e.Qt, i);
              return n.put(o);
            });
          }),
          t
        );
      })();
      function Mu(t) {
        t
          .createObjectStore(Da.store, { keyPath: Da.keyPath })
          .createIndex(Da.documentTargetsIndex, Da.documentTargetsKeyPath, {
            unique: !0,
          }),
          t
            .createObjectStore(Pa.store, { keyPath: Pa.keyPath })
            .createIndex(Pa.queryTargetsIndexName, Pa.queryTargetsKeyPath, {
              unique: !0,
            }),
          t.createObjectStore(xa.store);
      }
      var Lu =
          "Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",
        ju = (function () {
          function t(e, n, r, i, o, s, a, u, c, h) {
            if (
              ((this.allowTabSynchronization = e),
              (this.persistenceKey = n),
              (this.clientId = r),
              (this.Zr = o),
              (this.window = s),
              (this.document = a),
              (this.eo = c),
              (this.no = h),
              (this.so = null),
              (this.io = !1),
              (this.isPrimary = !1),
              (this.networkEnabled = !0),
              (this.ro = null),
              (this.inForeground = !1),
              (this.oo = null),
              (this.co = null),
              (this.ao = Number.NEGATIVE_INFINITY),
              (this.uo = function (t) {
                return Promise.resolve();
              }),
              !t.Kn())
            )
              throw new Pr(
                Ar.UNIMPLEMENTED,
                "This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled."
              );
            (this.Ti = new ku(this, i)),
              (this.ho = n + "main"),
              (this.Qt = new Ba(u)),
              (this.lo = new oa(this.ho, 11, new Ru(this.Qt))),
              (this._o = new bu(this.Ti, this.Qt)),
              (this.Ei = new iu()),
              (this.fo = (function (t, e) {
                return new Au(t, e);
              })(this.Qt, this.Ei)),
              (this.wo = new $a()),
              this.window && this.window.localStorage
                ? (this.Eo = this.window.localStorage)
                : ((this.Eo = null),
                  !1 === h &&
                    mr(
                      "IndexedDbPersistence",
                      "LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."
                    ));
          }
          return (
            (t.prototype.start = function () {
              var t = this;
              return this.To()
                .then(function () {
                  if (!t.isPrimary && !t.allowTabSynchronization)
                    throw new Pr(Ar.FAILED_PRECONDITION, Lu);
                  return (
                    t.Io(),
                    t.mo(),
                    t.Ao(),
                    t.runTransaction(
                      "getHighestListenSequenceNumber",
                      "readonly",
                      function (e) {
                        return t._o.Ki(e);
                      }
                    )
                  );
                })
                .then(function (e) {
                  t.so = new Fr(e, t.eo);
                })
                .then(function () {
                  t.io = !0;
                })
                .catch(function (e) {
                  return t.lo && t.lo.close(), Promise.reject(e);
                });
            }),
            (t.prototype.Ro = function (t) {
              var e = this;
              return (
                (this.uo = function (n) {
                  return (0, lr.mG)(e, void 0, void 0, function () {
                    return (0, lr.Jh)(this, function (e) {
                      return this.Er ? [2, t(n)] : [2];
                    });
                  });
                }),
                t(this.isPrimary)
              );
            }),
            (t.prototype.Po = function (t) {
              var e = this;
              this.lo.Xn(function (n) {
                return (0, lr.mG)(e, void 0, void 0, function () {
                  return (0, lr.Jh)(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return null === n.newVersion ? [4, t()] : [3, 2];
                      case 1:
                        e.sent(), (e.label = 2);
                      case 2:
                        return [2];
                    }
                  });
                });
              });
            }),
            (t.prototype.yo = function (t) {
              var e = this;
              this.networkEnabled !== t &&
                ((this.networkEnabled = t),
                this.Zr.Ps(function () {
                  return (0, lr.mG)(e, void 0, void 0, function () {
                    return (0, lr.Jh)(this, function (t) {
                      switch (t.label) {
                        case 0:
                          return this.Er ? [4, this.To()] : [3, 2];
                        case 1:
                          t.sent(), (t.label = 2);
                        case 2:
                          return [2];
                      }
                    });
                  });
                }));
            }),
            (t.prototype.To = function () {
              var t = this;
              return this.runTransaction(
                "updateClientMetadataAndTryBecomePrimary",
                "readwrite",
                function (e) {
                  return Uu(e)
                    .put(
                      new Ra(
                        t.clientId,
                        Date.now(),
                        t.networkEnabled,
                        t.inForeground
                      )
                    )
                    .next(function () {
                      if (t.isPrimary)
                        return t.Vo(e).next(function (e) {
                          e ||
                            ((t.isPrimary = !1),
                            t.Zr.po(function () {
                              return t.uo(!1);
                            }));
                        });
                    })
                    .next(function () {
                      return t.bo(e);
                    })
                    .next(function (n) {
                      return t.isPrimary && !n
                        ? t.vo(e).next(function () {
                            return !1;
                          })
                        : !!n &&
                            t.So(e).next(function () {
                              return !0;
                            });
                    });
                }
              )
                .catch(function (e) {
                  if (ua(e))
                    return (
                      gr(
                        "IndexedDbPersistence",
                        "Failed to extend owner lease: ",
                        e
                      ),
                      t.isPrimary
                    );
                  if (!t.allowTabSynchronization) throw e;
                  return (
                    gr(
                      "IndexedDbPersistence",
                      "Releasing owner lease after error during lease refresh",
                      e
                    ),
                    !1
                  );
                })
                .then(function (e) {
                  t.isPrimary !== e &&
                    t.Zr.po(function () {
                      return t.uo(e);
                    }),
                    (t.isPrimary = e);
                });
            }),
            (t.prototype.Vo = function (t) {
              var e = this;
              return Fu(t)
                .get(Ia.key)
                .next(function (t) {
                  return ra.resolve(e.Do(t));
                });
            }),
            (t.prototype.Co = function (t) {
              return Uu(t).delete(this.clientId);
            }),
            (t.prototype.xo = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t,
                  e,
                  n,
                  r,
                  i = this;
                return (0, lr.Jh)(this, function (o) {
                  switch (o.label) {
                    case 0:
                      return !this.isPrimary || this.No(this.ao, 18e5)
                        ? [3, 2]
                        : ((this.ao = Date.now()),
                          [
                            4,
                            this.runTransaction(
                              "maybeGarbageCollectMultiClientState",
                              "readwrite-primary",
                              function (t) {
                                var e = Ua(t, Ra.store);
                                return e.rs().next(function (t) {
                                  var n = i.$o(t, 18e5),
                                    r = t.filter(function (t) {
                                      return -1 === n.indexOf(t);
                                    });
                                  return ra
                                    .forEach(r, function (t) {
                                      return e.delete(t.clientId);
                                    })
                                    .next(function () {
                                      return r;
                                    });
                                });
                              }
                            ).catch(function () {
                              return [];
                            }),
                          ]);
                    case 1:
                      if (((t = o.sent()), this.Eo))
                        for (e = 0, n = t; e < n.length; e++)
                          (r = n[e]), this.Eo.removeItem(this.Fo(r.clientId));
                      o.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }),
            (t.prototype.Ao = function () {
              var t = this;
              this.co = this.Zr.Tr("client_metadata_refresh", 4e3, function () {
                return t
                  .To()
                  .then(function () {
                    return t.xo();
                  })
                  .then(function () {
                    return t.Ao();
                  });
              });
            }),
            (t.prototype.Do = function (t) {
              return !!t && t.ownerId === this.clientId;
            }),
            (t.prototype.bo = function (t) {
              var e = this;
              return this.no
                ? ra.resolve(!0)
                : Fu(t)
                    .get(Ia.key)
                    .next(function (n) {
                      if (
                        null !== n &&
                        e.No(n.leaseTimestampMs, 5e3) &&
                        !e.Oo(n.ownerId)
                      ) {
                        if (e.Do(n) && e.networkEnabled) return !0;
                        if (!e.Do(n)) {
                          if (!n.allowTabSynchronization)
                            throw new Pr(Ar.FAILED_PRECONDITION, Lu);
                          return !1;
                        }
                      }
                      return (
                        !(!e.networkEnabled || !e.inForeground) ||
                        Uu(t)
                          .rs()
                          .next(function (t) {
                            return (
                              void 0 ===
                              e.$o(t, 5e3).find(function (t) {
                                if (e.clientId !== t.clientId) {
                                  var n = !e.networkEnabled && t.networkEnabled,
                                    r = !e.inForeground && t.inForeground,
                                    i = e.networkEnabled === t.networkEnabled;
                                  if (n || (r && i)) return !0;
                                }
                                return !1;
                              })
                            );
                          })
                      );
                    })
                    .next(function (t) {
                      return (
                        e.isPrimary !== t &&
                          gr(
                            "IndexedDbPersistence",
                            "Client " +
                              (t ? "is" : "is not") +
                              " eligible for a primary lease."
                          ),
                        t
                      );
                    });
            }),
            (t.prototype.ko = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t = this;
                return (0, lr.Jh)(this, function (e) {
                  switch (e.label) {
                    case 0:
                      return (
                        (this.io = !1),
                        this.Mo(),
                        this.co && (this.co.cancel(), (this.co = null)),
                        this.Lo(),
                        this.Bo(),
                        [
                          4,
                          this.lo.runTransaction(
                            "shutdown",
                            "readwrite",
                            [Ia.store, Ra.store],
                            function (e) {
                              var n = new Fa(e, Fr.q);
                              return t.vo(n).next(function () {
                                return t.Co(n);
                              });
                            }
                          ),
                        ]
                      );
                    case 1:
                      return e.sent(), this.lo.close(), this.qo(), [2];
                  }
                });
              });
            }),
            (t.prototype.$o = function (t, e) {
              var n = this;
              return t.filter(function (t) {
                return n.No(t.updateTimeMs, e) && !n.Oo(t.clientId);
              });
            }),
            (t.prototype.Uo = function () {
              var t = this;
              return this.runTransaction(
                "getActiveClients",
                "readonly",
                function (e) {
                  return Uu(e)
                    .rs()
                    .next(function (e) {
                      return t.$o(e, 18e5).map(function (t) {
                        return t.clientId;
                      });
                    });
                }
              );
            }),
            Object.defineProperty(t.prototype, "Er", {
              get: function () {
                return this.io;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.Qo = function (t) {
              return pu.mi(t, this.Qt, this.Ei, this.Ti);
            }),
            (t.prototype.Sr = function () {
              return this._o;
            }),
            (t.prototype.$r = function () {
              return this.fo;
            }),
            (t.prototype.Ko = function () {
              return this.Ei;
            }),
            (t.prototype.Wo = function () {
              return this.wo;
            }),
            (t.prototype.runTransaction = function (t, e, n) {
              var r = this;
              gr("IndexedDbPersistence", "Starting transaction:", t);
              var i,
                o = "readonly" === e ? "readonly" : "readwrite";
              return this.lo
                .runTransaction(t, o, ja, function (o) {
                  return (
                    (i = new Fa(o, r.so ? r.so.next() : Fr.q)),
                    "readwrite-primary" === e
                      ? r
                          .Vo(i)
                          .next(function (t) {
                            return !!t || r.bo(i);
                          })
                          .next(function (e) {
                            if (!e)
                              throw (
                                (mr(
                                  "Failed to obtain primary lease for action '" +
                                    t +
                                    "'."
                                ),
                                (r.isPrimary = !1),
                                r.Zr.po(function () {
                                  return r.uo(!1);
                                }),
                                new Pr(Ar.FAILED_PRECONDITION, va))
                              );
                            return n(i);
                          })
                          .next(function (t) {
                            return r.So(i).next(function () {
                              return t;
                            });
                          })
                      : r.jo(i).next(function () {
                          return n(i);
                        })
                  );
                })
                .then(function (t) {
                  return i.Vs(), t;
                });
            }),
            (t.prototype.jo = function (t) {
              var e = this;
              return Fu(t)
                .get(Ia.key)
                .next(function (t) {
                  if (
                    null !== t &&
                    e.No(t.leaseTimestampMs, 5e3) &&
                    !e.Oo(t.ownerId) &&
                    !e.Do(t) &&
                    !(
                      e.no ||
                      (e.allowTabSynchronization && t.allowTabSynchronization)
                    )
                  )
                    throw new Pr(Ar.FAILED_PRECONDITION, Lu);
                });
            }),
            (t.prototype.So = function (t) {
              var e = new Ia(
                this.clientId,
                this.allowTabSynchronization,
                Date.now()
              );
              return Fu(t).put(Ia.key, e);
            }),
            (t.Kn = function () {
              return oa.Kn();
            }),
            (t.prototype.vo = function (t) {
              var e = this,
                n = Fu(t);
              return n.get(Ia.key).next(function (t) {
                return e.Do(t)
                  ? (gr("IndexedDbPersistence", "Releasing primary lease."),
                    n.delete(Ia.key))
                  : ra.resolve();
              });
            }),
            (t.prototype.No = function (t, e) {
              var n = Date.now();
              return !(
                t < n - e ||
                (t > n &&
                  (mr(
                    "Detected an update time that is in the future: " +
                      t +
                      " > " +
                      n
                  ),
                  1))
              );
            }),
            (t.prototype.Io = function () {
              var t = this;
              null !== this.document &&
                "function" == typeof this.document.addEventListener &&
                ((this.oo = function () {
                  t.Zr.Ps(function () {
                    return (
                      (t.inForeground =
                        "visible" === t.document.visibilityState),
                      t.To()
                    );
                  });
                }),
                this.document.addEventListener("visibilitychange", this.oo),
                (this.inForeground =
                  "visible" === this.document.visibilityState));
            }),
            (t.prototype.Lo = function () {
              this.oo &&
                (this.document.removeEventListener("visibilitychange", this.oo),
                (this.oo = null));
            }),
            (t.prototype.mo = function () {
              var t,
                e = this;
              "function" ==
                typeof (null === (t = this.window) || void 0 === t
                  ? void 0
                  : t.addEventListener) &&
                ((this.ro = function () {
                  e.Mo(),
                    e.Zr.Ps(function () {
                      return e.ko();
                    });
                }),
                this.window.addEventListener("unload", this.ro));
            }),
            (t.prototype.Bo = function () {
              this.ro &&
                (this.window.removeEventListener("unload", this.ro),
                (this.ro = null));
            }),
            (t.prototype.Oo = function (t) {
              var e;
              try {
                var n =
                  null !==
                  (null === (e = this.Eo) || void 0 === e
                    ? void 0
                    : e.getItem(this.Fo(t)));
                return (
                  gr(
                    "IndexedDbPersistence",
                    "Client '" +
                      t +
                      "' " +
                      (n ? "is" : "is not") +
                      " zombied in LocalStorage"
                  ),
                  n
                );
              } catch (t) {
                return (
                  mr(
                    "IndexedDbPersistence",
                    "Failed to get zombied client id.",
                    t
                  ),
                  !1
                );
              }
            }),
            (t.prototype.Mo = function () {
              if (this.Eo)
                try {
                  this.Eo.setItem(this.Fo(this.clientId), String(Date.now()));
                } catch (t) {
                  mr("Failed to set zombie client id.", t);
                }
            }),
            (t.prototype.qo = function () {
              if (this.Eo)
                try {
                  this.Eo.removeItem(this.Fo(this.clientId));
                } catch (t) {}
            }),
            (t.prototype.Fo = function (t) {
              return "firestore_zombie_" + this.persistenceKey + "_" + t;
            }),
            t
          );
        })();
      function Fu(t) {
        return Ua(t, Ia.store);
      }
      function Uu(t) {
        return Ua(t, Ra.store);
      }
      function Vu(t, e) {
        var n = t.projectId;
        return t.o || (n += "." + t.database), "firestore/" + e + "/" + n + "/";
      }
      var qu = function (t, e) {
          (this.progress = t), (this.Go = e);
        },
        Bu = (function () {
          function t(t, e, n) {
            (this.fo = t), (this.zo = e), (this.Ei = n);
          }
          return (
            (t.prototype.Ho = function (t, e) {
              var n = this;
              return this.zo.bi(t, e).next(function (r) {
                return n.Jo(t, e, r);
              });
            }),
            (t.prototype.Jo = function (t, e, n) {
              return this.fo._i(t, e).next(function (t) {
                for (var r = 0, i = n; r < i.length; r++) t = i[r].Cs(e, t);
                return t;
              });
            }),
            (t.prototype.Yo = function (t, e, n) {
              var r = ns();
              return (
                e.forEach(function (t, e) {
                  for (var i = 0, o = n; i < o.length; i++) e = o[i].Cs(t, e);
                  r = r.zt(t, e);
                }),
                r
              );
            }),
            (t.prototype.Xo = function (t, e) {
              var n = this;
              return this.fo.getEntries(t, e).next(function (e) {
                return n.Zo(t, e);
              });
            }),
            (t.prototype.Zo = function (t, e) {
              var n = this;
              return this.zo.vi(t, e).next(function (r) {
                var i = n.Yo(t, e, r),
                  o = es();
                return (
                  i.forEach(function (t, e) {
                    e || (e = new Ti(t, Vr.min())), (o = o.zt(t, e));
                  }),
                  o
                );
              });
            }),
            (t.prototype.Kr = function (t, e, n) {
              return (function (t) {
                return (
                  zr.wt(t.path) &&
                  null === t.collectionGroup &&
                  0 === t.filters.length
                );
              })(e)
                ? this.tc(t, e.path)
                : $i(e)
                ? this.ec(t, e, n)
                : this.nc(t, e, n);
            }),
            (t.prototype.tc = function (t, e) {
              return this.Ho(t, new zr(e)).next(function (t) {
                var e = is();
                return t instanceof Ei && (e = e.zt(t.key, t)), e;
              });
            }),
            (t.prototype.ec = function (t, e, n) {
              var r = this,
                i = e.collectionGroup,
                o = is();
              return this.Ei.Us(t, i).next(function (s) {
                return ra
                  .forEach(s, function (s) {
                    var a = (function (t, e) {
                      return new Hi(
                        e,
                        null,
                        t.xt.slice(),
                        t.filters.slice(),
                        t.limit,
                        t.limitType,
                        t.startAt,
                        t.endAt
                      );
                    })(e, s.child(i));
                    return r.nc(t, a, n).next(function (t) {
                      t.forEach(function (t, e) {
                        o = o.zt(t, e);
                      });
                    });
                  })
                  .next(function () {
                    return o;
                  });
              });
            }),
            (t.prototype.nc = function (t, e, n) {
              var r,
                i,
                o = this;
              return this.fo
                .Kr(t, e, n)
                .next(function (n) {
                  return (r = n), o.zo.Di(t, e);
                })
                .next(function (e) {
                  return (
                    (i = e),
                    o.sc(t, i, r).next(function (t) {
                      r = t;
                      for (var e = 0, n = i; e < n.length; e++)
                        for (
                          var o = n[e], s = 0, a = o.mutations;
                          s < a.length;
                          s++
                        ) {
                          var u = a[s],
                            c = u.key,
                            h = xo(u, r.get(c), o.vs);
                          r = h instanceof Ei ? r.zt(c, h) : r.remove(c);
                        }
                    })
                  );
                })
                .next(function () {
                  return (
                    r.forEach(function (t, n) {
                      so(e, n) || (r = r.remove(t));
                    }),
                    r
                  );
                });
            }),
            (t.prototype.sc = function (t, e, n) {
              for (var r = us(), i = 0, o = e; i < o.length; i++)
                for (var s = 0, a = o[i].mutations; s < a.length; s++) {
                  var u = a[s];
                  u instanceof jo &&
                    null === n.get(u.key) &&
                    (r = r.add(u.key));
                }
              var c = n;
              return this.fo.getEntries(t, r).next(function (t) {
                return (
                  t.forEach(function (t, e) {
                    null !== e && e instanceof Ei && (c = c.zt(t, e));
                  }),
                  c
                );
              });
            }),
            t
          );
        })(),
        Gu = (function () {
          function t(t, e, n, r) {
            (this.targetId = t),
              (this.fromCache = e),
              (this.ic = n),
              (this.rc = r);
          }
          return (
            (t.oc = function (e, n) {
              for (
                var r = us(), i = us(), o = 0, s = n.docChanges;
                o < s.length;
                o++
              ) {
                var a = s[o];
                switch (a.type) {
                  case 0:
                    r = r.add(a.doc.key);
                    break;
                  case 1:
                    i = i.add(a.doc.key);
                }
              }
              return new t(e, n.fromCache, r, i);
            }),
            t
          );
        })(),
        Wu = (function () {
          function t() {}
          return (
            (t.prototype.cc = function (t) {
              this.ac = t;
            }),
            (t.prototype.Kr = function (t, e, n, i) {
              var o = this;
              return (function (t) {
                return (
                  0 === t.filters.length &&
                  null === t.limit &&
                  null == t.startAt &&
                  null == t.endAt &&
                  (0 === t.xt.length ||
                    (1 === t.xt.length && t.xt[0].field.ut()))
                );
              })(e) || n.isEqual(Vr.min())
                ? this.uc(t, e)
                : this.ac.Xo(t, i).next(function (s) {
                    var a = o.hc(e, s);
                    return (Qi(e) || Yi(e)) && o.lc(e.limitType, a, i, n)
                      ? o.uc(t, e)
                      : (vr() <= r.in.DEBUG &&
                          gr(
                            "QueryEngine",
                            "Re-using previous result from %s to execute query: %s",
                            n.toString(),
                            oo(e)
                          ),
                        o.ac.Kr(t, e, n).next(function (t) {
                          return (
                            a.forEach(function (e) {
                              t = t.zt(e.key, e);
                            }),
                            t
                          );
                        }));
                  });
            }),
            (t.prototype.hc = function (t, e) {
              var n = new Zo(ao(t));
              return (
                e.forEach(function (e, r) {
                  r instanceof Ei && so(t, r) && (n = n.add(r));
                }),
                n
              );
            }),
            (t.prototype.lc = function (t, e, n, r) {
              if (n.size !== e.size) return !0;
              var i = "F" === t ? e.last() : e.first();
              return !!i && (i.hasPendingWrites || i.version._(r) > 0);
            }),
            (t.prototype.uc = function (t, e) {
              return (
                vr() <= r.in.DEBUG &&
                  gr(
                    "QueryEngine",
                    "Using full collection scan to execute query:",
                    oo(e)
                  ),
                this.ac.Kr(t, e, Vr.min())
              );
            }),
            t
          );
        })(),
        zu = (function () {
          function t(t, e, n, r) {
            (this.persistence = t),
              (this._c = e),
              (this.Qt = r),
              (this.fc = new Qo(Sr)),
              (this.dc = new cu(function (t) {
                return Ni(t);
              }, Ai)),
              (this.wc = Vr.min()),
              (this.zo = t.Qo(n)),
              (this.Ec = t.$r()),
              (this._o = t.Sr()),
              (this.Tc = new Bu(this.Ec, this.zo, this.persistence.Ko())),
              (this.wo = t.Wo()),
              this._c.cc(this.Tc);
          }
          return (
            (t.prototype.Ir = function (t) {
              var e = this;
              return this.persistence.runTransaction(
                "Collect garbage",
                "readwrite-primary",
                function (n) {
                  return t.Vr(n, e.fc);
                }
              );
            }),
            t
          );
        })();
      function Hu(t, e, n, r) {
        return new zu(t, e, n, r);
      }
      function Ku(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o;
          return (0, lr.Jh)(this, function (s) {
            switch (s.label) {
              case 0:
                return (
                  (n = Ir(t)),
                  (r = n.zo),
                  (i = n.Tc),
                  [
                    4,
                    n.persistence.runTransaction(
                      "Handle user change",
                      "readonly",
                      function (t) {
                        var o;
                        return n.zo
                          .pi(t)
                          .next(function (s) {
                            return (
                              (o = s),
                              (r = n.persistence.Qo(e)),
                              (i = new Bu(n.Ec, r, n.persistence.Ko())),
                              r.pi(t)
                            );
                          })
                          .next(function (e) {
                            for (
                              var n = [], r = [], s = us(), a = 0, u = o;
                              a < u.length;
                              a++
                            ) {
                              var c = u[a];
                              n.push(c.batchId);
                              for (
                                var h = 0, l = c.mutations;
                                h < l.length;
                                h++
                              ) {
                                var f = l[h];
                                s = s.add(f.key);
                              }
                            }
                            for (var p = 0, d = e; p < d.length; p++) {
                              var v = d[p];
                              r.push(v.batchId);
                              for (
                                var g = 0, m = v.mutations;
                                g < m.length;
                                g++
                              ) {
                                var y = m[g];
                                s = s.add(y.key);
                              }
                            }
                            return i.Xo(t, s).next(function (t) {
                              return { Ic: t, mc: n, Ac: r };
                            });
                          });
                      }
                    ),
                  ]
                );
              case 1:
                return (
                  (o = s.sent()),
                  [2, ((n.zo = r), (n.Tc = i), n._c.cc(n.Tc), o)]
                );
            }
          });
        });
      }
      function Ju(t, e) {
        var n = Ir(t);
        return n.persistence.runTransaction(
          "Acknowledge batch",
          "readwrite-primary",
          function (t) {
            var r = e.batch.keys(),
              i = n.Ec.Nr({ Wr: !0 });
            return (function (t, e, n, r) {
              var i = n.batch,
                o = i.keys(),
                s = ra.resolve();
              return (
                o.forEach(function (t) {
                  s = s
                    .next(function () {
                      return r._i(e, t);
                    })
                    .next(function (e) {
                      var o = e,
                        s = n.$s.get(t);
                      _r(null !== s),
                        (!o || o.version._(s) < 0) &&
                          (o = i.Ss(t, o, n)) &&
                          r.ai(o, n.Ns);
                    });
                }),
                s.next(function () {
                  return t.zo.Ci(e, i);
                })
              );
            })(n, t, e, i)
              .next(function () {
                return i.apply(t);
              })
              .next(function () {
                return n.zo.$i(t);
              })
              .next(function () {
                return n.Tc.Xo(t, r);
              });
          }
        );
      }
      function Qu(t) {
        var e = Ir(t);
        return e.persistence.runTransaction(
          "Get last remote snapshot version",
          "readonly",
          function (t) {
            return e._o.Qi(t);
          }
        );
      }
      function Yu(t, e) {
        var n = Ir(t),
          r = e.Ot,
          i = n.fc;
        return n.persistence
          .runTransaction(
            "Apply remote event",
            "readwrite-primary",
            function (t) {
              var o = n.Ec.Nr({ Wr: !0 });
              i = n.fc;
              var s = [];
              e.$e.forEach(function (e, o) {
                var a = i.get(o);
                if (a) {
                  s.push(
                    n._o.sr(t, e.Qe, o).next(function () {
                      return n._o.er(t, e.qe, o);
                    })
                  );
                  var u = e.resumeToken;
                  if (u.l() > 0) {
                    var c = a.Mt(u, r).kt(t.bs);
                    (i = i.zt(o, c)),
                      (function (t, e, n) {
                        return (
                          _r(e.resumeToken.l() > 0),
                          0 === t.resumeToken.l() ||
                            e.Ot.W() - t.Ot.W() >= 3e8 ||
                            n.qe.size + n.Ue.size + n.Qe.size > 0
                        );
                      })(a, c, e) && s.push(n._o.Hi(t, c));
                  }
                }
              });
              var a = es();
              if (
                (e.Oe.forEach(function (r, i) {
                  e.ke.has(r) && s.push(n.persistence.Ti.Fr(t, r));
                }),
                s.push(
                  Xu(t, o, e.Oe, r, void 0).next(function (t) {
                    a = t;
                  })
                ),
                !r.isEqual(Vr.min()))
              ) {
                var u = n._o.Qi(t).next(function (e) {
                  return n._o.Wi(t, t.bs, r);
                });
                s.push(u);
              }
              return ra
                .Mn(s)
                .next(function () {
                  return o.apply(t);
                })
                .next(function () {
                  return n.Tc.Zo(t, a);
                });
            }
          )
          .then(function (t) {
            return (n.fc = i), t;
          });
      }
      function Xu(t, e, n, r, i) {
        var o = us();
        return (
          n.forEach(function (t) {
            return (o = o.add(t));
          }),
          e.getEntries(t, o).next(function (t) {
            var o = es();
            return (
              n.forEach(function (n, s) {
                var a = t.get(n),
                  u = (null == i ? void 0 : i.get(n)) || r;
                s instanceof Ti && s.version.isEqual(Vr.min())
                  ? (e.li(n, u), (o = o.zt(n, s)))
                  : null == a ||
                    s.version._(a.version) > 0 ||
                    (0 === s.version._(a.version) && a.hasPendingWrites)
                  ? (e.ai(s, u), (o = o.zt(n, s)))
                  : gr(
                      "LocalStore",
                      "Ignoring outdated watch update for ",
                      n,
                      ". Current version:",
                      a.version,
                      " Watch version:",
                      s.version
                    );
              }),
              o
            );
          })
        );
      }
      function Zu(t, e) {
        var n = Ir(t);
        return n.persistence.runTransaction(
          "Get next mutation batch",
          "readonly",
          function (t) {
            return void 0 === e && (e = -1), n.zo.gi(t, e);
          }
        );
      }
      function $u(t, e) {
        var n = Ir(t);
        return n.persistence
          .runTransaction("Allocate target", "readwrite", function (t) {
            var r;
            return n._o.tr(t, e).next(function (i) {
              return i
                ? ((r = i), ra.resolve(r))
                : n._o.Bi(t).next(function (i) {
                    return (
                      (r = new co(e, i, 0, t.bs)),
                      n._o.ji(t, r).next(function () {
                        return r;
                      })
                    );
                  });
            });
          })
          .then(function (t) {
            var r = n.fc.get(t.targetId);
            return (
              (null === r || t.Ot._(r.Ot) > 0) &&
                ((n.fc = n.fc.zt(t.targetId, t)), n.dc.set(e, t.targetId)),
              t
            );
          });
      }
      function tc(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i, o, s;
          return (0, lr.Jh)(this, function (a) {
            switch (a.label) {
              case 0:
                (r = Ir(t)),
                  (i = r.fc.get(e)),
                  (o = n ? "readwrite" : "readwrite-primary"),
                  (a.label = 1);
              case 1:
                return (
                  a.trys.push([1, 4, , 5]),
                  n
                    ? [3, 3]
                    : [
                        4,
                        r.persistence.runTransaction(
                          "Release target",
                          o,
                          function (t) {
                            return r.persistence.Ti.removeTarget(t, i);
                          }
                        ),
                      ]
                );
              case 2:
                a.sent(), (a.label = 3);
              case 3:
                return [3, 5];
              case 4:
                if (!ua((s = a.sent()))) throw s;
                return (
                  gr(
                    "LocalStore",
                    "Failed to update sequence numbers for target " +
                      e +
                      ": " +
                      s
                  ),
                  [3, 5]
                );
              case 5:
                return (r.fc = r.fc.remove(e)), r.dc.delete(i.target), [2];
            }
          });
        });
      }
      function ec(t, e, n) {
        var r = Ir(t),
          i = Vr.min(),
          o = us();
        return r.persistence.runTransaction(
          "Execute query",
          "readonly",
          function (t) {
            return (function (t, e, n) {
              var r = Ir(t),
                i = r.dc.get(n);
              return void 0 !== i ? ra.resolve(r.fc.get(i)) : r._o.tr(e, n);
            })(r, t, eo(e))
              .next(function (e) {
                if (e)
                  return (
                    (i = e.lastLimboFreeSnapshotVersion),
                    r._o.rr(t, e.targetId).next(function (t) {
                      o = t;
                    })
                  );
              })
              .next(function () {
                return r._c.Kr(t, e, n ? i : Vr.min(), n ? o : us());
              })
              .next(function (t) {
                return { documents: t, Rc: o };
              });
          }
        );
      }
      function nc(t, e) {
        var n = Ir(t),
          r = Ir(n._o),
          i = n.fc.get(e);
        return i
          ? Promise.resolve(i.target)
          : n.persistence.runTransaction(
              "Get target data",
              "readonly",
              function (t) {
                return r.Sn(t, e).next(function (t) {
                  return t ? t.target : null;
                });
              }
            );
      }
      function rc(t) {
        var e = Ir(t);
        return e.persistence
          .runTransaction("Get new document changes", "readonly", function (t) {
            return (function (t, e, n) {
              var r = Ir(t),
                i = es(),
                o = za(n),
                s = xu(e),
                a = IDBKeyRange.lowerBound(o, !0);
              return s
                .hs({ index: Na.readTimeIndex, range: a }, function (t, e) {
                  var n = Ga(r.Qt, e);
                  (i = i.zt(n.key, n)), (o = e.readTime);
                })
                .next(function () {
                  return { Go: i, readTime: Ha(o) };
                });
            })(e.Ec, t, e.wc);
          })
          .then(function (t) {
            var n = t.Go,
              r = t.readTime;
            return (e.wc = r), n;
          });
      }
      function ic(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e;
          return (0, lr.Jh)(this, function (n) {
            return [
              2,
              (e = Ir(t)).persistence
                .runTransaction(
                  "Synchronize last document change read time",
                  "readonly",
                  function (t) {
                    return (function (t) {
                      var e = xu(t),
                        n = Vr.min();
                      return e
                        .hs(
                          { index: Na.readTimeIndex, reverse: !0 },
                          function (t, e, r) {
                            e.readTime && (n = Ha(e.readTime)), r.done();
                          }
                        )
                        .next(function () {
                          return n;
                        });
                    })(t);
                  }
                )
                .then(function (t) {
                  e.wc = t;
                }),
            ];
          });
        });
      }
      function oc(t, e, n, r) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var i, o, s, a, u, c, h, l, f, p;
          return (0, lr.Jh)(this, function (d) {
            switch (d.label) {
              case 0:
                for (
                  i = Ir(t), o = us(), s = es(), a = ss(), u = 0, c = n;
                  u < c.length;
                  u++
                )
                  (h = c[u]),
                    (l = e.Pc(h.metadata.name)),
                    h.document && (o = o.add(l)),
                    (s = s.zt(l, e.yc(h))),
                    (a = a.zt(l, e.gc(h.metadata.readTime)));
                return (
                  (f = i.Ec.Nr({ Wr: !0 })),
                  [
                    4,
                    $u(
                      i,
                      (function (t) {
                        return eo(Ji(Br.ot("__bundle__/docs/" + t)));
                      })(r)
                    ),
                  ]
                );
              case 1:
                return (
                  (p = d.sent()),
                  [
                    2,
                    i.persistence.runTransaction(
                      "Apply bundle documents",
                      "readwrite",
                      function (t) {
                        return Xu(t, f, s, Vr.min(), a)
                          .next(function (e) {
                            return f.apply(t), e;
                          })
                          .next(function (e) {
                            return i._o
                              .Yi(t, p.targetId)
                              .next(function () {
                                return i._o.er(t, o, p.targetId);
                              })
                              .next(function () {
                                return i.Tc.Zo(t, e);
                              });
                          });
                      }
                    ),
                  ]
                );
            }
          });
        });
      }
      function sc(t, e, n) {
        return (
          void 0 === n && (n = us()),
          (0, lr.mG)(this, void 0, void 0, function () {
            var r, i;
            return (0, lr.Jh)(this, function (o) {
              switch (o.label) {
                case 0:
                  return [4, $u(t, eo(Za(e.bundledQuery)))];
                case 1:
                  return (
                    (r = o.sent()),
                    [
                      2,
                      (i = Ir(t)).persistence.runTransaction(
                        "Save named query",
                        "readwrite",
                        function (t) {
                          var o = As(e.readTime);
                          if (r.Ot._(o) >= 0) return i.wo.Ls(t, e);
                          var s = r.Mt(Nr.T, o);
                          return (
                            (i.fc = i.fc.zt(s.targetId, s)),
                            i._o
                              .Hi(t, s)
                              .next(function () {
                                return i._o.Yi(t, r.targetId);
                              })
                              .next(function () {
                                return i._o.er(t, n, r.targetId);
                              })
                              .next(function () {
                                return i.wo.Ls(t, e);
                              })
                          );
                        }
                      ),
                    ]
                  );
              }
            });
          })
        );
      }
      var ac = (function () {
          function t(t) {
            (this.Qt = t), (this.Vc = new Map()), (this.bc = new Map());
          }
          return (
            (t.prototype.Os = function (t, e) {
              return ra.resolve(this.Vc.get(e));
            }),
            (t.prototype.ks = function (t, e) {
              var n;
              return (
                this.Vc.set(e.id, {
                  id: (n = e).id,
                  version: n.version,
                  createTime: As(n.createTime),
                }),
                ra.resolve()
              );
            }),
            (t.prototype.Ms = function (t, e) {
              return ra.resolve(this.bc.get(e));
            }),
            (t.prototype.Ls = function (t, e) {
              return (
                this.bc.set(
                  e.name,
                  (function (t) {
                    return {
                      name: t.name,
                      query: Za(t.bundledQuery),
                      readTime: As(t.readTime),
                    };
                  })(e)
                ),
                ra.resolve()
              );
            }),
            t
          );
        })(),
        uc = (function () {
          function t() {
            (this.vc = new Zo(cc.Sc)), (this.Dc = new Zo(cc.Cc));
          }
          return (
            (t.prototype.et = function () {
              return this.vc.et();
            }),
            (t.prototype.nr = function (t, e) {
              var n = new cc(t, e);
              (this.vc = this.vc.add(n)), (this.Dc = this.Dc.add(n));
            }),
            (t.prototype.xc = function (t, e) {
              var n = this;
              t.forEach(function (t) {
                return n.nr(t, e);
              });
            }),
            (t.prototype.ir = function (t, e) {
              this.Nc(new cc(t, e));
            }),
            (t.prototype.$c = function (t, e) {
              var n = this;
              t.forEach(function (t) {
                return n.ir(t, e);
              });
            }),
            (t.prototype.Fc = function (t) {
              var e = this,
                n = new zr(new Br([])),
                r = new cc(n, t),
                i = new cc(n, t + 1),
                o = [];
              return (
                this.Dc.me([r, i], function (t) {
                  e.Nc(t), o.push(t.key);
                }),
                o
              );
            }),
            (t.prototype.Oc = function () {
              var t = this;
              this.vc.forEach(function (e) {
                return t.Nc(e);
              });
            }),
            (t.prototype.Nc = function (t) {
              (this.vc = this.vc.delete(t)), (this.Dc = this.Dc.delete(t));
            }),
            (t.prototype.kc = function (t) {
              var e = new zr(new Br([])),
                n = new cc(e, t),
                r = new cc(e, t + 1),
                i = us();
              return (
                this.Dc.me([n, r], function (t) {
                  i = i.add(t.key);
                }),
                i
              );
            }),
            (t.prototype.Fi = function (t) {
              var e = new cc(t, 0),
                n = this.vc.Re(e);
              return null !== n && t.isEqual(n.key);
            }),
            t
          );
        })(),
        cc = (function () {
          function t(t, e) {
            (this.key = t), (this.Mc = e);
          }
          return (
            (t.Sc = function (t, e) {
              return zr.H(t.key, e.key) || Sr(t.Mc, e.Mc);
            }),
            (t.Cc = function (t, e) {
              return Sr(t.Mc, e.Mc) || zr.H(t.key, e.key);
            }),
            t
          );
        })(),
        hc = (function () {
          function t(t, e) {
            (this.Ei = t),
              (this.Ti = e),
              (this.zo = []),
              (this.Lc = 1),
              (this.Bc = new Zo(cc.Sc));
          }
          return (
            (t.prototype.Ai = function (t) {
              return ra.resolve(0 === this.zo.length);
            }),
            (t.prototype.Ri = function (t, e, n, r) {
              var i = this.Lc;
              this.Lc++, this.zo.length > 0 && this.zo[this.zo.length - 1];
              var o = new Va(i, e, n, r);
              this.zo.push(o);
              for (var s = 0, a = r; s < a.length; s++) {
                var u = a[s];
                (this.Bc = this.Bc.add(new cc(u.key, i))),
                  this.Ei.qs(t, u.key.path.X());
              }
              return ra.resolve(o);
            }),
            (t.prototype.Pi = function (t, e) {
              return ra.resolve(this.qc(e));
            }),
            (t.prototype.gi = function (t, e) {
              var n = e + 1,
                r = this.Uc(n),
                i = r < 0 ? 0 : r;
              return ra.resolve(this.zo.length > i ? this.zo[i] : null);
            }),
            (t.prototype.Vi = function () {
              return ra.resolve(0 === this.zo.length ? -1 : this.Lc - 1);
            }),
            (t.prototype.pi = function (t) {
              return ra.resolve(this.zo.slice());
            }),
            (t.prototype.bi = function (t, e) {
              var n = this,
                r = new cc(e, 0),
                i = new cc(e, Number.POSITIVE_INFINITY),
                o = [];
              return (
                this.Bc.me([r, i], function (t) {
                  var e = n.qc(t.Mc);
                  o.push(e);
                }),
                ra.resolve(o)
              );
            }),
            (t.prototype.vi = function (t, e) {
              var n = this,
                r = new Zo(Sr);
              return (
                e.forEach(function (t) {
                  var e = new cc(t, 0),
                    i = new cc(t, Number.POSITIVE_INFINITY);
                  n.Bc.me([e, i], function (t) {
                    r = r.add(t.Mc);
                  });
                }),
                ra.resolve(this.Qc(r))
              );
            }),
            (t.prototype.Di = function (t, e) {
              var n = e.path,
                r = n.length + 1,
                i = n;
              zr.wt(i) || (i = i.child(""));
              var o = new cc(new zr(i), 0),
                s = new Zo(Sr);
              return (
                this.Bc.Ae(function (t) {
                  var e = t.key.path;
                  return !!n.nt(e) && (e.length === r && (s = s.add(t.Mc)), !0);
                }, o),
                ra.resolve(this.Qc(s))
              );
            }),
            (t.prototype.Qc = function (t) {
              var e = this,
                n = [];
              return (
                t.forEach(function (t) {
                  var r = e.qc(t);
                  null !== r && n.push(r);
                }),
                n
              );
            }),
            (t.prototype.Ci = function (t, e) {
              var n = this;
              _r(0 === this.Kc(e.batchId, "removed")), this.zo.shift();
              var r = this.Bc;
              return ra
                .forEach(e.mutations, function (i) {
                  var o = new cc(i.key, e.batchId);
                  return (r = r.delete(o)), n.Ti.Ni(t, i.key);
                })
                .next(function () {
                  n.Bc = r;
                });
            }),
            (t.prototype.xi = function (t) {}),
            (t.prototype.Fi = function (t, e) {
              var n = new cc(e, 0),
                r = this.Bc.Re(n);
              return ra.resolve(e.isEqual(r && r.key));
            }),
            (t.prototype.$i = function (t) {
              return this.zo.length, ra.resolve();
            }),
            (t.prototype.Kc = function (t, e) {
              return this.Uc(t);
            }),
            (t.prototype.Uc = function (t) {
              return 0 === this.zo.length ? 0 : t - this.zo[0].batchId;
            }),
            (t.prototype.qc = function (t) {
              var e = this.Uc(t);
              return e < 0 || e >= this.zo.length ? null : this.zo[e];
            }),
            t
          );
        })(),
        lc = (function () {
          function t(t, e) {
            (this.Ei = t),
              (this.Wc = e),
              (this.docs = new Qo(zr.H)),
              (this.size = 0);
          }
          return (
            (t.prototype.ai = function (t, e, n) {
              var r = e.key,
                i = this.docs.get(r),
                o = i ? i.size : 0,
                s = this.Wc(e);
              return (
                (this.docs = this.docs.zt(r, { hi: e, size: s, readTime: n })),
                (this.size += s - o),
                this.Ei.qs(t, r.path.X())
              );
            }),
            (t.prototype.li = function (t) {
              var e = this.docs.get(t);
              e && ((this.docs = this.docs.remove(t)), (this.size -= e.size));
            }),
            (t.prototype._i = function (t, e) {
              var n = this.docs.get(e);
              return ra.resolve(n ? n.hi : null);
            }),
            (t.prototype.getEntries = function (t, e) {
              var n = this,
                r = ns();
              return (
                e.forEach(function (t) {
                  var e = n.docs.get(t);
                  r = r.zt(t, e ? e.hi : null);
                }),
                ra.resolve(r)
              );
            }),
            (t.prototype.Kr = function (t, e, n) {
              for (
                var r = is(), i = new zr(e.path.child("")), o = this.docs.ee(i);
                o.ce();

              ) {
                var s = o.oe(),
                  a = s.key,
                  u = s.value,
                  c = u.hi,
                  h = u.readTime;
                if (!e.path.nt(a.path)) break;
                h._(n) <= 0 ||
                  (c instanceof Ei && so(e, c) && (r = r.zt(c.key, c)));
              }
              return ra.resolve(r);
            }),
            (t.prototype.jc = function (t, e) {
              return ra.forEach(this.docs, function (t) {
                return e(t);
              });
            }),
            (t.prototype.Nr = function (t) {
              return new fc(this);
            }),
            (t.prototype.Or = function (t) {
              return ra.resolve(this.size);
            }),
            t
          );
        })(),
        fc = (function (t) {
          function e(e) {
            var n = this;
            return ((n = t.call(this) || this).jr = e), n;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.wi = function (t) {
              var e = this,
                n = [];
              return (
                this.ri.forEach(function (r, i) {
                  i && i.hi ? n.push(e.jr.ai(t, i.hi, e.ci(r))) : e.jr.li(r);
                }),
                ra.Mn(n)
              );
            }),
            (e.prototype.fi = function (t, e) {
              return this.jr._i(t, e);
            }),
            (e.prototype.di = function (t, e) {
              return this.jr.getEntries(t, e);
            }),
            e
          );
        })(hu),
        pc = (function () {
          function t(t) {
            (this.persistence = t),
              (this.Gc = new cu(function (t) {
                return Ni(t);
              }, Ai)),
              (this.lastRemoteSnapshotVersion = Vr.min()),
              (this.highestTargetId = 0),
              (this.zc = 0),
              (this.Hc = new uc()),
              (this.targetCount = 0),
              (this.Jc = yu.Mi());
          }
          return (
            (t.prototype.In = function (t, e) {
              return (
                this.Gc.forEach(function (t, n) {
                  return e(n);
                }),
                ra.resolve()
              );
            }),
            (t.prototype.Qi = function (t) {
              return ra.resolve(this.lastRemoteSnapshotVersion);
            }),
            (t.prototype.Ki = function (t) {
              return ra.resolve(this.zc);
            }),
            (t.prototype.Bi = function (t) {
              return (
                (this.highestTargetId = this.Jc.next()),
                ra.resolve(this.highestTargetId)
              );
            }),
            (t.prototype.Wi = function (t, e, n) {
              return (
                n && (this.lastRemoteSnapshotVersion = n),
                e > this.zc && (this.zc = e),
                ra.resolve()
              );
            }),
            (t.prototype.Gi = function (t) {
              this.Gc.set(t.target, t);
              var e = t.targetId;
              e > this.highestTargetId &&
                ((this.Jc = new yu(e)), (this.highestTargetId = e)),
                t.sequenceNumber > this.zc && (this.zc = t.sequenceNumber);
            }),
            (t.prototype.ji = function (t, e) {
              return this.Gi(e), (this.targetCount += 1), ra.resolve();
            }),
            (t.prototype.Hi = function (t, e) {
              return this.Gi(e), ra.resolve();
            }),
            (t.prototype.Ji = function (t, e) {
              return (
                this.Gc.delete(e.target),
                this.Hc.Fc(e.targetId),
                (this.targetCount -= 1),
                ra.resolve()
              );
            }),
            (t.prototype.Xi = function (t, e, n) {
              var r = this,
                i = 0,
                o = [];
              return (
                this.Gc.forEach(function (s, a) {
                  a.sequenceNumber <= e &&
                    null === n.get(a.targetId) &&
                    (r.Gc.delete(s), o.push(r.Yi(t, a.targetId)), i++);
                }),
                ra.Mn(o).next(function () {
                  return i;
                })
              );
            }),
            (t.prototype.Zi = function (t) {
              return ra.resolve(this.targetCount);
            }),
            (t.prototype.tr = function (t, e) {
              var n = this.Gc.get(e) || null;
              return ra.resolve(n);
            }),
            (t.prototype.er = function (t, e, n) {
              return this.Hc.xc(e, n), ra.resolve();
            }),
            (t.prototype.sr = function (t, e, n) {
              this.Hc.$c(e, n);
              var r = this.persistence.Ti,
                i = [];
              return (
                r &&
                  e.forEach(function (e) {
                    i.push(r.Ni(t, e));
                  }),
                ra.Mn(i)
              );
            }),
            (t.prototype.Yi = function (t, e) {
              return this.Hc.Fc(e), ra.resolve();
            }),
            (t.prototype.rr = function (t, e) {
              var n = this.Hc.kc(e);
              return ra.resolve(n);
            }),
            (t.prototype.Fi = function (t, e) {
              return ra.resolve(this.Hc.Fi(e));
            }),
            t
          );
        })(),
        dc = (function () {
          function t(t, e) {
            var n = this;
            (this.Yc = {}),
              (this.so = new Fr(0)),
              (this.io = !1),
              (this.io = !0),
              (this.Ti = t(this)),
              (this._o = new pc(this)),
              (this.Ei = new nu()),
              (this.fo = (function (t, e) {
                return new lc(t, function (t) {
                  return n.Ti.Xc(t);
                });
              })(this.Ei)),
              (this.Qt = new Ba(e)),
              (this.wo = new ac(this.Qt));
          }
          return (
            (t.prototype.start = function () {
              return Promise.resolve();
            }),
            (t.prototype.ko = function () {
              return (this.io = !1), Promise.resolve();
            }),
            Object.defineProperty(t.prototype, "Er", {
              get: function () {
                return this.io;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.Po = function () {}),
            (t.prototype.yo = function () {}),
            (t.prototype.Ko = function () {
              return this.Ei;
            }),
            (t.prototype.Qo = function (t) {
              var e = this.Yc[t.A()];
              return (
                e || ((e = new hc(this.Ei, this.Ti)), (this.Yc[t.A()] = e)), e
              );
            }),
            (t.prototype.Sr = function () {
              return this._o;
            }),
            (t.prototype.$r = function () {
              return this.fo;
            }),
            (t.prototype.Wo = function () {
              return this.wo;
            }),
            (t.prototype.runTransaction = function (t, e, n) {
              var r = this;
              gr("MemoryPersistence", "Starting transaction:", t);
              var i = new vc(this.so.next());
              return (
                this.Ti.Zc(),
                n(i)
                  .next(function (t) {
                    return r.Ti.ta(i).next(function () {
                      return t;
                    });
                  })
                  .On()
                  .then(function (t) {
                    return i.Vs(), t;
                  })
              );
            }),
            (t.prototype.ea = function (t, e) {
              return ra.Ln(
                Object.values(this.Yc).map(function (n) {
                  return function () {
                    return n.Fi(t, e);
                  };
                })
              );
            }),
            t
          );
        })(),
        vc = (function (t) {
          function e(e) {
            var n = this;
            return ((n = t.call(this) || this).bs = e), n;
          }
          return (0, lr.ZT)(e, t), e;
        })(ga),
        gc = (function () {
          function t(t) {
            (this.persistence = t), (this.na = new uc()), (this.sa = null);
          }
          return (
            (t.ia = function (e) {
              return new t(e);
            }),
            Object.defineProperty(t.prototype, "ra", {
              get: function () {
                if (this.sa) return this.sa;
                throw wr();
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.nr = function (t, e, n) {
              return (
                this.na.nr(n, e), this.ra.delete(n.toString()), ra.resolve()
              );
            }),
            (t.prototype.ir = function (t, e, n) {
              return this.na.ir(n, e), this.ra.add(n.toString()), ra.resolve();
            }),
            (t.prototype.Ni = function (t, e) {
              return this.ra.add(e.toString()), ra.resolve();
            }),
            (t.prototype.removeTarget = function (t, e) {
              var n = this;
              this.na.Fc(e.targetId).forEach(function (t) {
                return n.ra.add(t.toString());
              });
              var r = this.persistence.Sr();
              return r
                .rr(t, e.targetId)
                .next(function (t) {
                  t.forEach(function (t) {
                    return n.ra.add(t.toString());
                  });
                })
                .next(function () {
                  return r.Ji(t, e);
                });
            }),
            (t.prototype.Zc = function () {
              this.sa = new Set();
            }),
            (t.prototype.ta = function (t) {
              var e = this,
                n = this.persistence.$r().Nr();
              return ra
                .forEach(this.ra, function (r) {
                  var i = zr._t(r);
                  return e.oa(t, i).next(function (t) {
                    t || n.li(i);
                  });
                })
                .next(function () {
                  return (e.sa = null), n.apply(t);
                });
            }),
            (t.prototype.Fr = function (t, e) {
              var n = this;
              return this.oa(t, e).next(function (t) {
                t ? n.ra.delete(e.toString()) : n.ra.add(e.toString());
              });
            }),
            (t.prototype.Xc = function (t) {
              return 0;
            }),
            (t.prototype.oa = function (t, e) {
              var n = this;
              return ra.Ln([
                function () {
                  return ra.resolve(n.na.Fi(e));
                },
                function () {
                  return n.persistence.Sr().Fi(t, e);
                },
                function () {
                  return n.persistence.ea(t, e);
                },
              ]);
            }),
            t
          );
        })();
      function mc(t, e) {
        return "firestore_clients_" + t + "_" + e;
      }
      function yc(t, e, n) {
        var r = "firestore_mutations_" + t + "_" + n;
        return e.m() && (r += "_" + e.uid), r;
      }
      function bc(t, e) {
        return "firestore_targets_" + t + "_" + e;
      }
      var wc = (function () {
          function t(t, e, n, r) {
            (this.user = t),
              (this.batchId = e),
              (this.state = n),
              (this.error = r);
          }
          return (
            (t.ca = function (e, n, r) {
              var i,
                o = JSON.parse(r),
                s =
                  "object" == typeof o &&
                  -1 !==
                    ["pending", "acknowledged", "rejected"].indexOf(o.state) &&
                  (void 0 === o.error || "object" == typeof o.error);
              return (
                s &&
                  o.error &&
                  (s =
                    "string" == typeof o.error.message &&
                    "string" == typeof o.error.code) &&
                  (i = new Pr(o.error.code, o.error.message)),
                s
                  ? new t(e, n, o.state, i)
                  : (mr(
                      "SharedClientState",
                      "Failed to parse mutation state for ID '" + n + "': " + r
                    ),
                    null)
              );
            }),
            (t.prototype.aa = function () {
              var t = { state: this.state, updateTimeMs: Date.now() };
              return (
                this.error &&
                  (t.error = {
                    code: this.error.code,
                    message: this.error.message,
                  }),
                JSON.stringify(t)
              );
            }),
            t
          );
        })(),
        _c = (function () {
          function t(t, e, n) {
            (this.targetId = t), (this.state = e), (this.error = n);
          }
          return (
            (t.ca = function (e, n) {
              var r,
                i = JSON.parse(n),
                o =
                  "object" == typeof i &&
                  -1 !==
                    ["not-current", "current", "rejected"].indexOf(i.state) &&
                  (void 0 === i.error || "object" == typeof i.error);
              return (
                o &&
                  i.error &&
                  (o =
                    "string" == typeof i.error.message &&
                    "string" == typeof i.error.code) &&
                  (r = new Pr(i.error.code, i.error.message)),
                o
                  ? new t(e, i.state, r)
                  : (mr(
                      "SharedClientState",
                      "Failed to parse target state for ID '" + e + "': " + n
                    ),
                    null)
              );
            }),
            (t.prototype.aa = function () {
              var t = { state: this.state, updateTimeMs: Date.now() };
              return (
                this.error &&
                  (t.error = {
                    code: this.error.code,
                    message: this.error.message,
                  }),
                JSON.stringify(t)
              );
            }),
            t
          );
        })(),
        Ic = (function () {
          function t(t, e) {
            (this.clientId = t), (this.activeTargetIds = e);
          }
          return (
            (t.ca = function (e, n) {
              for (
                var r = JSON.parse(n),
                  i =
                    "object" == typeof r && r.activeTargetIds instanceof Array,
                  o = hs(),
                  s = 0;
                i && s < r.activeTargetIds.length;
                ++s
              )
                (i = oi(r.activeTargetIds[s])),
                  (o = o.add(r.activeTargetIds[s]));
              return i
                ? new t(e, o)
                : (mr(
                    "SharedClientState",
                    "Failed to parse client data for instance '" + e + "': " + n
                  ),
                  null);
            }),
            t
          );
        })(),
        Ec = (function () {
          function t(t, e) {
            (this.clientId = t), (this.onlineState = e);
          }
          return (
            (t.ca = function (e) {
              var n = JSON.parse(e);
              return "object" == typeof n &&
                -1 !==
                  ["Unknown", "Online", "Offline"].indexOf(n.onlineState) &&
                "string" == typeof n.clientId
                ? new t(n.clientId, n.onlineState)
                : (mr(
                    "SharedClientState",
                    "Failed to parse online state: " + e
                  ),
                  null);
            }),
            t
          );
        })(),
        Tc = (function () {
          function t() {
            this.activeTargetIds = hs();
          }
          return (
            (t.prototype.ua = function (t) {
              this.activeTargetIds = this.activeTargetIds.add(t);
            }),
            (t.prototype.ha = function (t) {
              this.activeTargetIds = this.activeTargetIds.delete(t);
            }),
            (t.prototype.aa = function () {
              var t = {
                activeTargetIds: this.activeTargetIds.it(),
                updateTimeMs: Date.now(),
              };
              return JSON.stringify(t);
            }),
            t
          );
        })(),
        Sc = (function () {
          function t(t, e, n, r, i) {
            (this.window = t),
              (this.Zr = e),
              (this.persistenceKey = n),
              (this.la = r),
              (this._a = null),
              (this.fa = null),
              (this.k = null),
              (this.da = this.wa.bind(this)),
              (this.Ea = new Qo(Sr)),
              (this.Er = !1),
              (this.Ta = []);
            var o = n.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
            (this.storage = this.window.localStorage),
              (this.currentUser = i),
              (this.Ia = mc(this.persistenceKey, this.la)),
              (this.ma = (function (t) {
                return "firestore_sequence_number_" + t;
              })(this.persistenceKey)),
              (this.Ea = this.Ea.zt(this.la, new Tc())),
              (this.Aa = new RegExp("^firestore_clients_" + o + "_([^_]*)$")),
              (this.Ra = new RegExp(
                "^firestore_mutations_" + o + "_(\\d+)(?:_(.*))?$"
              )),
              (this.Pa = new RegExp("^firestore_targets_" + o + "_(\\d+)$")),
              (this.ya = (function (t) {
                return "firestore_online_state_" + t;
              })(this.persistenceKey)),
              (this.ga = (function (t) {
                return "firestore_bundle_loaded_" + t;
              })(this.persistenceKey)),
              this.window.addEventListener("storage", this.da);
          }
          return (
            (t.Kn = function (t) {
              return !(!t || !t.localStorage);
            }),
            (t.prototype.start = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t,
                  e,
                  n,
                  r,
                  i,
                  o,
                  s,
                  a,
                  u,
                  c,
                  h,
                  l = this;
                return (0, lr.Jh)(this, function (f) {
                  switch (f.label) {
                    case 0:
                      return [4, this._a.Uo()];
                    case 1:
                      for (t = f.sent(), e = 0, n = t; e < n.length; e++)
                        (r = n[e]) !== this.la &&
                          (i = this.getItem(mc(this.persistenceKey, r))) &&
                          (o = Ic.ca(r, i)) &&
                          (this.Ea = this.Ea.zt(o.clientId, o));
                      for (
                        this.Va(),
                          (s = this.storage.getItem(this.ya)) &&
                            (a = this.pa(s)) &&
                            this.ba(a),
                          u = 0,
                          c = this.Ta;
                        u < c.length;
                        u++
                      )
                        (h = c[u]), this.wa(h);
                      return (
                        (this.Ta = []),
                        this.window.addEventListener("unload", function () {
                          return l.ko();
                        }),
                        (this.Er = !0),
                        [2]
                      );
                  }
                });
              });
            }),
            (t.prototype.B = function (t) {
              this.setItem(this.ma, JSON.stringify(t));
            }),
            (t.prototype.va = function () {
              return this.Sa(this.Ea);
            }),
            (t.prototype.Da = function (t) {
              var e = !1;
              return (
                this.Ea.forEach(function (n, r) {
                  r.activeTargetIds.has(t) && (e = !0);
                }),
                e
              );
            }),
            (t.prototype.Ca = function (t) {
              this.xa(t, "pending");
            }),
            (t.prototype.Na = function (t, e, n) {
              this.xa(t, e, n), this.$a(t);
            }),
            (t.prototype.Fa = function (t) {
              var e = "not-current";
              if (this.Da(t)) {
                var n = this.storage.getItem(bc(this.persistenceKey, t));
                if (n) {
                  var r = _c.ca(t, n);
                  r && (e = r.state);
                }
              }
              return this.Oa.ua(t), this.Va(), e;
            }),
            (t.prototype.ka = function (t) {
              this.Oa.ha(t), this.Va();
            }),
            (t.prototype.Ma = function (t) {
              return this.Oa.activeTargetIds.has(t);
            }),
            (t.prototype.La = function (t) {
              this.removeItem(bc(this.persistenceKey, t));
            }),
            (t.prototype.Ba = function (t, e, n) {
              this.qa(t, e, n);
            }),
            (t.prototype.Ua = function (t, e, n) {
              var r = this;
              e.forEach(function (t) {
                r.$a(t);
              }),
                (this.currentUser = t),
                n.forEach(function (t) {
                  r.Ca(t);
                });
            }),
            (t.prototype.Qa = function (t) {
              this.Ka(t);
            }),
            (t.prototype.Wa = function () {
              this.ja();
            }),
            (t.prototype.ko = function () {
              this.Er &&
                (this.window.removeEventListener("storage", this.da),
                this.removeItem(this.Ia),
                (this.Er = !1));
            }),
            (t.prototype.getItem = function (t) {
              var e = this.storage.getItem(t);
              return gr("SharedClientState", "READ", t, e), e;
            }),
            (t.prototype.setItem = function (t, e) {
              gr("SharedClientState", "SET", t, e), this.storage.setItem(t, e);
            }),
            (t.prototype.removeItem = function (t) {
              gr("SharedClientState", "REMOVE", t), this.storage.removeItem(t);
            }),
            (t.prototype.wa = function (t) {
              var e = this,
                n = t;
              if (n.storageArea === this.storage) {
                if (
                  (gr("SharedClientState", "EVENT", n.key, n.newValue),
                  n.key === this.Ia)
                )
                  return void mr(
                    "Received WebStorage notification for local change. Another client might have garbage-collected our state"
                  );
                this.Zr.po(function () {
                  return (0, lr.mG)(e, void 0, void 0, function () {
                    var t, e, r, i, o, s;
                    return (0, lr.Jh)(this, function (a) {
                      if (this.Er) {
                        if (null !== n.key)
                          if (this.Aa.test(n.key)) {
                            if (null == n.newValue)
                              return (
                                (t = this.Ga(n.key)), [2, this.za(t, null)]
                              );
                            if ((e = this.Ha(n.key, n.newValue)))
                              return [2, this.za(e.clientId, e)];
                          } else if (this.Ra.test(n.key)) {
                            if (
                              null !== n.newValue &&
                              (r = this.Ja(n.key, n.newValue))
                            )
                              return [2, this.Ya(r)];
                          } else if (this.Pa.test(n.key)) {
                            if (
                              null !== n.newValue &&
                              (i = this.Xa(n.key, n.newValue))
                            )
                              return [2, this.Za(i)];
                          } else if (n.key === this.ya) {
                            if (
                              null !== n.newValue &&
                              (o = this.pa(n.newValue))
                            )
                              return [2, this.ba(o)];
                          } else if (n.key === this.ma)
                            (s = (function (t) {
                              var e = Fr.q;
                              if (null != t)
                                try {
                                  var n = JSON.parse(t);
                                  _r("number" == typeof n), (e = n);
                                } catch (t) {
                                  mr(
                                    "SharedClientState",
                                    "Failed to read sequence number from WebStorage",
                                    t
                                  );
                                }
                              return e;
                            })(n.newValue)) !== Fr.q && this.k(s);
                          else if (n.key === this.ga) return [2, this._a.tu()];
                      } else this.Ta.push(n);
                      return [2];
                    });
                  });
                });
              }
            }),
            Object.defineProperty(t.prototype, "Oa", {
              get: function () {
                return this.Ea.get(this.la);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.Va = function () {
              this.setItem(this.Ia, this.Oa.aa());
            }),
            (t.prototype.xa = function (t, e, n) {
              var r = new wc(this.currentUser, t, e, n),
                i = yc(this.persistenceKey, this.currentUser, t);
              this.setItem(i, r.aa());
            }),
            (t.prototype.$a = function (t) {
              var e = yc(this.persistenceKey, this.currentUser, t);
              this.removeItem(e);
            }),
            (t.prototype.Ka = function (t) {
              var e = { clientId: this.la, onlineState: t };
              this.storage.setItem(this.ya, JSON.stringify(e));
            }),
            (t.prototype.qa = function (t, e, n) {
              var r = bc(this.persistenceKey, t),
                i = new _c(t, e, n);
              this.setItem(r, i.aa());
            }),
            (t.prototype.ja = function () {
              this.setItem(this.ga, "value-not-used");
            }),
            (t.prototype.Ga = function (t) {
              var e = this.Aa.exec(t);
              return e ? e[1] : null;
            }),
            (t.prototype.Ha = function (t, e) {
              var n = this.Ga(t);
              return Ic.ca(n, e);
            }),
            (t.prototype.Ja = function (t, e) {
              var n = this.Ra.exec(t),
                r = Number(n[1]),
                i = void 0 !== n[2] ? n[2] : null;
              return wc.ca(new xr(i), r, e);
            }),
            (t.prototype.Xa = function (t, e) {
              var n = this.Pa.exec(t),
                r = Number(n[1]);
              return _c.ca(r, e);
            }),
            (t.prototype.pa = function (t) {
              return Ec.ca(t);
            }),
            (t.prototype.Ya = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (e) {
                  return t.user.uid === this.currentUser.uid
                    ? [2, this._a.eu(t.batchId, t.state, t.error)]
                    : (gr(
                        "SharedClientState",
                        "Ignoring mutation for non-active user " + t.user.uid
                      ),
                      [2]);
                });
              });
            }),
            (t.prototype.Za = function (t) {
              return this._a.nu(t.targetId, t.state, t.error);
            }),
            (t.prototype.za = function (t, e) {
              var n = this,
                r = e ? this.Ea.zt(t, e) : this.Ea.remove(t),
                i = this.Sa(this.Ea),
                o = this.Sa(r),
                s = [],
                a = [];
              return (
                o.forEach(function (t) {
                  i.has(t) || s.push(t);
                }),
                i.forEach(function (t) {
                  o.has(t) || a.push(t);
                }),
                this._a.su(s, a).then(function () {
                  n.Ea = r;
                })
              );
            }),
            (t.prototype.ba = function (t) {
              this.Ea.get(t.clientId) && this.fa(t.onlineState);
            }),
            (t.prototype.Sa = function (t) {
              var e = hs();
              return (
                t.forEach(function (t, n) {
                  e = e.Pe(n.activeTargetIds);
                }),
                e
              );
            }),
            t
          );
        })(),
        Cc = (function () {
          function t() {
            (this.iu = new Tc()),
              (this.ru = {}),
              (this.fa = null),
              (this.k = null);
          }
          return (
            (t.prototype.Ca = function (t) {}),
            (t.prototype.Na = function (t, e, n) {}),
            (t.prototype.Fa = function (t) {
              return this.iu.ua(t), this.ru[t] || "not-current";
            }),
            (t.prototype.Ba = function (t, e, n) {
              this.ru[t] = e;
            }),
            (t.prototype.ka = function (t) {
              this.iu.ha(t);
            }),
            (t.prototype.Ma = function (t) {
              return this.iu.activeTargetIds.has(t);
            }),
            (t.prototype.La = function (t) {
              delete this.ru[t];
            }),
            (t.prototype.va = function () {
              return this.iu.activeTargetIds;
            }),
            (t.prototype.Da = function (t) {
              return this.iu.activeTargetIds.has(t);
            }),
            (t.prototype.start = function () {
              return (this.iu = new Tc()), Promise.resolve();
            }),
            (t.prototype.Ua = function (t, e, n) {}),
            (t.prototype.Qa = function (t) {}),
            (t.prototype.ko = function () {}),
            (t.prototype.B = function (t) {}),
            (t.prototype.Wa = function () {}),
            t
          );
        })(),
        kc = (function () {
          function t() {}
          return (
            (t.prototype.ou = function (t) {}),
            (t.prototype.ko = function () {}),
            t
          );
        })(),
        Nc = (function () {
          function t() {
            var t = this;
            (this.cu = function () {
              return t.au();
            }),
              (this.uu = function () {
                return t.hu();
              }),
              (this.lu = []),
              this._u();
          }
          return (
            (t.prototype.ou = function (t) {
              this.lu.push(t);
            }),
            (t.prototype.ko = function () {
              window.removeEventListener("online", this.cu),
                window.removeEventListener("offline", this.uu);
            }),
            (t.prototype._u = function () {
              window.addEventListener("online", this.cu),
                window.addEventListener("offline", this.uu);
            }),
            (t.prototype.au = function () {
              gr(
                "ConnectivityMonitor",
                "Network connectivity changed: AVAILABLE"
              );
              for (var t = 0, e = this.lu; t < e.length; t++) (0, e[t])(0);
            }),
            (t.prototype.hu = function () {
              gr(
                "ConnectivityMonitor",
                "Network connectivity changed: UNAVAILABLE"
              );
              for (var t = 0, e = this.lu; t < e.length; t++) (0, e[t])(1);
            }),
            (t.Kn = function () {
              return (
                "undefined" != typeof window &&
                void 0 !== window.addEventListener &&
                void 0 !== window.removeEventListener
              );
            }),
            t
          );
        })(),
        Ac = {
          BatchGetDocuments: "batchGet",
          Commit: "commit",
          RunQuery: "runQuery",
        },
        Pc = (function () {
          function t(t) {
            (this.fu = t.fu), (this.du = t.du);
          }
          return (
            (t.prototype.wu = function (t) {
              this.Eu = t;
            }),
            (t.prototype.Tu = function (t) {
              this.Iu = t;
            }),
            (t.prototype.onMessage = function (t) {
              this.mu = t;
            }),
            (t.prototype.close = function () {
              this.du();
            }),
            (t.prototype.send = function (t) {
              this.fu(t);
            }),
            (t.prototype.Au = function () {
              this.Eu();
            }),
            (t.prototype.Ru = function (t) {
              this.Iu(t);
            }),
            (t.prototype.Pu = function (t) {
              this.mu(t);
            }),
            t
          );
        })(),
        Dc = (function (t) {
          function e(e) {
            var n = this;
            return (
              ((n = t.call(this, e) || this).forceLongPolling =
                e.forceLongPolling),
              (n.i = e.i),
              n
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.Su = function (t, e, n, r) {
              return new Promise(function (i, o) {
                var s = new hr();
                s.listenOnce(or.COMPLETE, function () {
                  try {
                    switch (s.getLastErrorCode()) {
                      case ir.NO_ERROR:
                        var e = s.getResponseJson();
                        gr("Connection", "XHR received:", JSON.stringify(e)),
                          i(e);
                        break;
                      case ir.TIMEOUT:
                        gr("Connection", 'RPC "' + t + '" timed out'),
                          o(new Pr(Ar.DEADLINE_EXCEEDED, "Request time out"));
                        break;
                      case ir.HTTP_ERROR:
                        var n = s.getStatus();
                        if (
                          (gr(
                            "Connection",
                            'RPC "' + t + '" failed with status:',
                            n,
                            "response text:",
                            s.getResponseText()
                          ),
                          n > 0)
                        ) {
                          var r = s.getResponseJson().error;
                          if (r && r.status && r.message) {
                            var a = (function (t) {
                              var e = t.toLowerCase().replace(/_/g, "-");
                              return Object.values(Ar).indexOf(e) >= 0
                                ? e
                                : Ar.UNKNOWN;
                            })(r.status);
                            o(new Pr(a, r.message));
                          } else
                            o(
                              new Pr(
                                Ar.UNKNOWN,
                                "Server responded with status " + s.getStatus()
                              )
                            );
                        } else o(new Pr(Ar.UNAVAILABLE, "Connection failed."));
                        break;
                      default:
                        wr();
                    }
                  } finally {
                    gr("Connection", 'RPC "' + t + '" completed.');
                  }
                });
                var a = JSON.stringify(r);
                s.send(e, "POST", a, n, 15);
              });
            }),
            (e.prototype.Cu = function (t, e) {
              var n = [
                  this.gu,
                  "/",
                  "google.firestore.v1.Firestore",
                  "/",
                  t,
                  "/channel",
                ],
                r = new $n(),
                o = te(),
                s = {
                  httpSessionIdParam: "gsessionid",
                  initMessageHeaders: {},
                  messageUrlParams: {
                    database:
                      "projects/" +
                      this.t.projectId +
                      "/databases/" +
                      this.t.database,
                  },
                  sendRawJson: !0,
                  supportsCrossDomainXhr: !0,
                  internalChannelParams: {
                    forwardChannelRequestTimeoutMs: 6e5,
                  },
                  forceLongPolling: this.forceLongPolling,
                  detectBufferingProxy: this.i,
                };
              this.vu(s.initMessageHeaders, e),
                (0, i.uI)() ||
                  (0, i.b$)() ||
                  (0, i.d)() ||
                  (0, i.w1)() ||
                  (0, i.Mn)() ||
                  (0, i.ru)() ||
                  (s.httpHeadersOverwriteParam = "$httpHeaders");
              var a = n.join("");
              gr("Connection", "Creating WebChannel: " + a, s);
              var u = r.createWebChannel(a, s),
                c = !1,
                h = !1,
                l = new Pc({
                  fu: function (t) {
                    h
                      ? gr(
                          "Connection",
                          "Not sending because WebChannel is closed:",
                          t
                        )
                      : (c ||
                          (gr("Connection", "Opening WebChannel transport."),
                          u.open(),
                          (c = !0)),
                        gr("Connection", "WebChannel sending:", t),
                        u.send(t));
                  },
                  du: function () {
                    return u.close();
                  },
                }),
                f = function (t, e, n) {
                  t.listen(e, function (t) {
                    try {
                      n(t);
                    } catch (t) {
                      setTimeout(function () {
                        throw t;
                      }, 0);
                    }
                  });
                };
              return (
                f(u, cr.EventType.OPEN, function () {
                  h || gr("Connection", "WebChannel transport opened.");
                }),
                f(u, cr.EventType.CLOSE, function () {
                  h ||
                    ((h = !0),
                    gr("Connection", "WebChannel transport closed"),
                    l.Ru());
                }),
                f(u, cr.EventType.ERROR, function (t) {
                  h ||
                    ((h = !0),
                    yr("Connection", "WebChannel transport errored:", t),
                    l.Ru(
                      new Pr(
                        Ar.UNAVAILABLE,
                        "The operation could not be completed"
                      )
                    ));
                }),
                f(u, cr.EventType.MESSAGE, function (t) {
                  var e;
                  if (!h) {
                    var n = t.data[0];
                    _r(!!n);
                    var r = n,
                      i =
                        r.error ||
                        (null === (e = r[0]) || void 0 === e
                          ? void 0
                          : e.error);
                    if (i) {
                      gr("Connection", "WebChannel received error:", i);
                      var o = i.status,
                        s = (function (t) {
                          var e = Bo[t];
                          if (void 0 !== e) return Jo(e);
                        })(o),
                        a = i.message;
                      void 0 === s &&
                        ((s = Ar.INTERNAL),
                        (a =
                          "Unknown error status: " +
                          o +
                          " with message " +
                          i.message)),
                        (h = !0),
                        l.Ru(new Pr(s, a)),
                        u.close();
                    } else gr("Connection", "WebChannel received:", n), l.Pu(n);
                  }
                }),
                f(o, sr.STAT_EVENT, function (t) {
                  t.stat === ar
                    ? gr("Connection", "Detected buffering proxy")
                    : t.stat === ur &&
                      gr("Connection", "Detected no buffering proxy");
                }),
                setTimeout(function () {
                  l.Au();
                }, 0),
                l
              );
            }),
            e
          );
        })(
          (function () {
            function t(t) {
              (this.yu = t), (this.t = t.t);
              var e = t.ssl ? "https" : "http";
              (this.gu = e + "://" + t.host),
                (this.Vu =
                  "projects/" +
                  this.t.projectId +
                  "/databases/" +
                  this.t.database +
                  "/documents");
            }
            return (
              (t.prototype.pu = function (t, e, n, r) {
                var i = this.bu(t, e);
                gr("RestConnection", "Sending: ", i, n);
                var o = {};
                return (
                  this.vu(o, r),
                  this.Su(t, i, o, n).then(
                    function (t) {
                      return gr("RestConnection", "Received: ", t), t;
                    },
                    function (e) {
                      throw (
                        (yr(
                          "RestConnection",
                          t + " failed with error: ",
                          e,
                          "url: ",
                          i,
                          "request:",
                          n
                        ),
                        e)
                      );
                    }
                  )
                );
              }),
              (t.prototype.Du = function (t, e, n, r) {
                return this.pu(t, e, n, r);
              }),
              (t.prototype.vu = function (t, e) {
                if (
                  ((t["X-Goog-Api-Client"] = "gl-js/ fire/8.3.0"),
                  (t["Content-Type"] = "text/plain"),
                  e)
                )
                  for (var n in e.g) e.g.hasOwnProperty(n) && (t[n] = e.g[n]);
              }),
              (t.prototype.bu = function (t, e) {
                var n = Ac[t];
                return this.gu + "/v1/" + e + ":" + n;
              }),
              t
            );
          })()
        );
      function xc() {
        return "undefined" != typeof window ? window : null;
      }
      function Oc() {
        return "undefined" != typeof document ? document : null;
      }
      function Rc(t) {
        return new Ss(t, !0);
      }
      var Mc = (function () {
          function t(t, e, n, r, i) {
            void 0 === n && (n = 1e3),
              void 0 === r && (r = 1.5),
              void 0 === i && (i = 6e4),
              (this.Zr = t),
              (this.fs = e),
              (this.xu = n),
              (this.Nu = r),
              (this.$u = i),
              (this.Fu = 0),
              (this.Ou = null),
              (this.ku = Date.now()),
              this.reset();
          }
          return (
            (t.prototype.reset = function () {
              this.Fu = 0;
            }),
            (t.prototype.Mu = function () {
              this.Fu = this.$u;
            }),
            (t.prototype.Lu = function (t) {
              var e = this;
              this.cancel();
              var n = Math.floor(this.Fu + this.Bu()),
                r = Math.max(0, Date.now() - this.ku),
                i = Math.max(0, n - r);
              i > 0 &&
                gr(
                  "ExponentialBackoff",
                  "Backing off for " +
                    i +
                    " ms (base delay: " +
                    this.Fu +
                    " ms, delay with jitter: " +
                    n +
                    " ms, last attempt: " +
                    r +
                    " ms ago)"
                ),
                (this.Ou = this.Zr.Tr(this.fs, i, function () {
                  return (e.ku = Date.now()), t();
                })),
                (this.Fu *= this.Nu),
                this.Fu < this.xu && (this.Fu = this.xu),
                this.Fu > this.$u && (this.Fu = this.$u);
            }),
            (t.prototype.qu = function () {
              null !== this.Ou && (this.Ou.Rs(), (this.Ou = null));
            }),
            (t.prototype.cancel = function () {
              null !== this.Ou && (this.Ou.cancel(), (this.Ou = null));
            }),
            (t.prototype.Bu = function () {
              return (Math.random() - 0.5) * this.Fu;
            }),
            t
          );
        })(),
        Lc = (function () {
          function t(t, e, n, r, i, o) {
            (this.Zr = t),
              (this.Uu = n),
              (this.Qu = r),
              (this.Ku = i),
              (this.listener = o),
              (this.state = 0),
              (this.Wu = 0),
              (this.ju = null),
              (this.stream = null),
              (this.Gu = new Mc(t, e));
          }
          return (
            (t.prototype.zu = function () {
              return 1 === this.state || 2 === this.state || 4 === this.state;
            }),
            (t.prototype.Hu = function () {
              return 2 === this.state;
            }),
            (t.prototype.start = function () {
              3 !== this.state ? this.auth() : this.Ju();
            }),
            (t.prototype.stop = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return this.zu() ? [4, this.close(0)] : [3, 2];
                    case 1:
                      t.sent(), (t.label = 2);
                    case 2:
                      return [2];
                  }
                });
              });
            }),
            (t.prototype.Yu = function () {
              (this.state = 0), this.Gu.reset();
            }),
            (t.prototype.Xu = function () {
              var t = this;
              this.Hu() &&
                null === this.ju &&
                (this.ju = this.Zr.Tr(this.Uu, 6e4, function () {
                  return t.Zu();
                }));
            }),
            (t.prototype.th = function (t) {
              this.eh(), this.stream.send(t);
            }),
            (t.prototype.Zu = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (t) {
                  return this.Hu() ? [2, this.close(0)] : [2];
                });
              });
            }),
            (t.prototype.eh = function () {
              this.ju && (this.ju.cancel(), (this.ju = null));
            }),
            (t.prototype.close = function (t, e) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return (
                        this.eh(),
                        this.Gu.cancel(),
                        this.Wu++,
                        3 !== t
                          ? this.Gu.reset()
                          : e && e.code === Ar.RESOURCE_EXHAUSTED
                          ? (mr(e.toString()),
                            mr(
                              "Using maximum backoff delay to prevent overloading the backend."
                            ),
                            this.Gu.Mu())
                          : e && e.code === Ar.UNAUTHENTICATED && this.Ku.p(),
                        null !== this.stream &&
                          (this.nh(),
                          this.stream.close(),
                          (this.stream = null)),
                        (this.state = t),
                        [4, this.listener.Tu(e)]
                      );
                    case 1:
                      return n.sent(), [2];
                  }
                });
              });
            }),
            (t.prototype.nh = function () {}),
            (t.prototype.auth = function () {
              var t = this;
              this.state = 1;
              var e = this.sh(this.Wu),
                n = this.Wu;
              this.Ku.getToken().then(
                function (e) {
                  t.Wu === n && t.ih(e);
                },
                function (n) {
                  e(function () {
                    var e = new Pr(
                      Ar.UNKNOWN,
                      "Fetching auth token failed: " + n.message
                    );
                    return t.rh(e);
                  });
                }
              );
            }),
            (t.prototype.ih = function (t) {
              var e = this,
                n = this.sh(this.Wu);
              (this.stream = this.oh(t)),
                this.stream.wu(function () {
                  n(function () {
                    return (e.state = 2), e.listener.wu();
                  });
                }),
                this.stream.Tu(function (t) {
                  n(function () {
                    return e.rh(t);
                  });
                }),
                this.stream.onMessage(function (t) {
                  n(function () {
                    return e.onMessage(t);
                  });
                });
            }),
            (t.prototype.Ju = function () {
              var t = this;
              (this.state = 4),
                this.Gu.Lu(function () {
                  return (0, lr.mG)(t, void 0, void 0, function () {
                    return (0, lr.Jh)(this, function (t) {
                      return (this.state = 0), this.start(), [2];
                    });
                  });
                });
            }),
            (t.prototype.rh = function (t) {
              return (
                gr("PersistentStream", "close with error: " + t),
                (this.stream = null),
                this.close(3, t)
              );
            }),
            (t.prototype.sh = function (t) {
              var e = this;
              return function (n) {
                e.Zr.Ps(function () {
                  return e.Wu === t
                    ? n()
                    : (gr(
                        "PersistentStream",
                        "stream callback skipped by getCloseGuardedDispatcher."
                      ),
                      Promise.resolve());
                });
              };
            }),
            t
          );
        })(),
        jc = (function (t) {
          function e(e, n, r, i, o) {
            var s = this;
            return (
              ((s =
                t.call(
                  this,
                  e,
                  "listen_stream_connection_backoff",
                  "listen_stream_idle",
                  n,
                  r,
                  o
                ) || this).Qt = i),
              s
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.oh = function (t) {
              return this.Qu.Cu("Listen", t);
            }),
            (e.prototype.onMessage = function (t) {
              this.Gu.reset();
              var e = (function (t, e) {
                  var n;
                  if ("targetChange" in e) {
                    e.targetChange;
                    var r = (function (t) {
                        return "NO_CHANGE" === t
                          ? 0
                          : "ADD" === t
                          ? 1
                          : "REMOVE" === t
                          ? 2
                          : "CURRENT" === t
                          ? 3
                          : "RESET" === t
                          ? 4
                          : wr();
                      })(e.targetChange.targetChangeType || "NO_CHANGE"),
                      i = e.targetChange.targetIds || [],
                      o = (function (t, e) {
                        return t.Bt
                          ? (_r(void 0 === e || "string" == typeof e),
                            Nr.fromBase64String(e || ""))
                          : (_r(void 0 === e || e instanceof Uint8Array),
                            Nr.fromUint8Array(e || new Uint8Array()));
                      })(t, e.targetChange.resumeToken),
                      s =
                        (a = e.targetChange.cause) &&
                        (function (t) {
                          var e = void 0 === t.code ? Ar.UNKNOWN : Jo(t.code);
                          return new Pr(e, t.message || "");
                        })(a);
                    n = new ys(r, i, o, s || null);
                  } else if ("documentChange" in e) {
                    e.documentChange,
                      (r = e.documentChange).document,
                      r.document.name,
                      r.document.updateTime,
                      (i = Os(t, r.document.name)),
                      (o = As(r.document.updateTime));
                    var a = new bi({ mapValue: { fields: r.document.fields } }),
                      u = ((s = new Ei(i, o, a, {})), r.targetIds || []),
                      c = r.removedTargetIds || [];
                    n = new gs(u, c, s.key, s);
                  } else if ("documentDelete" in e)
                    e.documentDelete,
                      (r = e.documentDelete).document,
                      (i = Os(t, r.document)),
                      (o = r.readTime ? As(r.readTime) : Vr.min()),
                      (a = new Ti(i, o)),
                      (s = r.removedTargetIds || []),
                      (n = new gs([], s, a.key, a));
                  else if ("documentRemove" in e)
                    e.documentRemove,
                      (r = e.documentRemove).document,
                      (i = Os(t, r.document)),
                      (o = r.removedTargetIds || []),
                      (n = new gs([], o, i, null));
                  else {
                    if (!("filter" in e)) return wr();
                    e.filter;
                    var h = e.filter;
                    h.targetId,
                      (r = h.count || 0),
                      (i = new Ho(r)),
                      (o = h.targetId),
                      (n = new ms(o, i));
                  }
                  return n;
                })(this.Qt, t),
                n = (function (t) {
                  if (!("targetChange" in t)) return Vr.min();
                  var e = t.targetChange;
                  return e.targetIds && e.targetIds.length
                    ? Vr.min()
                    : e.readTime
                    ? As(e.readTime)
                    : Vr.min();
                })(t);
              return this.listener.ah(e, n);
            }),
            (e.prototype.uh = function (t) {
              var e = {};
              (e.database = Ls(this.Qt)),
                (e.addTarget = (function (t, e) {
                  var n,
                    r = e.target;
                  return (
                    ((n = Pi(r)
                      ? { documents: Bs(t, r) }
                      : { query: Gs(t, r) }).targetId = e.targetId),
                    e.resumeToken.l() > 0
                      ? (n.resumeToken = ks(t, e.resumeToken))
                      : e.Ot._(Vr.min()) > 0 && (n.readTime = Cs(t, e.Ot.j())),
                    n
                  );
                })(this.Qt, t));
              var n = (function (t, e) {
                var n = (function (t, e) {
                  switch (e) {
                    case 0:
                      return null;
                    case 1:
                      return "existence-filter-mismatch";
                    case 2:
                      return "limbo-document";
                    default:
                      return wr();
                  }
                })(0, e.Ft);
                return null == n ? null : { "goog-listen-tags": n };
              })(this.Qt, t);
              n && (e.labels = n), this.th(e);
            }),
            (e.prototype.hh = function (t) {
              var e = {};
              (e.database = Ls(this.Qt)), (e.removeTarget = t), this.th(e);
            }),
            e
          );
        })(Lc),
        Fc = (function (t) {
          function e(e, n, r, i, o) {
            var s = this;
            return (
              ((s =
                t.call(
                  this,
                  e,
                  "write_stream_connection_backoff",
                  "write_stream_idle",
                  n,
                  r,
                  o
                ) || this).Qt = i),
              (s.lh = !1),
              s
            );
          }
          return (
            (0, lr.ZT)(e, t),
            Object.defineProperty(e.prototype, "_h", {
              get: function () {
                return this.lh;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.start = function () {
              (this.lh = !1),
                (this.lastStreamToken = void 0),
                t.prototype.start.call(this);
            }),
            (e.prototype.nh = function () {
              this.lh && this.fh([]);
            }),
            (e.prototype.oh = function (t) {
              return this.Qu.Cu("Write", t);
            }),
            (e.prototype.onMessage = function (t) {
              if (
                (_r(!!t.streamToken),
                (this.lastStreamToken = t.streamToken),
                this.lh)
              ) {
                this.Gu.reset();
                var e = (function (t, e) {
                    return t && t.length > 0
                      ? (_r(void 0 !== e),
                        t.map(function (t) {
                          return (function (t, e) {
                            var n = t.updateTime ? As(t.updateTime) : As(e);
                            return (
                              n.isEqual(Vr.min()) && (n = As(e)),
                              new ko(n, t.transformResults || [])
                            );
                          })(t, e);
                        }))
                      : [];
                  })(t.writeResults, t.commitTime),
                  n = As(t.commitTime);
                return this.listener.dh(n, e);
              }
              return (
                _r(!t.writeResults || 0 === t.writeResults.length),
                (this.lh = !0),
                this.listener.wh()
              );
            }),
            (e.prototype.Eh = function () {
              var t = {};
              (t.database = Ls(this.Qt)), this.th(t);
            }),
            (e.prototype.fh = function (t) {
              var e = this,
                n = {
                  streamToken: this.lastStreamToken,
                  writes: t.map(function (t) {
                    return Vs(e.Qt, t);
                  }),
                };
              this.th(n);
            }),
            e
          );
        })(Lc),
        Uc = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this) || this).credentials = e),
              (i.Qu = n),
              (i.Qt = r),
              (i.Th = !1),
              i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.Ih = function () {
              if (this.Th)
                throw new Pr(
                  Ar.FAILED_PRECONDITION,
                  "The client has already been terminated."
                );
            }),
            (e.prototype.pu = function (t, e, n) {
              var r = this;
              return (
                this.Ih(),
                this.credentials
                  .getToken()
                  .then(function (i) {
                    return r.Qu.pu(t, e, n, i);
                  })
                  .catch(function (t) {
                    throw (
                      (t.code === Ar.UNAUTHENTICATED && r.credentials.p(), t)
                    );
                  })
              );
            }),
            (e.prototype.Du = function (t, e, n) {
              var r = this;
              return (
                this.Ih(),
                this.credentials
                  .getToken()
                  .then(function (i) {
                    return r.Qu.Du(t, e, n, i);
                  })
                  .catch(function (t) {
                    throw (
                      (t.code === Ar.UNAUTHENTICATED && r.credentials.p(), t)
                    );
                  })
              );
            }),
            (e.prototype.terminate = function () {
              this.Th = !1;
            }),
            e
          );
        })(function () {}),
        Vc = (function () {
          function t(t, e) {
            (this._s = t),
              (this.fa = e),
              (this.state = "Unknown"),
              (this.mh = 0),
              (this.Ah = null),
              (this.Rh = !0);
          }
          return (
            (t.prototype.Ph = function () {
              var t = this;
              0 === this.mh &&
                (this.yh("Unknown"),
                (this.Ah = this._s.Tr("online_state_timeout", 1e4, function () {
                  return (
                    (t.Ah = null),
                    t.gh("Backend didn't respond within 10 seconds."),
                    t.yh("Offline"),
                    Promise.resolve()
                  );
                })));
            }),
            (t.prototype.Vh = function (t) {
              "Online" === this.state
                ? this.yh("Unknown")
                : (this.mh++,
                  this.mh >= 1 &&
                    (this.ph(),
                    this.gh(
                      "Connection failed 1 times. Most recent error: " +
                        t.toString()
                    ),
                    this.yh("Offline")));
            }),
            (t.prototype.set = function (t) {
              this.ph(),
                (this.mh = 0),
                "Online" === t && (this.Rh = !1),
                this.yh(t);
            }),
            (t.prototype.yh = function (t) {
              t !== this.state && ((this.state = t), this.fa(t));
            }),
            (t.prototype.gh = function (t) {
              var e =
                "Could not reach Cloud Firestore backend. " +
                t +
                "\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";
              this.Rh ? (mr(e), (this.Rh = !1)) : gr("OnlineStateTracker", e);
            }),
            (t.prototype.ph = function () {
              null !== this.Ah && (this.Ah.cancel(), (this.Ah = null));
            }),
            t
          );
        })(),
        qc = function (t, e, n, r, i) {
          var o = this;
          (this.bh = t),
            (this.Sh = e),
            (this._s = n),
            (this.Dh = {}),
            (this.Ch = []),
            (this.xh = new Map()),
            (this.Nh = new Set()),
            (this.$h = []),
            (this.Fh = i),
            this.Fh.ou(function (t) {
              n.Ps(function () {
                return (0, lr.mG)(o, void 0, void 0, function () {
                  return (0, lr.Jh)(this, function (t) {
                    switch (t.label) {
                      case 0:
                        return Yc(this)
                          ? (gr(
                              "RemoteStore",
                              "Restarting streams for network reachability change."
                            ),
                            [
                              4,
                              (function (t) {
                                return (0, lr.mG)(
                                  this,
                                  void 0,
                                  void 0,
                                  function () {
                                    var e;
                                    return (0, lr.Jh)(this, function (n) {
                                      switch (n.label) {
                                        case 0:
                                          return (
                                            (e = Ir(t)).Nh.add(4), [4, Gc(e)]
                                          );
                                        case 1:
                                          return (
                                            n.sent(),
                                            e.Oh.set("Unknown"),
                                            e.Nh.delete(4),
                                            [4, Bc(e)]
                                          );
                                        case 2:
                                          return n.sent(), [2];
                                      }
                                    });
                                  }
                                );
                              })(this),
                            ])
                          : [3, 2];
                      case 1:
                        t.sent(), (t.label = 2);
                      case 2:
                        return [2];
                    }
                  });
                });
              });
            }),
            (this.Oh = new Vc(n, r));
        };
      function Bc(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n;
          return (0, lr.Jh)(this, function (r) {
            switch (r.label) {
              case 0:
                if (!Yc(t)) return [3, 4];
                (e = 0), (n = t.$h), (r.label = 1);
              case 1:
                return e < n.length ? [4, (0, n[e])(!0)] : [3, 4];
              case 2:
                r.sent(), (r.label = 3);
              case 3:
                return e++, [3, 1];
              case 4:
                return [2];
            }
          });
        });
      }
      function Gc(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n;
          return (0, lr.Jh)(this, function (r) {
            switch (r.label) {
              case 0:
                (e = 0), (n = t.$h), (r.label = 1);
              case 1:
                return e < n.length ? [4, (0, n[e])(!1)] : [3, 4];
              case 2:
                r.sent(), (r.label = 3);
              case 3:
                return e++, [3, 1];
              case 4:
                return [2];
            }
          });
        });
      }
      function Wc(t, e) {
        var n = Ir(t);
        n.xh.has(e.targetId) ||
          (n.xh.set(e.targetId, e), Qc(n) ? Jc(n) : lh(n).Hu() && Hc(n, e));
      }
      function zc(t, e) {
        var n = Ir(t),
          r = lh(n);
        n.xh.delete(e),
          r.Hu() && Kc(n, e),
          0 === n.xh.size && (r.Hu() ? r.Xu() : Yc(n) && n.Oh.set("Unknown"));
      }
      function Hc(t, e) {
        t.kh.on(e.targetId), lh(t).uh(e);
      }
      function Kc(t, e) {
        t.kh.on(e), lh(t).hh(e);
      }
      function Jc(t) {
        (t.kh = new ws({
          vn: function (e) {
            return t.Dh.vn(e);
          },
          Sn: function (e) {
            return t.xh.get(e) || null;
          },
        })),
          lh(t).start(),
          t.Oh.Ph();
      }
      function Qc(t) {
        return Yc(t) && !lh(t).zu() && t.xh.size > 0;
      }
      function Yc(t) {
        return 0 === Ir(t).Nh.size;
      }
      function Xc(t) {
        t.kh = void 0;
      }
      function Zc(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          return (0, lr.Jh)(this, function (e) {
            return (
              t.xh.forEach(function (e, n) {
                Hc(t, e);
              }),
              [2]
            );
          });
        });
      }
      function $c(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          return (0, lr.Jh)(this, function (n) {
            return (
              Xc(t), Qc(t) ? (t.Oh.Vh(e), Jc(t)) : t.Oh.set("Unknown"), [2]
            );
          });
        });
      }
      function th(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i, o;
          return (0, lr.Jh)(this, function (s) {
            switch (s.label) {
              case 0:
                if (
                  (t.Oh.set("Online"),
                  !(e instanceof ys && 2 === e.state && e.cause))
                )
                  return [3, 6];
                s.label = 1;
              case 1:
                return (
                  s.trys.push([1, 3, , 5]),
                  [
                    4,
                    (function (t, e) {
                      return (0, lr.mG)(this, void 0, void 0, function () {
                        var n, r, i, o;
                        return (0, lr.Jh)(this, function (s) {
                          switch (s.label) {
                            case 0:
                              (n = e.cause),
                                (r = 0),
                                (i = e.targetIds),
                                (s.label = 1);
                            case 1:
                              return r < i.length
                                ? ((o = i[r]),
                                  t.xh.has(o) ? [4, t.Dh.Mh(o, n)] : [3, 3])
                                : [3, 5];
                            case 2:
                              s.sent(),
                                t.xh.delete(o),
                                t.kh.removeTarget(o),
                                (s.label = 3);
                            case 3:
                              s.label = 4;
                            case 4:
                              return r++, [3, 1];
                            case 5:
                              return [2];
                          }
                        });
                      });
                    })(t, e),
                  ]
                );
              case 2:
                return s.sent(), [3, 5];
              case 3:
                return (
                  (r = s.sent()),
                  gr(
                    "RemoteStore",
                    "Failed to remove targets %s: %s ",
                    e.targetIds.join(","),
                    r
                  ),
                  [4, eh(t, r)]
                );
              case 4:
                return s.sent(), [3, 5];
              case 5:
                return [3, 13];
              case 6:
                if (
                  (e instanceof gs
                    ? t.kh.dn(e)
                    : e instanceof ms
                    ? t.kh.Pn(e)
                    : t.kh.Tn(e),
                  n.isEqual(Vr.min()))
                )
                  return [3, 13];
                s.label = 7;
              case 7:
                return s.trys.push([7, 11, , 13]), [4, Qu(t.bh)];
              case 8:
                return (
                  (i = s.sent()),
                  n._(i) >= 0
                    ? [
                        4,
                        (function (t, e) {
                          var n = t.kh.Vn(e);
                          return (
                            n.$e.forEach(function (n, r) {
                              if (n.resumeToken.l() > 0) {
                                var i = t.xh.get(r);
                                i && t.xh.set(r, i.Mt(n.resumeToken, e));
                              }
                            }),
                            n.Fe.forEach(function (e) {
                              var n = t.xh.get(e);
                              if (n) {
                                t.xh.set(e, n.Mt(Nr.T, n.Ot)), Kc(t, e);
                                var r = new co(
                                  n.target,
                                  e,
                                  1,
                                  n.sequenceNumber
                                );
                                Hc(t, r);
                              }
                            }),
                            t.Dh.Lh(n)
                          );
                        })(t, n),
                      ]
                    : [3, 10]
                );
              case 9:
                s.sent(), (s.label = 10);
              case 10:
                return [3, 13];
              case 11:
                return (
                  gr(
                    "RemoteStore",
                    "Failed to raise snapshot:",
                    (o = s.sent())
                  ),
                  [4, eh(t, o)]
                );
              case 12:
                return s.sent(), [3, 13];
              case 13:
                return [2];
            }
          });
        });
      }
      function eh(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r = this;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                if (!ua(e)) throw e;
                return t.Nh.add(1), [4, Gc(t)];
              case 1:
                return (
                  i.sent(),
                  t.Oh.set("Offline"),
                  n ||
                    (n = function () {
                      return Qu(t.bh);
                    }),
                  t._s.po(function () {
                    return (0, lr.mG)(r, void 0, void 0, function () {
                      return (0, lr.Jh)(this, function (e) {
                        switch (e.label) {
                          case 0:
                            return (
                              gr("RemoteStore", "Retrying IndexedDB access"),
                              [4, n()]
                            );
                          case 1:
                            return e.sent(), t.Nh.delete(1), [4, Bc(t)];
                          case 2:
                            return e.sent(), [2];
                        }
                      });
                    });
                  }),
                  [2]
                );
            }
          });
        });
      }
      function nh(t, e) {
        return e().catch(function (n) {
          return eh(t, n, e);
        });
      }
      function rh(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n, r, i, o;
          return (0, lr.Jh)(this, function (s) {
            switch (s.label) {
              case 0:
                (e = Ir(t)),
                  (n = fh(e)),
                  (r = e.Ch.length > 0 ? e.Ch[e.Ch.length - 1].batchId : -1),
                  (s.label = 1);
              case 1:
                if (
                  !(function (t) {
                    return Yc(t) && t.Ch.length < 10;
                  })(e)
                )
                  return [3, 7];
                s.label = 2;
              case 2:
                return s.trys.push([2, 4, , 6]), [4, Zu(e.bh, r)];
              case 3:
                return null === (i = s.sent())
                  ? (0 === e.Ch.length && n.Xu(), [3, 7])
                  : ((r = i.batchId),
                    (function (t, e) {
                      t.Ch.push(e);
                      var n = fh(t);
                      n.Hu() && n._h && n.fh(e.mutations);
                    })(e, i),
                    [3, 6]);
              case 4:
                return (o = s.sent()), [4, eh(e, o)];
              case 5:
                return s.sent(), [3, 6];
              case 6:
                return [3, 1];
              case 7:
                return ih(e) && oh(e), [2];
            }
          });
        });
      }
      function ih(t) {
        return Yc(t) && !fh(t).zu() && t.Ch.length > 0;
      }
      function oh(t) {
        fh(t).start();
      }
      function sh(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          return (0, lr.Jh)(this, function (e) {
            return fh(t).Eh(), [2];
          });
        });
      }
      function ah(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n, r, i;
          return (0, lr.Jh)(this, function (o) {
            for (e = fh(t), n = 0, r = t.Ch; n < r.length; n++)
              (i = r[n]), e.fh(i.mutations);
            return [2];
          });
        });
      }
      function uh(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i;
          return (0, lr.Jh)(this, function (o) {
            switch (o.label) {
              case 0:
                return (
                  (r = t.Ch.shift()),
                  (i = qa.from(r, e, n)),
                  [
                    4,
                    nh(t, function () {
                      return t.Dh.Bh(i);
                    }),
                  ]
                );
              case 1:
                return o.sent(), [4, rh(t)];
              case 2:
                return o.sent(), [2];
            }
          });
        });
      }
      function ch(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          return (0, lr.Jh)(this, function (n) {
            switch (n.label) {
              case 0:
                return e && fh(t)._h
                  ? [
                      4,
                      (function (t, e) {
                        return (0, lr.mG)(this, void 0, void 0, function () {
                          var n, r;
                          return (0, lr.Jh)(this, function (i) {
                            switch (i.label) {
                              case 0:
                                return Ko((r = e.code)) && r !== Ar.ABORTED
                                  ? ((n = t.Ch.shift()),
                                    fh(t).Yu(),
                                    [
                                      4,
                                      nh(t, function () {
                                        return t.Dh.qh(n.batchId, e);
                                      }),
                                    ])
                                  : [3, 3];
                              case 1:
                                return i.sent(), [4, rh(t)];
                              case 2:
                                i.sent(), (i.label = 3);
                              case 3:
                                return [2];
                            }
                          });
                        });
                      })(t, e),
                    ]
                  : [3, 2];
              case 1:
                n.sent(), (n.label = 2);
              case 2:
                return ih(t) && oh(t), [2];
            }
          });
        });
      }
      function hh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n;
          return (0, lr.Jh)(this, function (r) {
            switch (r.label) {
              case 0:
                return (n = Ir(t)), e ? (n.Nh.delete(2), [4, Bc(n)]) : [3, 2];
              case 1:
                return r.sent(), [3, 5];
              case 2:
                return e ? [3, 4] : (n.Nh.add(2), [4, Gc(n)]);
              case 3:
                r.sent(), n.Oh.set("Unknown"), (r.label = 4);
              case 4:
                r.label = 5;
              case 5:
                return [2];
            }
          });
        });
      }
      function lh(t) {
        var e = this;
        return (
          t.Uh ||
            ((t.Uh = (function (t, e, n) {
              var r = Ir(t);
              return r.Ih(), new jc(e, r.Qu, r.credentials, r.Qt, n);
            })(t.Sh, t._s, {
              wu: Zc.bind(null, t),
              Tu: $c.bind(null, t),
              ah: th.bind(null, t),
            })),
            t.$h.push(function (n) {
              return (0, lr.mG)(e, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (e) {
                  switch (e.label) {
                    case 0:
                      return n
                        ? (t.Uh.Yu(),
                          Qc(t) ? Jc(t) : t.Oh.set("Unknown"),
                          [3, 3])
                        : [3, 1];
                    case 1:
                      return [4, t.Uh.stop()];
                    case 2:
                      e.sent(), Xc(t), (e.label = 3);
                    case 3:
                      return [2];
                  }
                });
              });
            })),
          t.Uh
        );
      }
      function fh(t) {
        var e = this;
        return (
          t.Qh ||
            ((t.Qh = (function (t, e, n) {
              var r = Ir(t);
              return r.Ih(), new Fc(e, r.Qu, r.credentials, r.Qt, n);
            })(t.Sh, t._s, {
              wu: sh.bind(null, t),
              Tu: ch.bind(null, t),
              wh: ah.bind(null, t),
              dh: uh.bind(null, t),
            })),
            t.$h.push(function (n) {
              return (0, lr.mG)(e, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (e) {
                  switch (e.label) {
                    case 0:
                      return n ? (t.Qh.Yu(), [4, rh(t)]) : [3, 2];
                    case 1:
                      return e.sent(), [3, 4];
                    case 2:
                      return [4, t.Qh.stop()];
                    case 3:
                      e.sent(),
                        t.Ch.length > 0 &&
                          (gr(
                            "RemoteStore",
                            "Stopping write stream with " +
                              t.Ch.length +
                              " pending writes"
                          ),
                          (t.Ch = [])),
                        (e.label = 4);
                    case 4:
                      return [2];
                  }
                });
              });
            })),
          t.Qh
        );
      }
      var ph = function () {
          (this.Kh = void 0), (this.listeners = []);
        },
        dh = function () {
          (this.queries = new cu(function (t) {
            return io(t);
          }, ro)),
            (this.onlineState = "Unknown"),
            (this.Wh = new Set());
        };
      function vh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s, a, u;
          return (0, lr.Jh)(this, function (c) {
            switch (c.label) {
              case 0:
                if (
                  ((n = Ir(t)),
                  (r = e.query),
                  (i = !1),
                  (o = n.queries.get(r)) || ((i = !0), (o = new ph())),
                  !i)
                )
                  return [3, 4];
                c.label = 1;
              case 1:
                return c.trys.push([1, 3, , 4]), (s = o), [4, n.jh(r)];
              case 2:
                return (s.Kh = c.sent()), [3, 4];
              case 3:
                return (
                  (a = c.sent()),
                  (u = da(
                    a,
                    "Initialization of query '" + oo(e.query) + "' failed"
                  )),
                  [2, void e.onError(u)]
                );
              case 4:
                return (
                  n.queries.set(r, o),
                  o.listeners.push(e),
                  e.Gh(n.onlineState),
                  o.Kh && e.zh(o.Kh) && bh(n),
                  [2]
                );
            }
          });
        });
      }
      function gh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s;
          return (0, lr.Jh)(this, function (a) {
            return (
              (n = Ir(t)),
              (r = e.query),
              (i = !1),
              (o = n.queries.get(r)) &&
                (s = o.listeners.indexOf(e)) >= 0 &&
                (o.listeners.splice(s, 1), (i = 0 === o.listeners.length)),
              i ? [2, (n.queries.delete(r), n.Hh(r))] : [2]
            );
          });
        });
      }
      function mh(t, e) {
        for (var n = Ir(t), r = !1, i = 0, o = e; i < o.length; i++) {
          var s = o[i],
            a = s.query,
            u = n.queries.get(a);
          if (u) {
            for (var c = 0, h = u.listeners; c < h.length; c++)
              h[c].zh(s) && (r = !0);
            u.Kh = s;
          }
        }
        r && bh(n);
      }
      function yh(t, e, n) {
        var r = Ir(t),
          i = r.queries.get(e);
        if (i)
          for (var o = 0, s = i.listeners; o < s.length; o++) s[o].onError(n);
        r.queries.delete(e);
      }
      function bh(t) {
        t.Wh.forEach(function (t) {
          t.next();
        });
      }
      var wh = (function () {
          function t(t, e, n) {
            (this.query = t),
              (this.Jh = e),
              (this.Yh = !1),
              (this.Xh = null),
              (this.onlineState = "Unknown"),
              (this.options = n || {});
          }
          return (
            (t.prototype.zh = function (t) {
              if (!this.options.includeMetadataChanges) {
                for (var e = [], n = 0, r = t.docChanges; n < r.length; n++) {
                  var i = r[n];
                  3 !== i.type && e.push(i);
                }
                t = new ps(
                  t.query,
                  t.docs,
                  t.Se,
                  e,
                  t.De,
                  t.fromCache,
                  t.Ce,
                  !0
                );
              }
              var o = !1;
              return (
                this.Yh
                  ? this.Zh(t) && (this.Jh.next(t), (o = !0))
                  : this.tl(t, this.onlineState) && (this.el(t), (o = !0)),
                (this.Xh = t),
                o
              );
            }),
            (t.prototype.onError = function (t) {
              this.Jh.error(t);
            }),
            (t.prototype.Gh = function (t) {
              this.onlineState = t;
              var e = !1;
              return (
                this.Xh &&
                  !this.Yh &&
                  this.tl(this.Xh, t) &&
                  (this.el(this.Xh), (e = !0)),
                e
              );
            }),
            (t.prototype.tl = function (t, e) {
              if (!t.fromCache) return !0;
              var n = "Offline" !== e;
              return !(
                (this.options.nl && n) ||
                (t.docs.et() && "Offline" !== e)
              );
            }),
            (t.prototype.Zh = function (t) {
              if (t.docChanges.length > 0) return !0;
              var e =
                this.Xh && this.Xh.hasPendingWrites !== t.hasPendingWrites;
              return (
                !(!t.Ce && !e) && !0 === this.options.includeMetadataChanges
              );
            }),
            (t.prototype.el = function (t) {
              (t = ps.Ne(t.query, t.docs, t.De, t.fromCache)),
                (this.Yh = !0),
                this.Jh.next(t);
            }),
            t
          );
        })(),
        _h = (function () {
          function t(t, e) {
            (this.payload = t), (this.byteLength = e);
          }
          return (
            (t.prototype.sl = function () {
              return "metadata" in this.payload;
            }),
            t
          );
        })(),
        Ih = (function () {
          function t(t) {
            this.Qt = t;
          }
          return (
            (t.prototype.Pc = function (t) {
              return Os(this.Qt, t);
            }),
            (t.prototype.yc = function (t) {
              return t.metadata.exists
                ? Us(this.Qt, t.document, !1)
                : new Ti(
                    this.Pc(t.metadata.name),
                    this.gc(t.metadata.readTime)
                  );
            }),
            (t.prototype.gc = function (t) {
              return As(t);
            }),
            t
          );
        })(),
        Eh = (function () {
          function t(t, e, n) {
            (this.il = t),
              (this.bh = e),
              (this.Qt = n),
              (this.queries = []),
              (this.documents = []),
              (this.progress = Th(t));
          }
          return (
            (t.prototype.rl = function (t) {
              this.progress.bytesLoaded += t.byteLength;
              var e = this.progress.documentsLoaded;
              return (
                t.payload.namedQuery
                  ? this.queries.push(t.payload.namedQuery)
                  : t.payload.documentMetadata
                  ? (this.documents.push({
                      metadata: t.payload.documentMetadata,
                    }),
                    t.payload.documentMetadata.exists || ++e)
                  : t.payload.document &&
                    ((this.documents[this.documents.length - 1].document =
                      t.payload.document),
                    ++e),
                e !== this.progress.documentsLoaded
                  ? ((this.progress.documentsLoaded = e),
                    Object.assign({}, this.progress))
                  : null
              );
            }),
            (t.prototype.ol = function (t) {
              for (
                var e = new Map(), n = new Ih(this.Qt), r = 0, i = t;
                r < i.length;
                r++
              ) {
                var o = i[r];
                if (o.metadata.queries)
                  for (
                    var s = n.Pc(o.metadata.name),
                      a = 0,
                      u = o.metadata.queries;
                    a < u.length;
                    a++
                  ) {
                    var c = u[a],
                      h = (e.get(c) || us()).add(s);
                    e.set(c, h);
                  }
              }
              return e;
            }),
            (t.prototype.complete = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t, e, n, r, i;
                return (0, lr.Jh)(this, function (o) {
                  switch (o.label) {
                    case 0:
                      return [
                        4,
                        oc(
                          this.bh,
                          new Ih(this.Qt),
                          this.documents,
                          this.il.id
                        ),
                      ];
                    case 1:
                      (t = o.sent()),
                        (e = this.ol(this.documents)),
                        (n = 0),
                        (r = this.queries),
                        (o.label = 2);
                    case 2:
                      return n < r.length
                        ? ((i = r[n]), [4, sc(this.bh, i, e.get(i.name))])
                        : [3, 5];
                    case 3:
                      o.sent(), (o.label = 4);
                    case 4:
                      return n++, [3, 2];
                    case 5:
                      return [
                        2,
                        ((this.progress.taskState = "Success"),
                        new qu(Object.assign({}, this.progress), t)),
                      ];
                  }
                });
              });
            }),
            t
          );
        })();
      function Th(t) {
        return {
          taskState: "Running",
          documentsLoaded: 0,
          bytesLoaded: 0,
          totalDocuments: t.totalDocuments,
          totalBytes: t.totalBytes,
        };
      }
      var Sh = function (t) {
          this.key = t;
        },
        Ch = function (t) {
          this.key = t;
        },
        kh = (function () {
          function t(t, e) {
            (this.query = t),
              (this.cl = e),
              (this.al = null),
              (this.Be = !1),
              (this.ul = us()),
              (this.De = us()),
              (this.hl = ao(t)),
              (this.ll = new ls(this.hl));
          }
          return (
            Object.defineProperty(t.prototype, "_l", {
              get: function () {
                return this.cl;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.fl = function (t, e) {
              var n = this,
                r = e ? e.dl : new fs(),
                i = e ? e.ll : this.ll,
                o = e ? e.De : this.De,
                s = i,
                a = !1,
                u =
                  Qi(this.query) && i.size === this.query.limit
                    ? i.last()
                    : null,
                c =
                  Yi(this.query) && i.size === this.query.limit
                    ? i.first()
                    : null;
              if (
                (t.Xt(function (t, e) {
                  var h = i.get(t),
                    l = e instanceof Ei ? e : null;
                  l && (l = so(n.query, l) ? l : null);
                  var f = !!h && n.De.has(h.key),
                    p =
                      !!l &&
                      (l.Vt || (n.De.has(l.key) && l.hasCommittedMutations)),
                    d = !1;
                  h && l
                    ? h.data().isEqual(l.data())
                      ? f !== p && (r.track({ type: 3, doc: l }), (d = !0))
                      : n.wl(h, l) ||
                        (r.track({ type: 2, doc: l }),
                        (d = !0),
                        ((u && n.hl(l, u) > 0) || (c && n.hl(l, c) < 0)) &&
                          (a = !0))
                    : !h && l
                    ? (r.track({ type: 0, doc: l }), (d = !0))
                    : h &&
                      !l &&
                      (r.track({ type: 1, doc: h }),
                      (d = !0),
                      (u || c) && (a = !0)),
                    d &&
                      (l
                        ? ((s = s.add(l)), (o = p ? o.add(t) : o.delete(t)))
                        : ((s = s.delete(t)), (o = o.delete(t))));
                }),
                Qi(this.query) || Yi(this.query))
              )
                for (; s.size > this.query.limit; ) {
                  var h = Qi(this.query) ? s.last() : s.first();
                  (s = s.delete(h.key)),
                    (o = o.delete(h.key)),
                    r.track({ type: 1, doc: h });
                }
              return { ll: s, dl: r, lc: a, De: o };
            }),
            (t.prototype.wl = function (t, e) {
              return t.Vt && e.hasCommittedMutations && !e.Vt;
            }),
            (t.prototype.wi = function (t, e, n) {
              var r = this,
                i = this.ll;
              (this.ll = t.ll), (this.De = t.De);
              var o = t.dl.ve();
              o.sort(function (t, e) {
                return (
                  (function (t, e) {
                    var n = function (t) {
                      switch (t) {
                        case 0:
                          return 1;
                        case 2:
                        case 3:
                          return 2;
                        case 1:
                          return 0;
                        default:
                          return wr();
                      }
                    };
                    return n(t) - n(e);
                  })(t.type, e.type) || r.hl(t.doc, e.doc)
                );
              }),
                this.El(n);
              var s = e ? this.Tl() : [],
                a = 0 === this.ul.size && this.Be ? 1 : 0,
                u = a !== this.al;
              return (
                (this.al = a),
                0 !== o.length || u
                  ? {
                      snapshot: new ps(
                        this.query,
                        t.ll,
                        i,
                        o,
                        t.De,
                        0 === a,
                        u,
                        !1
                      ),
                      Il: s,
                    }
                  : { Il: s }
              );
            }),
            (t.prototype.Gh = function (t) {
              return this.Be && "Offline" === t
                ? ((this.Be = !1),
                  this.wi(
                    { ll: this.ll, dl: new fs(), De: this.De, lc: !1 },
                    !1
                  ))
                : { Il: [] };
            }),
            (t.prototype.ml = function (t) {
              return !this.cl.has(t) && !!this.ll.has(t) && !this.ll.get(t).Vt;
            }),
            (t.prototype.El = function (t) {
              var e = this;
              t &&
                (t.qe.forEach(function (t) {
                  return (e.cl = e.cl.add(t));
                }),
                t.Ue.forEach(function (t) {}),
                t.Qe.forEach(function (t) {
                  return (e.cl = e.cl.delete(t));
                }),
                (this.Be = t.Be));
            }),
            (t.prototype.Tl = function () {
              var t = this;
              if (!this.Be) return [];
              var e = this.ul;
              (this.ul = us()),
                this.ll.forEach(function (e) {
                  t.ml(e.key) && (t.ul = t.ul.add(e.key));
                });
              var n = [];
              return (
                e.forEach(function (e) {
                  t.ul.has(e) || n.push(new Ch(e));
                }),
                this.ul.forEach(function (t) {
                  e.has(t) || n.push(new Sh(t));
                }),
                n
              );
            }),
            (t.prototype.Al = function (t) {
              (this.cl = t.Rc), (this.ul = us());
              var e = this.fl(t.documents);
              return this.wi(e, !0);
            }),
            (t.prototype.Rl = function () {
              return ps.Ne(this.query, this.ll, this.De, 0 === this.al);
            }),
            t
          );
        })(),
        Nh = function (t, e, n) {
          (this.query = t), (this.targetId = e), (this.view = n);
        },
        Ah = function (t) {
          (this.key = t), (this.Pl = !1);
        },
        Ph = (function () {
          function t(t, e, n, r, i, o) {
            (this.bh = t),
              (this.yl = e),
              (this.gl = n),
              (this.Vl = r),
              (this.currentUser = i),
              (this.pl = o),
              (this.bl = {}),
              (this.vl = new cu(function (t) {
                return io(t);
              }, ro)),
              (this.Sl = new Map()),
              (this.Dl = new Set()),
              (this.Cl = new Qo(zr.H)),
              (this.xl = new Map()),
              (this.Nl = new uc()),
              (this.$l = {}),
              (this.Fl = new Map()),
              (this.Ol = yu.Li()),
              (this.onlineState = "Unknown"),
              (this.kl = void 0);
          }
          return (
            Object.defineProperty(t.prototype, "Ml", {
              get: function () {
                return !0 === this.kl;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })();
      function Dh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s, a;
          return (0, lr.Jh)(this, function (u) {
            switch (u.label) {
              case 0:
                return (
                  (n = sl(t)),
                  (o = n.vl.get(e))
                    ? ((r = o.targetId), n.Vl.Fa(r), (i = o.view.Rl()), [3, 4])
                    : [3, 1]
                );
              case 1:
                return [4, $u(n.bh, eo(e))];
              case 2:
                return (
                  (s = u.sent()),
                  (a = n.Vl.Fa(s.targetId)),
                  (r = s.targetId),
                  [4, xh(n, e, r, "current" === a)]
                );
              case 3:
                (i = u.sent()), n.Ml && Wc(n.yl, s), (u.label = 4);
              case 4:
                return [2, i];
            }
          });
        });
      }
      function xh(t, e, n, r) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var i, o, s, a, u, c;
          return (0, lr.Jh)(this, function (h) {
            switch (h.label) {
              case 0:
                return (
                  (t.Ll = function (e, n, r) {
                    return (function (t, e, n, r) {
                      return (0, lr.mG)(this, void 0, void 0, function () {
                        var i, o, s;
                        return (0, lr.Jh)(this, function (a) {
                          switch (a.label) {
                            case 0:
                              return (i = e.view.fl(n)).lc
                                ? [
                                    4,
                                    ec(t.bh, e.query, !1).then(function (t) {
                                      var n = t.documents;
                                      return e.view.fl(n, i);
                                    }),
                                  ]
                                : [3, 2];
                            case 1:
                              (i = a.sent()), (a.label = 2);
                            case 2:
                              return (
                                (o = r && r.$e.get(e.targetId)),
                                (s = e.view.wi(i, t.Ml, o)),
                                [2, (zh(t, e.targetId, s.Il), s.snapshot)]
                              );
                          }
                        });
                      });
                    })(t, e, n, r);
                  }),
                  [4, ec(t.bh, e, !0)]
                );
              case 1:
                return (
                  (i = h.sent()),
                  (o = new kh(e, i.Rc)),
                  (s = o.fl(i.documents)),
                  (a = vs.Le(n, r && "Offline" !== t.onlineState)),
                  (u = o.wi(s, t.Ml, a)),
                  zh(t, n, u.Il),
                  (c = new Nh(e, n, o)),
                  [
                    2,
                    (t.vl.set(e, c),
                    t.Sl.has(n) ? t.Sl.get(n).push(e) : t.Sl.set(n, [e]),
                    u.snapshot),
                  ]
                );
            }
          });
        });
      }
      function Oh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i;
          return (0, lr.Jh)(this, function (o) {
            switch (o.label) {
              case 0:
                return (
                  (n = Ir(t)),
                  (r = n.vl.get(e)),
                  (i = n.Sl.get(r.targetId)).length > 1
                    ? [
                        2,
                        (n.Sl.set(
                          r.targetId,
                          i.filter(function (t) {
                            return !ro(t, e);
                          })
                        ),
                        void n.vl.delete(e)),
                      ]
                    : n.Ml
                    ? (n.Vl.ka(r.targetId),
                      n.Vl.Da(r.targetId)
                        ? [3, 2]
                        : [
                            4,
                            tc(n.bh, r.targetId, !1)
                              .then(function () {
                                n.Vl.La(r.targetId),
                                  zc(n.yl, r.targetId),
                                  Gh(n, r.targetId);
                              })
                              .catch(uu),
                          ])
                    : [3, 3]
                );
              case 1:
                o.sent(), (o.label = 2);
              case 2:
                return [3, 5];
              case 3:
                return Gh(n, r.targetId), [4, tc(n.bh, r.targetId, !0)];
              case 4:
                o.sent(), (o.label = 5);
              case 5:
                return [2];
            }
          });
        });
      }
      function Rh(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i, o, s;
          return (0, lr.Jh)(this, function (a) {
            switch (a.label) {
              case 0:
                (r = al(t)), (a.label = 1);
              case 1:
                return (
                  a.trys.push([1, 5, , 6]),
                  [
                    4,
                    (function (t, e) {
                      var n,
                        r = Ir(t),
                        i = Ur.now(),
                        o = e.reduce(function (t, e) {
                          return t.add(e.key);
                        }, us());
                      return r.persistence
                        .runTransaction(
                          "Locally write mutations",
                          "readwrite",
                          function (t) {
                            return r.Tc.Xo(t, o).next(function (o) {
                              n = o;
                              for (
                                var s = [], a = 0, u = e;
                                a < u.length;
                                a++
                              ) {
                                var c = u[a],
                                  h = Oo(c, n.get(c.key));
                                null != h &&
                                  s.push(
                                    new jo(
                                      c.key,
                                      h,
                                      _i(h.proto.mapValue),
                                      No.exists(!0)
                                    )
                                  );
                              }
                              return r.zo.Ri(t, i, s, e);
                            });
                          }
                        )
                        .then(function (t) {
                          var e = t.xs(n);
                          return { batchId: t.batchId, ri: e };
                        });
                    })(r.bh, e),
                  ]
                );
              case 2:
                return (
                  (i = a.sent()),
                  r.Vl.Ca(i.batchId),
                  (function (t, e, n) {
                    var r = t.$l[t.currentUser.A()];
                    r || (r = new Qo(Sr)),
                      (r = r.zt(e, n)),
                      (t.$l[t.currentUser.A()] = r);
                  })(r, i.batchId, n),
                  [4, Jh(r, i.ri)]
                );
              case 3:
                return a.sent(), [4, rh(r.yl)];
              case 4:
                return a.sent(), [3, 6];
              case 5:
                return (
                  (o = a.sent()),
                  (s = da(o, "Failed to persist write")),
                  n.reject(s),
                  [3, 6]
                );
              case 6:
                return [2];
            }
          });
        });
      }
      function Mh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                (n = Ir(t)), (i.label = 1);
              case 1:
                return i.trys.push([1, 4, , 6]), [4, Yu(n.bh, e)];
              case 2:
                return (
                  (r = i.sent()),
                  e.$e.forEach(function (t, e) {
                    var r = n.xl.get(e);
                    r &&
                      (_r(t.qe.size + t.Ue.size + t.Qe.size <= 1),
                      t.qe.size > 0
                        ? (r.Pl = !0)
                        : t.Ue.size > 0
                        ? _r(r.Pl)
                        : t.Qe.size > 0 && (_r(r.Pl), (r.Pl = !1)));
                  }),
                  [4, Jh(n, r, e)]
                );
              case 3:
                return i.sent(), [3, 6];
              case 4:
                return [4, uu(i.sent())];
              case 5:
                return i.sent(), [3, 6];
              case 6:
                return [2];
            }
          });
        });
      }
      function Lh(t, e, n) {
        var r = Ir(t);
        if ((r.Ml && 0 === n) || (!r.Ml && 1 === n)) {
          var i = [];
          r.vl.forEach(function (t, n) {
            var r = n.view.Gh(e);
            r.snapshot && i.push(r.snapshot);
          }),
            (function (t, e) {
              var n = Ir(t);
              n.onlineState = e;
              var r = !1;
              n.queries.forEach(function (t, n) {
                for (var i = 0, o = n.listeners; i < o.length; i++)
                  o[i].Gh(e) && (r = !0);
              }),
                r && bh(n);
            })(r.gl, e),
            i.length && r.bl.ah(i),
            (r.onlineState = e),
            r.Ml && r.Vl.Qa(e);
        }
      }
      function jh(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i, o, s, a, u;
          return (0, lr.Jh)(this, function (c) {
            switch (c.label) {
              case 0:
                return (
                  (r = Ir(t)).Vl.Ba(e, "rejected", n),
                  (i = r.xl.get(e)),
                  (o = i && i.key)
                    ? ((s = (s = new Qo(zr.H)).zt(o, new Ti(o, Vr.min()))),
                      (a = us().add(o)),
                      (u = new ds(Vr.min(), new Map(), new Zo(Sr), s, a)),
                      [4, Mh(r, u)])
                    : [3, 2]
                );
              case 1:
                return (
                  c.sent(),
                  (r.Cl = r.Cl.remove(o)),
                  r.xl.delete(e),
                  Kh(r),
                  [3, 4]
                );
              case 2:
                return [
                  4,
                  tc(r.bh, e, !1)
                    .then(function () {
                      return Gh(r, e, n);
                    })
                    .catch(uu),
                ];
              case 3:
                c.sent(), (c.label = 4);
              case 4:
                return [2];
            }
          });
        });
      }
      function Fh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i;
          return (0, lr.Jh)(this, function (o) {
            switch (o.label) {
              case 0:
                (n = Ir(t)), (r = e.batch.batchId), (o.label = 1);
              case 1:
                return o.trys.push([1, 4, , 6]), [4, Ju(n.bh, e)];
              case 2:
                return (
                  (i = o.sent()),
                  Bh(n, r, null),
                  qh(n, r),
                  n.Vl.Na(r, "acknowledged"),
                  [4, Jh(n, i)]
                );
              case 3:
                return o.sent(), [3, 6];
              case 4:
                return [4, uu(o.sent())];
              case 5:
                return o.sent(), [3, 6];
              case 6:
                return [2];
            }
          });
        });
      }
      function Uh(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i;
          return (0, lr.Jh)(this, function (o) {
            switch (o.label) {
              case 0:
                (r = Ir(t)), (o.label = 1);
              case 1:
                return (
                  o.trys.push([1, 4, , 6]),
                  [
                    4,
                    (function (t, e) {
                      var n = Ir(t);
                      return n.persistence.runTransaction(
                        "Reject batch",
                        "readwrite-primary",
                        function (t) {
                          var r;
                          return n.zo
                            .Pi(t, e)
                            .next(function (e) {
                              return (
                                _r(null !== e), (r = e.keys()), n.zo.Ci(t, e)
                              );
                            })
                            .next(function () {
                              return n.zo.$i(t);
                            })
                            .next(function () {
                              return n.Tc.Xo(t, r);
                            });
                        }
                      );
                    })(r.bh, e),
                  ]
                );
              case 2:
                return (
                  (i = o.sent()),
                  Bh(r, e, n),
                  qh(r, e),
                  r.Vl.Na(e, "rejected", n),
                  [4, Jh(r, i)]
                );
              case 3:
                return o.sent(), [3, 6];
              case 4:
                return [4, uu(o.sent())];
              case 5:
                return o.sent(), [3, 6];
              case 6:
                return [2];
            }
          });
        });
      }
      function Vh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s;
          return (0, lr.Jh)(this, function (a) {
            switch (a.label) {
              case 0:
                Yc((n = Ir(t)).yl) ||
                  gr(
                    "SyncEngine",
                    "The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."
                  ),
                  (a.label = 1);
              case 1:
                return (
                  a.trys.push([1, 3, , 4]),
                  [
                    4,
                    (function (t) {
                      var e = Ir(t);
                      return e.persistence.runTransaction(
                        "Get highest unacknowledged batch id",
                        "readonly",
                        function (t) {
                          return e.zo.Vi(t);
                        }
                      );
                    })(n.bh),
                  ]
                );
              case 2:
                return -1 === (r = a.sent())
                  ? [2, void e.resolve()]
                  : ((i = n.Fl.get(r) || []).push(e), n.Fl.set(r, i), [3, 4]);
              case 3:
                return (
                  (o = a.sent()),
                  (s = da(
                    o,
                    "Initialization of waitForPendingWrites() operation failed"
                  )),
                  e.reject(s),
                  [3, 4]
                );
              case 4:
                return [2];
            }
          });
        });
      }
      function qh(t, e) {
        (t.Fl.get(e) || []).forEach(function (t) {
          t.resolve();
        }),
          t.Fl.delete(e);
      }
      function Bh(t, e, n) {
        var r = Ir(t),
          i = r.$l[r.currentUser.A()];
        if (i) {
          var o = i.get(e);
          o && (n ? o.reject(n) : o.resolve(), (i = i.remove(e))),
            (r.$l[r.currentUser.A()] = i);
        }
      }
      function Gh(t, e, n) {
        void 0 === n && (n = null), t.Vl.ka(e);
        for (var r = 0, i = t.Sl.get(e); r < i.length; r++) {
          var o = i[r];
          t.vl.delete(o), n && t.bl.Bl(o, n);
        }
        t.Sl.delete(e),
          t.Ml &&
            t.Nl.Fc(e).forEach(function (e) {
              t.Nl.Fi(e) || Wh(t, e);
            });
      }
      function Wh(t, e) {
        t.Dl.delete(e.path.rt());
        var n = t.Cl.get(e);
        null !== n &&
          (zc(t.yl, n), (t.Cl = t.Cl.remove(e)), t.xl.delete(n), Kh(t));
      }
      function zh(t, e, n) {
        for (var r = 0, i = n; r < i.length; r++) {
          var o = i[r];
          o instanceof Sh
            ? (t.Nl.nr(o.key, e), Hh(t, o))
            : o instanceof Ch
            ? (gr("SyncEngine", "Document no longer in limbo: " + o.key),
              t.Nl.ir(o.key, e),
              t.Nl.Fi(o.key) || Wh(t, o.key))
            : wr();
        }
      }
      function Hh(t, e) {
        var n = e.key,
          r = n.path.rt();
        t.Cl.get(n) ||
          t.Dl.has(r) ||
          (gr("SyncEngine", "New document in limbo: " + n), t.Dl.add(r), Kh(t));
      }
      function Kh(t) {
        for (; t.Dl.size > 0 && t.Cl.size < t.pl; ) {
          var e = t.Dl.values().next().value;
          t.Dl.delete(e);
          var n = new zr(Br.ot(e)),
            r = t.Ol.next();
          t.xl.set(r, new Ah(n)),
            (t.Cl = t.Cl.zt(n, r)),
            Wc(t.yl, new co(eo(Ji(n.path)), r, 2, Fr.q));
        }
      }
      function Jh(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i, o, s;
          return (0, lr.Jh)(this, function (a) {
            switch (a.label) {
              case 0:
                return (
                  (r = Ir(t)),
                  (i = []),
                  (o = []),
                  (s = []),
                  r.vl.et()
                    ? [3, 3]
                    : (r.vl.forEach(function (t, a) {
                        s.push(
                          r.Ll(a, e, n).then(function (t) {
                            if (t) {
                              r.Ml &&
                                r.Vl.Ba(
                                  a.targetId,
                                  t.fromCache ? "not-current" : "current"
                                ),
                                i.push(t);
                              var e = Gu.oc(a.targetId, t);
                              o.push(e);
                            }
                          })
                        );
                      }),
                      [4, Promise.all(s)])
                );
              case 1:
                return (
                  a.sent(),
                  r.bl.ah(i),
                  [
                    4,
                    (function (t, e) {
                      return (0, lr.mG)(this, void 0, void 0, function () {
                        var n, r, i, o, s, a, u, c, h;
                        return (0, lr.Jh)(this, function (l) {
                          switch (l.label) {
                            case 0:
                              (n = Ir(t)), (l.label = 1);
                            case 1:
                              return (
                                l.trys.push([1, 3, , 4]),
                                [
                                  4,
                                  n.persistence.runTransaction(
                                    "notifyLocalViewChanges",
                                    "readwrite",
                                    function (t) {
                                      return ra.forEach(e, function (e) {
                                        return ra
                                          .forEach(e.ic, function (r) {
                                            return n.persistence.Ti.nr(
                                              t,
                                              e.targetId,
                                              r
                                            );
                                          })
                                          .next(function () {
                                            return ra.forEach(
                                              e.rc,
                                              function (r) {
                                                return n.persistence.Ti.ir(
                                                  t,
                                                  e.targetId,
                                                  r
                                                );
                                              }
                                            );
                                          });
                                      });
                                    }
                                  ),
                                ]
                              );
                            case 2:
                              return l.sent(), [3, 4];
                            case 3:
                              if (!ua((r = l.sent()))) throw r;
                              return (
                                gr(
                                  "LocalStore",
                                  "Failed to update sequence numbers: " + r
                                ),
                                [3, 4]
                              );
                            case 4:
                              for (i = 0, o = e; i < o.length; i++)
                                (s = o[i]),
                                  (a = s.targetId),
                                  s.fromCache ||
                                    ((u = n.fc.get(a)),
                                    (c = u.Ot),
                                    (h = u.Lt(c)),
                                    (n.fc = n.fc.zt(a, h)));
                              return [2];
                          }
                        });
                      });
                    })(r.bh, o),
                  ]
                );
              case 2:
                a.sent(), (a.label = 3);
              case 3:
                return [2];
            }
          });
        });
      }
      function Qh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                return (n = Ir(t)).currentUser.isEqual(e)
                  ? [3, 3]
                  : (gr("SyncEngine", "User change. New user:", e.A()),
                    [4, Ku(n.bh, e)]);
              case 1:
                return (
                  (r = i.sent()),
                  (n.currentUser = e),
                  (function (t, e) {
                    t.Fl.forEach(function (t) {
                      t.forEach(function (t) {
                        t.reject(
                          new Pr(
                            Ar.CANCELLED,
                            "'waitForPendingWrites' promise is rejected due to a user change."
                          )
                        );
                      });
                    }),
                      t.Fl.clear();
                  })(n),
                  n.Vl.Ua(e, r.mc, r.Ac),
                  [4, Jh(n, r.Ic)]
                );
              case 2:
                i.sent(), (i.label = 3);
              case 3:
                return [2];
            }
          });
        });
      }
      function Yh(t, e) {
        var n = Ir(t),
          r = n.xl.get(e);
        if (r && r.Pl) return us().add(r.key);
        var i = us(),
          o = n.Sl.get(e);
        if (!o) return i;
        for (var s = 0, a = o; s < a.length; s++) {
          var u = a[s],
            c = n.vl.get(u);
          i = i.Pe(c.view._l);
        }
        return i;
      }
      function Xh(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i;
          return (0, lr.Jh)(this, function (o) {
            switch (o.label) {
              case 0:
                return [4, ec((n = Ir(t)).bh, e.query, !0)];
              case 1:
                return (
                  (r = o.sent()),
                  (i = e.view.Al(r)),
                  [2, (n.Ml && zh(n, e.targetId, i.Il), i)]
                );
            }
          });
        });
      }
      function Zh(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e;
          return (0, lr.Jh)(this, function (n) {
            return [
              2,
              rc((e = Ir(t)).bh).then(function (t) {
                return Jh(e, t);
              }),
            ];
          });
        });
      }
      function $h(t, e, n, r) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var i, o;
          return (0, lr.Jh)(this, function (s) {
            switch (s.label) {
              case 0:
                return [
                  4,
                  (function (t, e) {
                    var n = Ir(t),
                      r = Ir(n.zo);
                    return n.persistence.runTransaction(
                      "Lookup mutation documents",
                      "readonly",
                      function (t) {
                        return r.yi(t, e).next(function (e) {
                          return e ? n.Tc.Xo(t, e) : ra.resolve(null);
                        });
                      }
                    );
                  })((i = Ir(t)).bh, e),
                ];
              case 1:
                return null === (o = s.sent())
                  ? [3, 6]
                  : "pending" !== n
                  ? [3, 3]
                  : [4, rh(i.yl)];
              case 2:
                return s.sent(), [3, 4];
              case 3:
                "acknowledged" === n || "rejected" === n
                  ? (Bh(i, e, r || null),
                    qh(i, e),
                    (function (t, e) {
                      Ir(Ir(t).zo).xi(e);
                    })(i.bh, e))
                  : wr(),
                  (s.label = 4);
              case 4:
                return [4, Jh(i, o)];
              case 5:
                return s.sent(), [3, 7];
              case 6:
                gr("SyncEngine", "Cannot apply mutation batch with id: " + e),
                  (s.label = 7);
              case 7:
                return [2];
            }
          });
        });
      }
      function tl(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s, a, u, c;
          return (0, lr.Jh)(this, function (h) {
            switch (h.label) {
              case 0:
                return (
                  sl((n = Ir(t))),
                  al(n),
                  !0 !== e || !0 === n.kl
                    ? [3, 3]
                    : ((r = n.Vl.va()), [4, el(n, r.it())])
                );
              case 1:
                return (i = h.sent()), (n.kl = !0), [4, hh(n.yl, !0)];
              case 2:
                for (h.sent(), o = 0, s = i; o < s.length; o++)
                  (a = s[o]), Wc(n.yl, a);
                return [3, 7];
              case 3:
                return !1 !== e || !1 === n.kl
                  ? [3, 7]
                  : ((u = []),
                    (c = Promise.resolve()),
                    n.Sl.forEach(function (t, e) {
                      n.Vl.Ma(e)
                        ? u.push(e)
                        : (c = c.then(function () {
                            return Gh(n, e), tc(n.bh, e, !0);
                          })),
                        zc(n.yl, e);
                    }),
                    [4, c]);
              case 4:
                return h.sent(), [4, el(n, u)];
              case 5:
                return (
                  h.sent(),
                  (function (t) {
                    var e = Ir(t);
                    e.xl.forEach(function (t, n) {
                      zc(e.yl, n);
                    }),
                      e.Nl.Oc(),
                      (e.xl = new Map()),
                      (e.Cl = new Qo(zr.H));
                  })(n),
                  (n.kl = !1),
                  [4, hh(n.yl, !1)]
                );
              case 6:
                h.sent(), (h.label = 7);
              case 7:
                return [2];
            }
          });
        });
      }
      function el(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s, a, u, c, h, l, f, p, d, v;
          return (0, lr.Jh)(this, function (g) {
            switch (g.label) {
              case 0:
                (n = Ir(t)),
                  (r = []),
                  (i = []),
                  (o = 0),
                  (s = e),
                  (g.label = 1);
              case 1:
                return o < s.length
                  ? ((a = s[o]),
                    (u = void 0),
                    (c = n.Sl.get(a)) && 0 !== c.length
                      ? [4, $u(n.bh, eo(c[0]))]
                      : [3, 7])
                  : [3, 13];
              case 2:
                (u = g.sent()), (h = 0), (l = c), (g.label = 3);
              case 3:
                return h < l.length
                  ? ((f = l[h]), (p = n.vl.get(f)), [4, Xh(n, p)])
                  : [3, 6];
              case 4:
                (d = g.sent()).snapshot && i.push(d.snapshot), (g.label = 5);
              case 5:
                return h++, [3, 3];
              case 6:
                return [3, 11];
              case 7:
                return [4, nc(n.bh, a)];
              case 8:
                return (v = g.sent()), [4, $u(n.bh, v)];
              case 9:
                return (u = g.sent()), [4, xh(n, nl(v), a, !1)];
              case 10:
                g.sent(), (g.label = 11);
              case 11:
                r.push(u), (g.label = 12);
              case 12:
                return o++, [3, 1];
              case 13:
                return [2, (n.bl.ah(i), r)];
            }
          });
        });
      }
      function nl(t) {
        return Ki(
          t.path,
          t.collectionGroup,
          t.orderBy,
          t.filters,
          t.limit,
          "F",
          t.startAt,
          t.endAt
        );
      }
      function rl(t) {
        var e = Ir(t);
        return Ir(Ir(e.bh).persistence).Uo();
      }
      function il(t, e, n, r) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var i, o, s;
          return (0, lr.Jh)(this, function (a) {
            switch (a.label) {
              case 0:
                return (i = Ir(t)).kl
                  ? (gr(
                      "SyncEngine",
                      "Ignoring unexpected query state notification."
                    ),
                    [3, 8])
                  : [3, 1];
              case 1:
                if (!i.Sl.has(e)) return [3, 8];
                switch (n) {
                  case "current":
                  case "not-current":
                    return [3, 2];
                  case "rejected":
                    return [3, 5];
                }
                return [3, 7];
              case 2:
                return [4, rc(i.bh)];
              case 3:
                return (
                  (o = a.sent()),
                  (s = ds.Me(e, "current" === n)),
                  [4, Jh(i, o, s)]
                );
              case 4:
                return a.sent(), [3, 8];
              case 5:
                return [4, tc(i.bh, e, !0)];
              case 6:
                return a.sent(), Gh(i, e, r), [3, 8];
              case 7:
                wr(), (a.label = 8);
              case 8:
                return [2];
            }
          });
        });
      }
      function ol(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i, o, s, a, u, c, h, l, f;
          return (0, lr.Jh)(this, function (p) {
            switch (p.label) {
              case 0:
                if (!(r = sl(t)).kl) return [3, 10];
                (i = 0), (o = e), (p.label = 1);
              case 1:
                return i < o.length
                  ? ((s = o[i]),
                    r.Sl.has(s)
                      ? (gr(
                          "SyncEngine",
                          "Adding an already active target " + s
                        ),
                        [3, 5])
                      : [4, nc(r.bh, s)])
                  : [3, 6];
              case 2:
                return (a = p.sent()), [4, $u(r.bh, a)];
              case 3:
                return (u = p.sent()), [4, xh(r, nl(a), u.targetId, !1)];
              case 4:
                p.sent(), Wc(r.yl, u), (p.label = 5);
              case 5:
                return i++, [3, 1];
              case 6:
                (c = function (t) {
                  return (0, lr.Jh)(this, function (e) {
                    switch (e.label) {
                      case 0:
                        return r.Sl.has(t)
                          ? [
                              4,
                              tc(r.bh, t, !1)
                                .then(function () {
                                  zc(r.yl, t), Gh(r, t);
                                })
                                .catch(uu),
                            ]
                          : [3, 2];
                      case 1:
                        e.sent(), (e.label = 2);
                      case 2:
                        return [2];
                    }
                  });
                }),
                  (h = 0),
                  (l = n),
                  (p.label = 7);
              case 7:
                return h < l.length ? ((f = l[h]), [5, c(f)]) : [3, 10];
              case 8:
                p.sent(), (p.label = 9);
              case 9:
                return h++, [3, 7];
              case 10:
                return [2];
            }
          });
        });
      }
      function sl(t) {
        var e = Ir(t);
        return (
          (e.yl.Dh.Lh = Mh.bind(null, e)),
          (e.yl.Dh.vn = Yh.bind(null, e)),
          (e.yl.Dh.Mh = jh.bind(null, e)),
          (e.bl.ah = mh.bind(null, e.gl)),
          (e.bl.Bl = yh.bind(null, e.gl)),
          e
        );
      }
      function al(t) {
        var e = Ir(t);
        return (
          (e.yl.Dh.Bh = Fh.bind(null, e)), (e.yl.Dh.qh = Uh.bind(null, e)), e
        );
      }
      function ul(t, e, n) {
        var r = Ir(t);
        (function (t, e, n) {
          return (0, lr.mG)(this, void 0, void 0, function () {
            var r, i, o, s, a, u;
            return (0, lr.Jh)(this, function (c) {
              switch (c.label) {
                case 0:
                  return c.trys.push([0, 14, , 15]), [4, e.getMetadata()];
                case 1:
                  return (
                    (r = c.sent()),
                    [
                      4,
                      (function (t, e) {
                        var n = Ir(t),
                          r = As(e.createTime);
                        return n.persistence
                          .runTransaction(
                            "hasNewerBundle",
                            "readonly",
                            function (t) {
                              return n.wo.Os(t, e.id);
                            }
                          )
                          .then(function (t) {
                            return !!t && t.createTime._(r) >= 0;
                          });
                      })(t.bh, r),
                    ]
                  );
                case 2:
                  return c.sent() ? [4, e.close()] : [3, 4];
                case 3:
                  return [
                    2,
                    (c.sent(),
                    void n.ql(
                      (function (t) {
                        return {
                          taskState: "Success",
                          documentsLoaded: t.totalDocuments,
                          bytesLoaded: t.totalBytes,
                          totalDocuments: t.totalDocuments,
                          totalBytes: t.totalBytes,
                        };
                      })(r)
                    )),
                  ];
                case 4:
                  return n.Ul(Th(r)), (i = new Eh(r, t.bh, e.Qt)), [4, e.Ql()];
                case 5:
                  (o = c.sent()), (c.label = 6);
                case 6:
                  return o ? [4, i.rl(o)] : [3, 10];
                case 7:
                  return (s = c.sent()) && n.Ul(s), [4, e.Ql()];
                case 8:
                  (o = c.sent()), (c.label = 9);
                case 9:
                  return [3, 6];
                case 10:
                  return [4, i.complete()];
                case 11:
                  return (a = c.sent()), [4, Jh(t, a.Go, void 0)];
                case 12:
                  return (
                    c.sent(),
                    [
                      4,
                      (function (t, e) {
                        var n = Ir(t);
                        return n.persistence.runTransaction(
                          "Save bundle",
                          "readwrite",
                          function (t) {
                            return n.wo.ks(t, e);
                          }
                        );
                      })(t.bh, r),
                    ]
                  );
                case 13:
                  return c.sent(), n.ql(a.progress), [3, 15];
                case 14:
                  return (
                    yr(
                      "SyncEngine",
                      "Loading bundle failed with " + (u = c.sent())
                    ),
                    n.Kl(u),
                    [3, 15]
                  );
                case 15:
                  return [2];
              }
            });
          });
        })(r, e, n).then(function () {
          r.Vl.Wa();
        });
      }
      var cl = (function () {
          function t() {
            this.synchronizeTabs = !1;
          }
          return (
            (t.prototype.initialize = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (e) {
                  switch (e.label) {
                    case 0:
                      return (
                        (this.Qt = Rc(t.yu.t)),
                        (this.Vl = this.Wl(t)),
                        (this.persistence = this.jl(t)),
                        [4, this.persistence.start()]
                      );
                    case 1:
                      return (
                        e.sent(),
                        (this.Gl = this.zl(t)),
                        (this.bh = this.Hl(t)),
                        [2]
                      );
                  }
                });
              });
            }),
            (t.prototype.zl = function (t) {
              return null;
            }),
            (t.prototype.Hl = function (t) {
              return Hu(this.persistence, new Wu(), t.Jl, this.Qt);
            }),
            (t.prototype.jl = function (t) {
              return new dc(gc.ia, this.Qt);
            }),
            (t.prototype.Wl = function (t) {
              return new Cc();
            }),
            (t.prototype.terminate = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return this.Gl && this.Gl.stop(), [4, this.Vl.ko()];
                    case 1:
                      return t.sent(), [4, this.persistence.ko()];
                    case 2:
                      return t.sent(), [2];
                  }
                });
              });
            }),
            t
          );
        })(),
        hl = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this) || this).Yl = e),
              (i.cacheSizeBytes = n),
              (i.forceOwnership = r),
              (i.synchronizeTabs = !1),
              i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.initialize = function (e) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return [4, t.prototype.initialize.call(this, e)];
                    case 1:
                      return n.sent(), [4, ic(this.bh)];
                    case 2:
                      return n.sent(), [4, this.Yl.initialize(this, e)];
                    case 3:
                      return n.sent(), [4, al(this.Yl._a)];
                    case 4:
                      return n.sent(), [4, rh(this.Yl.yl)];
                    case 5:
                      return n.sent(), [2];
                  }
                });
              });
            }),
            (e.prototype.Hl = function (t) {
              return Hu(this.persistence, new Wu(), t.Jl, this.Qt);
            }),
            (e.prototype.zl = function (t) {
              var e = this.persistence.Ti.lr;
              return new Su(e, t._s);
            }),
            (e.prototype.jl = function (t) {
              var e = Vu(t.yu.t, t.yu.persistenceKey),
                n =
                  void 0 !== this.cacheSizeBytes
                    ? au.Ys(this.cacheSizeBytes)
                    : au.ti;
              return new ju(
                this.synchronizeTabs,
                e,
                t.clientId,
                n,
                t._s,
                xc(),
                Oc(),
                this.Qt,
                this.Vl,
                !!this.forceOwnership
              );
            }),
            (e.prototype.Wl = function (t) {
              return new Cc();
            }),
            e
          );
        })(cl),
        ll = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this, e, n, !1) || this).Yl = e),
              (r.cacheSizeBytes = n),
              (r.synchronizeTabs = !0),
              r
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.initialize = function (e) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var n,
                  r = this;
                return (0, lr.Jh)(this, function (i) {
                  switch (i.label) {
                    case 0:
                      return [4, t.prototype.initialize.call(this, e)];
                    case 1:
                      return (
                        i.sent(),
                        (n = this.Yl._a),
                        this.Vl instanceof Sc
                          ? ((this.Vl._a = {
                              eu: $h.bind(null, n),
                              nu: il.bind(null, n),
                              su: ol.bind(null, n),
                              Uo: rl.bind(null, n),
                              tu: Zh.bind(null, n),
                            }),
                            [4, this.Vl.start()])
                          : [3, 3]
                      );
                    case 2:
                      i.sent(), (i.label = 3);
                    case 3:
                      return [
                        4,
                        this.persistence.Ro(function (t) {
                          return (0, lr.mG)(r, void 0, void 0, function () {
                            return (0, lr.Jh)(this, function (e) {
                              switch (e.label) {
                                case 0:
                                  return [4, tl(this.Yl._a, t)];
                                case 1:
                                  return (
                                    e.sent(),
                                    this.Gl &&
                                      (t && !this.Gl.Er
                                        ? this.Gl.start(this.bh)
                                        : t || this.Gl.stop()),
                                    [2]
                                  );
                              }
                            });
                          });
                        }),
                      ];
                    case 4:
                      return i.sent(), [2];
                  }
                });
              });
            }),
            (e.prototype.Wl = function (t) {
              var e = xc();
              if (!Sc.Kn(e))
                throw new Pr(
                  Ar.UNIMPLEMENTED,
                  "IndexedDB persistence is only available on platforms that support LocalStorage."
                );
              var n = Vu(t.yu.t, t.yu.persistenceKey);
              return new Sc(e, t._s, n, t.clientId, t.Jl);
            }),
            e
          );
        })(hl),
        fl = (function () {
          function t() {}
          return (
            (t.prototype.initialize = function (t, e) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var n = this;
                return (0, lr.Jh)(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return this.bh
                        ? [3, 2]
                        : ((this.bh = t.bh),
                          (this.Vl = t.Vl),
                          (this.Sh = this.Xl(e)),
                          (this.yl = this.Zl(e)),
                          (this.gl = this.t_(e)),
                          (this._a = this.e_(e, !t.synchronizeTabs)),
                          (this.Vl.fa = function (t) {
                            return Lh(n._a, t, 1);
                          }),
                          (this.yl.Dh.n_ = Qh.bind(null, this._a)),
                          [4, hh(this.yl, this._a.Ml)]);
                    case 1:
                      r.sent(), (r.label = 2);
                    case 2:
                      return [2];
                  }
                });
              });
            }),
            (t.prototype.t_ = function (t) {
              return new dh();
            }),
            (t.prototype.Xl = function (t) {
              var e,
                n = Rc(t.yu.t),
                r = ((e = t.yu), new Dc(e));
              return (function (t, e, n) {
                return new Uc(t, e, n);
              })(t.credentials, r, n);
            }),
            (t.prototype.Zl = function (t) {
              var e,
                n,
                r,
                i,
                o,
                s = this;
              return (
                (e = this.bh),
                (n = this.Sh),
                (r = t._s),
                (i = function (t) {
                  return Lh(s._a, t, 0);
                }),
                (o = Nc.Kn() ? new Nc() : new kc()),
                new qc(e, n, r, i, o)
              );
            }),
            (t.prototype.e_ = function (t, e) {
              return (function (t, e, n, r, i, o, s) {
                var a = new Ph(t, e, n, r, i, o);
                return s && (a.kl = !0), a;
              })(this.bh, this.yl, this.gl, this.Vl, t.Jl, t.pl, e);
            }),
            (t.prototype.terminate = function () {
              return (function (t) {
                return (0, lr.mG)(this, void 0, void 0, function () {
                  var e;
                  return (0, lr.Jh)(this, function (n) {
                    switch (n.label) {
                      case 0:
                        return (
                          (e = Ir(t)),
                          gr("RemoteStore", "RemoteStore shutting down."),
                          e.Nh.add(5),
                          [4, Gc(e)]
                        );
                      case 1:
                        return n.sent(), e.Fh.ko(), e.Oh.set("Unknown"), [2];
                    }
                  });
                });
              })(this.yl);
            }),
            t
          );
        })();
      function pl(t, e) {
        void 0 === e && (e = 10240);
        var n = 0;
        return {
          read: function () {
            return (0, lr.mG)(this, void 0, void 0, function () {
              var r;
              return (0, lr.Jh)(this, function (i) {
                return n < t.byteLength
                  ? ((r = { value: t.slice(n, n + e), done: !1 }),
                    [2, ((n += e), r)])
                  : [2, { done: !0 }];
              });
            });
          },
          cancel: function () {
            return (0, lr.mG)(this, void 0, void 0, function () {
              return (0, lr.Jh)(this, function (t) {
                return [2];
              });
            });
          },
          releaseLock: function () {},
          closed: Promise.reject("unimplemented"),
        };
      }
      var dl = (function () {
          function t(t) {
            (this.observer = t), (this.muted = !1);
          }
          return (
            (t.prototype.next = function (t) {
              this.observer.next && this.s_(this.observer.next, t);
            }),
            (t.prototype.error = function (t) {
              this.observer.error
                ? this.s_(this.observer.error, t)
                : console.error("Uncaught Error in snapshot listener:", t);
            }),
            (t.prototype.i_ = function () {
              this.muted = !0;
            }),
            (t.prototype.s_ = function (t, e) {
              var n = this;
              this.muted ||
                setTimeout(function () {
                  n.muted || t(e);
                }, 0);
            }),
            t
          );
        })(),
        vl = (function () {
          function t(t, e) {
            var n = this;
            (this.r_ = t),
              (this.Qt = e),
              (this.metadata = new na()),
              (this.buffer = new Uint8Array()),
              (this.o_ = new TextDecoder("utf-8")),
              this.c_().then(
                function (t) {
                  t && t.sl()
                    ? n.metadata.resolve(t.payload.metadata)
                    : n.metadata.reject(
                        new Error(
                          "The first element of the bundle is not a metadata, it is\n             " +
                            JSON.stringify(null == t ? void 0 : t.payload)
                        )
                      );
                },
                function (t) {
                  return n.metadata.reject(t);
                }
              );
          }
          return (
            (t.prototype.close = function () {
              return this.r_.cancel();
            }),
            (t.prototype.getMetadata = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (t) {
                  return [2, this.metadata.promise];
                });
              });
            }),
            (t.prototype.Ql = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return [4, this.getMetadata()];
                    case 1:
                      return [2, (t.sent(), this.c_())];
                  }
                });
              });
            }),
            (t.prototype.c_ = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t, e, n, r;
                return (0, lr.Jh)(this, function (i) {
                  switch (i.label) {
                    case 0:
                      return [4, this.a_()];
                    case 1:
                      return null === (t = i.sent())
                        ? [2, null]
                        : ((e = this.o_.decode(t)),
                          (n = Number(e)),
                          isNaN(n) &&
                            this.u_(
                              "length string (" + e + ") is not valid number"
                            ),
                          [4, this.h_(n)]);
                    case 2:
                      return (
                        (r = i.sent()), [2, new _h(JSON.parse(r), t.length + n)]
                      );
                  }
                });
              });
            }),
            (t.prototype.l_ = function () {
              return this.buffer.findIndex(function (t) {
                return t === "{".charCodeAt(0);
              });
            }),
            (t.prototype.a_ = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t, e;
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return this.l_() < 0 ? [4, this.__()] : [3, 3];
                    case 1:
                      if (n.sent()) return [3, 3];
                      n.label = 2;
                    case 2:
                      return [3, 0];
                    case 3:
                      return 0 === this.buffer.length
                        ? [2, null]
                        : ((t = this.l_()) < 0 &&
                            this.u_(
                              "Reached the end of bundle when a length string is expected."
                            ),
                          (e = this.buffer.slice(0, t)),
                          [2, ((this.buffer = this.buffer.slice(t)), e)]);
                  }
                });
              });
            }),
            (t.prototype.h_ = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var e;
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return this.buffer.length < t ? [4, this.__()] : [3, 3];
                    case 1:
                      n.sent() &&
                        this.u_(
                          "Reached the end of bundle when more is expected."
                        ),
                        (n.label = 2);
                    case 2:
                      return [3, 0];
                    case 3:
                      return (
                        (e = this.o_.decode(this.buffer.slice(0, t))),
                        [2, ((this.buffer = this.buffer.slice(t)), e)]
                      );
                  }
                });
              });
            }),
            (t.prototype.u_ = function (t) {
              throw (
                (this.r_.cancel(), new Error("Invalid bundle format: " + t))
              );
            }),
            (t.prototype.__ = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t, e;
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return [4, this.r_.read()];
                    case 1:
                      return (
                        (t = n.sent()).done ||
                          ((e = new Uint8Array(
                            this.buffer.length + t.value.length
                          )).set(this.buffer),
                          e.set(t.value, this.buffer.length),
                          (this.buffer = e)),
                        [2, t.done]
                      );
                  }
                });
              });
            }),
            t
          );
        })(),
        gl = (function () {
          function t() {
            for (var t = [], e = 0; e < arguments.length; e++)
              t[e] = arguments[e];
            for (var n = 0; n < t.length; ++n)
              if (0 === t[n].length)
                throw new Pr(
                  Ar.INVALID_ARGUMENT,
                  "Invalid field name at argument $(i + 1). Field names must not be empty."
                );
            this.f_ = new Wr(t);
          }
          return (
            (t.prototype.isEqual = function (t) {
              return this.f_.isEqual(t.f_);
            }),
            t
          );
        })(),
        ml = function (t) {
          this._methodName = t;
        },
        yl = function (t) {
          this.d_ = t;
        };
      function bl(t, e, n) {
        if (!n)
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Function " + t + "() cannot be called with an empty " + e + "."
          );
      }
      function wl(t, e) {
        if (void 0 === e) return { merge: !1 };
        if (void 0 !== e.mergeFields && void 0 !== e.merge)
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Invalid options passed to function " +
              t +
              '(): You cannot specify both "merge" and "mergeFields".'
          );
        return e;
      }
      function _l(t, e, n, r) {
        if (!0 === e && !0 === r)
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            t + " and " + n + " cannot be used together."
          );
      }
      function Il(t) {
        if (!zr.wt(t))
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Invalid document reference. Document references must have an even number of segments, but " +
              t +
              " has " +
              t.length +
              "."
          );
      }
      function El(t) {
        if (zr.wt(t))
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Invalid collection reference. Collection references must have an odd number of segments, but " +
              t +
              " has " +
              t.length +
              "."
          );
      }
      function Tl(t) {
        if (void 0 === t) return "undefined";
        if (null === t) return "null";
        if ("string" == typeof t)
          return (
            t.length > 20 && (t = t.substring(0, 20) + "..."), JSON.stringify(t)
          );
        if ("number" == typeof t || "boolean" == typeof t) return "" + t;
        if ("object" == typeof t) {
          if (t instanceof Array) return "an array";
          var e = (function (t) {
            if (t.constructor) {
              var e = /function\s+([^\s(]+)\s*\(/.exec(
                t.constructor.toString()
              );
              if (e && e.length > 1) return e[1];
            }
            return null;
          })(t);
          return e ? "a custom " + e + " object" : "an object";
        }
        return "function" == typeof t ? "a function" : wr();
      }
      function Sl(t, e) {
        if (("_delegate" in t && (t = t.d_), !(t instanceof e))) {
          if (e.name === t.constructor.name)
            throw new Pr(
              Ar.INVALID_ARGUMENT,
              "Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?"
            );
          var n = Tl(t);
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Expected type '" + e.name + "', but it was: " + n
          );
        }
        return t;
      }
      function Cl(t, e) {
        if (e <= 0)
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Function " +
              t +
              "() requires a positive number, but it was: " +
              e +
              "."
          );
      }
      var kl = (function () {
          function t(t) {
            var e;
            if (void 0 === t.host) {
              if (void 0 !== t.ssl)
                throw new Pr(
                  Ar.INVALID_ARGUMENT,
                  "Can't provide ssl option if host option is not set"
                );
              (this.host = "firestore.googleapis.com"), (this.ssl = !0);
            } else
              (this.host = t.host),
                (this.ssl = null === (e = t.ssl) || void 0 === e || e);
            if (
              ((this.credentials = t.credentials),
              (this.ignoreUndefinedProperties = !!t.ignoreUndefinedProperties),
              void 0 === t.cacheSizeBytes)
            )
              this.cacheSizeBytes = 41943040;
            else {
              if (-1 !== t.cacheSizeBytes && t.cacheSizeBytes < 1048576)
                throw new Pr(
                  Ar.INVALID_ARGUMENT,
                  "cacheSizeBytes must be at least 1048576"
                );
              this.cacheSizeBytes = t.cacheSizeBytes;
            }
            (this.experimentalForceLongPolling =
              !!t.experimentalForceLongPolling),
              (this.experimentalAutoDetectLongPolling =
                !!t.experimentalAutoDetectLongPolling),
              _l(
                "experimentalForceLongPolling",
                t.experimentalForceLongPolling,
                "experimentalAutoDetectLongPolling",
                t.experimentalAutoDetectLongPolling
              );
          }
          return (
            (t.prototype.isEqual = function (t) {
              return (
                this.host === t.host &&
                this.ssl === t.ssl &&
                this.credentials === t.credentials &&
                this.cacheSizeBytes === t.cacheSizeBytes &&
                this.experimentalForceLongPolling ===
                  t.experimentalForceLongPolling &&
                this.experimentalAutoDetectLongPolling ===
                  t.experimentalAutoDetectLongPolling &&
                this.ignoreUndefinedProperties === t.ignoreUndefinedProperties
              );
            }),
            t
          );
        })(),
        Nl = new Map(),
        Al = (function () {
          function t(t, e) {
            (this.w_ = "(lite)"),
              (this.E_ = new kl({})),
              (this.T_ = !1),
              t instanceof pr
                ? ((this.I_ = t), (this.m_ = new Rr()))
                : ((this.A_ = t),
                  (this.I_ = (function (t) {
                    if (
                      !Object.prototype.hasOwnProperty.apply(t.options, [
                        "projectId",
                      ])
                    )
                      throw new Pr(
                        Ar.INVALID_ARGUMENT,
                        '"projectId" not provided in firebase.initializeApp.'
                      );
                    return new pr(t.options.projectId);
                  })(t)),
                  (this.m_ = new Mr(e)));
          }
          return (
            Object.defineProperty(t.prototype, "app", {
              get: function () {
                if (!this.A_)
                  throw new Pr(
                    Ar.FAILED_PRECONDITION,
                    "Firestore was not initialized using the Firebase SDK. 'app' is not available"
                  );
                return this.A_;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "R_", {
              get: function () {
                return this.T_;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "P_", {
              get: function () {
                return void 0 !== this.y_;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.g_ = function (t) {
              if (this.T_)
                throw new Pr(
                  Ar.FAILED_PRECONDITION,
                  "Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object."
                );
              (this.E_ = new kl(t)),
                void 0 !== t.credentials &&
                  (this.m_ = (function (t) {
                    if (!t) return new Rr();
                    switch (t.type) {
                      case "gapi":
                        var e = t.client;
                        return (
                          _r(
                            !(
                              "object" != typeof e ||
                              null === e ||
                              !e.auth ||
                              !e.auth.getAuthHeaderValueForFirstParty
                            )
                          ),
                          new jr(e, t.sessionIndex || "0")
                        );
                      case "provider":
                        return t.client;
                      default:
                        throw new Pr(
                          Ar.INVALID_ARGUMENT,
                          "makeCredentialsProvider failed due to invalid credential type"
                        );
                    }
                  })(t.credentials));
            }),
            (t.prototype.V_ = function () {
              return this.E_;
            }),
            (t.prototype.p_ = function () {
              return (this.T_ = !0), this.E_;
            }),
            (t.prototype._delete = function () {
              return this.y_ || (this.y_ = this.b_()), this.y_;
            }),
            (t.prototype.toJSON = function () {
              return { app: this.A_, t: this.I_, settings: this.E_ };
            }),
            (t.prototype.b_ = function () {
              return (
                (t = Nl.get(this)) &&
                  (gr("ComponentProvider", "Removing Datastore"),
                  Nl.delete(this),
                  t.terminate()),
                Promise.resolve()
              );
              var t;
            }),
            t
          );
        })(),
        Pl = (function () {
          function t(t, e, n) {
            (this.v_ = e),
              (this.S_ = n),
              (this.type = "document"),
              (this.firestore = t);
          }
          return (
            Object.defineProperty(t.prototype, "D_", {
              get: function () {
                return this.S_.path;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "id", {
              get: function () {
                return this.S_.path.tt();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "path", {
              get: function () {
                return this.S_.path.rt();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "parent", {
              get: function () {
                return new xl(this.firestore, this.v_, this.S_.path.X());
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.withConverter = function (e) {
              return new t(this.firestore, e, this.S_);
            }),
            t
          );
        })(),
        Dl = (function () {
          function t(t, e, n) {
            (this.v_ = e),
              (this.C_ = n),
              (this.type = "query"),
              (this.firestore = t);
          }
          return (
            (t.prototype.withConverter = function (e) {
              return new t(this.firestore, e, this.C_);
            }),
            t
          );
        })(),
        xl = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this, e, n, Ji(r)) || this).firestore = e),
              (i.D_ = r),
              (i.type = "collection"),
              i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            Object.defineProperty(e.prototype, "id", {
              get: function () {
                return this.C_.path.tt();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "path", {
              get: function () {
                return this.C_.path.rt();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "parent", {
              get: function () {
                var t = this.D_.X();
                return t.et() ? null : new Pl(this.firestore, null, new zr(t));
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.withConverter = function (t) {
              return new e(this.firestore, t, this.D_);
            }),
            e
          );
        })(Dl);
      function Ol(t, e) {
        for (var n, r = [], i = 2; i < arguments.length; i++)
          r[i - 2] = arguments[i];
        if (
          (t instanceof yl && (t = t.d_),
          bl("collection", "path", e),
          t instanceof Al)
        )
          return (
            El((n = Br.ot.apply(Br, (0, lr.ev)([e], r)))), new xl(t, null, n)
          );
        if (!(t instanceof Pl || t instanceof xl))
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore"
          );
        return (
          El((n = Br.ot.apply(Br, (0, lr.ev)([t.path], r)).child(Br.ot(e)))),
          new xl(t.firestore, null, n)
        );
      }
      function Rl(t, e) {
        for (var n, r = [], i = 2; i < arguments.length; i++)
          r[i - 2] = arguments[i];
        if (
          (t instanceof yl && (t = t.d_),
          1 === arguments.length && (e = Tr.u()),
          bl("doc", "path", e),
          t instanceof Al)
        )
          return (
            Il((n = Br.ot.apply(Br, (0, lr.ev)([e], r)))),
            new Pl(t, null, new zr(n))
          );
        if (!(t instanceof Pl || t instanceof xl))
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore"
          );
        return (
          Il((n = t.D_.child(Br.ot.apply(Br, (0, lr.ev)([e], r))))),
          new Pl(t.firestore, t instanceof xl ? t.v_ : null, new zr(n))
        );
      }
      function Ml(t, e) {
        return (
          t instanceof yl && (t = t.d_),
          e instanceof yl && (e = e.d_),
          (t instanceof Pl || t instanceof xl) &&
            (e instanceof Pl || e instanceof xl) &&
            t.firestore === e.firestore &&
            t.path === e.path &&
            t.v_ === e.v_
        );
      }
      function Ll(t, e) {
        return (
          t instanceof yl && (t = t.d_),
          e instanceof yl && (e = e.d_),
          t instanceof Dl &&
            e instanceof Dl &&
            t.firestore === e.firestore &&
            ro(t.C_, e.C_) &&
            t.v_ === e.v_
        );
      }
      var jl = (function () {
          function t(t, e) {
            if (!isFinite(t) || t < -90 || t > 90)
              throw new Pr(
                Ar.INVALID_ARGUMENT,
                "Latitude must be a number between -90 and 90, but was: " + t
              );
            if (!isFinite(e) || e < -180 || e > 180)
              throw new Pr(
                Ar.INVALID_ARGUMENT,
                "Longitude must be a number between -180 and 180, but was: " + e
              );
            (this.x_ = t), (this.N_ = e);
          }
          return (
            Object.defineProperty(t.prototype, "latitude", {
              get: function () {
                return this.x_;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "longitude", {
              get: function () {
                return this.N_;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.isEqual = function (t) {
              return this.x_ === t.x_ && this.N_ === t.N_;
            }),
            (t.prototype.toJSON = function () {
              return { latitude: this.x_, longitude: this.N_ };
            }),
            (t.prototype.U = function (t) {
              return Sr(this.x_, t.x_) || Sr(this.N_, t.N_);
            }),
            t
          );
        })(),
        Fl = /^__.*__$/,
        Ul = (function () {
          function t(t, e, n) {
            (this.data = t), (this.Gt = e), (this.fieldTransforms = n);
          }
          return (
            (t.prototype.F_ = function (t, e) {
              return null !== this.Gt
                ? new jo(t, this.data, this.Gt, e, this.fieldTransforms)
                : new Lo(t, this.data, e, this.fieldTransforms);
            }),
            t
          );
        })(),
        Vl = (function () {
          function t(t, e, n) {
            (this.data = t), (this.Gt = e), (this.fieldTransforms = n);
          }
          return (
            (t.prototype.F_ = function (t, e) {
              return new jo(t, this.data, this.Gt, e, this.fieldTransforms);
            }),
            t
          );
        })();
      function ql(t) {
        switch (t) {
          case 0:
          case 2:
          case 1:
            return !0;
          case 3:
          case 4:
            return !1;
          default:
            throw wr();
        }
      }
      var Bl = (function () {
          function t(t, e, n, r, i, o) {
            (this.settings = t),
              (this.t = e),
              (this.Qt = n),
              (this.ignoreUndefinedProperties = r),
              void 0 === i && this.O_(),
              (this.fieldTransforms = i || []),
              (this.Gt = o || []);
          }
          return (
            Object.defineProperty(t.prototype, "path", {
              get: function () {
                return this.settings.path;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "k_", {
              get: function () {
                return this.settings.k_;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.M_ = function (e) {
              return new t(
                Object.assign(Object.assign({}, this.settings), e),
                this.t,
                this.Qt,
                this.ignoreUndefinedProperties,
                this.fieldTransforms,
                this.Gt
              );
            }),
            (t.prototype.L_ = function (t) {
              var e,
                n =
                  null === (e = this.path) || void 0 === e
                    ? void 0
                    : e.child(t),
                r = this.M_({ path: n, B_: !1 });
              return r.q_(t), r;
            }),
            (t.prototype.U_ = function (t) {
              var e,
                n =
                  null === (e = this.path) || void 0 === e
                    ? void 0
                    : e.child(t),
                r = this.M_({ path: n, B_: !1 });
              return r.O_(), r;
            }),
            (t.prototype.Q_ = function (t) {
              return this.M_({ path: void 0, B_: !0 });
            }),
            (t.prototype.K_ = function (t) {
              return cf(
                t,
                this.settings.methodName,
                this.settings.W_ || !1,
                this.path,
                this.settings.j_
              );
            }),
            (t.prototype.contains = function (t) {
              return (
                void 0 !==
                  this.Gt.find(function (e) {
                    return t.nt(e);
                  }) ||
                void 0 !==
                  this.fieldTransforms.find(function (e) {
                    return t.nt(e.field);
                  })
              );
            }),
            (t.prototype.O_ = function () {
              if (this.path)
                for (var t = 0; t < this.path.length; t++)
                  this.q_(this.path.get(t));
            }),
            (t.prototype.q_ = function (t) {
              if (0 === t.length)
                throw this.K_("Document fields must not be empty");
              if (ql(this.k_) && Fl.test(t))
                throw this.K_('Document fields cannot begin and end with "__"');
            }),
            t
          );
        })(),
        Gl = (function () {
          function t(t, e, n) {
            (this.t = t),
              (this.ignoreUndefinedProperties = e),
              (this.Qt = n || Rc(t));
          }
          return (
            (t.prototype.G_ = function (t, e, n, r) {
              return (
                void 0 === r && (r = !1),
                new Bl(
                  { k_: t, methodName: e, j_: n, path: Wr.ct(), B_: !1, W_: r },
                  this.t,
                  this.Qt,
                  this.ignoreUndefinedProperties
                )
              );
            }),
            t
          );
        })();
      function Wl(t) {
        var e = t.p_(),
          n = Rc(t.I_);
        return new Gl(t.I_, !!e.ignoreUndefinedProperties, n);
      }
      function zl(t, e, n, r, i, o) {
        void 0 === o && (o = {});
        var s = t.G_(o.merge || o.mergeFields ? 2 : 0, e, n, i);
        of("Data must be an object, but it was:", s, r);
        var a,
          u,
          c = nf(r, s);
        if (o.merge) (a = new Qr(s.Gt)), (u = s.fieldTransforms);
        else if (o.mergeFields) {
          for (var h = [], l = 0, f = o.mergeFields; l < f.length; l++) {
            var p = sf(e, f[l], n);
            if (!s.contains(p))
              throw new Pr(
                Ar.INVALID_ARGUMENT,
                "Field '" +
                  p +
                  "' is specified in your field mask but missing from your input data."
              );
            hf(h, p) || h.push(p);
          }
          (a = new Qr(h)),
            (u = s.fieldTransforms.filter(function (t) {
              return a.Tt(t.field);
            }));
        } else (a = null), (u = s.fieldTransforms);
        return new Ul(new bi(c), a, u);
      }
      var Hl = (function (t) {
        function e() {
          return (null !== t && t.apply(this, arguments)) || this;
        }
        return (
          (0, lr.ZT)(e, t),
          (e.prototype.z_ = function (t) {
            if (2 !== t.k_)
              throw 1 === t.k_
                ? t.K_(
                    this._methodName +
                      "() can only appear at the top level of your update data"
                  )
                : t.K_(
                    this._methodName +
                      "() cannot be used with set() unless you pass {merge:true}"
                  );
            return t.Gt.push(t.path), null;
          }),
          (e.prototype.isEqual = function (t) {
            return t instanceof e;
          }),
          e
        );
      })(ml);
      function Kl(t, e, n) {
        return new Bl(
          { k_: 3, j_: e.settings.j_, methodName: t._methodName, B_: n },
          e.t,
          e.Qt,
          e.ignoreUndefinedProperties
        );
      }
      var Jl = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.z_ = function (t) {
              return new Co(t.path, new yo());
            }),
            (e.prototype.isEqual = function (t) {
              return t instanceof e;
            }),
            e
          );
        })(ml),
        Ql = (function (t) {
          function e(e, n) {
            var r = this;
            return ((r = t.call(this, e) || this).H_ = n), r;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.z_ = function (t) {
              var e = Kl(this, t, !0),
                n = this.H_.map(function (t) {
                  return ef(t, e);
                }),
                r = new bo(n);
              return new Co(t.path, r);
            }),
            (e.prototype.isEqual = function (t) {
              return this === t;
            }),
            e
          );
        })(ml),
        Yl = (function (t) {
          function e(e, n) {
            var r = this;
            return ((r = t.call(this, e) || this).H_ = n), r;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.z_ = function (t) {
              var e = Kl(this, t, !0),
                n = this.H_.map(function (t) {
                  return ef(t, e);
                }),
                r = new _o(n);
              return new Co(t.path, r);
            }),
            (e.prototype.isEqual = function (t) {
              return this === t;
            }),
            e
          );
        })(ml),
        Xl = (function (t) {
          function e(e, n) {
            var r = this;
            return ((r = t.call(this, e) || this).J_ = n), r;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.z_ = function (t) {
              var e = new Eo(t.Qt, fo(t.Qt, this.J_));
              return new Co(t.path, e);
            }),
            (e.prototype.isEqual = function (t) {
              return this === t;
            }),
            e
          );
        })(ml);
      function Zl(t, e, n, r) {
        var i = t.G_(1, e, n);
        of("Data must be an object, but it was:", i, r);
        var o = [],
          s = new wi();
        Kr(r, function (t, r) {
          var a = uf(e, t, n);
          r instanceof yl && (r = r.d_);
          var u = i.U_(a);
          if (r instanceof Hl) o.push(a);
          else {
            var c = ef(r, u);
            null != c && (o.push(a), s.set(a, c));
          }
        });
        var a = new Qr(o);
        return new Vl(s.Pt(), a, i.fieldTransforms);
      }
      function $l(t, e, n, r, i, o) {
        var s = t.G_(1, e, n),
          a = [sf(e, r, n)],
          u = [i];
        if (o.length % 2 != 0)
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Function " +
              e +
              "() needs to be called with an even number of arguments that alternate between field names and values."
          );
        for (var c = 0; c < o.length; c += 2)
          a.push(sf(e, o[c])), u.push(o[c + 1]);
        for (var h = [], l = new wi(), f = a.length - 1; f >= 0; --f)
          if (!hf(h, a[f])) {
            var p = a[f],
              d = u[f];
            d instanceof yl && (d = d.d_);
            var v = s.U_(p);
            if (d instanceof Hl) h.push(p);
            else {
              var g = ef(d, v);
              null != g && (h.push(p), l.set(p, g));
            }
          }
        var m = new Qr(h);
        return new Vl(l.Pt(), m, s.fieldTransforms);
      }
      function tf(t, e, n, r) {
        return void 0 === r && (r = !1), ef(n, t.G_(r ? 4 : 3, e));
      }
      function ef(t, e) {
        if ((t instanceof yl && (t = t.d_), rf(t)))
          return of("Unsupported field value:", e, t), nf(t, e);
        if (t instanceof ml)
          return (
            (function (t, e) {
              if (!ql(e.k_))
                throw e.K_(
                  t._methodName + "() can only be used with update() and set()"
                );
              if (!e.path)
                throw e.K_(
                  t._methodName + "() is not currently supported inside arrays"
                );
              var n = t.z_(e);
              n && e.fieldTransforms.push(n);
            })(t, e),
            null
          );
        if (void 0 === t && e.ignoreUndefinedProperties) return null;
        if ((e.path && e.Gt.push(e.path), t instanceof Array)) {
          if (e.settings.B_ && 4 !== e.k_)
            throw e.K_("Nested arrays are not supported");
          return (function (t, e) {
            for (var n = [], r = 0, i = 0, o = t; i < o.length; i++) {
              var s = ef(o[i], e.Q_(r));
              null == s && (s = { nullValue: "NULL_VALUE" }), n.push(s), r++;
            }
            return { arrayValue: { values: n } };
          })(t, e);
        }
        return (function (t, e) {
          if ((t instanceof yl && (t = t.d_), null === t))
            return { nullValue: "NULL_VALUE" };
          if ("number" == typeof t) return fo(e.Qt, t);
          if ("boolean" == typeof t) return { booleanValue: t };
          if ("string" == typeof t) return { stringValue: t };
          if (t instanceof Date) {
            var n = Ur.fromDate(t);
            return { timestampValue: Cs(e.Qt, n) };
          }
          if (t instanceof Ur)
            return (
              (n = new Ur(t.seconds, 1e3 * Math.floor(t.nanoseconds / 1e3))),
              { timestampValue: Cs(e.Qt, n) }
            );
          if (t instanceof jl)
            return {
              geoPointValue: { latitude: t.latitude, longitude: t.longitude },
            };
          if (t instanceof Dr) return { bytesValue: ks(e.Qt, t.I) };
          if (t instanceof Pl) {
            n = e.t;
            var r = t.firestore.I_;
            if (!r.isEqual(n))
              throw e.K_(
                "Document reference is for database " +
                  r.projectId +
                  "/" +
                  r.database +
                  " but should be for database " +
                  n.projectId +
                  "/" +
                  n.database
              );
            return { referenceValue: Ps(t.firestore.I_ || e.t, t.S_.path) };
          }
          throw e.K_("Unsupported field value: " + Tl(t));
        })(t, e);
      }
      function nf(t, e) {
        var n = {};
        return (
          Jr(t)
            ? e.path && e.path.length > 0 && e.Gt.push(e.path)
            : Kr(t, function (t, r) {
                var i = ef(r, e.L_(t));
                null != i && (n[t] = i);
              }),
          { mapValue: { fields: n } }
        );
      }
      function rf(t) {
        return !(
          "object" != typeof t ||
          null === t ||
          t instanceof Array ||
          t instanceof Date ||
          t instanceof Ur ||
          t instanceof jl ||
          t instanceof Dr ||
          t instanceof Pl ||
          t instanceof ml
        );
      }
      function of(t, e, n) {
        if (
          !rf(n) ||
          !(function (t) {
            return (
              "object" == typeof t &&
              null !== t &&
              (Object.getPrototypeOf(t) === Object.prototype ||
                null === Object.getPrototypeOf(t))
            );
          })(n)
        ) {
          var r = Tl(n);
          throw "an object" === r
            ? e.K_(t + " a custom object")
            : e.K_(t + " " + r);
        }
      }
      function sf(t, e, n) {
        if ((e instanceof yl && (e = e.d_), e instanceof gl)) return e.f_;
        if ("string" == typeof e) return uf(t, e);
        throw cf(
          "Field path arguments must be of type string or FieldPath.",
          t,
          !1,
          void 0,
          n
        );
      }
      var af = new RegExp("[~\\*/\\[\\]]");
      function uf(t, e, n) {
        if (e.search(af) >= 0)
          throw cf(
            "Invalid field path (" +
              e +
              "). Paths must not contain '~', '*', '/', '[', or ']'",
            t,
            !1,
            void 0,
            n
          );
        try {
          return new (gl.bind.apply(gl, (0, lr.ev)([void 0], e.split("."))))()
            .f_;
        } catch (r) {
          throw cf(
            "Invalid field path (" +
              e +
              "). Paths must not be empty, begin with '.', end with '.', or contain '..'",
            t,
            !1,
            void 0,
            n
          );
        }
      }
      function cf(t, e, n, r, i) {
        var o = r && !r.et(),
          s = void 0 !== i,
          a = "Function " + e + "() called with invalid data";
        n && (a += " (via `toFirestore()`)");
        var u = "";
        return (
          (o || s) &&
            ((u += " (found"),
            o && (u += " in field " + r),
            s && (u += " in document " + i),
            (u += ")")),
          new Pr(Ar.INVALID_ARGUMENT, (a += ". ") + t + u)
        );
      }
      function hf(t, e) {
        return t.some(function (t) {
          return t.isEqual(e);
        });
      }
      var lf = (function () {
          function t(t) {
            (this.Sh = t),
              (this.Y_ = new Map()),
              (this.mutations = []),
              (this.X_ = !1),
              (this.Z_ = null),
              (this.tf = new Set());
          }
          return (
            (t.prototype.ef = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var e,
                  n = this;
                return (0, lr.Jh)(this, function (r) {
                  switch (r.label) {
                    case 0:
                      if ((this.nf(), this.mutations.length > 0))
                        throw new Pr(
                          Ar.INVALID_ARGUMENT,
                          "Firestore transactions require all reads to be executed before all writes."
                        );
                      return [
                        4,
                        (function (t, e) {
                          return (0, lr.mG)(this, void 0, void 0, function () {
                            var n, r, i, o, s, a;
                            return (0, lr.Jh)(this, function (u) {
                              switch (u.label) {
                                case 0:
                                  return (
                                    (n = Ir(t)),
                                    (r = Ls(n.Qt) + "/documents"),
                                    (i = {
                                      documents: e.map(function (t) {
                                        return xs(n.Qt, t);
                                      }),
                                    }),
                                    [4, n.Du("BatchGetDocuments", r, i)]
                                  );
                                case 1:
                                  return (
                                    (o = u.sent()),
                                    (s = new Map()),
                                    o.forEach(function (t) {
                                      var e = (function (t, e) {
                                        return "found" in e
                                          ? (function (t, e) {
                                              _r(!!e.found),
                                                e.found.name,
                                                e.found.updateTime;
                                              var n = Os(t, e.found.name),
                                                r = As(e.found.updateTime),
                                                i = new bi({
                                                  mapValue: {
                                                    fields: e.found.fields,
                                                  },
                                                });
                                              return new Ei(n, r, i, {});
                                            })(t, e)
                                          : "missing" in e
                                          ? (function (t, e) {
                                              _r(!!e.missing), _r(!!e.readTime);
                                              var n = Os(t, e.missing),
                                                r = As(e.readTime);
                                              return new Ti(n, r);
                                            })(t, e)
                                          : wr();
                                      })(n.Qt, t);
                                      s.set(e.key.toString(), e);
                                    }),
                                    (a = []),
                                    [
                                      2,
                                      (e.forEach(function (t) {
                                        var e = s.get(t.toString());
                                        _r(!!e), a.push(e);
                                      }),
                                      a),
                                    ]
                                  );
                              }
                            });
                          });
                        })(this.Sh, t),
                      ];
                    case 1:
                      return [
                        2,
                        ((e = r.sent()).forEach(function (t) {
                          t instanceof Ti || t instanceof Ei ? n.sf(t) : wr();
                        }),
                        e),
                      ];
                  }
                });
              });
            }),
            (t.prototype.set = function (t, e) {
              this.write(e.F_(t, this.jt(t))), this.tf.add(t.toString());
            }),
            (t.prototype.update = function (t, e) {
              try {
                this.write(e.F_(t, this.rf(t)));
              } catch (t) {
                this.Z_ = t;
              }
              this.tf.add(t.toString());
            }),
            (t.prototype.delete = function (t) {
              this.write(new Wo(t, this.jt(t))), this.tf.add(t.toString());
            }),
            (t.prototype.commit = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t,
                  e = this;
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      if ((this.nf(), this.Z_)) throw this.Z_;
                      return (
                        (t = this.Y_),
                        this.mutations.forEach(function (e) {
                          t.delete(e.key.toString());
                        }),
                        t.forEach(function (t, n) {
                          var r = zr._t(n);
                          e.mutations.push(new zo(r, e.jt(r)));
                        }),
                        [
                          4,
                          (function (t, e) {
                            return (0, lr.mG)(
                              this,
                              void 0,
                              void 0,
                              function () {
                                var n, r, i;
                                return (0, lr.Jh)(this, function (o) {
                                  switch (o.label) {
                                    case 0:
                                      return (
                                        (n = Ir(t)),
                                        (r = Ls(n.Qt) + "/documents"),
                                        (i = {
                                          writes: e.map(function (t) {
                                            return Vs(n.Qt, t);
                                          }),
                                        }),
                                        [4, n.pu("Commit", r, i)]
                                      );
                                    case 1:
                                      return o.sent(), [2];
                                  }
                                });
                              }
                            );
                          })(this.Sh, this.mutations),
                        ]
                      );
                    case 1:
                      return n.sent(), (this.X_ = !0), [2];
                  }
                });
              });
            }),
            (t.prototype.sf = function (t) {
              var e;
              if (t instanceof Ei) e = t.version;
              else {
                if (!(t instanceof Ti)) throw wr();
                e = Vr.min();
              }
              var n = this.Y_.get(t.key.toString());
              if (n) {
                if (!e.isEqual(n))
                  throw new Pr(
                    Ar.ABORTED,
                    "Document version changed between two reads."
                  );
              } else this.Y_.set(t.key.toString(), e);
            }),
            (t.prototype.jt = function (t) {
              var e = this.Y_.get(t.toString());
              return !this.tf.has(t.toString()) && e
                ? No.updateTime(e)
                : No.Kt();
            }),
            (t.prototype.rf = function (t) {
              var e = this.Y_.get(t.toString());
              if (!this.tf.has(t.toString()) && e) {
                if (e.isEqual(Vr.min()))
                  throw new Pr(
                    Ar.INVALID_ARGUMENT,
                    "Can't update a document that doesn't exist."
                  );
                return No.updateTime(e);
              }
              return No.exists(!0);
            }),
            (t.prototype.write = function (t) {
              this.nf(), this.mutations.push(t);
            }),
            (t.prototype.nf = function () {}),
            t
          );
        })(),
        ff = (function () {
          function t(t, e, n, r) {
            (this._s = t),
              (this.Sh = e),
              (this.updateFunction = n),
              (this.Es = r),
              (this.cf = 5),
              (this.Gu = new Mc(this._s, "transaction_retry"));
          }
          return (
            (t.prototype.run = function () {
              this.af();
            }),
            (t.prototype.af = function () {
              var t = this;
              this.Gu.Lu(function () {
                return (0, lr.mG)(t, void 0, void 0, function () {
                  var t,
                    e,
                    n = this;
                  return (0, lr.Jh)(this, function (r) {
                    return (
                      (t = new lf(this.Sh)),
                      (e = this.uf(t)) &&
                        e
                          .then(function (e) {
                            n._s.Ps(function () {
                              return t
                                .commit()
                                .then(function () {
                                  n.Es.resolve(e);
                                })
                                .catch(function (t) {
                                  n.hf(t);
                                });
                            });
                          })
                          .catch(function (t) {
                            n.hf(t);
                          }),
                      [2]
                    );
                  });
                });
              });
            }),
            (t.prototype.uf = function (t) {
              try {
                var e = this.updateFunction(t);
                return !ri(e) && e.catch && e.then
                  ? e
                  : (this.Es.reject(
                      Error("Transaction callback must return a Promise")
                    ),
                    null);
              } catch (t) {
                return this.Es.reject(t), null;
              }
            }),
            (t.prototype.hf = function (t) {
              var e = this;
              this.cf > 0 && this.lf(t)
                ? ((this.cf -= 1),
                  this._s.Ps(function () {
                    return e.af(), Promise.resolve();
                  }))
                : this.Es.reject(t);
            }),
            (t.prototype.lf = function (t) {
              if ("FirebaseError" === t.name) {
                var e = t.code;
                return "aborted" === e || "failed-precondition" === e || !Ko(e);
              }
              return !1;
            }),
            t
          );
        })(),
        pf = (function () {
          function t(t, e, n) {
            var r = this;
            (this.credentials = t),
              (this._s = e),
              (this.yu = n),
              (this.user = xr.UNAUTHENTICATED),
              (this.clientId = Tr.u()),
              (this._f = function () {}),
              (this.C = new na()),
              this.credentials.v(function (t) {
                gr("FirestoreClient", "Received user=", t.uid),
                  (r.user = t),
                  r._f(t),
                  r.C.resolve();
              });
          }
          return (
            (t.prototype.getConfiguration = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return [4, this.C.promise];
                    case 1:
                      return [
                        2,
                        (t.sent(),
                        {
                          _s: this._s,
                          yu: this.yu,
                          clientId: this.clientId,
                          credentials: this.credentials,
                          Jl: this.user,
                          pl: 100,
                        }),
                      ];
                  }
                });
              });
            }),
            (t.prototype.ff = function (t) {
              var e = this;
              (this._f = t),
                this.C.promise.then(function () {
                  return e._f(e.user);
                });
            }),
            (t.prototype.df = function () {
              if (this._s.wf)
                throw new Pr(
                  Ar.FAILED_PRECONDITION,
                  "The client has already been terminated."
                );
            }),
            (t.prototype.terminate = function () {
              var t = this;
              this._s.Ef();
              var e = new na();
              return (
                this._s.Tf(function () {
                  return (0, lr.mG)(t, void 0, void 0, function () {
                    var t, n;
                    return (0, lr.Jh)(this, function (r) {
                      switch (r.label) {
                        case 0:
                          return (
                            r.trys.push([0, 5, , 6]),
                            this.If ? [4, this.If.terminate()] : [3, 2]
                          );
                        case 1:
                          r.sent(), (r.label = 2);
                        case 2:
                          return this.mf ? [4, this.mf.terminate()] : [3, 4];
                        case 3:
                          r.sent(), (r.label = 4);
                        case 4:
                          return this.credentials.S(), e.resolve(), [3, 6];
                        case 5:
                          return (
                            (t = r.sent()),
                            (n = da(t, "Failed to shutdown persistence")),
                            e.reject(n),
                            [3, 6]
                          );
                        case 6:
                          return [2];
                      }
                    });
                  });
                }),
                e.promise
              );
            }),
            t
          );
        })();
      function df(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n,
            r,
            i = this;
          return (0, lr.Jh)(this, function (o) {
            switch (o.label) {
              case 0:
                return (
                  t._s.Af(),
                  gr(
                    "FirestoreClient",
                    "Initializing OfflineComponentProvider"
                  ),
                  [4, t.getConfiguration()]
                );
              case 1:
                return (n = o.sent()), [4, e.initialize(n)];
              case 2:
                return (
                  o.sent(),
                  (r = n.Jl),
                  t.ff(function (n) {
                    r.isEqual(n) ||
                      ((r = n),
                      t._s.po(function () {
                        return (0, lr.mG)(i, void 0, void 0, function () {
                          return (0, lr.Jh)(this, function (t) {
                            switch (t.label) {
                              case 0:
                                return [4, Ku(e.bh, n)];
                              case 1:
                                return t.sent(), [2];
                            }
                          });
                        });
                      }));
                  }),
                  e.persistence.Po(function () {
                    return t.terminate();
                  }),
                  (t.mf = e),
                  [2]
                );
            }
          });
        });
      }
      function vf(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                return t._s.Af(), [4, gf(t)];
              case 1:
                return (
                  (n = i.sent()),
                  gr("FirestoreClient", "Initializing OnlineComponentProvider"),
                  [4, t.getConfiguration()]
                );
              case 2:
                return (r = i.sent()), [4, e.initialize(n, r)];
              case 3:
                return (
                  i.sent(),
                  t.ff(function (n) {
                    return t._s.po(function () {
                      return (function (t, e) {
                        return (0, lr.mG)(this, void 0, void 0, function () {
                          var n, r;
                          return (0, lr.Jh)(this, function (i) {
                            switch (i.label) {
                              case 0:
                                return (
                                  (n = Ir(t))._s.Af(),
                                  gr(
                                    "RemoteStore",
                                    "RemoteStore received new credentials"
                                  ),
                                  (r = Yc(n)),
                                  n.Nh.add(3),
                                  [4, Gc(n)]
                                );
                              case 1:
                                return (
                                  i.sent(),
                                  r && n.Oh.set("Unknown"),
                                  [4, n.Dh.n_(e)]
                                );
                              case 2:
                                return i.sent(), n.Nh.delete(3), [4, Bc(n)];
                              case 3:
                                return i.sent(), [2];
                            }
                          });
                        });
                      })(e.yl, n);
                    });
                  }),
                  (t.If = e),
                  [2]
                );
            }
          });
        });
      }
      function gf(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          return (0, lr.Jh)(this, function (e) {
            switch (e.label) {
              case 0:
                return t.mf
                  ? [3, 2]
                  : (gr(
                      "FirestoreClient",
                      "Using default OfflineComponentProvider"
                    ),
                    [4, df(t, new cl())]);
              case 1:
                e.sent(), (e.label = 2);
              case 2:
                return [2, t.mf];
            }
          });
        });
      }
      function mf(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          return (0, lr.Jh)(this, function (e) {
            switch (e.label) {
              case 0:
                return t.If
                  ? [3, 2]
                  : (gr(
                      "FirestoreClient",
                      "Using default OnlineComponentProvider"
                    ),
                    [4, vf(t, new fl())]);
              case 1:
                e.sent(), (e.label = 2);
              case 2:
                return [2, t.If];
            }
          });
        });
      }
      function yf(t) {
        return gf(t).then(function (t) {
          return t.persistence;
        });
      }
      function bf(t) {
        return gf(t).then(function (t) {
          return t.bh;
        });
      }
      function wf(t) {
        return mf(t).then(function (t) {
          return t.yl;
        });
      }
      function _f(t) {
        return mf(t).then(function (t) {
          return t._a;
        });
      }
      function If(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n;
          return (0, lr.Jh)(this, function (r) {
            switch (r.label) {
              case 0:
                return [4, mf(t)];
              case 1:
                return (
                  (e = r.sent()),
                  [
                    2,
                    (((n = e.gl).jh = Dh.bind(null, e._a)),
                    (n.Hh = Oh.bind(null, e._a)),
                    n),
                  ]
                );
            }
          });
        });
      }
      function Ef(t, e, n) {
        var r = this;
        void 0 === n && (n = {});
        var i = new na();
        return (
          t._s.Ps(function () {
            return (0, lr.mG)(r, void 0, void 0, function () {
              var r;
              return (0, lr.Jh)(this, function (o) {
                switch (o.label) {
                  case 0:
                    return (
                      (r = function (t, e, n, r, i) {
                        var o = new dl({
                            next: function (o) {
                              e.Ps(function () {
                                return gh(t, s);
                              });
                              var a = o.docs.has(n);
                              !a && o.fromCache
                                ? i.reject(
                                    new Pr(
                                      Ar.UNAVAILABLE,
                                      "Failed to get document because the client is offline."
                                    )
                                  )
                                : a && o.fromCache && r && "server" === r.source
                                ? i.reject(
                                    new Pr(
                                      Ar.UNAVAILABLE,
                                      'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)'
                                    )
                                  )
                                : i.resolve(o);
                            },
                            error: function (t) {
                              return i.reject(t);
                            },
                          }),
                          s = new wh(Ji(n.path), o, {
                            includeMetadataChanges: !0,
                            nl: !0,
                          });
                        return vh(t, s);
                      }),
                      [4, If(t)]
                    );
                  case 1:
                    return [2, r.apply(void 0, [o.sent(), t._s, e, n, i])];
                }
              });
            });
          }),
          i.promise
        );
      }
      function Tf(t, e, n) {
        var r = this;
        void 0 === n && (n = {});
        var i = new na();
        return (
          t._s.Ps(function () {
            return (0, lr.mG)(r, void 0, void 0, function () {
              var r;
              return (0, lr.Jh)(this, function (o) {
                switch (o.label) {
                  case 0:
                    return (
                      (r = function (t, e, n, r, i) {
                        var o = new dl({
                            next: function (n) {
                              e.Ps(function () {
                                return gh(t, s);
                              }),
                                n.fromCache && "server" === r.source
                                  ? i.reject(
                                      new Pr(
                                        Ar.UNAVAILABLE,
                                        'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)'
                                      )
                                    )
                                  : i.resolve(n);
                            },
                            error: function (t) {
                              return i.reject(t);
                            },
                          }),
                          s = new wh(n, o, {
                            includeMetadataChanges: !0,
                            nl: !0,
                          });
                        return vh(t, s);
                      }),
                      [4, If(t)]
                    );
                  case 1:
                    return [2, r.apply(void 0, [o.sent(), t._s, e, n, i])];
                }
              });
            });
          }),
          i.promise
        );
      }
      var Sf = (function () {
        function t() {
          var t = this;
          (this.Rf = Promise.resolve()),
            (this.Pf = []),
            (this.yf = !1),
            (this.gf = []),
            (this.Vf = null),
            (this.pf = !1),
            (this.bf = []),
            (this.Gu = new Mc(this, "async_queue_retry")),
            (this.vf = function () {
              var e = Oc();
              e &&
                gr(
                  "AsyncQueue",
                  "Visibility state changed to " + e.visibilityState
                ),
                t.Gu.qu();
            });
          var e = Oc();
          e &&
            "function" == typeof e.addEventListener &&
            e.addEventListener("visibilitychange", this.vf);
        }
        return (
          Object.defineProperty(t.prototype, "wf", {
            get: function () {
              return this.yf;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (t.prototype.Ps = function (t) {
            this.enqueue(t);
          }),
          (t.prototype.Tf = function (t) {
            this.Sf(), this.Df(t);
          }),
          (t.prototype.Ef = function () {
            if (!this.yf) {
              this.yf = !0;
              var t = Oc();
              t &&
                "function" == typeof t.removeEventListener &&
                t.removeEventListener("visibilitychange", this.vf);
            }
          }),
          (t.prototype.enqueue = function (t) {
            return (
              this.Sf(), this.yf ? new Promise(function (t) {}) : this.Df(t)
            );
          }),
          (t.prototype.po = function (t) {
            var e = this;
            this.Ps(function () {
              return e.Pf.push(t), e.Cf();
            });
          }),
          (t.prototype.Cf = function () {
            return (0, lr.mG)(this, void 0, void 0, function () {
              var t,
                e = this;
              return (0, lr.Jh)(this, function (n) {
                switch (n.label) {
                  case 0:
                    if (0 === this.Pf.length) return [3, 5];
                    n.label = 1;
                  case 1:
                    return n.trys.push([1, 3, , 4]), [4, this.Pf[0]()];
                  case 2:
                    return n.sent(), this.Pf.shift(), this.Gu.reset(), [3, 4];
                  case 3:
                    if (!ua((t = n.sent()))) throw t;
                    return (
                      gr(
                        "AsyncQueue",
                        "Operation failed with retryable error: " + t
                      ),
                      [3, 4]
                    );
                  case 4:
                    this.Pf.length > 0 &&
                      this.Gu.Lu(function () {
                        return e.Cf();
                      }),
                      (n.label = 5);
                  case 5:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.Df = function (t) {
            var e = this,
              n = this.Rf.then(function () {
                return (
                  (e.pf = !0),
                  t()
                    .catch(function (t) {
                      throw (
                        ((e.Vf = t),
                        (e.pf = !1),
                        mr(
                          "INTERNAL UNHANDLED ERROR: ",
                          (function (t) {
                            var e = t.message || "";
                            return (
                              t.stack &&
                                (e = t.stack.includes(t.message)
                                  ? t.stack
                                  : t.message + "\n" + t.stack),
                              e
                            );
                          })(t)
                        ),
                        t)
                      );
                    })
                    .then(function (t) {
                      return (e.pf = !1), t;
                    })
                );
              });
            return (this.Rf = n), n;
          }),
          (t.prototype.Tr = function (t, e, n) {
            var r = this;
            this.Sf(), this.bf.indexOf(t) > -1 && (e = 0);
            var i = pa.Ts(this, t, e, n, function (t) {
              return r.xf(t);
            });
            return this.gf.push(i), i;
          }),
          (t.prototype.Sf = function () {
            this.Vf && wr();
          }),
          (t.prototype.Af = function () {}),
          (t.prototype.Nf = function () {
            return (0, lr.mG)(this, void 0, void 0, function () {
              var t;
              return (0, lr.Jh)(this, function (e) {
                switch (e.label) {
                  case 0:
                    return [4, (t = this.Rf)];
                  case 1:
                    e.sent(), (e.label = 2);
                  case 2:
                    if (t !== this.Rf) return [3, 0];
                    e.label = 3;
                  case 3:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.$f = function (t) {
            for (var e = 0, n = this.gf; e < n.length; e++)
              if (n[e].fs === t) return !0;
            return !1;
          }),
          (t.prototype.Ff = function (t) {
            var e = this;
            return this.Nf().then(function () {
              e.gf.sort(function (t, e) {
                return t.ds - e.ds;
              });
              for (var n = 0, r = e.gf; n < r.length; n++) {
                var i = r[n];
                if ((i.Rs(), "all" !== t && i.fs === t)) break;
              }
              return e.Nf();
            });
          }),
          (t.prototype.Of = function (t) {
            this.bf.push(t);
          }),
          (t.prototype.xf = function (t) {
            var e = this.gf.indexOf(t);
            this.gf.splice(e, 1);
          }),
          t
        );
      })();
      function Cf(t) {
        return (function (t, e) {
          if ("object" != typeof t || null === t) return !1;
          for (
            var n = t, r = 0, i = ["next", "error", "complete"];
            r < i.length;
            r++
          ) {
            var o = i[r];
            if (o in n && "function" == typeof n[o]) return !0;
          }
          return !1;
        })(t);
      }
      var kf = (function () {
          function t() {
            (this.kf = {}),
              (this.Mf = new na()),
              (this.Lf = {
                taskState: "Running",
                totalBytes: 0,
                totalDocuments: 0,
                bytesLoaded: 0,
                documentsLoaded: 0,
              });
          }
          return (
            (t.prototype.onProgress = function (t, e, n) {
              this.kf = { next: t, error: e, complete: n };
            }),
            (t.prototype.catch = function (t) {
              return this.Mf.promise.catch(t);
            }),
            (t.prototype.then = function (t, e) {
              return this.Mf.promise.then(t, e);
            }),
            (t.prototype.ql = function (t) {
              this.Ul(t),
                this.kf.complete && this.kf.complete(),
                this.Mf.resolve(t);
            }),
            (t.prototype.Kl = function (t) {
              (this.Lf.taskState = "Error"),
                this.kf.next && this.kf.next(this.Lf),
                this.kf.error && this.kf.error(t),
                this.Mf.reject(t);
            }),
            (t.prototype.Ul = function (t) {
              (this.Lf = t), this.kf.next && this.kf.next(t);
            }),
            t
          );
        })(),
        Nf = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this, e, n) || this).Bf = new Sf()),
              (r.w_ = "name" in e ? e.name : "[DEFAULT]"),
              r
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.b_ = function () {
              return this.qf || Pf(this), this.qf.terminate();
            }),
            e
          );
        })(Al);
      function Af(t) {
        return t.qf || Pf(t), t.qf.df(), t.qf;
      }
      function Pf(t) {
        var e = t.p_(),
          n = (function (t, e, n) {
            return new fr(
              t,
              e,
              n.host,
              n.ssl,
              n.experimentalForceLongPolling,
              n.experimentalAutoDetectLongPolling
            );
          })(t.I_, t.w_, e);
        t.qf = new pf(t.m_, t.Bf, n);
      }
      function Df(t, e, n) {
        var r = this,
          i = new na();
        return t._s
          .enqueue(function () {
            return (0, lr.mG)(r, void 0, void 0, function () {
              var r;
              return (0, lr.Jh)(this, function (o) {
                switch (o.label) {
                  case 0:
                    return o.trys.push([0, 3, , 4]), [4, df(t, n)];
                  case 1:
                    return o.sent(), [4, vf(t, e)];
                  case 2:
                    return o.sent(), i.resolve(), [3, 4];
                  case 3:
                    if (
                      !(function (t) {
                        return "FirebaseError" === t.name
                          ? t.code === Ar.FAILED_PRECONDITION ||
                              t.code === Ar.UNIMPLEMENTED
                          : !(
                              "undefined" != typeof DOMException &&
                              t instanceof DOMException
                            ) ||
                              22 === t.code ||
                              20 === t.code ||
                              11 === t.code;
                      })((r = o.sent()))
                    )
                      throw r;
                    return (
                      console.warn(
                        "Error enabling offline persistence. Falling back to persistence disabled: " +
                          r
                      ),
                      i.reject(r),
                      [3, 4]
                    );
                  case 4:
                    return [2];
                }
              });
            });
          })
          .then(function () {
            return i.promise;
          });
      }
      function xf(t) {
        if (t.R_ || t.P_)
          throw new Pr(
            Ar.FAILED_PRECONDITION,
            "Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object."
          );
      }
      var Of = (function () {
          function t() {}
          return (
            (t.prototype.Uf = function (t, e) {
              switch ((void 0 === e && (e = "none"), si(t))) {
                case 0:
                  return null;
                case 1:
                  return t.booleanValue;
                case 2:
                  return Zr(t.integerValue || t.doubleValue);
                case 3:
                  return this.Qf(t.timestampValue);
                case 4:
                  return this.Kf(t, e);
                case 5:
                  return t.stringValue;
                case 6:
                  return this.Wf($r(t.bytesValue));
                case 7:
                  return this.jf(t.referenceValue);
                case 8:
                  return this.Gf(t.geoPointValue);
                case 9:
                  return this.zf(t.arrayValue, e);
                case 10:
                  return this.Hf(t.mapValue, e);
                default:
                  throw wr();
              }
            }),
            (t.prototype.Hf = function (t, e) {
              var n = this,
                r = {};
              return (
                Kr(t.fields || {}, function (t, i) {
                  r[t] = n.Uf(i, e);
                }),
                r
              );
            }),
            (t.prototype.Gf = function (t) {
              return new jl(Zr(t.latitude), Zr(t.longitude));
            }),
            (t.prototype.zf = function (t, e) {
              var n = this;
              return (t.values || []).map(function (t) {
                return n.Uf(t, e);
              });
            }),
            (t.prototype.Kf = function (t, e) {
              switch (e) {
                case "previous":
                  var n = ei(t);
                  return null == n ? null : this.Uf(n, e);
                case "estimate":
                  return this.Qf(ni(t));
                default:
                  return null;
              }
            }),
            (t.prototype.Qf = function (t) {
              var e = Xr(t);
              return new Ur(e.seconds, e.nanos);
            }),
            (t.prototype.Jf = function (t, e) {
              var n = Br.ot(t);
              _r(ea(n));
              var r = new pr(n.get(1), n.get(3)),
                i = new zr(n.Y(5));
              return (
                r.isEqual(e) ||
                  mr(
                    "Document " +
                      i +
                      " contains a document reference within a different database (" +
                      r.projectId +
                      "/" +
                      r.database +
                      ") which is not supported. It will be treated as a reference in the current database (" +
                      e.projectId +
                      "/" +
                      e.database +
                      ") instead."
                  ),
                i
              );
            }),
            t
          );
        })(),
        Rf = (function () {
          function t(t, e, n, r, i) {
            (this.Yf = t),
              (this.Xf = e),
              (this.S_ = n),
              (this.Zf = r),
              (this.v_ = i);
          }
          return (
            Object.defineProperty(t.prototype, "id", {
              get: function () {
                return this.S_.path.tt();
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "ref", {
              get: function () {
                return new Pl(this.Yf, this.v_, this.S_);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.exists = function () {
              return null !== this.Zf;
            }),
            (t.prototype.data = function () {
              if (this.Zf) {
                if (this.v_) {
                  var t = new Mf(this.Yf, this.Xf, this.S_, this.Zf, null);
                  return this.v_.fromFirestore(t);
                }
                return this.Xf.Uf(this.Zf.bt());
              }
            }),
            (t.prototype.get = function (t) {
              if (this.Zf) {
                var e = this.Zf.data().field(Lf("DocumentSnapshot.get", t));
                if (null !== e) return this.Xf.Uf(e);
              }
            }),
            t
          );
        })(),
        Mf = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.data = function () {
              return t.prototype.data.call(this);
            }),
            e
          );
        })(Rf);
      function Lf(t, e) {
        return "string" == typeof e
          ? uf(t, e)
          : e instanceof yl
          ? e.d_.f_
          : e.f_;
      }
      function jf(t) {
        if (Yi(t) && 0 === t.xt.length)
          throw new Pr(
            Ar.UNIMPLEMENTED,
            "limitToLast() queries require specifying at least one orderBy() clause"
          );
      }
      var Ff = function () {};
      function Uf(t) {
        for (var e = [], n = 1; n < arguments.length; n++)
          e[n - 1] = arguments[n];
        for (var r = 0, i = e; r < i.length; r++) {
          var o = i[r];
          t = o.td(t);
        }
        return t;
      }
      var Vf = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this) || this).ed = e),
              (i.nd = n),
              (i.sd = r),
              (i.type = "where"),
              i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.td = function (t) {
              var e = Wl(t.firestore),
                n = (function (t, e, n, r, i, o, s) {
                  var a;
                  if (i.ut()) {
                    if ("array-contains" === o || "array-contains-any" === o)
                      throw new Pr(
                        Ar.INVALID_ARGUMENT,
                        "Invalid Query. You can't perform '" +
                          o +
                          "' queries on FieldPath.documentId()."
                      );
                    if ("in" === o || "not-in" === o) {
                      Kf(s, o);
                      for (var u = [], c = 0, h = s; c < h.length; c++) {
                        var l = h[c];
                        u.push(Hf(r, t, l));
                      }
                      a = { arrayValue: { values: u } };
                    } else a = Hf(r, t, s);
                  } else
                    ("in" !== o &&
                      "not-in" !== o &&
                      "array-contains-any" !== o) ||
                      Kf(s, o),
                      (a = tf(n, "where", s, "in" === o || "not-in" === o));
                  var f = Di.create(i, o, a);
                  return (
                    (function (t, e) {
                      if (e.Ct()) {
                        var n = Zi(t);
                        if (null !== n && !n.isEqual(e.field))
                          throw new Pr(
                            Ar.INVALID_ARGUMENT,
                            "Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '" +
                              n.toString() +
                              "' and '" +
                              e.field.toString() +
                              "'"
                          );
                        var r = Xi(t);
                        null !== r && Jf(0, e.field, r);
                      }
                      var i = (function (t, e) {
                        for (var n = 0, r = t.filters; n < r.length; n++) {
                          var i = r[n];
                          if (e.indexOf(i.op) >= 0) return i.op;
                        }
                        return null;
                      })(
                        t,
                        (function (t) {
                          switch (t) {
                            case "!=":
                              return ["!=", "not-in"];
                            case "array-contains":
                              return [
                                "array-contains",
                                "array-contains-any",
                                "not-in",
                              ];
                            case "in":
                              return ["array-contains-any", "in", "not-in"];
                            case "array-contains-any":
                              return [
                                "array-contains",
                                "array-contains-any",
                                "in",
                                "not-in",
                              ];
                            case "not-in":
                              return [
                                "array-contains",
                                "array-contains-any",
                                "in",
                                "not-in",
                                "!=",
                              ];
                            default:
                              return [];
                          }
                        })(e.op)
                      );
                      if (null !== i)
                        throw i === e.op
                          ? new Pr(
                              Ar.INVALID_ARGUMENT,
                              "Invalid query. You cannot use more than one '" +
                                e.op.toString() +
                                "' filter."
                            )
                          : new Pr(
                              Ar.INVALID_ARGUMENT,
                              "Invalid query. You cannot use '" +
                                e.op.toString() +
                                "' filters with '" +
                                i.toString() +
                                "' filters."
                            );
                    })(t, f),
                    f
                  );
                })(t.C_, 0, e, t.firestore.I_, this.ed, this.nd, this.sd);
              return new Dl(
                t.firestore,
                t.v_,
                (function (t, e) {
                  var n = t.filters.concat([e]);
                  return new Hi(
                    t.path,
                    t.collectionGroup,
                    t.xt.slice(),
                    n,
                    t.limit,
                    t.limitType,
                    t.startAt,
                    t.endAt
                  );
                })(t.C_, n)
              );
            }),
            e
          );
        })(Ff),
        qf = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this) || this).ed = e),
              (r.rd = n),
              (r.type = "orderBy"),
              r
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.td = function (t) {
              var e = (function (t, e, n) {
                if (null !== t.startAt)
                  throw new Pr(
                    Ar.INVALID_ARGUMENT,
                    "Invalid query. You must not call startAt() or startAfter() before calling orderBy()."
                  );
                if (null !== t.endAt)
                  throw new Pr(
                    Ar.INVALID_ARGUMENT,
                    "Invalid query. You must not call endAt() or endBefore() before calling orderBy()."
                  );
                var r = new Bi(e, n);
                return (
                  (function (t, e) {
                    if (null === Xi(t)) {
                      var n = Zi(t);
                      null !== n && Jf(0, n, e.field);
                    }
                  })(t, r),
                  r
                );
              })(t.C_, this.ed, this.rd);
              return new Dl(
                t.firestore,
                t.v_,
                (function (t, e) {
                  var n = t.xt.concat([e]);
                  return new Hi(
                    t.path,
                    t.collectionGroup,
                    n,
                    t.filters.slice(),
                    t.limit,
                    t.limitType,
                    t.startAt,
                    t.endAt
                  );
                })(t.C_, e)
              );
            }),
            e
          );
        })(Ff),
        Bf = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this) || this).type = e), (i.od = n), (i.ad = r), i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.td = function (t) {
              return new Dl(t.firestore, t.v_, no(t.C_, this.od, this.ad));
            }),
            e
          );
        })(Ff),
        Gf = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this) || this).type = e), (i.ud = n), (i.hd = r), i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.td = function (t) {
              var e = zf(t, this.type, this.ud, this.hd);
              return new Dl(
                t.firestore,
                t.v_,
                (function (t, e) {
                  return new Hi(
                    t.path,
                    t.collectionGroup,
                    t.xt.slice(),
                    t.filters.slice(),
                    t.limit,
                    t.limitType,
                    e,
                    t.endAt
                  );
                })(t.C_, e)
              );
            }),
            e
          );
        })(Ff),
        Wf = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this) || this).type = e), (i.ud = n), (i.hd = r), i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.td = function (t) {
              var e = zf(t, this.type, this.ud, this.hd);
              return new Dl(
                t.firestore,
                t.v_,
                (function (t, e) {
                  return new Hi(
                    t.path,
                    t.collectionGroup,
                    t.xt.slice(),
                    t.filters.slice(),
                    t.limit,
                    t.limitType,
                    t.startAt,
                    e
                  );
                })(t.C_, e)
              );
            }),
            e
          );
        })(Ff);
      function zf(t, e, n, r) {
        if ((n[0] instanceof yl && (n[0] = n[0].d_), n[0] instanceof Rf))
          return (function (t, e, n, r, i) {
            if (!r)
              throw new Pr(
                Ar.NOT_FOUND,
                "Can't use a DocumentSnapshot that doesn't exist for " +
                  n +
                  "()."
              );
            for (var o = [], s = 0, a = to(t); s < a.length; s++) {
              var u = a[s];
              if (u.field.ut()) o.push(pi(e, r.key));
              else {
                var c = r.field(u.field);
                if (ti(c))
                  throw new Pr(
                    Ar.INVALID_ARGUMENT,
                    'Invalid query. You are trying to start or end a query using a document for which the field "' +
                      u.field +
                      '" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)'
                  );
                if (null === c) {
                  var h = u.field.rt();
                  throw new Pr(
                    Ar.INVALID_ARGUMENT,
                    "Invalid query. You are trying to start or end a query using a document for which the field '" +
                      h +
                      "' (used as the orderBy) does not exist."
                  );
                }
                o.push(c);
              }
            }
            return new Vi(o, i);
          })(t.C_, t.firestore.I_, e, n[0].Zf, r);
        var i = Wl(t.firestore);
        return (function (t, e, n, r, i, o) {
          var s = t.xt;
          if (i.length > s.length)
            throw new Pr(
              Ar.INVALID_ARGUMENT,
              "Too many arguments provided to " +
                r +
                "(). The number of arguments must be less than or equal to the number of orderBy() clauses"
            );
          for (var a = [], u = 0; u < i.length; u++) {
            var c = i[u];
            if (s[u].field.ut()) {
              if ("string" != typeof c)
                throw new Pr(
                  Ar.INVALID_ARGUMENT,
                  "Invalid query. Expected a string for document ID in " +
                    r +
                    "(), but got a " +
                    typeof c
                );
              if (!$i(t) && -1 !== c.indexOf("/"))
                throw new Pr(
                  Ar.INVALID_ARGUMENT,
                  "Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to " +
                    r +
                    "() must be a plain document ID, but '" +
                    c +
                    "' contains a slash."
                );
              var h = t.path.child(Br.ot(c));
              if (!zr.wt(h))
                throw new Pr(
                  Ar.INVALID_ARGUMENT,
                  "Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to " +
                    r +
                    "() must result in a valid document path, but '" +
                    h +
                    "' is not because it contains an odd number of segments."
                );
              var l = new zr(h);
              a.push(pi(e, l));
            } else {
              var f = tf(n, r, c);
              a.push(f);
            }
          }
          return new Vi(a, o);
        })(t.C_, t.firestore.I_, i, e, n, r);
      }
      function Hf(t, e, n) {
        if ((n instanceof yl && (n = n.d_), "string" == typeof n)) {
          if ("" === n)
            throw new Pr(
              Ar.INVALID_ARGUMENT,
              "Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string."
            );
          if (!$i(e) && -1 !== n.indexOf("/"))
            throw new Pr(
              Ar.INVALID_ARGUMENT,
              "Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '" +
                n +
                "' contains a '/' character."
            );
          var r = e.path.child(Br.ot(n));
          if (!zr.wt(r))
            throw new Pr(
              Ar.INVALID_ARGUMENT,
              "Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '" +
                r +
                "' is not because it has an odd number of segments (" +
                r.length +
                ")."
            );
          return pi(t, new zr(r));
        }
        if (n instanceof Pl) return pi(t, n.S_);
        throw new Pr(
          Ar.INVALID_ARGUMENT,
          "Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: " +
            Tl(n) +
            "."
        );
      }
      function Kf(t, e) {
        if (!Array.isArray(t) || 0 === t.length)
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Invalid Query. A non-empty array is required for '" +
              e.toString() +
              "' filters."
          );
        if (t.length > 10)
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Invalid Query. '" +
              e.toString() +
              "' filters support a maximum of 10 elements in the value array."
          );
      }
      function Jf(t, e, n) {
        if (!n.isEqual(e))
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '" +
              e.toString() +
              "' and so you must also use '" +
              e.toString() +
              "' as your first argument to orderBy(), but your first orderBy() is on field '" +
              n.toString() +
              "' instead."
          );
      }
      function Qf(t, e, n) {
        return t
          ? n && (n.merge || n.mergeFields)
            ? t.toFirestore(e, n)
            : t.toFirestore(e)
          : e;
      }
      var Yf = (function (t) {
          function e(e) {
            var n = this;
            return ((n = t.call(this) || this).firestore = e), n;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.Wf = function (t) {
              return new Dr(t);
            }),
            (e.prototype.jf = function (t) {
              var e = this.Jf(t, this.firestore.I_);
              return new Pl(this.firestore, null, e);
            }),
            e
          );
        })(Of),
        Xf = (function () {
          function t(t, e) {
            (this.hasPendingWrites = t), (this.fromCache = e);
          }
          return (
            (t.prototype.isEqual = function (t) {
              return (
                this.hasPendingWrites === t.hasPendingWrites &&
                this.fromCache === t.fromCache
              );
            }),
            t
          );
        })(),
        Zf = (function (t) {
          function e(e, n, r, i, o, s) {
            var a = this;
            return (
              ((a = t.call(this, e, n, r, i, s) || this).Yf = e),
              (a.ld = e),
              (a.metadata = o),
              a
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.exists = function () {
              return t.prototype.exists.call(this);
            }),
            (e.prototype.data = function (t) {
              if ((void 0 === t && (t = {}), this.Zf)) {
                if (this.v_) {
                  var e = new $f(
                    this.Yf,
                    this.Xf,
                    this.S_,
                    this.Zf,
                    this.metadata,
                    null
                  );
                  return this.v_.fromFirestore(e, t);
                }
                return this.Xf.Uf(this.Zf.bt(), t.serverTimestamps);
              }
            }),
            (e.prototype.get = function (t, e) {
              if ((void 0 === e && (e = {}), this.Zf)) {
                var n = this.Zf.data().field(Lf("DocumentSnapshot.get", t));
                if (null !== n) return this.Xf.Uf(n, e.serverTimestamps);
              }
            }),
            e
          );
        })(Rf),
        $f = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.data = function (e) {
              return void 0 === e && (e = {}), t.prototype.data.call(this, e);
            }),
            e
          );
        })(Zf),
        tp = (function () {
          function t(t, e, n, r) {
            (this.Yf = t),
              (this.Xf = e),
              (this._d = r),
              (this.metadata = new Xf(r.hasPendingWrites, r.fromCache)),
              (this.query = n);
          }
          return (
            Object.defineProperty(t.prototype, "docs", {
              get: function () {
                var t = [];
                return (
                  this.forEach(function (e) {
                    return t.push(e);
                  }),
                  t
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "size", {
              get: function () {
                return this._d.docs.size;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "empty", {
              get: function () {
                return 0 === this.size;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.forEach = function (t, e) {
              var n = this;
              this._d.docs.forEach(function (r) {
                t.call(
                  e,
                  new $f(
                    n.Yf,
                    n.Xf,
                    r.key,
                    r,
                    new Xf(n._d.De.has(r.key), n._d.fromCache),
                    n.query.v_
                  )
                );
              });
            }),
            (t.prototype.docChanges = function (t) {
              void 0 === t && (t = {});
              var e = !!t.includeMetadataChanges;
              if (e && this._d.xe)
                throw new Pr(
                  Ar.INVALID_ARGUMENT,
                  "To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot()."
                );
              return (
                (this.fd && this.dd === e) ||
                  ((this.fd = (function (t, e) {
                    if (t._d.Se.et()) {
                      var n = 0;
                      return t._d.docChanges.map(function (e) {
                        var r = new $f(
                          t.Yf,
                          t.Xf,
                          e.doc.key,
                          e.doc,
                          new Xf(t._d.De.has(e.doc.key), t._d.fromCache),
                          t.query.v_
                        );
                        return (
                          e.doc,
                          { type: "added", doc: r, oldIndex: -1, newIndex: n++ }
                        );
                      });
                    }
                    var r = t._d.Se;
                    return t._d.docChanges
                      .filter(function (t) {
                        return e || 3 !== t.type;
                      })
                      .map(function (e) {
                        var n = new $f(
                            t.Yf,
                            t.Xf,
                            e.doc.key,
                            e.doc,
                            new Xf(t._d.De.has(e.doc.key), t._d.fromCache),
                            t.query.v_
                          ),
                          i = -1,
                          o = -1;
                        return (
                          0 !== e.type &&
                            ((i = r.indexOf(e.doc.key)),
                            (r = r.delete(e.doc.key))),
                          1 !== e.type &&
                            (o = (r = r.add(e.doc)).indexOf(e.doc.key)),
                          { type: ep(e.type), doc: n, oldIndex: i, newIndex: o }
                        );
                      });
                  })(this, e)),
                  (this.dd = e)),
                this.fd
              );
            }),
            t
          );
        })();
      function ep(t) {
        switch (t) {
          case 0:
            return "added";
          case 2:
          case 3:
            return "modified";
          case 1:
            return "removed";
          default:
            return wr();
        }
      }
      function np(t, e) {
        return t instanceof Zf && e instanceof Zf
          ? t.Yf === e.Yf &&
              t.S_.isEqual(e.S_) &&
              (null === t.Zf ? null === e.Zf : t.Zf.isEqual(e.Zf)) &&
              t.v_ === e.v_
          : t instanceof tp &&
              e instanceof tp &&
              t.Yf === e.Yf &&
              Ll(t.query, e.query) &&
              t.metadata.isEqual(e.metadata) &&
              t._d.isEqual(e._d);
      }
      var rp = (function (t) {
        function e(e) {
          var n = this;
          return ((n = t.call(this) || this).firestore = e), n;
        }
        return (
          (0, lr.ZT)(e, t),
          (e.prototype.Wf = function (t) {
            return new Dr(t);
          }),
          (e.prototype.jf = function (t) {
            var e = this.Jf(t, this.firestore.I_);
            return new Pl(this.firestore, null, e);
          }),
          e
        );
      })(Of);
      function ip(t, e, n) {
        for (var r = [], i = 3; i < arguments.length; i++)
          r[i - 3] = arguments[i];
        t = Sl(t, Pl);
        var o = Sl(t.firestore, Nf),
          s = Wl(o);
        return (
          e instanceof yl && (e = e.d_),
          sp(o, [
            ("string" == typeof e || e instanceof gl
              ? $l(s, "updateDoc", t.S_, e, n, r)
              : Zl(s, "updateDoc", t.S_, e)
            ).F_(t.S_, No.exists(!0)),
          ])
        );
      }
      function op(t) {
        for (var e, n, r, i = [], o = 1; o < arguments.length; o++)
          i[o - 1] = arguments[o];
        t instanceof yl && (t = t.d_);
        var s = { includeMetadataChanges: !1 },
          a = 0;
        "object" != typeof i[a] || Cf(i[a]) || ((s = i[a]), a++);
        var u,
          c,
          h,
          l = { includeMetadataChanges: s.includeMetadataChanges };
        if (Cf(i[a])) {
          var f = i[a];
          (i[a] = null === (e = f.next) || void 0 === e ? void 0 : e.bind(f)),
            (i[a + 1] =
              null === (n = f.error) || void 0 === n ? void 0 : n.bind(f)),
            (i[a + 2] =
              null === (r = f.complete) || void 0 === r ? void 0 : r.bind(f));
        }
        if (t instanceof Pl)
          (c = Sl(t.firestore, Nf)),
            (h = Ji(t.S_.path)),
            (u = {
              next: function (e) {
                i[a] && i[a](ap(c, t, e));
              },
              error: i[a + 1],
              complete: i[a + 2],
            });
        else {
          var p = Sl(t, Dl);
          (c = Sl(p.firestore, Nf)), (h = p.C_);
          var d = new rp(c);
          (u = {
            next: function (t) {
              i[a] && i[a](new tp(c, d, p, t));
            },
            error: i[a + 1],
            complete: i[a + 2],
          }),
            jf(t.C_);
        }
        return (function (t, e, n, r) {
          var i = this,
            o = new dl(r),
            s = new wh(e, o, n);
          return (
            t._s.Ps(function () {
              return (0, lr.mG)(i, void 0, void 0, function () {
                var e;
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return (e = vh), [4, If(t)];
                    case 1:
                      return [2, e.apply(void 0, [n.sent(), s])];
                  }
                });
              });
            }),
            function () {
              o.i_(),
                t._s.Ps(function () {
                  return (0, lr.mG)(i, void 0, void 0, function () {
                    var e;
                    return (0, lr.Jh)(this, function (n) {
                      switch (n.label) {
                        case 0:
                          return (e = gh), [4, If(t)];
                        case 1:
                          return [2, e.apply(void 0, [n.sent(), s])];
                      }
                    });
                  });
                });
            }
          );
        })(Af(c), h, l, u);
      }
      function sp(t, e) {
        return (function (t, e) {
          var n = this,
            r = new na();
          return (
            t._s.Ps(function () {
              return (0, lr.mG)(n, void 0, void 0, function () {
                var n;
                return (0, lr.Jh)(this, function (i) {
                  switch (i.label) {
                    case 0:
                      return (n = Rh), [4, _f(t)];
                    case 1:
                      return [2, n.apply(void 0, [i.sent(), e, r])];
                  }
                });
              });
            }),
            r.promise
          );
        })(Af(t), e);
      }
      function ap(t, e, n) {
        var r = n.docs.get(e.S_),
          i = new rp(t);
        return new Zf(
          t,
          i,
          e.S_,
          r,
          new Xf(n.hasPendingWrites, n.fromCache),
          e.v_
        );
      }
      var up = (function () {
        function t(t, e) {
          (this.Yf = t),
            (this.wd = e),
            (this.Ed = []),
            (this.Td = !1),
            (this.Id = Wl(t));
        }
        return (
          (t.prototype.set = function (t, e, n) {
            this.md();
            var r = cp(t, this.Yf),
              i = Qf(r.v_, e, n),
              o = zl(this.Id, "WriteBatch.set", r.S_, i, null !== r.v_, n);
            return this.Ed.push(o.F_(r.S_, No.Kt())), this;
          }),
          (t.prototype.update = function (t, e, n) {
            for (var r = [], i = 3; i < arguments.length; i++)
              r[i - 3] = arguments[i];
            this.md();
            var o,
              s = cp(t, this.Yf);
            return (
              e instanceof yl && (e = e.d_),
              (o =
                "string" == typeof e || e instanceof gl
                  ? $l(this.Id, "WriteBatch.update", s.S_, e, n, r)
                  : Zl(this.Id, "WriteBatch.update", s.S_, e)),
              this.Ed.push(o.F_(s.S_, No.exists(!0))),
              this
            );
          }),
          (t.prototype.delete = function (t) {
            this.md();
            var e = cp(t, this.Yf);
            return (this.Ed = this.Ed.concat(new Wo(e.S_, No.Kt()))), this;
          }),
          (t.prototype.commit = function () {
            return (
              this.md(),
              (this.Td = !0),
              this.Ed.length > 0 ? this.wd(this.Ed) : Promise.resolve()
            );
          }),
          (t.prototype.md = function () {
            if (this.Td)
              throw new Pr(
                Ar.FAILED_PRECONDITION,
                "A write batch can no longer be used after commit() has been called."
              );
          }),
          t
        );
      })();
      function cp(t, e) {
        if ((t instanceof yl && (t = t.d_), t.firestore !== e))
          throw new Pr(
            Ar.INVALID_ARGUMENT,
            "Provided document reference is from a different Firestore instance."
          );
        return t;
      }
      var hp = (function (t) {
        function e(e, n) {
          var r = this;
          return ((r = t.call(this, e, n) || this).Yf = e), r;
        }
        return (
          (0, lr.ZT)(e, t),
          (e.prototype.get = function (e) {
            var n = this,
              r = cp(e, this.Yf),
              i = new rp(this.Yf);
            return t.prototype.get.call(this, e).then(function (t) {
              return new Zf(n.Yf, i, r.S_, t.Zf, new Xf(!1, !1), r.v_);
            });
          }),
          e
        );
      })(
        (function () {
          function t(t, e) {
            (this.Yf = t), (this.Ad = e), (this.Id = Wl(t));
          }
          return (
            (t.prototype.get = function (t) {
              var e = this,
                n = cp(t, this.Yf),
                r = new Yf(this.Yf);
              return this.Ad.ef([n.S_]).then(function (t) {
                if (!t || 1 !== t.length) return wr();
                var i = t[0];
                if (i instanceof Ti) return new Rf(e.Yf, r, n.S_, null, n.v_);
                if (i instanceof Ei) return new Rf(e.Yf, r, i.key, i, n.v_);
                throw wr();
              });
            }),
            (t.prototype.set = function (t, e, n) {
              var r = cp(t, this.Yf),
                i = Qf(r.v_, e, n),
                o = zl(this.Id, "Transaction.set", r.S_, i, null !== r.v_, n);
              return this.Ad.set(r.S_, o), this;
            }),
            (t.prototype.update = function (t, e, n) {
              for (var r = [], i = 3; i < arguments.length; i++)
                r[i - 3] = arguments[i];
              var o,
                s = cp(t, this.Yf);
              return (
                e instanceof yl && (e = e.d_),
                (o =
                  "string" == typeof e || e instanceof gl
                    ? $l(this.Id, "Transaction.update", s.S_, e, n, r)
                    : Zl(this.Id, "Transaction.update", s.S_, e)),
                this.Ad.update(s.S_, o),
                this
              );
            }),
            (t.prototype.delete = function (t) {
              var e = cp(t, this.Yf);
              return this.Ad.delete(e.S_), this;
            }),
            t
          );
        })()
      );
      function lp() {
        if ("undefined" == typeof Uint8Array)
          throw new Pr(
            Ar.UNIMPLEMENTED,
            "Uint8Arrays are not available in this environment."
          );
      }
      function fp() {
        if ("undefined" == typeof atob)
          throw new Pr(
            Ar.UNIMPLEMENTED,
            "Blobs are unavailable in Firestore in this environment."
          );
      }
      var pp = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.fromBase64String = function (t) {
              return fp(), new e(Dr.fromBase64String(t));
            }),
            (e.fromUint8Array = function (t) {
              return lp(), new e(Dr.fromUint8Array(t));
            }),
            (e.prototype.toBase64 = function () {
              return fp(), this.d_.toBase64();
            }),
            (e.prototype.toUint8Array = function () {
              return lp(), this.d_.toUint8Array();
            }),
            (e.prototype.isEqual = function (t) {
              return this.d_.isEqual(t.d_);
            }),
            (e.prototype.toString = function () {
              return "Blob(base64: " + this.toBase64() + ")";
            }),
            e
          );
        })(yl),
        dp = (function () {
          function t() {}
          return (
            (t.prototype.enableIndexedDbPersistence = function (t, e) {
              return (function (t, e) {
                xf((t = Sl(t, Nf)));
                var n = Af(t),
                  r = t.p_(),
                  i = new fl();
                return Df(
                  n,
                  i,
                  new hl(
                    i,
                    r.cacheSizeBytes,
                    null == e ? void 0 : e.forceOwnership
                  )
                );
              })(t.d_, { forceOwnership: e });
            }),
            (t.prototype.enableMultiTabIndexedDbPersistence = function (t) {
              return (function (t) {
                xf((t = Sl(t, Nf)));
                var e = Af(t),
                  n = t.p_(),
                  r = new fl();
                return Df(e, r, new ll(r, n.cacheSizeBytes));
              })(t.d_);
            }),
            (t.prototype.clearIndexedDbPersistence = function (t) {
              return (function (t) {
                var e = this;
                if (t.R_ && !t.P_)
                  throw new Pr(
                    Ar.FAILED_PRECONDITION,
                    "Persistence can only be cleared before a Firestore instance is initialized or after it is terminated."
                  );
                var n = new na();
                return (
                  t.Bf.Tf(function () {
                    return (0, lr.mG)(e, void 0, void 0, function () {
                      var e;
                      return (0, lr.Jh)(this, function (r) {
                        switch (r.label) {
                          case 0:
                            return (
                              r.trys.push([0, 2, , 3]),
                              [
                                4,
                                (function (t) {
                                  return (0, lr.mG)(
                                    this,
                                    void 0,
                                    void 0,
                                    function () {
                                      var e;
                                      return (0, lr.Jh)(this, function (n) {
                                        switch (n.label) {
                                          case 0:
                                            return oa.Kn()
                                              ? ((e = t + "main"),
                                                [4, oa.delete(e)])
                                              : [2, Promise.resolve()];
                                          case 1:
                                            return n.sent(), [2];
                                        }
                                      });
                                    }
                                  );
                                })(Vu(t.I_, t.w_)),
                              ]
                            );
                          case 1:
                            return r.sent(), n.resolve(), [3, 3];
                          case 2:
                            return (e = r.sent()), n.reject(e), [3, 3];
                          case 3:
                            return [2];
                        }
                      });
                    });
                  }),
                  n.promise
                );
              })(t.d_);
            }),
            t
          );
        })(),
        vp = (function (t) {
          function e(e, n, r) {
            var i = this;
            return (
              ((i = t.call(this, n) || this).Rd = r),
              (i.INTERNAL = {
                delete: function () {
                  return i.terminate();
                },
              }),
              e instanceof pr || (i.Pd = e),
              i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            Object.defineProperty(e.prototype, "I_", {
              get: function () {
                return this.d_.I_;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.settings = function (t) {
              t.merge &&
                delete (t = Object.assign(Object.assign({}, this.d_.V_()), t))
                  .merge,
                this.d_.g_(t);
            }),
            (e.prototype.useEmulator = function (t, e) {
              !(function (t, e, n) {
                var r = (t = Sl(t, Al)).V_();
                "firestore.googleapis.com" !== r.host &&
                  r.host !== e &&
                  yr(
                    "Host has been set in both settings() and useEmulator(), emulator host will be used"
                  ),
                  t.g_(
                    Object.assign(Object.assign({}, r), {
                      host: e + ":" + n,
                      ssl: !1,
                    })
                  );
              })(this.d_, t, e);
            }),
            (e.prototype.enableNetwork = function () {
              return (function (t) {
                var e = this;
                return t._s.enqueue(function () {
                  return (0, lr.mG)(e, void 0, void 0, function () {
                    var e, n;
                    return (0, lr.Jh)(this, function (r) {
                      switch (r.label) {
                        case 0:
                          return [4, yf(t)];
                        case 1:
                          return (e = r.sent()), [4, wf(t)];
                        case 2:
                          return (
                            (n = r.sent()),
                            [
                              2,
                              (e.yo(!0),
                              (function (t) {
                                var e = Ir(t);
                                return e.Nh.delete(0), Bc(e);
                              })(n)),
                            ]
                          );
                      }
                    });
                  });
                });
              })(Af(Sl(this.d_, Nf)));
            }),
            (e.prototype.disableNetwork = function () {
              return (function (t) {
                var e = this;
                return t._s.enqueue(function () {
                  return (0, lr.mG)(e, void 0, void 0, function () {
                    var e, n;
                    return (0, lr.Jh)(this, function (r) {
                      switch (r.label) {
                        case 0:
                          return [4, yf(t)];
                        case 1:
                          return (e = r.sent()), [4, wf(t)];
                        case 2:
                          return (
                            (n = r.sent()),
                            [
                              2,
                              (e.yo(!1),
                              (function (t) {
                                return (0, lr.mG)(
                                  this,
                                  void 0,
                                  void 0,
                                  function () {
                                    var e;
                                    return (0, lr.Jh)(this, function (n) {
                                      switch (n.label) {
                                        case 0:
                                          return (
                                            (e = Ir(t)).Nh.add(0), [4, Gc(e)]
                                          );
                                        case 1:
                                          return (
                                            n.sent(), e.Oh.set("Offline"), [2]
                                          );
                                      }
                                    });
                                  }
                                );
                              })(n)),
                            ]
                          );
                      }
                    });
                  });
                });
              })(Af(Sl(this.d_, Nf)));
            }),
            (e.prototype.enablePersistence = function (t) {
              var e = !1,
                n = !1;
              return (
                t &&
                  _l(
                    "synchronizeTabs",
                    (e = !!t.synchronizeTabs),
                    "experimentalForceOwningTab",
                    (n = !!t.experimentalForceOwningTab)
                  ),
                e
                  ? this.Rd.enableMultiTabIndexedDbPersistence(this)
                  : this.Rd.enableIndexedDbPersistence(this, n)
              );
            }),
            (e.prototype.clearPersistence = function () {
              return this.Rd.clearIndexedDbPersistence(this);
            }),
            (e.prototype.terminate = function () {
              return (
                this.Pd &&
                  (this.Pd._removeServiceInstance("firestore"),
                  this.Pd._removeServiceInstance("firestore-exp")),
                this.d_._delete()
              );
            }),
            (e.prototype.waitForPendingWrites = function () {
              return (function (t) {
                var e = this,
                  n = new na();
                return (
                  t._s.Ps(function () {
                    return (0, lr.mG)(e, void 0, void 0, function () {
                      var e;
                      return (0, lr.Jh)(this, function (r) {
                        switch (r.label) {
                          case 0:
                            return (e = Vh), [4, _f(t)];
                          case 1:
                            return [2, e.apply(void 0, [r.sent(), n])];
                        }
                      });
                    });
                  }),
                  n.promise
                );
              })(Af(Sl(this.d_, Nf)));
            }),
            (e.prototype.onSnapshotsInSync = function (t) {
              return (function (t, e) {
                return (function (t, e) {
                  var n = this,
                    r = new dl(e);
                  return (
                    t._s.Ps(function () {
                      return (0, lr.mG)(n, void 0, void 0, function () {
                        var e;
                        return (0, lr.Jh)(this, function (n) {
                          switch (n.label) {
                            case 0:
                              return (
                                (e = function (t, e) {
                                  Ir(t).Wh.add(e), e.next();
                                }),
                                [4, If(t)]
                              );
                            case 1:
                              return [2, e.apply(void 0, [n.sent(), r])];
                          }
                        });
                      });
                    }),
                    function () {
                      r.i_(),
                        t._s.Ps(function () {
                          return (0, lr.mG)(n, void 0, void 0, function () {
                            var e;
                            return (0, lr.Jh)(this, function (n) {
                              switch (n.label) {
                                case 0:
                                  return (
                                    (e = function (t, e) {
                                      Ir(t).Wh.delete(e);
                                    }),
                                    [4, If(t)]
                                  );
                                case 1:
                                  return [2, e.apply(void 0, [n.sent(), r])];
                              }
                            });
                          });
                        });
                    }
                  );
                })(Af((t = Sl(t, Nf))), Cf(e) ? e : { next: e });
              })(this.d_, t);
            }),
            Object.defineProperty(e.prototype, "app", {
              get: function () {
                if (!this.Pd)
                  throw new Pr(
                    Ar.FAILED_PRECONDITION,
                    "Firestore was not initialized using the Firebase SDK. 'app' is not available"
                  );
                return this.Pd;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.collection = function (t) {
              try {
                return new Ap(this, Ol(this.d_, t));
              } catch (t) {
                throw _p(t, "collection()", "Firestore.collection()");
              }
            }),
            (e.prototype.doc = function (t) {
              try {
                return new wp(this, Rl(this.d_, t));
              } catch (t) {
                throw _p(t, "doc()", "Firestore.doc()");
              }
            }),
            (e.prototype.collectionGroup = function (t) {
              try {
                return new Cp(
                  this,
                  (function (t, e) {
                    if (
                      ((t = Sl(t, Al)),
                      bl("collectionGroup", "collection id", e),
                      e.indexOf("/") >= 0)
                    )
                      throw new Pr(
                        Ar.INVALID_ARGUMENT,
                        "Invalid collection ID '" +
                          e +
                          "' passed to function collectionGroup(). Collection IDs must not contain '/'."
                      );
                    return new Dl(
                      t,
                      null,
                      (function (t) {
                        return new Hi(Br.ct(), t);
                      })(e)
                    );
                  })(this.d_, t)
                );
              } catch (t) {
                throw _p(t, "collectionGroup()", "Firestore.collectionGroup()");
              }
            }),
            (e.prototype.runTransaction = function (t) {
              var e = this;
              return (function (t, e) {
                return (function (t, e) {
                  var n = this,
                    r = new na();
                  return (
                    t._s.Ps(function () {
                      return (0, lr.mG)(n, void 0, void 0, function () {
                        var n;
                        return (0, lr.Jh)(this, function (i) {
                          switch (i.label) {
                            case 0:
                              return [
                                4,
                                (function (t) {
                                  return mf(t).then(function (t) {
                                    return t.Sh;
                                  });
                                })(t),
                              ];
                            case 1:
                              return (
                                (n = i.sent()), new ff(t._s, n, e, r).run(), [2]
                              );
                          }
                        });
                      });
                    }),
                    r.promise
                  );
                })(Af(t), function (n) {
                  return e(new hp(t, n));
                });
              })(this.d_, function (n) {
                return t(new mp(e, n));
              });
            }),
            (e.prototype.batch = function () {
              var t = this;
              return (
                Af(this.d_),
                new yp(
                  new up(this.d_, function (e) {
                    return sp(t.d_, e);
                  })
                )
              );
            }),
            (e.prototype.loadBundle = function (t) {
              throw new Pr(
                Ar.FAILED_PRECONDITION,
                '"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?'
              );
            }),
            (e.prototype.namedQuery = function (t) {
              throw new Pr(
                Ar.FAILED_PRECONDITION,
                '"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?'
              );
            }),
            e
          );
        })(yl),
        gp = (function (t) {
          function e(e) {
            var n = this;
            return ((n = t.call(this) || this).firestore = e), n;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.Wf = function (t) {
              return new pp(new Dr(t));
            }),
            (e.prototype.jf = function (t) {
              var e = this.Jf(t, this.firestore.I_);
              return wp.yd(e, this.firestore, null);
            }),
            e
          );
        })(Of),
        mp = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this, n) || this).Yf = e), (r.Xf = new gp(e)), r
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.get = function (t) {
              var e = this,
                n = Pp(t);
              return this.d_.get(n).then(function (t) {
                return new Tp(
                  e.Yf,
                  new Zf(e.Yf.d_, e.Xf, t.S_, t.Zf, t.metadata, n.v_)
                );
              });
            }),
            (e.prototype.set = function (t, e, n) {
              var r = Pp(t);
              return (
                n
                  ? (wl("Transaction.set", n), this.d_.set(r, e, n))
                  : this.d_.set(r, e),
                this
              );
            }),
            (e.prototype.update = function (t, e, n) {
              for (var r, i = [], o = 3; o < arguments.length; o++)
                i[o - 3] = arguments[o];
              var s = Pp(t);
              return (
                2 === arguments.length
                  ? this.d_.update(s, e)
                  : (r = this.d_).update.apply(r, (0, lr.ev)([s, e, n], i)),
                this
              );
            }),
            (e.prototype.delete = function (t) {
              var e = Pp(t);
              return this.d_.delete(e), this;
            }),
            e
          );
        })(yl),
        yp = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.set = function (t, e, n) {
              var r = Pp(t);
              return (
                n
                  ? (wl("WriteBatch.set", n), this.d_.set(r, e, n))
                  : this.d_.set(r, e),
                this
              );
            }),
            (e.prototype.update = function (t, e, n) {
              for (var r, i = [], o = 3; o < arguments.length; o++)
                i[o - 3] = arguments[o];
              var s = Pp(t);
              return (
                2 === arguments.length
                  ? this.d_.update(s, e)
                  : (r = this.d_).update.apply(r, (0, lr.ev)([s, e, n], i)),
                this
              );
            }),
            (e.prototype.delete = function (t) {
              var e = Pp(t);
              return this.d_.delete(e), this;
            }),
            (e.prototype.commit = function () {
              return this.d_.commit();
            }),
            e
          );
        })(yl),
        bp = (function (t) {
          function e(e, n, r) {
            var i = this;
            return ((i = t.call(this, r) || this).Yf = e), (i.Xf = n), i;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.fromFirestore = function (t, e) {
              var n = new $f(this.Yf.d_, this.Xf, t.S_, t.Zf, t.metadata, null);
              return this.d_.fromFirestore(
                new Sp(this.Yf, n),
                null != e ? e : {}
              );
            }),
            (e.prototype.toFirestore = function (t, e) {
              return e ? this.d_.toFirestore(t, e) : this.d_.toFirestore(t);
            }),
            (e.gd = function (t, n) {
              var r = e.Vd,
                i = r.get(t);
              i || ((i = new WeakMap()), r.set(t, i));
              var o = i.get(n);
              return o || ((o = new e(t, new gp(t), n)), i.set(n, o)), o;
            }),
            e
          );
        })(yl);
      bp.Vd = new WeakMap();
      var wp = (function (t) {
        function e(e, n) {
          var r = this;
          return (
            ((r = t.call(this, n) || this).firestore = e), (r.Xf = new gp(e)), r
          );
        }
        return (
          (0, lr.ZT)(e, t),
          (e.pd = function (t, n, r) {
            if (t.length % 2 != 0)
              throw new Pr(
                Ar.INVALID_ARGUMENT,
                "Invalid document reference. Document references must have an even number of segments, but " +
                  t.rt() +
                  " has " +
                  t.length
              );
            return new e(n, new Pl(n.d_, r, new zr(t)));
          }),
          (e.yd = function (t, n, r) {
            return new e(n, new Pl(n.d_, r, t));
          }),
          Object.defineProperty(e.prototype, "id", {
            get: function () {
              return this.d_.id;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "parent", {
            get: function () {
              return new Ap(this.firestore, this.d_.parent);
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(e.prototype, "path", {
            get: function () {
              return this.d_.path;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (e.prototype.collection = function (t) {
            try {
              return new Ap(this.firestore, Ol(this.d_, t));
            } catch (t) {
              throw _p(t, "collection()", "DocumentReference.collection()");
            }
          }),
          (e.prototype.isEqual = function (t) {
            return (
              t instanceof yl && (t = t.d_), t instanceof Pl && Ml(this.d_, t)
            );
          }),
          (e.prototype.set = function (t, e) {
            e = wl("DocumentReference.set", e);
            try {
              return (function (t, e, n) {
                t = Sl(t, Pl);
                var r = Sl(t.firestore, Nf),
                  i = Qf(t.v_, e, n);
                return sp(r, [
                  zl(Wl(r), "setDoc", t.S_, i, null !== t.v_, n).F_(
                    t.S_,
                    No.Kt()
                  ),
                ]);
              })(this.d_, t, e);
            } catch (t) {
              throw _p(t, "setDoc()", "DocumentReference.set()");
            }
          }),
          (e.prototype.update = function (t, e) {
            for (var n = [], r = 2; r < arguments.length; r++)
              n[r - 2] = arguments[r];
            try {
              return 1 === arguments.length
                ? ip(this.d_, t)
                : ip.apply(void 0, (0, lr.ev)([this.d_, t, e], n));
            } catch (t) {
              throw _p(t, "updateDoc()", "DocumentReference.update()");
            }
          }),
          (e.prototype.delete = function () {
            return sp(Sl((t = this.d_).firestore, Nf), [new Wo(t.S_, No.Kt())]);
            var t;
          }),
          (e.prototype.onSnapshot = function () {
            for (var t = this, e = [], n = 0; n < arguments.length; n++)
              e[n] = arguments[n];
            var r = Ip(e),
              i = Ep(e, function (e) {
                return new Tp(
                  t.firestore,
                  new Zf(t.firestore.d_, t.Xf, e.S_, e.Zf, e.metadata, t.d_.v_)
                );
              });
            return op(this.d_, r, i);
          }),
          (e.prototype.get = function (t) {
            var e = this;
            return (
              "cache" === (null == t ? void 0 : t.source)
                ? (function (t) {
                    t = Sl(t, Pl);
                    var e = Sl(t.firestore, Nf),
                      n = Af(e),
                      r = new rp(e);
                    return (function (t, e) {
                      var n = this,
                        r = new na();
                      return (
                        t._s.Ps(function () {
                          return (0, lr.mG)(n, void 0, void 0, function () {
                            var n;
                            return (0, lr.Jh)(this, function (i) {
                              switch (i.label) {
                                case 0:
                                  return (
                                    (n = function (t, e, n) {
                                      return (0, lr.mG)(
                                        this,
                                        void 0,
                                        void 0,
                                        function () {
                                          var r, i;
                                          return (0, lr.Jh)(this, function (o) {
                                            switch (o.label) {
                                              case 0:
                                                return (
                                                  o.trys.push([0, 2, , 3]),
                                                  [
                                                    4,
                                                    (function (t, e) {
                                                      var n = Ir(t);
                                                      return n.persistence.runTransaction(
                                                        "read document",
                                                        "readonly",
                                                        function (t) {
                                                          return n.Tc.Ho(t, e);
                                                        }
                                                      );
                                                    })(t, e),
                                                  ]
                                                );
                                              case 1:
                                                return (
                                                  (i = o.sent()) instanceof Ei
                                                    ? n.resolve(i)
                                                    : i instanceof Ti
                                                    ? n.resolve(null)
                                                    : n.reject(
                                                        new Pr(
                                                          Ar.UNAVAILABLE,
                                                          "Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"
                                                        )
                                                      ),
                                                  [3, 3]
                                                );
                                              case 2:
                                                return (
                                                  (r = o.sent()),
                                                  (i = da(
                                                    r,
                                                    "Failed to get document '" +
                                                      e +
                                                      " from cache"
                                                  )),
                                                  n.reject(i),
                                                  [3, 3]
                                                );
                                              case 3:
                                                return [2];
                                            }
                                          });
                                        }
                                      );
                                    }),
                                    [4, bf(t)]
                                  );
                                case 1:
                                  return [2, n.apply(void 0, [i.sent(), e, r])];
                              }
                            });
                          });
                        }),
                        r.promise
                      );
                    })(n, t.S_).then(function (n) {
                      return new Zf(
                        e,
                        r,
                        t.S_,
                        n,
                        new Xf(n instanceof Ei && n.Vt, !0),
                        t.v_
                      );
                    });
                  })(this.d_)
                : "server" === (null == t ? void 0 : t.source)
                ? (function (t) {
                    t = Sl(t, Pl);
                    var e = Sl(t.firestore, Nf);
                    return Ef(Af(e), t.S_, { source: "server" }).then(function (
                      n
                    ) {
                      return ap(e, t, n);
                    });
                  })(this.d_)
                : (function (t) {
                    t = Sl(t, Pl);
                    var e = Sl(t.firestore, Nf);
                    return Ef(Af(e), t.S_).then(function (n) {
                      return ap(e, t, n);
                    });
                  })(this.d_)
            ).then(function (t) {
              return new Tp(
                e.firestore,
                new Zf(e.firestore.d_, e.Xf, t.S_, t.Zf, t.metadata, e.d_.v_)
              );
            });
          }),
          (e.prototype.withConverter = function (t) {
            return new e(
              this.firestore,
              t
                ? this.d_.withConverter(bp.gd(this.firestore, t))
                : this.d_.withConverter(null)
            );
          }),
          e
        );
      })(yl);
      function _p(t, e, n) {
        return (t.message = t.message.replace(e, n)), t;
      }
      function Ip(t) {
        for (var e = 0, n = t; e < n.length; e++) {
          var r = n[e];
          if ("object" == typeof r && !Cf(r)) return r;
        }
        return {};
      }
      function Ep(t, e) {
        var n, r, i;
        return {
          next: function (t) {
            i.next && i.next(e(t));
          },
          error:
            null ===
              (n = (i = Cf(t[0])
                ? t[0]
                : Cf(t[1])
                ? t[1]
                : "function" == typeof t[0]
                ? { next: t[0], error: t[1], complete: t[2] }
                : { next: t[1], error: t[2], complete: t[3] }).error) ||
            void 0 === n
              ? void 0
              : n.bind(i),
          complete:
            null === (r = i.complete) || void 0 === r ? void 0 : r.bind(i),
        };
      }
      var Tp = (function (t) {
          function e(e, n) {
            var r = this;
            return ((r = t.call(this, n) || this).Yf = e), r;
          }
          return (
            (0, lr.ZT)(e, t),
            Object.defineProperty(e.prototype, "ref", {
              get: function () {
                return new wp(this.Yf, this.d_.ref);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "id", {
              get: function () {
                return this.d_.id;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "metadata", {
              get: function () {
                return this.d_.metadata;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "exists", {
              get: function () {
                return this.d_.exists();
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.data = function (t) {
              return this.d_.data(t);
            }),
            (e.prototype.get = function (t, e) {
              return this.d_.get(t, e);
            }),
            (e.prototype.isEqual = function (t) {
              return np(this.d_, t.d_);
            }),
            e
          );
        })(yl),
        Sp = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.data = function (t) {
              return this.d_.data(t);
            }),
            e
          );
        })(Tp),
        Cp = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this, n) || this).firestore = e),
              (r.Xf = new gp(e)),
              r
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype.where = function (t, n, r) {
              try {
                return new e(
                  this.firestore,
                  Uf(
                    this.d_,
                    (function (t, e, n) {
                      var r = e,
                        i = Lf("where", t);
                      return new Vf(i, r, n);
                    })(t, n, r)
                  )
                );
              } catch (t) {
                throw _p(t, /(orderBy|where)\(\)/, "Query.$1()");
              }
            }),
            (e.prototype.orderBy = function (t, n) {
              try {
                return new e(
                  this.firestore,
                  Uf(
                    this.d_,
                    (function (t, e) {
                      void 0 === e && (e = "asc");
                      var n = e,
                        r = Lf("orderBy", t);
                      return new qf(r, n);
                    })(t, n)
                  )
                );
              } catch (t) {
                throw _p(t, /(orderBy|where)\(\)/, "Query.$1()");
              }
            }),
            (e.prototype.limit = function (t) {
              try {
                return new e(
                  this.firestore,
                  Uf(
                    this.d_,
                    (function (t) {
                      return Cl("limit", t), new Bf("limit", t, "F");
                    })(t)
                  )
                );
              } catch (t) {
                throw _p(t, "limit()", "Query.limit()");
              }
            }),
            (e.prototype.limitToLast = function (t) {
              try {
                return new e(
                  this.firestore,
                  Uf(
                    this.d_,
                    (function (t) {
                      return (
                        Cl("limitToLast", t), new Bf("limitToLast", t, "L")
                      );
                    })(t)
                  )
                );
              } catch (t) {
                throw _p(t, "limitToLast()", "Query.limitToLast()");
              }
            }),
            (e.prototype.startAt = function () {
              for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
              try {
                return new e(
                  this.firestore,
                  Uf(
                    this.d_,
                    function () {
                      for (var t = [], e = 0; e < arguments.length; e++)
                        t[e] = arguments[e];
                      return new Gf("startAt", t, !0);
                    }.apply(void 0, t)
                  )
                );
              } catch (t) {
                throw _p(t, "startAt()", "Query.startAt()");
              }
            }),
            (e.prototype.startAfter = function () {
              for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
              try {
                return new e(
                  this.firestore,
                  Uf(
                    this.d_,
                    function () {
                      for (var t = [], e = 0; e < arguments.length; e++)
                        t[e] = arguments[e];
                      return new Gf("startAfter", t, !1);
                    }.apply(void 0, t)
                  )
                );
              } catch (t) {
                throw _p(t, "startAfter()", "Query.startAfter()");
              }
            }),
            (e.prototype.endBefore = function () {
              for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
              try {
                return new e(
                  this.firestore,
                  Uf(
                    this.d_,
                    function () {
                      for (var t = [], e = 0; e < arguments.length; e++)
                        t[e] = arguments[e];
                      return new Wf("endBefore", t, !0);
                    }.apply(void 0, t)
                  )
                );
              } catch (t) {
                throw _p(t, "endBefore()", "Query.endBefore()");
              }
            }),
            (e.prototype.endAt = function () {
              for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
              try {
                return new e(
                  this.firestore,
                  Uf(
                    this.d_,
                    function () {
                      for (var t = [], e = 0; e < arguments.length; e++)
                        t[e] = arguments[e];
                      return new Wf("endAt", t, !1);
                    }.apply(void 0, t)
                  )
                );
              } catch (t) {
                throw _p(t, "endAt()", "Query.endAt()");
              }
            }),
            (e.prototype.isEqual = function (t) {
              return Ll(this.d_, t.d_);
            }),
            (e.prototype.get = function (t) {
              var e = this;
              return (
                "cache" === (null == t ? void 0 : t.source)
                  ? (function (t) {
                      t = Sl(t, Dl);
                      var e = Sl(t.firestore, Nf),
                        n = Af(e),
                        r = new rp(e);
                      return (function (t, e) {
                        var n = this,
                          r = new na();
                        return (
                          t._s.Ps(function () {
                            return (0, lr.mG)(n, void 0, void 0, function () {
                              var n;
                              return (0, lr.Jh)(this, function (i) {
                                switch (i.label) {
                                  case 0:
                                    return (
                                      (n = function (t, e, n) {
                                        return (0, lr.mG)(
                                          this,
                                          void 0,
                                          void 0,
                                          function () {
                                            var r, i, o, s, a;
                                            return (0, lr.Jh)(
                                              this,
                                              function (u) {
                                                switch (u.label) {
                                                  case 0:
                                                    return (
                                                      u.trys.push([0, 2, , 3]),
                                                      [4, ec(t, e, !0)]
                                                    );
                                                  case 1:
                                                    return (
                                                      (a = u.sent()),
                                                      (r = new kh(e, a.Rc)),
                                                      (i = r.fl(a.documents)),
                                                      (o = r.wi(i, !1)),
                                                      n.resolve(o.snapshot),
                                                      [3, 3]
                                                    );
                                                  case 2:
                                                    return (
                                                      (s = u.sent()),
                                                      (a = da(
                                                        s,
                                                        "Failed to execute query '" +
                                                          e +
                                                          " against cache"
                                                      )),
                                                      n.reject(a),
                                                      [3, 3]
                                                    );
                                                  case 3:
                                                    return [2];
                                                }
                                              }
                                            );
                                          }
                                        );
                                      }),
                                      [4, bf(t)]
                                    );
                                  case 1:
                                    return [
                                      2,
                                      n.apply(void 0, [i.sent(), e, r]),
                                    ];
                                }
                              });
                            });
                          }),
                          r.promise
                        );
                      })(n, t.C_).then(function (n) {
                        return new tp(e, r, t, n);
                      });
                    })(this.d_)
                  : "server" === (null == t ? void 0 : t.source)
                  ? (function (t) {
                      t = Sl(t, Dl);
                      var e = Sl(t.firestore, Nf),
                        n = Af(e),
                        r = new rp(e);
                      return Tf(n, t.C_, { source: "server" }).then(function (
                        n
                      ) {
                        return new tp(e, r, t, n);
                      });
                    })(this.d_)
                  : (function (t) {
                      t = Sl(t, Dl);
                      var e = Sl(t.firestore, Nf),
                        n = Af(e),
                        r = new rp(e);
                      return (
                        jf(t.C_),
                        Tf(n, t.C_).then(function (n) {
                          return new tp(e, r, t, n);
                        })
                      );
                    })(this.d_)
              ).then(function (t) {
                return new Np(
                  e.firestore,
                  new tp(e.firestore.d_, e.Xf, e.d_, t._d)
                );
              });
            }),
            (e.prototype.onSnapshot = function () {
              for (var t = this, e = [], n = 0; n < arguments.length; n++)
                e[n] = arguments[n];
              var r = Ip(e),
                i = Ep(e, function (e) {
                  return new Np(
                    t.firestore,
                    new tp(t.firestore.d_, t.Xf, t.d_, e._d)
                  );
                });
              return op(this.d_, r, i);
            }),
            (e.prototype.withConverter = function (t) {
              return new e(
                this.firestore,
                t
                  ? this.d_.withConverter(bp.gd(this.firestore, t))
                  : this.d_.withConverter(null)
              );
            }),
            e
          );
        })(yl),
        kp = (function (t) {
          function e(e, n) {
            var r = this;
            return ((r = t.call(this, n) || this).Yf = e), r;
          }
          return (
            (0, lr.ZT)(e, t),
            Object.defineProperty(e.prototype, "type", {
              get: function () {
                return this.d_.type;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "doc", {
              get: function () {
                return new Sp(this.Yf, this.d_.doc);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "oldIndex", {
              get: function () {
                return this.d_.oldIndex;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "newIndex", {
              get: function () {
                return this.d_.newIndex;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(yl),
        Np = (function (t) {
          function e(e, n) {
            var r = this;
            return ((r = t.call(this, n) || this).Yf = e), r;
          }
          return (
            (0, lr.ZT)(e, t),
            Object.defineProperty(e.prototype, "query", {
              get: function () {
                return new Cp(this.Yf, this.d_.query);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "metadata", {
              get: function () {
                return this.d_.metadata;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "size", {
              get: function () {
                return this.d_.size;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "empty", {
              get: function () {
                return this.d_.empty;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "docs", {
              get: function () {
                var t = this;
                return this.d_.docs.map(function (e) {
                  return new Sp(t.Yf, e);
                });
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.docChanges = function (t) {
              var e = this;
              return this.d_.docChanges(t).map(function (t) {
                return new kp(e.Yf, t);
              });
            }),
            (e.prototype.forEach = function (t, e) {
              var n = this;
              this.d_.forEach(function (r) {
                t.call(e, new Sp(n.Yf, r));
              });
            }),
            (e.prototype.isEqual = function (t) {
              return np(this.d_, t.d_);
            }),
            e
          );
        })(yl),
        Ap = (function (t) {
          function e(e, n) {
            var r = this;
            return (
              ((r = t.call(this, e, n) || this).firestore = e), (r.d_ = n), r
            );
          }
          return (
            (0, lr.ZT)(e, t),
            Object.defineProperty(e.prototype, "id", {
              get: function () {
                return this.d_.id;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "path", {
              get: function () {
                return this.d_.path;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "parent", {
              get: function () {
                var t = this.d_.parent;
                return t ? new wp(this.firestore, t) : null;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (e.prototype.doc = function (t) {
              try {
                return new wp(
                  this.firestore,
                  void 0 === t ? Rl(this.d_) : Rl(this.d_, t)
                );
              } catch (t) {
                throw _p(t, "doc()", "CollectionReference.doc()");
              }
            }),
            (e.prototype.add = function (t) {
              var e = this;
              return (function (t, e) {
                var n = Sl(t.firestore, Nf),
                  r = Rl(t),
                  i = Qf(t.v_, e);
                return sp(n, [
                  zl(Wl(t.firestore), "addDoc", r.S_, i, null !== t.v_, {}).F_(
                    r.S_,
                    No.exists(!1)
                  ),
                ]).then(function () {
                  return r;
                });
              })(this.d_, t).then(function (t) {
                return new wp(e.firestore, t);
              });
            }),
            (e.prototype.isEqual = function (t) {
              return Ml(this.d_, t.d_);
            }),
            (e.prototype.withConverter = function (t) {
              return new e(
                this.firestore,
                t
                  ? this.d_.withConverter(bp.gd(this.firestore, t))
                  : this.d_.withConverter(null)
              );
            }),
            e
          );
        })(Cp);
      function Pp(t) {
        return t instanceof yl && (t = t.d_), Sl(t, Pl);
      }
      var Dp = (function (t) {
          function e() {
            for (var e = [], n = 0; n < arguments.length; n++)
              e[n] = arguments[n];
            return (
              t.call(
                this,
                new (gl.bind.apply(gl, (0, lr.ev)([void 0], e)))()
              ) || this
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.documentId = function () {
              return new e(Wr.ht().rt());
            }),
            (e.prototype.isEqual = function (t) {
              return (
                t instanceof yl && (t = t.d_),
                t instanceof gl && this.d_.f_.isEqual(t.f_)
              );
            }),
            e
          );
        })(yl),
        xp = (function (t) {
          function e() {
            return (null !== t && t.apply(this, arguments)) || this;
          }
          return (
            (0, lr.ZT)(e, t),
            (e.serverTimestamp = function () {
              var t = new Jl("serverTimestamp");
              return (t._methodName = "FieldValue.serverTimestamp"), new e(t);
            }),
            (e.delete = function () {
              var t = new Hl("deleteField");
              return (t._methodName = "FieldValue.delete"), new e(t);
            }),
            (e.arrayUnion = function () {
              for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
              var r = function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                return new Ql("arrayUnion", t);
              }.apply(void 0, t);
              return (r._methodName = "FieldValue.arrayUnion"), new e(r);
            }),
            (e.arrayRemove = function () {
              for (var t = [], n = 0; n < arguments.length; n++)
                t[n] = arguments[n];
              var r = function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                return new Yl("arrayRemove", t);
              }.apply(void 0, t);
              return (r._methodName = "FieldValue.arrayRemove"), new e(r);
            }),
            (e.increment = function (t) {
              var n = (function (t) {
                return new Xl("increment", t);
              })(t);
              return (n._methodName = "FieldValue.increment"), new e(n);
            }),
            (e.prototype.isEqual = function (t) {
              return this.d_.isEqual(t.d_);
            }),
            e
          );
        })(yl);
      var Op,
        Rp,
        Mp = n(733),
        Lp = {
          Firestore: vp,
          GeoPoint: jl,
          Timestamp: Ur,
          Blob: pp,
          Transaction: mp,
          WriteBatch: yp,
          DocumentReference: wp,
          DocumentSnapshot: Tp,
          Query: Cp,
          QueryDocumentSnapshot: Sp,
          QuerySnapshot: Np,
          CollectionReference: Ap,
          FieldPath: Dp,
          FieldValue: xp,
          setLogLevel: function (t) {
            var e;
            (e = t), dr.setLogLevel(e);
          },
          CACHE_SIZE_UNLIMITED: -1,
        };
      (function (t, e) {
        t.INTERNAL.registerComponent(
          new Mp.wA(
            "firestore",
            function (t) {
              return (function (t, e) {
                return new vp(t, new Nf(t, e), new dp());
              })(
                t.getProvider("app").getImmediate(),
                t.getProvider("auth-internal")
              );
            },
            "PUBLIC"
          ).setServiceProps(Object.assign({}, Lp))
        );
      })((Op = e.Z)),
        Op.registerVersion("@firebase/firestore", "2.2.0"),
        ((Rp = vp).prototype.loadBundle = function (t) {
          return (function (t, e) {
            var n = Af((t = Sl(t, Nf))),
              r = new kf();
            return (
              (function (t, e, n, r) {
                var i = this,
                  o = (function (t, e) {
                    return (function (t, e) {
                      return new vl(t, e);
                    })(
                      (function (t, e) {
                        if (t instanceof Uint8Array) return pl(t, e);
                        if (t instanceof ArrayBuffer)
                          return pl(new Uint8Array(t), e);
                        if (t instanceof ReadableStream) return t.getReader();
                        throw new Error(
                          "Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream"
                        );
                      })(
                        "string" == typeof t ? new TextEncoder().encode(t) : t
                      ),
                      e
                    );
                  })(n, Rc(e));
                t._s.Ps(function () {
                  return (0, lr.mG)(i, void 0, void 0, function () {
                    var e;
                    return (0, lr.Jh)(this, function (n) {
                      switch (n.label) {
                        case 0:
                          return (e = ul), [4, _f(t)];
                        case 1:
                          return e.apply(void 0, [n.sent(), o, r]), [2];
                      }
                    });
                  });
                });
              })(n, t.I_, e, r),
              r
            );
          })(this.d_, t);
        }),
        (Rp.prototype.namedQuery = function (t) {
          var e,
            n,
            r = this;
          return ((e = this.d_),
          (n = t),
          (function (t, e) {
            var n = this;
            return t._s.enqueue(function () {
              return (0, lr.mG)(n, void 0, void 0, function () {
                var n;
                return (0, lr.Jh)(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return (
                        (n = function (t, e) {
                          var n = Ir(t);
                          return n.persistence.runTransaction(
                            "Get named query",
                            "readonly",
                            function (t) {
                              return n.wo.Ms(t, e);
                            }
                          );
                        }),
                        [4, bf(t)]
                      );
                    case 1:
                      return [2, n.apply(void 0, [r.sent(), e])];
                  }
                });
              });
            });
          })(Af((e = Sl(e, Nf))), n).then(function (t) {
            return t ? new Dl(e, null, t.query) : null;
          })).then(function (t) {
            return t ? new Cp(r, t) : null;
          });
        });
      var jp = {
          OK: "ok",
          CANCELLED: "cancelled",
          UNKNOWN: "unknown",
          INVALID_ARGUMENT: "invalid-argument",
          DEADLINE_EXCEEDED: "deadline-exceeded",
          NOT_FOUND: "not-found",
          ALREADY_EXISTS: "already-exists",
          PERMISSION_DENIED: "permission-denied",
          UNAUTHENTICATED: "unauthenticated",
          RESOURCE_EXHAUSTED: "resource-exhausted",
          FAILED_PRECONDITION: "failed-precondition",
          ABORTED: "aborted",
          OUT_OF_RANGE: "out-of-range",
          UNIMPLEMENTED: "unimplemented",
          INTERNAL: "internal",
          UNAVAILABLE: "unavailable",
          DATA_LOSS: "data-loss",
        },
        Fp = (function (t) {
          function e(n, r, i) {
            var o = t.call(this, r) || this;
            return (
              Object.setPrototypeOf(o, e.prototype),
              (o.code = n),
              (o.details = i),
              o
            );
          }
          return (0, lr.ZT)(e, t), e;
        })(Error),
        Up = (function () {
          function t(t, e) {
            var n = this;
            (this.auth = null),
              (this.messaging = null),
              (this.auth = t.getImmediate({ optional: !0 })),
              (this.messaging = e.getImmediate({ optional: !0 })),
              this.auth ||
                t.get().then(
                  function (t) {
                    return (n.auth = t);
                  },
                  function () {}
                ),
              this.messaging ||
                e.get().then(
                  function (t) {
                    return (n.messaging = t);
                  },
                  function () {}
                );
          }
          return (
            (t.prototype.getAuthToken = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t;
                return (0, lr.Jh)(this, function (e) {
                  switch (e.label) {
                    case 0:
                      if (!this.auth) return [2, void 0];
                      e.label = 1;
                    case 1:
                      return (
                        e.trys.push([1, 3, , 4]), [4, this.auth.getToken()]
                      );
                    case 2:
                      return (t = e.sent()) ? [2, t.accessToken] : [2, void 0];
                    case 3:
                      return e.sent(), [2, void 0];
                    case 4:
                      return [2];
                  }
                });
              });
            }),
            (t.prototype.getInstanceIdToken = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (t) {
                  if (
                    !this.messaging ||
                    !("Notification" in self) ||
                    "granted" !== Notification.permission
                  )
                    return [2, void 0];
                  try {
                    return [2, this.messaging.getToken()];
                  } catch (t) {
                    return [2, void 0];
                  }
                  return [2];
                });
              });
            }),
            (t.prototype.getContext = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t, e;
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return [4, this.getAuthToken()];
                    case 1:
                      return (t = n.sent()), [4, this.getInstanceIdToken()];
                    case 2:
                      return (
                        (e = n.sent()),
                        [2, { authToken: t, instanceIdToken: e }]
                      );
                  }
                });
              });
            }),
            t
          );
        })();
      function Vp(t, e) {
        var n = {};
        for (var r in t) t.hasOwnProperty(r) && (n[r] = e(t[r]));
        return n;
      }
      var qp,
        Bp,
        Gp,
        Wp = (function () {
          function t() {}
          return (
            (t.prototype.encode = function (t) {
              var e = this;
              if (null == t) return null;
              if (
                (t instanceof Number && (t = t.valueOf()),
                "number" == typeof t && isFinite(t))
              )
                return t;
              if (!0 === t || !1 === t) return t;
              if ("[object String]" === Object.prototype.toString.call(t))
                return t;
              if (Array.isArray(t))
                return t.map(function (t) {
                  return e.encode(t);
                });
              if ("function" == typeof t || "object" == typeof t)
                return Vp(t, function (t) {
                  return e.encode(t);
                });
              throw new Error("Data cannot be encoded in JSON: " + t);
            }),
            (t.prototype.decode = function (t) {
              var e = this;
              if (null == t) return t;
              if (t["@type"])
                switch (t["@type"]) {
                  case "type.googleapis.com/google.protobuf.Int64Value":
                  case "type.googleapis.com/google.protobuf.UInt64Value":
                    var n = Number(t.value);
                    if (isNaN(n))
                      throw new Error("Data cannot be decoded from JSON: " + t);
                    return n;
                  default:
                    throw new Error("Data cannot be decoded from JSON: " + t);
                }
              return Array.isArray(t)
                ? t.map(function (t) {
                    return e.decode(t);
                  })
                : "function" == typeof t || "object" == typeof t
                ? Vp(t, function (t) {
                    return e.decode(t);
                  })
                : t;
            }),
            t
          );
        })(),
        zp = (function () {
          function t(t, e, n, r, i) {
            var o = this;
            void 0 === r && (r = "us-central1"),
              (this.app_ = t),
              (this.fetchImpl = i),
              (this.serializer = new Wp()),
              (this.emulatorOrigin = null),
              (this.INTERNAL = {
                delete: function () {
                  return Promise.resolve(o.deleteService());
                },
              }),
              (this.contextProvider = new Up(e, n)),
              (this.cancelAllRequests = new Promise(function (t) {
                o.deleteService = function () {
                  return t();
                };
              }));
            try {
              var s = new URL(r);
              (this.customDomain = s.origin), (this.region = "us-central1");
            } catch (t) {
              (this.customDomain = null), (this.region = r);
            }
          }
          return (
            Object.defineProperty(t.prototype, "app", {
              get: function () {
                return this.app_;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype._url = function (t) {
              var e = this.app_.options.projectId;
              return null !== this.emulatorOrigin
                ? this.emulatorOrigin + "/" + e + "/" + this.region + "/" + t
                : null !== this.customDomain
                ? this.customDomain + "/" + t
                : "https://" +
                  this.region +
                  "-" +
                  e +
                  ".cloudfunctions.net/" +
                  t;
            }),
            (t.prototype.useEmulator = function (t, e) {
              this.emulatorOrigin = "http://" + t + ":" + e;
            }),
            (t.prototype.useFunctionsEmulator = function (t) {
              this.emulatorOrigin = t;
            }),
            (t.prototype.httpsCallable = function (t, e) {
              var n = this;
              return function (r) {
                return n.call(t, r, e || {});
              };
            }),
            (t.prototype.postJSON = function (t, e, n) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var r, i;
                return (0, lr.Jh)(this, function (o) {
                  switch (o.label) {
                    case 0:
                      (n["Content-Type"] = "application/json"), (o.label = 1);
                    case 1:
                      return (
                        o.trys.push([1, 3, , 4]),
                        [
                          4,
                          this.fetchImpl(t, {
                            method: "POST",
                            body: JSON.stringify(e),
                            headers: n,
                          }),
                        ]
                      );
                    case 2:
                      return (r = o.sent()), [3, 4];
                    case 3:
                      return o.sent(), [2, { status: 0, json: null }];
                    case 4:
                      (i = null), (o.label = 5);
                    case 5:
                      return o.trys.push([5, 7, , 8]), [4, r.json()];
                    case 6:
                      return (i = o.sent()), [3, 8];
                    case 7:
                      return o.sent(), [3, 8];
                    case 8:
                      return [2, { status: r.status, json: i }];
                  }
                });
              });
            }),
            (t.prototype.call = function (t, e, n) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var r, i, o, s, a, u, c, h, l, f, p;
                return (0, lr.Jh)(this, function (d) {
                  switch (d.label) {
                    case 0:
                      return (
                        (r = this._url(t)),
                        (e = this.serializer.encode(e)),
                        (i = { data: e }),
                        (o = {}),
                        [4, this.contextProvider.getContext()]
                      );
                    case 1:
                      return (
                        (s = d.sent()).authToken &&
                          (o.Authorization = "Bearer " + s.authToken),
                        s.instanceIdToken &&
                          (o["Firebase-Instance-ID-Token"] = s.instanceIdToken),
                        (a = n.timeout || 7e4),
                        (u = (function (t) {
                          var e,
                            n = new Promise(function (n, r) {
                              e = setTimeout(function () {
                                r(
                                  new Fp(
                                    "deadline-exceeded",
                                    "deadline-exceeded"
                                  )
                                );
                              }, t);
                            });
                          return { timer: e, promise: n };
                        })(a)),
                        (c = u.timer),
                        (h = u.promise),
                        [
                          4,
                          Promise.race([
                            Hp(c, this.postJSON(r, i, o)),
                            h,
                            Hp(c, this.cancelAllRequests),
                          ]),
                        ]
                      );
                    case 2:
                      if (!(l = d.sent()))
                        throw new Fp(
                          "cancelled",
                          "Firebase Functions instance was deleted."
                        );
                      if (
                        (f = (function (t, e, n) {
                          var r = (function (t) {
                              if (t >= 200 && t < 300) return "ok";
                              switch (t) {
                                case 0:
                                  return "internal";
                                case 400:
                                  return "invalid-argument";
                                case 401:
                                  return "unauthenticated";
                                case 403:
                                  return "permission-denied";
                                case 404:
                                  return "not-found";
                                case 409:
                                  return "aborted";
                                case 429:
                                  return "resource-exhausted";
                                case 499:
                                  return "cancelled";
                                case 500:
                                  return "internal";
                                case 501:
                                  return "unimplemented";
                                case 503:
                                  return "unavailable";
                                case 504:
                                  return "deadline-exceeded";
                              }
                              return "unknown";
                            })(t),
                            i = r,
                            o = void 0;
                          try {
                            var s = e && e.error;
                            if (s) {
                              var a = s.status;
                              if ("string" == typeof a) {
                                if (!jp[a])
                                  return new Fp("internal", "internal");
                                (r = jp[a]), (i = a);
                              }
                              var u = s.message;
                              "string" == typeof u && (i = u),
                                void 0 !== (o = s.details) && (o = n.decode(o));
                            }
                          } catch (t) {}
                          return "ok" === r ? null : new Fp(r, i, o);
                        })(l.status, l.json, this.serializer))
                      )
                        throw f;
                      if (!l.json)
                        throw new Fp(
                          "internal",
                          "Response is not valid JSON object."
                        );
                      if (
                        (void 0 === (p = l.json.data) && (p = l.json.result),
                        void 0 === p)
                      )
                        throw new Fp(
                          "internal",
                          "Response is missing data field."
                        );
                      return [2, { data: this.serializer.decode(p) }];
                  }
                });
              });
            }),
            t
          );
        })();
      function Hp(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n;
          return (0, lr.Jh)(this, function (r) {
            switch (r.label) {
              case 0:
                return [4, e];
              case 1:
                return (n = r.sent()), clearTimeout(t), [2, n];
            }
          });
        });
      }
      (qp = e.Z),
        (Bp = fetch.bind(self)),
        (Gp = { Functions: zp }),
        qp.INTERNAL.registerComponent(
          new Mp.wA(
            "functions",
            function (t, e) {
              var n = t.getProvider("app").getImmediate(),
                r = t.getProvider("auth-internal"),
                i = t.getProvider("messaging");
              return new zp(n, r, i, e, Bp);
            },
            "PUBLIC"
          )
            .setServiceProps(Gp)
            .setMultipleInstances(!0)
        ),
        e.Z.registerVersion("@firebase/functions", "0.6.3");
      var Kp,
        Jp = n(772),
        Qp = "w:0.4.21",
        Yp =
          (((Kp = {})["missing-app-config-values"] =
            'Missing App configuration value: "{$valueName}"'),
          (Kp["not-registered"] = "Firebase Installation is not registered."),
          (Kp["installation-not-found"] = "Firebase Installation not found."),
          (Kp["request-failed"] =
            '{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),
          (Kp["app-offline"] =
            "Could not process request. Application offline."),
          (Kp["delete-pending-registration"] =
            "Can't delete installation while there is a pending registration request."),
          Kp),
        Xp = new i.LL("installations", "Installations", Yp);
      function Zp(t) {
        return t instanceof i.ZR && t.code.includes("request-failed");
      }
      function $p(t) {
        return (
          "https://firebaseinstallations.googleapis.com/v1/projects/" +
          t.projectId +
          "/installations"
        );
      }
      function td(t) {
        return {
          token: t.token,
          requestStatus: 2,
          expiresIn: ((e = t.expiresIn), Number(e.replace("s", "000"))),
          creationTime: Date.now(),
        };
        var e;
      }
      function ed(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                return [4, e.json()];
              case 1:
                return (
                  (n = i.sent()),
                  (r = n.error),
                  [
                    2,
                    Xp.create("request-failed", {
                      requestName: t,
                      serverCode: r.code,
                      serverMessage: r.message,
                      serverStatus: r.status,
                    }),
                  ]
                );
            }
          });
        });
      }
      function nd(t) {
        var e = t.apiKey;
        return new Headers({
          "Content-Type": "application/json",
          Accept: "application/json",
          "x-goog-api-key": e,
        });
      }
      function rd(t, e) {
        var n = e.refreshToken,
          r = nd(t);
        return (
          r.append(
            "Authorization",
            (function (t) {
              return "FIS_v2 " + t;
            })(n)
          ),
          r
        );
      }
      function id(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e;
          return (0, lr.Jh)(this, function (n) {
            switch (n.label) {
              case 0:
                return [4, t()];
              case 1:
                return (e = n.sent()).status >= 500 && e.status < 600
                  ? [2, t()]
                  : [2, e];
            }
          });
        });
      }
      function od(t, e) {
        var n = e.fid;
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, r, i, o, s, a;
          return (0, lr.Jh)(this, function (u) {
            switch (u.label) {
              case 0:
                return (
                  (e = $p(t)),
                  (r = nd(t)),
                  (i = {
                    fid: n,
                    authVersion: "FIS_v2",
                    appId: t.appId,
                    sdkVersion: Qp,
                  }),
                  (o = { method: "POST", headers: r, body: JSON.stringify(i) }),
                  [
                    4,
                    id(function () {
                      return fetch(e, o);
                    }),
                  ]
                );
              case 1:
                return (s = u.sent()).ok ? [4, s.json()] : [3, 3];
              case 2:
                return [
                  2,
                  {
                    fid: (a = u.sent()).fid || n,
                    registrationStatus: 2,
                    refreshToken: a.refreshToken,
                    authToken: td(a.authToken),
                  },
                ];
              case 3:
                return [4, ed("Create Installation", s)];
              case 4:
                throw u.sent();
            }
          });
        });
      }
      function sd(t) {
        return new Promise(function (e) {
          setTimeout(e, t);
        });
      }
      var ad = /^[cdef][\w-]{21}$/;
      function ud() {
        try {
          var t = new Uint8Array(17);
          (self.crypto || self.msCrypto).getRandomValues(t),
            (t[0] = 112 + (t[0] % 16));
          var e = (function (t) {
            return ((e = t),
            btoa(
              String.fromCharCode.apply(String, (0, lr.ev)([], (0, lr.CR)(e)))
            )
              .replace(/\+/g, "-")
              .replace(/\//g, "_")).substr(0, 22);
            var e;
          })(t);
          return ad.test(e) ? e : "";
        } catch (t) {
          return "";
        }
      }
      function cd(t) {
        return t.appName + "!" + t.appId;
      }
      var hd = new Map();
      function ld(t, e) {
        var n = cd(t);
        fd(n, e),
          (function (t, e) {
            var n = dd();
            n && n.postMessage({ key: t, fid: e }), vd();
          })(n, e);
      }
      function fd(t, e) {
        var n,
          r,
          i = hd.get(t);
        if (i)
          try {
            for (var o = (0, lr.XA)(i), s = o.next(); !s.done; s = o.next())
              (0, s.value)(e);
          } catch (t) {
            n = { error: t };
          } finally {
            try {
              s && !s.done && (r = o.return) && r.call(o);
            } finally {
              if (n) throw n.error;
            }
          }
      }
      var pd = null;
      function dd() {
        return (
          !pd &&
            "BroadcastChannel" in self &&
            ((pd = new BroadcastChannel("[Firebase] FID Change")).onmessage =
              function (t) {
                fd(t.data.key, t.data.fid);
              }),
          pd
        );
      }
      function vd() {
        0 === hd.size && pd && (pd.close(), (pd = null));
      }
      var gd,
        md = "firebase-installations-store",
        yd = null;
      function bd() {
        return (
          yd ||
            (yd = (0, Jp.openDb)(
              "firebase-installations-database",
              1,
              function (t) {
                switch (t.oldVersion) {
                  case 0:
                    t.createObjectStore(md);
                }
              }
            )),
          yd
        );
      }
      function wd(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s;
          return (0, lr.Jh)(this, function (a) {
            switch (a.label) {
              case 0:
                return (n = cd(t)), [4, bd()];
              case 1:
                return (
                  (r = a.sent()),
                  (i = r.transaction(md, "readwrite")),
                  [4, (o = i.objectStore(md)).get(n)]
                );
              case 2:
                return (s = a.sent()), [4, o.put(e, n)];
              case 3:
                return a.sent(), [4, i.complete];
              case 4:
                return a.sent(), (s && s.fid === e.fid) || ld(t, e.fid), [2, e];
            }
          });
        });
      }
      function _d(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                return (e = cd(t)), [4, bd()];
              case 1:
                return (
                  (n = i.sent()),
                  [
                    4,
                    (r = n.transaction(md, "readwrite"))
                      .objectStore(md)
                      .delete(e),
                  ]
                );
              case 2:
                return i.sent(), [4, r.complete];
              case 3:
                return i.sent(), [2];
            }
          });
        });
      }
      function Id(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s, a;
          return (0, lr.Jh)(this, function (u) {
            switch (u.label) {
              case 0:
                return (n = cd(t)), [4, bd()];
              case 1:
                return (
                  (r = u.sent()),
                  (i = r.transaction(md, "readwrite")),
                  [4, (o = i.objectStore(md)).get(n)]
                );
              case 2:
                return (
                  (s = u.sent()),
                  void 0 !== (a = e(s)) ? [3, 4] : [4, o.delete(n)]
                );
              case 3:
                return u.sent(), [3, 6];
              case 4:
                return [4, o.put(a, n)];
              case 5:
                u.sent(), (u.label = 6);
              case 6:
                return [4, i.complete];
              case 7:
                return (
                  u.sent(), !a || (s && s.fid === a.fid) || ld(t, a.fid), [2, a]
                );
            }
          });
        });
      }
      function Ed(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                return [
                  4,
                  Id(t, function (n) {
                    var r = (function (t) {
                        return Cd(t || { fid: ud(), registrationStatus: 0 });
                      })(n),
                      i = (function (t, e) {
                        if (0 === e.registrationStatus) {
                          if (!navigator.onLine)
                            return {
                              installationEntry: e,
                              registrationPromise: Promise.reject(
                                Xp.create("app-offline")
                              ),
                            };
                          var n = {
                            fid: e.fid,
                            registrationStatus: 1,
                            registrationTime: Date.now(),
                          };
                          return {
                            installationEntry: n,
                            registrationPromise: (function (t, e) {
                              return (0, lr.mG)(
                                this,
                                void 0,
                                void 0,
                                function () {
                                  var n, r;
                                  return (0, lr.Jh)(this, function (i) {
                                    switch (i.label) {
                                      case 0:
                                        return (
                                          i.trys.push([0, 2, , 7]),
                                          [4, od(t, e)]
                                        );
                                      case 1:
                                        return (n = i.sent()), [2, wd(t, n)];
                                      case 2:
                                        return Zp((r = i.sent())) &&
                                          409 === r.customData.serverCode
                                          ? [4, _d(t)]
                                          : [3, 4];
                                      case 3:
                                        return i.sent(), [3, 6];
                                      case 4:
                                        return [
                                          4,
                                          wd(t, {
                                            fid: e.fid,
                                            registrationStatus: 0,
                                          }),
                                        ];
                                      case 5:
                                        i.sent(), (i.label = 6);
                                      case 6:
                                        throw r;
                                      case 7:
                                        return [2];
                                    }
                                  });
                                }
                              );
                            })(t, n),
                          };
                        }
                        return 1 === e.registrationStatus
                          ? { installationEntry: e, registrationPromise: Td(t) }
                          : { installationEntry: e };
                      })(t, r);
                    return (e = i.registrationPromise), i.installationEntry;
                  }),
                ];
              case 1:
                return "" !== (n = i.sent()).fid ? [3, 3] : ((r = {}), [4, e]);
              case 2:
                return [2, ((r.installationEntry = i.sent()), r)];
              case 3:
                return [2, { installationEntry: n, registrationPromise: e }];
            }
          });
        });
      }
      function Td(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n, r, i;
          return (0, lr.Jh)(this, function (o) {
            switch (o.label) {
              case 0:
                return [4, Sd(t)];
              case 1:
                (e = o.sent()), (o.label = 2);
              case 2:
                return 1 !== e.registrationStatus ? [3, 5] : [4, sd(100)];
              case 3:
                return o.sent(), [4, Sd(t)];
              case 4:
                return (e = o.sent()), [3, 2];
              case 5:
                return 0 !== e.registrationStatus ? [3, 7] : [4, Ed(t)];
              case 6:
                return (
                  (n = o.sent()),
                  (r = n.installationEntry),
                  (i = n.registrationPromise) ? [2, i] : [2, r]
                );
              case 7:
                return [2, e];
            }
          });
        });
      }
      function Sd(t) {
        return Id(t, function (t) {
          if (!t) throw Xp.create("installation-not-found");
          return Cd(t);
        });
      }
      function Cd(t) {
        return 1 === (e = t).registrationStatus &&
          e.registrationTime + 1e4 < Date.now()
          ? { fid: t.fid, registrationStatus: 0 }
          : t;
        var e;
      }
      function kd(t, e) {
        var n = t.appConfig,
          r = t.platformLoggerProvider;
        return (0, lr.mG)(this, void 0, void 0, function () {
          var t, i, o, s, a, u;
          return (0, lr.Jh)(this, function (c) {
            switch (c.label) {
              case 0:
                return (
                  (t = (function (t, e) {
                    var n = e.fid;
                    return $p(t) + "/" + n + "/authTokens:generate";
                  })(n, e)),
                  (i = rd(n, e)),
                  (o = r.getImmediate({ optional: !0 })) &&
                    i.append("x-firebase-client", o.getPlatformInfoString()),
                  (s = { installation: { sdkVersion: Qp } }),
                  (a = { method: "POST", headers: i, body: JSON.stringify(s) }),
                  [
                    4,
                    id(function () {
                      return fetch(t, a);
                    }),
                  ]
                );
              case 1:
                return (u = c.sent()).ok ? [4, u.json()] : [3, 3];
              case 2:
                return [2, td(c.sent())];
              case 3:
                return [4, ed("Generate Auth Token", u)];
              case 4:
                throw c.sent();
            }
          });
        });
      }
      function Nd(t, e) {
        return (
          void 0 === e && (e = !1),
          (0, lr.mG)(this, void 0, void 0, function () {
            var n, r, i;
            return (0, lr.Jh)(this, function (o) {
              switch (o.label) {
                case 0:
                  return [
                    4,
                    Id(t.appConfig, function (r) {
                      if (!Pd(r)) throw Xp.create("not-registered");
                      var i,
                        o = r.authToken;
                      if (
                        !e &&
                        2 === (i = o).requestStatus &&
                        !(function (t) {
                          var e = Date.now();
                          return (
                            e < t.creationTime ||
                            t.creationTime + t.expiresIn < e + 36e5
                          );
                        })(i)
                      )
                        return r;
                      if (1 === o.requestStatus)
                        return (
                          (n = (function (t, e) {
                            return (0, lr.mG)(
                              this,
                              void 0,
                              void 0,
                              function () {
                                var n, r;
                                return (0, lr.Jh)(this, function (i) {
                                  switch (i.label) {
                                    case 0:
                                      return [4, Ad(t.appConfig)];
                                    case 1:
                                      (n = i.sent()), (i.label = 2);
                                    case 2:
                                      return 1 !== n.authToken.requestStatus
                                        ? [3, 5]
                                        : [4, sd(100)];
                                    case 3:
                                      return i.sent(), [4, Ad(t.appConfig)];
                                    case 4:
                                      return (n = i.sent()), [3, 2];
                                    case 5:
                                      return 0 ===
                                        (r = n.authToken).requestStatus
                                        ? [2, Nd(t, e)]
                                        : [2, r];
                                  }
                                });
                              }
                            );
                          })(t, e)),
                          r
                        );
                      if (!navigator.onLine) throw Xp.create("app-offline");
                      var s = (function (t) {
                        var e = { requestStatus: 1, requestTime: Date.now() };
                        return (0, lr.pi)((0, lr.pi)({}, t), { authToken: e });
                      })(r);
                      return (
                        (n = (function (t, e) {
                          return (0, lr.mG)(this, void 0, void 0, function () {
                            var n, r, i;
                            return (0, lr.Jh)(this, function (o) {
                              switch (o.label) {
                                case 0:
                                  return (
                                    o.trys.push([0, 3, , 8]), [4, kd(t, e)]
                                  );
                                case 1:
                                  return (
                                    (n = o.sent()),
                                    (i = (0, lr.pi)((0, lr.pi)({}, e), {
                                      authToken: n,
                                    })),
                                    [4, wd(t.appConfig, i)]
                                  );
                                case 2:
                                  return o.sent(), [2, n];
                                case 3:
                                  return !Zp((r = o.sent())) ||
                                    (401 !== r.customData.serverCode &&
                                      404 !== r.customData.serverCode)
                                    ? [3, 5]
                                    : [4, _d(t.appConfig)];
                                case 4:
                                  return o.sent(), [3, 7];
                                case 5:
                                  return (
                                    (i = (0, lr.pi)((0, lr.pi)({}, e), {
                                      authToken: { requestStatus: 0 },
                                    })),
                                    [4, wd(t.appConfig, i)]
                                  );
                                case 6:
                                  o.sent(), (o.label = 7);
                                case 7:
                                  throw r;
                                case 8:
                                  return [2];
                              }
                            });
                          });
                        })(t, s)),
                        s
                      );
                    }),
                  ];
                case 1:
                  return (r = o.sent()), n ? [4, n] : [3, 3];
                case 2:
                  return (i = o.sent()), [3, 4];
                case 3:
                  (i = r.authToken), (o.label = 4);
                case 4:
                  return [2, i];
              }
            });
          })
        );
      }
      function Ad(t) {
        return Id(t, function (t) {
          if (!Pd(t)) throw Xp.create("not-registered");
          var e;
          return 1 === (e = t.authToken).requestStatus &&
            e.requestTime + 1e4 < Date.now()
            ? (0, lr.pi)((0, lr.pi)({}, t), { authToken: { requestStatus: 0 } })
            : t;
        });
      }
      function Pd(t) {
        return void 0 !== t && 2 === t.registrationStatus;
      }
      function Dd(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e;
          return (0, lr.Jh)(this, function (n) {
            switch (n.label) {
              case 0:
                return [4, Ed(t)];
              case 1:
                return (e = n.sent().registrationPromise) ? [4, e] : [3, 3];
              case 2:
                n.sent(), (n.label = 3);
              case 3:
                return [2];
            }
          });
        });
      }
      function xd(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o;
          return (0, lr.Jh)(this, function (s) {
            switch (s.label) {
              case 0:
                return (
                  (n = (function (t, e) {
                    var n = e.fid;
                    return $p(t) + "/" + n;
                  })(t, e)),
                  (r = rd(t, e)),
                  (i = { method: "DELETE", headers: r }),
                  [
                    4,
                    id(function () {
                      return fetch(n, i);
                    }),
                  ]
                );
              case 1:
                return (o = s.sent()).ok
                  ? [3, 3]
                  : [4, ed("Delete Installation", o)];
              case 2:
                throw s.sent();
              case 3:
                return [2];
            }
          });
        });
      }
      function Od(t) {
        return Xp.create("missing-app-config-values", { valueName: t });
      }
      !(function (t) {
        t.INTERNAL.registerComponent(
          new Mp.wA(
            "installations",
            function (t) {
              var e = t.getProvider("app").getImmediate(),
                n = {
                  appConfig: (function (t) {
                    var e, n;
                    if (!t || !t.options) throw Od("App Configuration");
                    if (!t.name) throw Od("App Name");
                    try {
                      for (
                        var r = (0, lr.XA)(["projectId", "apiKey", "appId"]),
                          i = r.next();
                        !i.done;
                        i = r.next()
                      ) {
                        var o = i.value;
                        if (!t.options[o]) throw Od(o);
                      }
                    } catch (t) {
                      e = { error: t };
                    } finally {
                      try {
                        i && !i.done && (n = r.return) && n.call(r);
                      } finally {
                        if (e) throw e.error;
                      }
                    }
                    return {
                      appName: t.name,
                      projectId: t.options.projectId,
                      apiKey: t.options.apiKey,
                      appId: t.options.appId,
                    };
                  })(e),
                  platformLoggerProvider: t.getProvider("platform-logger"),
                };
              return {
                app: e,
                getId: function () {
                  return (function (t) {
                    return (0, lr.mG)(this, void 0, void 0, function () {
                      var e, n, r;
                      return (0, lr.Jh)(this, function (i) {
                        switch (i.label) {
                          case 0:
                            return [4, Ed(t.appConfig)];
                          case 1:
                            return (
                              (e = i.sent()),
                              (n = e.installationEntry),
                              (r = e.registrationPromise)
                                ? r.catch(console.error)
                                : Nd(t).catch(console.error),
                              [2, n.fid]
                            );
                        }
                      });
                    });
                  })(n);
                },
                getToken: function (t) {
                  return (function (t, e) {
                    return (
                      void 0 === e && (e = !1),
                      (0, lr.mG)(this, void 0, void 0, function () {
                        return (0, lr.Jh)(this, function (n) {
                          switch (n.label) {
                            case 0:
                              return [4, Dd(t.appConfig)];
                            case 1:
                              return n.sent(), [4, Nd(t, e)];
                            case 2:
                              return [2, n.sent().token];
                          }
                        });
                      })
                    );
                  })(n, t);
                },
                delete: function () {
                  return (function (t) {
                    return (0, lr.mG)(this, void 0, void 0, function () {
                      var e, n;
                      return (0, lr.Jh)(this, function (r) {
                        switch (r.label) {
                          case 0:
                            return [
                              4,
                              Id((e = t.appConfig), function (t) {
                                if (!t || 0 !== t.registrationStatus) return t;
                              }),
                            ];
                          case 1:
                            if (!(n = r.sent())) return [3, 6];
                            if (1 !== n.registrationStatus) return [3, 2];
                            throw Xp.create("delete-pending-registration");
                          case 2:
                            if (2 !== n.registrationStatus) return [3, 6];
                            if (navigator.onLine) return [3, 3];
                            throw Xp.create("app-offline");
                          case 3:
                            return [4, xd(e, n)];
                          case 4:
                            return r.sent(), [4, _d(e)];
                          case 5:
                            r.sent(), (r.label = 6);
                          case 6:
                            return [2];
                        }
                      });
                    });
                  })(n);
                },
                onIdChange: function (t) {
                  return (function (t, e) {
                    var n = t.appConfig;
                    return (
                      (function (t, e) {
                        dd();
                        var n = cd(t),
                          r = hd.get(n);
                        r || ((r = new Set()), hd.set(n, r)), r.add(e);
                      })(n, e),
                      function () {
                        !(function (t, e) {
                          var n = cd(t),
                            r = hd.get(n);
                          r &&
                            (r.delete(e), 0 === r.size && hd.delete(n), vd());
                        })(n, e);
                      }
                    );
                  })(n, t);
                },
              };
            },
            "PUBLIC"
          )
        ),
          t.registerVersion("@firebase/installations", "0.4.21");
      })(e.Z);
      var Rd,
        Md =
          (((gd = {})["missing-app-config-values"] =
            'Missing App configuration value: "{$valueName}"'),
          (gd["only-available-in-window"] =
            "This method is available in a Window context."),
          (gd["only-available-in-sw"] =
            "This method is available in a service worker context."),
          (gd["permission-default"] =
            "The notification permission was not granted and dismissed instead."),
          (gd["permission-blocked"] =
            "The notification permission was not granted and blocked instead."),
          (gd["unsupported-browser"] =
            "This browser doesn't support the API's required to use the firebase SDK."),
          (gd["failed-service-worker-registration"] =
            "We are unable to register the default service worker. {$browserErrorMessage}"),
          (gd["token-subscribe-failed"] =
            "A problem occurred while subscribing the user to FCM: {$errorInfo}"),
          (gd["token-subscribe-no-token"] =
            "FCM returned no token when subscribing the user to push."),
          (gd["token-unsubscribe-failed"] =
            "A problem occurred while unsubscribing the user from FCM: {$errorInfo}"),
          (gd["token-update-failed"] =
            "A problem occurred while updating the user from FCM: {$errorInfo}"),
          (gd["token-update-no-token"] =
            "FCM returned no token when updating the user to push."),
          (gd["use-sw-after-get-token"] =
            "The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used."),
          (gd["invalid-sw-registration"] =
            "The input to useServiceWorker() must be a ServiceWorkerRegistration."),
          (gd["invalid-bg-handler"] =
            "The input to setBackgroundMessageHandler() must be a function."),
          (gd["invalid-vapid-key"] = "The public VAPID key must be a string."),
          (gd["use-vapid-key-after-get-token"] =
            "The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."),
          gd),
        Ld = new i.LL("messaging", "Messaging", Md),
        jd =
          "BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
      function Fd(t) {
        var e = new Uint8Array(t);
        return btoa(
          String.fromCharCode.apply(String, (0, lr.ev)([], (0, lr.CR)(e)))
        )
          .replace(/=/g, "")
          .replace(/\+/g, "-")
          .replace(/\//g, "_");
      }
      function Ud(t) {
        for (
          var e = (t + "=".repeat((4 - (t.length % 4)) % 4))
              .replace(/\-/g, "+")
              .replace(/_/g, "/"),
            n = atob(e),
            r = new Uint8Array(n.length),
            i = 0;
          i < n.length;
          ++i
        )
          r[i] = n.charCodeAt(i);
        return r;
      }
      !(function (t) {
        (t.PUSH_RECEIVED = "push-received"),
          (t.NOTIFICATION_CLICKED = "notification-clicked");
      })(Rd || (Rd = {}));
      var Vd = "fcm_token_details_db",
        qd = "fcm_token_object_Store";
      function Bd(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e,
            n = this;
          return (0, lr.Jh)(this, function (r) {
            switch (r.label) {
              case 0:
                return "databases" in indexedDB
                  ? [4, indexedDB.databases()]
                  : [3, 2];
              case 1:
                if (
                  !r
                    .sent()
                    .map(function (t) {
                      return t.name;
                    })
                    .includes(Vd)
                )
                  return [2, null];
                r.label = 2;
              case 2:
                return (
                  (e = null),
                  [
                    4,
                    (0, Jp.openDb)(Vd, 5, function (r) {
                      return (0, lr.mG)(n, void 0, void 0, function () {
                        var n, i, o, s;
                        return (0, lr.Jh)(this, function (a) {
                          switch (a.label) {
                            case 0:
                              return r.oldVersion < 2
                                ? [2]
                                : r.objectStoreNames.contains(qd)
                                ? [
                                    4,
                                    (n = r.transaction.objectStore(qd))
                                      .index("fcmSenderId")
                                      .get(t),
                                  ]
                                : [2];
                            case 1:
                              return (i = a.sent()), [4, n.clear()];
                            case 2:
                              if ((a.sent(), !i)) return [2];
                              if (2 === r.oldVersion) {
                                if (!(o = i).auth || !o.p256dh || !o.endpoint)
                                  return [2];
                                e = {
                                  token: o.fcmToken,
                                  createTime:
                                    null !== (s = o.createTime) && void 0 !== s
                                      ? s
                                      : Date.now(),
                                  subscriptionOptions: {
                                    auth: o.auth,
                                    p256dh: o.p256dh,
                                    endpoint: o.endpoint,
                                    swScope: o.swScope,
                                    vapidKey:
                                      "string" == typeof o.vapidKey
                                        ? o.vapidKey
                                        : Fd(o.vapidKey),
                                  },
                                };
                              } else (3 === r.oldVersion || 4 === r.oldVersion) && (e = { token: (o = i).fcmToken, createTime: o.createTime, subscriptionOptions: { auth: Fd(o.auth), p256dh: Fd(o.p256dh), endpoint: o.endpoint, swScope: o.swScope, vapidKey: Fd(o.vapidKey) } });
                              return [2];
                          }
                        });
                      });
                    }),
                  ]
                );
              case 3:
                return r.sent().close(), [4, (0, Jp.deleteDb)(Vd)];
              case 4:
                return r.sent(), [4, (0, Jp.deleteDb)("fcm_vapid_details_db")];
              case 5:
                return r.sent(), [4, (0, Jp.deleteDb)("undefined")];
              case 6:
                return r.sent(), [2, Gd(e) ? e : null];
            }
          });
        });
      }
      function Gd(t) {
        if (!t || !t.subscriptionOptions) return !1;
        var e = t.subscriptionOptions;
        return (
          "number" == typeof t.createTime &&
          t.createTime > 0 &&
          "string" == typeof t.token &&
          t.token.length > 0 &&
          "string" == typeof e.auth &&
          e.auth.length > 0 &&
          "string" == typeof e.p256dh &&
          e.p256dh.length > 0 &&
          "string" == typeof e.endpoint &&
          e.endpoint.length > 0 &&
          "string" == typeof e.swScope &&
          e.swScope.length > 0 &&
          "string" == typeof e.vapidKey &&
          e.vapidKey.length > 0
        );
      }
      var Wd = "firebase-messaging-store",
        zd = null;
      function Hd() {
        return (
          zd ||
            (zd = (0, Jp.openDb)(
              "firebase-messaging-database",
              1,
              function (t) {
                switch (t.oldVersion) {
                  case 0:
                    t.createObjectStore(Wd);
                }
              }
            )),
          zd
        );
      }
      function Kd(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                return (e = Yd(t)), [4, Hd()];
              case 1:
                return [4, i.sent().transaction(Wd).objectStore(Wd).get(e)];
              case 2:
                return (n = i.sent()) ? [2, n] : [3, 3];
              case 3:
                return [4, Bd(t.appConfig.senderId)];
              case 4:
                return (r = i.sent()) ? [4, Jd(t, r)] : [3, 6];
              case 5:
                return i.sent(), [2, r];
              case 6:
                return [2];
            }
          });
        });
      }
      function Jd(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i;
          return (0, lr.Jh)(this, function (o) {
            switch (o.label) {
              case 0:
                return (n = Yd(t)), [4, Hd()];
              case 1:
                return (
                  (r = o.sent()),
                  [
                    4,
                    (i = r.transaction(Wd, "readwrite"))
                      .objectStore(Wd)
                      .put(e, n),
                  ]
                );
              case 2:
                return o.sent(), [4, i.complete];
              case 3:
                return o.sent(), [2, e];
            }
          });
        });
      }
      function Qd(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                return (e = Yd(t)), [4, Hd()];
              case 1:
                return (
                  (n = i.sent()),
                  [
                    4,
                    (r = n.transaction(Wd, "readwrite"))
                      .objectStore(Wd)
                      .delete(e),
                  ]
                );
              case 2:
                return i.sent(), [4, r.complete];
              case 3:
                return i.sent(), [2];
            }
          });
        });
      }
      function Yd(t) {
        return t.appConfig.appId;
      }
      function Xd(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s, a;
          return (0, lr.Jh)(this, function (u) {
            switch (u.label) {
              case 0:
                return [4, ev(t)];
              case 1:
                (n = u.sent()),
                  (r = nv(e)),
                  (i = { method: "POST", headers: n, body: JSON.stringify(r) }),
                  (u.label = 2);
              case 2:
                return u.trys.push([2, 5, , 6]), [4, fetch(tv(t.appConfig), i)];
              case 3:
                return [4, u.sent().json()];
              case 4:
                return (o = u.sent()), [3, 6];
              case 5:
                throw (
                  ((s = u.sent()),
                  Ld.create("token-subscribe-failed", { errorInfo: s }))
                );
              case 6:
                if (o.error)
                  throw (
                    ((a = o.error.message),
                    Ld.create("token-subscribe-failed", { errorInfo: a }))
                  );
                if (!o.token) throw Ld.create("token-subscribe-no-token");
                return [2, o.token];
            }
          });
        });
      }
      function Zd(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s, a;
          return (0, lr.Jh)(this, function (u) {
            switch (u.label) {
              case 0:
                return [4, ev(t)];
              case 1:
                (n = u.sent()),
                  (r = nv(e.subscriptionOptions)),
                  (i = {
                    method: "PATCH",
                    headers: n,
                    body: JSON.stringify(r),
                  }),
                  (u.label = 2);
              case 2:
                return (
                  u.trys.push([2, 5, , 6]),
                  [4, fetch(tv(t.appConfig) + "/" + e.token, i)]
                );
              case 3:
                return [4, u.sent().json()];
              case 4:
                return (o = u.sent()), [3, 6];
              case 5:
                throw (
                  ((s = u.sent()),
                  Ld.create("token-update-failed", { errorInfo: s }))
                );
              case 6:
                if (o.error)
                  throw (
                    ((a = o.error.message),
                    Ld.create("token-update-failed", { errorInfo: a }))
                  );
                if (!o.token) throw Ld.create("token-update-no-token");
                return [2, o.token];
            }
          });
        });
      }
      function $d(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s;
          return (0, lr.Jh)(this, function (a) {
            switch (a.label) {
              case 0:
                return [4, ev(t)];
              case 1:
                (n = a.sent()),
                  (r = { method: "DELETE", headers: n }),
                  (a.label = 2);
              case 2:
                return (
                  a.trys.push([2, 5, , 6]),
                  [4, fetch(tv(t.appConfig) + "/" + e, r)]
                );
              case 3:
                return [4, a.sent().json()];
              case 4:
                if ((i = a.sent()).error)
                  throw (
                    ((o = i.error.message),
                    Ld.create("token-unsubscribe-failed", { errorInfo: o }))
                  );
                return [3, 6];
              case 5:
                throw (
                  ((s = a.sent()),
                  Ld.create("token-unsubscribe-failed", { errorInfo: s }))
                );
              case 6:
                return [2];
            }
          });
        });
      }
      function tv(t) {
        return (
          "https://fcmregistrations.googleapis.com/v1/projects/" +
          t.projectId +
          "/registrations"
        );
      }
      function ev(t) {
        var e = t.appConfig,
          n = t.installations;
        return (0, lr.mG)(this, void 0, void 0, function () {
          var t;
          return (0, lr.Jh)(this, function (r) {
            switch (r.label) {
              case 0:
                return [4, n.getToken()];
              case 1:
                return (
                  (t = r.sent()),
                  [
                    2,
                    new Headers({
                      "Content-Type": "application/json",
                      Accept: "application/json",
                      "x-goog-api-key": e.apiKey,
                      "x-goog-firebase-installations-auth": "FIS " + t,
                    }),
                  ]
                );
            }
          });
        });
      }
      function nv(t) {
        var e = t.p256dh,
          n = t.auth,
          r = t.endpoint,
          i = t.vapidKey,
          o = { web: { endpoint: r, auth: n, p256dh: e } };
        return i !== jd && (o.web.applicationPubKey = i), o;
      }
      function rv(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i, o, s;
          return (0, lr.Jh)(this, function (a) {
            switch (a.label) {
              case 0:
                if ("granted" !== Notification.permission)
                  throw Ld.create("permission-blocked");
                return [4, av(e, n)];
              case 1:
                return (r = a.sent()), [4, Kd(t)];
              case 2:
                return (
                  (i = a.sent()),
                  (o = {
                    vapidKey: n,
                    swScope: e.scope,
                    endpoint: r.endpoint,
                    auth: Fd(r.getKey("auth")),
                    p256dh: Fd(r.getKey("p256dh")),
                  }),
                  i ? [3, 3] : [2, sv(t, o)]
                );
              case 3:
                if (
                  ((u = i.subscriptionOptions),
                  (h = (c = o).vapidKey === u.vapidKey),
                  (l = c.endpoint === u.endpoint),
                  (f = c.auth === u.auth),
                  (p = c.p256dh === u.p256dh),
                  h && l && f && p)
                )
                  return [3, 8];
                a.label = 4;
              case 4:
                return a.trys.push([4, 6, , 7]), [4, $d(t, i.token)];
              case 5:
                return a.sent(), [3, 7];
              case 6:
                return (s = a.sent()), console.warn(s), [3, 7];
              case 7:
                return [2, sv(t, o)];
              case 8:
                return Date.now() >= i.createTime + 6048e5
                  ? [
                      2,
                      ov(
                        {
                          token: i.token,
                          createTime: Date.now(),
                          subscriptionOptions: o,
                        },
                        t,
                        e
                      ),
                    ]
                  : [2, i.token];
              case 9:
                return [2];
            }
            var u, c, h, l, f, p;
          });
        });
      }
      function iv(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                return [4, Kd(t)];
              case 1:
                return (n = i.sent()) ? [4, $d(t, n.token)] : [3, 4];
              case 2:
                return i.sent(), [4, Qd(t)];
              case 3:
                i.sent(), (i.label = 4);
              case 4:
                return [4, e.pushManager.getSubscription()];
              case 5:
                return (r = i.sent()) ? [2, r.unsubscribe()] : [2, !0];
            }
          });
        });
      }
      function ov(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i, o;
          return (0, lr.Jh)(this, function (s) {
            switch (s.label) {
              case 0:
                return s.trys.push([0, 3, , 5]), [4, Zd(e, t)];
              case 1:
                return (
                  (r = s.sent()),
                  (i = (0, lr.pi)((0, lr.pi)({}, t), {
                    token: r,
                    createTime: Date.now(),
                  })),
                  [4, Jd(e, i)]
                );
              case 2:
                return s.sent(), [2, r];
              case 3:
                return (o = s.sent()), [4, iv(e, n)];
              case 4:
                throw (s.sent(), o);
              case 5:
                return [2];
            }
          });
        });
      }
      function sv(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r;
          return (0, lr.Jh)(this, function (i) {
            switch (i.label) {
              case 0:
                return [4, Xd(t, e)];
              case 1:
                return (
                  (n = i.sent()),
                  (r = {
                    token: n,
                    createTime: Date.now(),
                    subscriptionOptions: e,
                  }),
                  [4, Jd(t, r)]
                );
              case 2:
                return i.sent(), [2, r.token];
            }
          });
        });
      }
      function av(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n;
          return (0, lr.Jh)(this, function (r) {
            switch (r.label) {
              case 0:
                return [4, t.pushManager.getSubscription()];
              case 1:
                return (n = r.sent())
                  ? [2, n]
                  : [
                      2,
                      t.pushManager.subscribe({
                        userVisibleOnly: !0,
                        applicationServerKey: Ud(e),
                      }),
                    ];
            }
          });
        });
      }
      function uv(t) {
        return "object" == typeof t && !!t && "google.c.a.c_id" in t;
      }
      function cv(t) {
        return new Promise(function (e) {
          setTimeout(e, t);
        });
      }
      var hv = (function () {
        function t(t) {
          var e = this;
          (this.firebaseDependencies = t),
            (this.isOnBackgroundMessageUsed = null),
            (this.vapidKey = null),
            (this.bgMessageHandler = null),
            self.addEventListener("push", function (t) {
              t.waitUntil(e.onPush(t));
            }),
            self.addEventListener("pushsubscriptionchange", function (t) {
              t.waitUntil(e.onSubChange(t));
            }),
            self.addEventListener("notificationclick", function (t) {
              t.waitUntil(e.onNotificationClick(t));
            });
        }
        return (
          Object.defineProperty(t.prototype, "app", {
            get: function () {
              return this.firebaseDependencies.app;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (t.prototype.setBackgroundMessageHandler = function (t) {
            if (
              ((this.isOnBackgroundMessageUsed = !1),
              !t || "function" != typeof t)
            )
              throw Ld.create("invalid-bg-handler");
            this.bgMessageHandler = t;
          }),
          (t.prototype.onBackgroundMessage = function (t) {
            var e = this;
            return (
              (this.isOnBackgroundMessageUsed = !0),
              (this.bgMessageHandler = t),
              function () {
                e.bgMessageHandler = null;
              }
            );
          }),
          (t.prototype.getToken = function () {
            var t, e;
            return (0, lr.mG)(this, void 0, void 0, function () {
              var n;
              return (0, lr.Jh)(this, function (r) {
                switch (r.label) {
                  case 0:
                    return this.vapidKey
                      ? [3, 2]
                      : [4, Kd(this.firebaseDependencies)];
                  case 1:
                    (n = r.sent()),
                      (this.vapidKey =
                        null !==
                          (e =
                            null ===
                              (t =
                                null == n ? void 0 : n.subscriptionOptions) ||
                            void 0 === t
                              ? void 0
                              : t.vapidKey) && void 0 !== e
                          ? e
                          : jd),
                      (r.label = 2);
                  case 2:
                    return [
                      2,
                      rv(
                        this.firebaseDependencies,
                        self.registration,
                        this.vapidKey
                      ),
                    ];
                }
              });
            });
          }),
          (t.prototype.deleteToken = function () {
            return iv(this.firebaseDependencies, self.registration);
          }),
          (t.prototype.requestPermission = function () {
            throw Ld.create("only-available-in-window");
          }),
          (t.prototype.usePublicVapidKey = function (t) {
            if (null !== this.vapidKey)
              throw Ld.create("use-vapid-key-after-get-token");
            if ("string" != typeof t || 0 === t.length)
              throw Ld.create("invalid-vapid-key");
            this.vapidKey = t;
          }),
          (t.prototype.useServiceWorker = function () {
            throw Ld.create("only-available-in-window");
          }),
          (t.prototype.onMessage = function () {
            throw Ld.create("only-available-in-window");
          }),
          (t.prototype.onTokenRefresh = function () {
            throw Ld.create("only-available-in-window");
          }),
          (t.prototype.onPush = function (t) {
            return (0, lr.mG)(this, void 0, void 0, function () {
              var e, n, r, i;
              return (0, lr.Jh)(this, function (o) {
                switch (o.label) {
                  case 0:
                    return (e = (function (t) {
                      var e = t.data;
                      if (!e) return null;
                      try {
                        return e.json();
                      } catch (t) {
                        return null;
                      }
                    })(t))
                      ? [4, dv()]
                      : (console.debug(
                          "FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."
                        ),
                        [2]);
                  case 1:
                    return (function (t) {
                      return t.some(function (t) {
                        return (
                          "visible" === t.visibilityState &&
                          !t.url.startsWith("chrome-extension://")
                        );
                      });
                    })((n = o.sent()))
                      ? [2, pv(n, e)]
                      : ((r = !1), e.notification ? [4, vv(lv(e))] : [3, 3]);
                  case 2:
                    o.sent(), (r = !0), (o.label = 3);
                  case 3:
                    return !0 === r && !1 === this.isOnBackgroundMessageUsed
                      ? [2]
                      : (this.bgMessageHandler &&
                          ((i = (function (t) {
                            var e = {
                              from: t.from,
                              collapseKey: t.collapse_key,
                            };
                            return (
                              (function (t, e) {
                                if (e.notification) {
                                  t.notification = {};
                                  var n = e.notification.title;
                                  n && (t.notification.title = n);
                                  var r = e.notification.body;
                                  r && (t.notification.body = r);
                                  var i = e.notification.image;
                                  i && (t.notification.image = i);
                                }
                              })(e, t),
                              (function (t, e) {
                                e.data && (t.data = e.data);
                              })(e, t),
                              (function (t, e) {
                                if (e.fcmOptions) {
                                  t.fcmOptions = {};
                                  var n = e.fcmOptions.link;
                                  n && (t.fcmOptions.link = n);
                                  var r = e.fcmOptions.analytics_label;
                                  r && (t.fcmOptions.analyticsLabel = r);
                                }
                              })(e, t),
                              e
                            );
                          })(e)),
                          "function" == typeof this.bgMessageHandler
                            ? this.bgMessageHandler(i)
                            : this.bgMessageHandler.next(i)),
                        [4, cv(1e3)]);
                  case 4:
                    return o.sent(), [2];
                }
              });
            });
          }),
          (t.prototype.onSubChange = function (t) {
            var e, n;
            return (0, lr.mG)(this, void 0, void 0, function () {
              var r;
              return (0, lr.Jh)(this, function (i) {
                switch (i.label) {
                  case 0:
                    return t.newSubscription
                      ? [3, 2]
                      : [4, iv(this.firebaseDependencies, self.registration)];
                  case 1:
                    return i.sent(), [2];
                  case 2:
                    return [4, Kd(this.firebaseDependencies)];
                  case 3:
                    return (
                      (r = i.sent()),
                      [4, iv(this.firebaseDependencies, self.registration)]
                    );
                  case 4:
                    return (
                      i.sent(),
                      [
                        4,
                        rv(
                          this.firebaseDependencies,
                          self.registration,
                          null !==
                            (n =
                              null ===
                                (e =
                                  null == r ? void 0 : r.subscriptionOptions) ||
                              void 0 === e
                                ? void 0
                                : e.vapidKey) && void 0 !== n
                            ? n
                            : jd
                        ),
                      ]
                    );
                  case 5:
                    return i.sent(), [2];
                }
              });
            });
          }),
          (t.prototype.onNotificationClick = function (t) {
            var e, n;
            return (0, lr.mG)(this, void 0, void 0, function () {
              var r, i, o, s, a;
              return (0, lr.Jh)(this, function (u) {
                switch (u.label) {
                  case 0:
                    return (r =
                      null ===
                        (n =
                          null === (e = t.notification) || void 0 === e
                            ? void 0
                            : e.data) || void 0 === n
                        ? void 0
                        : n.FCM_MSG)
                      ? t.action
                        ? [2]
                        : (t.stopImmediatePropagation(),
                          t.notification.close(),
                          (i = (function (t) {
                            var e,
                              n,
                              r,
                              i =
                                null !==
                                  (n =
                                    null === (e = t.fcmOptions) || void 0 === e
                                      ? void 0
                                      : e.link) && void 0 !== n
                                  ? n
                                  : null === (r = t.notification) ||
                                    void 0 === r
                                  ? void 0
                                  : r.click_action;
                            return (
                              i || (uv(t.data) ? self.location.origin : null)
                            );
                          })(r))
                            ? ((o = new URL(i, self.location.href)),
                              (s = new URL(self.location.origin)),
                              o.host !== s.host ? [2] : [4, fv(o)])
                            : [2])
                      : [2];
                  case 1:
                    return (a = u.sent())
                      ? [3, 4]
                      : [4, self.clients.openWindow(i)];
                  case 2:
                    return (a = u.sent()), [4, cv(3e3)];
                  case 3:
                    return u.sent(), [3, 6];
                  case 4:
                    return [4, a.focus()];
                  case 5:
                    (a = u.sent()), (u.label = 6);
                  case 6:
                    return a
                      ? ((r.messageType = Rd.NOTIFICATION_CLICKED),
                        (r.isFirebaseMessaging = !0),
                        [2, a.postMessage(r)])
                      : [2];
                }
              });
            });
          }),
          t
        );
      })();
      function lv(t) {
        var e,
          n = (0, lr.pi)({}, t.notification);
        return (n.data = (((e = {}).FCM_MSG = t), e)), n;
      }
      function fv(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n, r, i, o, s, a;
          return (0, lr.Jh)(this, function (u) {
            switch (u.label) {
              case 0:
                return [4, dv()];
              case 1:
                e = u.sent();
                try {
                  for (n = (0, lr.XA)(e), r = n.next(); !r.done; r = n.next())
                    if (
                      ((i = r.value),
                      (o = new URL(i.url, self.location.href)),
                      t.host === o.host)
                    )
                      return [2, i];
                } catch (t) {
                  s = { error: t };
                } finally {
                  try {
                    r && !r.done && (a = n.return) && a.call(n);
                  } finally {
                    if (s) throw s.error;
                  }
                }
                return [2, null];
            }
          });
        });
      }
      function pv(t, e) {
        var n, r;
        (e.isFirebaseMessaging = !0), (e.messageType = Rd.PUSH_RECEIVED);
        try {
          for (var i = (0, lr.XA)(t), o = i.next(); !o.done; o = i.next())
            o.value.postMessage(e);
        } catch (t) {
          n = { error: t };
        } finally {
          try {
            o && !o.done && (r = i.return) && r.call(i);
          } finally {
            if (n) throw n.error;
          }
        }
      }
      function dv() {
        return self.clients.matchAll({
          type: "window",
          includeUncontrolled: !0,
        });
      }
      function vv(t) {
        var e,
          n = t.actions,
          r = Notification.maxActions;
        return (
          n &&
            r &&
            n.length > r &&
            console.warn(
              "This browser only supports " +
                r +
                " actions. The remaining actions will not be displayed."
            ),
          self.registration.showNotification(
            null !== (e = t.title) && void 0 !== e ? e : "",
            t
          )
        );
      }
      var gv = (function () {
        function t(t) {
          var e = this;
          (this.firebaseDependencies = t),
            (this.vapidKey = null),
            (this.onMessageCallback = null),
            navigator.serviceWorker.addEventListener("message", function (t) {
              return e.messageEventListener(t);
            });
        }
        return (
          Object.defineProperty(t.prototype, "app", {
            get: function () {
              return this.firebaseDependencies.app;
            },
            enumerable: !1,
            configurable: !0,
          }),
          (t.prototype.messageEventListener = function (t) {
            return (0, lr.mG)(this, void 0, void 0, function () {
              var e, n;
              return (0, lr.Jh)(this, function (r) {
                switch (r.label) {
                  case 0:
                    return (e = t.data).isFirebaseMessaging
                      ? (this.onMessageCallback &&
                          e.messageType === Rd.PUSH_RECEIVED &&
                          ("function" == typeof this.onMessageCallback
                            ? this.onMessageCallback(
                                (function (t) {
                                  return (
                                    delete t.messageType,
                                    delete t.isFirebaseMessaging,
                                    t
                                  );
                                })(Object.assign({}, e))
                              )
                            : this.onMessageCallback.next(
                                Object.assign({}, e)
                              )),
                        uv((n = e.data)) && "1" === n["google.c.a.e"]
                          ? [4, this.logEvent(e.messageType, n)]
                          : [3, 2])
                      : [2];
                  case 1:
                    r.sent(), (r.label = 2);
                  case 2:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.getVapidKey = function () {
            return this.vapidKey;
          }),
          (t.prototype.getSwReg = function () {
            return this.swRegistration;
          }),
          (t.prototype.getToken = function (t) {
            return (0, lr.mG)(this, void 0, void 0, function () {
              return (0, lr.Jh)(this, function (e) {
                switch (e.label) {
                  case 0:
                    return "default" !== Notification.permission
                      ? [3, 2]
                      : [4, Notification.requestPermission()];
                  case 1:
                    e.sent(), (e.label = 2);
                  case 2:
                    if ("granted" !== Notification.permission)
                      throw Ld.create("permission-blocked");
                    return [
                      4,
                      this.updateVapidKey(null == t ? void 0 : t.vapidKey),
                    ];
                  case 3:
                    return (
                      e.sent(),
                      [
                        4,
                        this.updateSwReg(
                          null == t ? void 0 : t.serviceWorkerRegistration
                        ),
                      ]
                    );
                  case 4:
                    return (
                      e.sent(),
                      [
                        2,
                        rv(
                          this.firebaseDependencies,
                          this.swRegistration,
                          this.vapidKey
                        ),
                      ]
                    );
                }
              });
            });
          }),
          (t.prototype.updateVapidKey = function (t) {
            return (0, lr.mG)(this, void 0, void 0, function () {
              return (0, lr.Jh)(this, function (e) {
                return (
                  t
                    ? (this.vapidKey = t)
                    : this.vapidKey || (this.vapidKey = jd),
                  [2]
                );
              });
            });
          }),
          (t.prototype.updateSwReg = function (t) {
            return (0, lr.mG)(this, void 0, void 0, function () {
              return (0, lr.Jh)(this, function (e) {
                switch (e.label) {
                  case 0:
                    return t || this.swRegistration
                      ? [3, 2]
                      : [4, this.registerDefaultSw()];
                  case 1:
                    e.sent(), (e.label = 2);
                  case 2:
                    if (!t && this.swRegistration) return [2];
                    if (!(t instanceof ServiceWorkerRegistration))
                      throw Ld.create("invalid-sw-registration");
                    return (this.swRegistration = t), [2];
                }
              });
            });
          }),
          (t.prototype.registerDefaultSw = function () {
            return (0, lr.mG)(this, void 0, void 0, function () {
              var t, e;
              return (0, lr.Jh)(this, function (n) {
                switch (n.label) {
                  case 0:
                    return (
                      n.trys.push([0, 2, , 3]),
                      (t = this),
                      [
                        4,
                        navigator.serviceWorker.register(
                          "/firebase-messaging-sw.js",
                          { scope: "/firebase-cloud-messaging-push-scope" }
                        ),
                      ]
                    );
                  case 1:
                    return (
                      (t.swRegistration = n.sent()),
                      this.swRegistration.update().catch(function () {}),
                      [3, 3]
                    );
                  case 2:
                    throw (
                      ((e = n.sent()),
                      Ld.create("failed-service-worker-registration", {
                        browserErrorMessage: e.message,
                      }))
                    );
                  case 3:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.deleteToken = function () {
            return (0, lr.mG)(this, void 0, void 0, function () {
              return (0, lr.Jh)(this, function (t) {
                switch (t.label) {
                  case 0:
                    return this.swRegistration
                      ? [3, 2]
                      : [4, this.registerDefaultSw()];
                  case 1:
                    t.sent(), (t.label = 2);
                  case 2:
                    return [
                      2,
                      iv(this.firebaseDependencies, this.swRegistration),
                    ];
                }
              });
            });
          }),
          (t.prototype.requestPermission = function () {
            return (0, lr.mG)(this, void 0, void 0, function () {
              var t;
              return (0, lr.Jh)(this, function (e) {
                switch (e.label) {
                  case 0:
                    return "granted" === Notification.permission
                      ? [2]
                      : [4, Notification.requestPermission()];
                  case 1:
                    if ("granted" === (t = e.sent())) return [2];
                    throw "denied" === t
                      ? Ld.create("permission-blocked")
                      : Ld.create("permission-default");
                }
              });
            });
          }),
          (t.prototype.usePublicVapidKey = function (t) {
            if (null !== this.vapidKey)
              throw Ld.create("use-vapid-key-after-get-token");
            if ("string" != typeof t || 0 === t.length)
              throw Ld.create("invalid-vapid-key");
            this.vapidKey = t;
          }),
          (t.prototype.useServiceWorker = function (t) {
            if (!(t instanceof ServiceWorkerRegistration))
              throw Ld.create("invalid-sw-registration");
            if (this.swRegistration) throw Ld.create("use-sw-after-get-token");
            this.swRegistration = t;
          }),
          (t.prototype.onMessage = function (t) {
            var e = this;
            return (
              (this.onMessageCallback = t),
              function () {
                e.onMessageCallback = null;
              }
            );
          }),
          (t.prototype.setBackgroundMessageHandler = function () {
            throw Ld.create("only-available-in-sw");
          }),
          (t.prototype.onBackgroundMessage = function () {
            throw Ld.create("only-available-in-sw");
          }),
          (t.prototype.onTokenRefresh = function () {
            return function () {};
          }),
          (t.prototype.logEvent = function (t, e) {
            return (0, lr.mG)(this, void 0, void 0, function () {
              var n;
              return (0, lr.Jh)(this, function (r) {
                switch (r.label) {
                  case 0:
                    return (
                      (n = (function (t) {
                        switch (t) {
                          case Rd.NOTIFICATION_CLICKED:
                            return "notification_open";
                          case Rd.PUSH_RECEIVED:
                            return "notification_foreground";
                          default:
                            throw new Error();
                        }
                      })(t)),
                      [4, this.firebaseDependencies.analyticsProvider.get()]
                    );
                  case 1:
                    return (
                      r
                        .sent()
                        .logEvent(n, {
                          message_id: e["google.c.a.c_id"],
                          message_name: e["google.c.a.c_l"],
                          message_time: e["google.c.a.ts"],
                          message_device_time: Math.floor(Date.now() / 1e3),
                        }),
                      [2]
                    );
                }
              });
            });
          }),
          t
        );
      })();
      function mv(t) {
        return Ld.create("missing-app-config-values", { valueName: t });
      }
      var yv = { isSupported: bv };
      function bv() {
        return self && "ServiceWorkerGlobalScope" in self
          ? "indexedDB" in self &&
              null !== indexedDB &&
              "PushManager" in self &&
              "Notification" in self &&
              ServiceWorkerRegistration.prototype.hasOwnProperty(
                "showNotification"
              ) &&
              PushSubscription.prototype.hasOwnProperty("getKey")
          : "indexedDB" in window &&
              null !== indexedDB &&
              navigator.cookieEnabled &&
              "serviceWorker" in navigator &&
              "PushManager" in window &&
              "Notification" in window &&
              "fetch" in window &&
              ServiceWorkerRegistration.prototype.hasOwnProperty(
                "showNotification"
              ) &&
              PushSubscription.prototype.hasOwnProperty("getKey");
      }
      e.Z.INTERNAL.registerComponent(
        new Mp.wA(
          "messaging",
          function (t) {
            var e = t.getProvider("app").getImmediate(),
              n = {
                app: e,
                appConfig: (function (t) {
                  var e, n;
                  if (!t || !t.options) throw mv("App Configuration Object");
                  if (!t.name) throw mv("App Name");
                  var r = t.options;
                  try {
                    for (
                      var i = (0, lr.XA)([
                          "projectId",
                          "apiKey",
                          "appId",
                          "messagingSenderId",
                        ]),
                        o = i.next();
                      !o.done;
                      o = i.next()
                    ) {
                      var s = o.value;
                      if (!r[s]) throw mv(s);
                    }
                  } catch (t) {
                    e = { error: t };
                  } finally {
                    try {
                      o && !o.done && (n = i.return) && n.call(i);
                    } finally {
                      if (e) throw e.error;
                    }
                  }
                  return {
                    appName: t.name,
                    projectId: r.projectId,
                    apiKey: r.apiKey,
                    appId: r.appId,
                    senderId: r.messagingSenderId,
                  };
                })(e),
                installations: t.getProvider("installations").getImmediate(),
                analyticsProvider: t.getProvider("analytics-internal"),
              };
            if (!bv()) throw Ld.create("unsupported-browser");
            return self && "ServiceWorkerGlobalScope" in self
              ? new hv(n)
              : new gv(n);
          },
          "PUBLIC"
        ).setServiceProps(yv)
      );
      var wv = "firebasestorage.googleapis.com",
        _v = (function (t) {
          function e(n, r) {
            var i =
              t.call(
                this,
                Iv(n),
                "Firebase Storage: " + r + " (" + Iv(n) + ")"
              ) || this;
            return (
              (i.customData = { serverResponse: null }),
              Object.setPrototypeOf(i, e.prototype),
              i
            );
          }
          return (
            (0, lr.ZT)(e, t),
            (e.prototype._codeEquals = function (t) {
              return Iv(t) === this.code;
            }),
            Object.defineProperty(e.prototype, "message", {
              get: function () {
                return this.customData.serverResponse
                  ? this.message + "\n" + this.customData.serverResponse
                  : this.message;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(e.prototype, "serverResponse", {
              get: function () {
                return this.customData.serverResponse;
              },
              set: function (t) {
                this.customData.serverResponse = t;
              },
              enumerable: !1,
              configurable: !0,
            }),
            e
          );
        })(i.ZR);
      function Iv(t) {
        return "storage/" + t;
      }
      function Ev() {
        return new _v(
          "unknown",
          "An unknown error occurred, please check the error payload for server response."
        );
      }
      function Tv() {
        return new _v("canceled", "User canceled the upload/download.");
      }
      function Sv() {
        return new _v(
          "cannot-slice-blob",
          "Cannot slice blob for upload. Please retry the upload."
        );
      }
      function Cv(t) {
        return new _v("invalid-argument", t);
      }
      function kv() {
        return new _v("app-deleted", "The Firebase app was deleted.");
      }
      function Nv(t) {
        return new _v(
          "invalid-root-operation",
          "The operation '" +
            t +
            "' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png')."
        );
      }
      function Av(t, e) {
        return new _v(
          "invalid-format",
          "String does not match format '" + t + "': " + e
        );
      }
      function Pv(t) {
        throw new _v("internal-error", "Internal error: " + t);
      }
      var Dv = {
          RAW: "raw",
          BASE64: "base64",
          BASE64URL: "base64url",
          DATA_URL: "data_url",
        },
        xv = function (t, e) {
          (this.data = t), (this.contentType = e || null);
        };
      function Ov(t, e) {
        switch (t) {
          case Dv.RAW:
            return new xv(Rv(e));
          case Dv.BASE64:
          case Dv.BASE64URL:
            return new xv(Mv(t, e));
          case Dv.DATA_URL:
            return new xv(
              (n = new jv(e)).base64
                ? Mv(Dv.BASE64, n.rest)
                : (function (t) {
                    var e;
                    try {
                      e = decodeURIComponent(t);
                    } catch (t) {
                      throw Av(Dv.DATA_URL, "Malformed data URL.");
                    }
                    return Rv(e);
                  })(n.rest),
              new jv(e).contentType
            );
        }
        var n;
        throw Ev();
      }
      function Rv(t) {
        for (var e = [], n = 0; n < t.length; n++) {
          var r = t.charCodeAt(n);
          r <= 127
            ? e.push(r)
            : r <= 2047
            ? e.push(192 | (r >> 6), 128 | (63 & r))
            : 55296 == (64512 & r)
            ? n < t.length - 1 && 56320 == (64512 & t.charCodeAt(n + 1))
              ? ((r = 65536 | ((1023 & r) << 10) | (1023 & t.charCodeAt(++n))),
                e.push(
                  240 | (r >> 18),
                  128 | ((r >> 12) & 63),
                  128 | ((r >> 6) & 63),
                  128 | (63 & r)
                ))
              : e.push(239, 191, 189)
            : 56320 == (64512 & r)
            ? e.push(239, 191, 189)
            : e.push(224 | (r >> 12), 128 | ((r >> 6) & 63), 128 | (63 & r));
        }
        return new Uint8Array(e);
      }
      function Mv(t, e) {
        switch (t) {
          case Dv.BASE64:
            var n = -1 !== e.indexOf("-"),
              r = -1 !== e.indexOf("_");
            if (n || r)
              throw Av(
                t,
                "Invalid character '" +
                  (n ? "-" : "_") +
                  "' found: is it base64url encoded?"
              );
            break;
          case Dv.BASE64URL:
            var i = -1 !== e.indexOf("+"),
              o = -1 !== e.indexOf("/");
            if (i || o)
              throw Av(
                t,
                "Invalid character '" +
                  (i ? "+" : "/") +
                  "' found: is it base64 encoded?"
              );
            e = e.replace(/-/g, "+").replace(/_/g, "/");
        }
        var s;
        try {
          s = atob(e);
        } catch (e) {
          throw Av(t, "Invalid character found");
        }
        for (var a = new Uint8Array(s.length), u = 0; u < s.length; u++)
          a[u] = s.charCodeAt(u);
        return a;
      }
      var Lv,
        jv = function (t) {
          (this.base64 = !1), (this.contentType = null);
          var e = t.match(/^data:([^,]+)?,/);
          if (null === e)
            throw Av(
              Dv.DATA_URL,
              "Must be formatted 'data:[<mediatype>][;base64],<data>"
            );
          var n,
            r,
            i = e[1] || null;
          null != i &&
            ((this.base64 =
              ((r = ";base64"),
              (n = i).length >= r.length &&
                n.substring(n.length - r.length) === r)),
            (this.contentType = this.base64
              ? i.substring(0, i.length - ";base64".length)
              : i)),
            (this.rest = t.substring(t.indexOf(",") + 1));
        },
        Fv = { STATE_CHANGED: "state_changed" },
        Uv = {
          RUNNING: "running",
          PAUSED: "paused",
          SUCCESS: "success",
          CANCELED: "canceled",
          ERROR: "error",
        };
      function Vv(t) {
        switch (t) {
          case "running":
          case "pausing":
          case "canceling":
            return Uv.RUNNING;
          case "paused":
            return Uv.PAUSED;
          case "success":
            return Uv.SUCCESS;
          case "canceled":
            return Uv.CANCELED;
          case "error":
          default:
            return Uv.ERROR;
        }
      }
      !(function (t) {
        (t[(t.NO_ERROR = 0)] = "NO_ERROR"),
          (t[(t.NETWORK_ERROR = 1)] = "NETWORK_ERROR"),
          (t[(t.ABORT = 2)] = "ABORT");
      })(Lv || (Lv = {}));
      var qv = (function () {
          function t() {
            var t = this;
            (this.sent_ = !1),
              (this.xhr_ = new XMLHttpRequest()),
              (this.errorCode_ = Lv.NO_ERROR),
              (this.sendPromise_ = new Promise(function (e) {
                t.xhr_.addEventListener("abort", function () {
                  (t.errorCode_ = Lv.ABORT), e(t);
                }),
                  t.xhr_.addEventListener("error", function () {
                    (t.errorCode_ = Lv.NETWORK_ERROR), e(t);
                  }),
                  t.xhr_.addEventListener("load", function () {
                    e(t);
                  });
              }));
          }
          return (
            (t.prototype.send = function (t, e, n, r) {
              if (this.sent_) throw Pv("cannot .send() more than once");
              if (((this.sent_ = !0), this.xhr_.open(e, t, !0), void 0 !== r))
                for (var i in r)
                  r.hasOwnProperty(i) &&
                    this.xhr_.setRequestHeader(i, r[i].toString());
              return (
                void 0 !== n ? this.xhr_.send(n) : this.xhr_.send(),
                this.sendPromise_
              );
            }),
            (t.prototype.getErrorCode = function () {
              if (!this.sent_)
                throw Pv("cannot .getErrorCode() before sending");
              return this.errorCode_;
            }),
            (t.prototype.getStatus = function () {
              if (!this.sent_) throw Pv("cannot .getStatus() before sending");
              try {
                return this.xhr_.status;
              } catch (t) {
                return -1;
              }
            }),
            (t.prototype.getResponseText = function () {
              if (!this.sent_)
                throw Pv("cannot .getResponseText() before sending");
              return this.xhr_.responseText;
            }),
            (t.prototype.abort = function () {
              this.xhr_.abort();
            }),
            (t.prototype.getResponseHeader = function (t) {
              return this.xhr_.getResponseHeader(t);
            }),
            (t.prototype.addUploadProgressListener = function (t) {
              null != this.xhr_.upload &&
                this.xhr_.upload.addEventListener("progress", t);
            }),
            (t.prototype.removeUploadProgressListener = function (t) {
              null != this.xhr_.upload &&
                this.xhr_.upload.removeEventListener("progress", t);
            }),
            t
          );
        })(),
        Bv = (function () {
          function t() {}
          return (
            (t.prototype.createXhrIo = function () {
              return new qv();
            }),
            t
          );
        })();
      function Gv(t) {
        return "string" == typeof t || t instanceof String;
      }
      function Wv(t) {
        return zv() && t instanceof Blob;
      }
      function zv() {
        return "undefined" != typeof Blob;
      }
      function Hv(t, e, n, r) {
        if (r < e)
          throw Cv(
            "Invalid value for '" + t + "'. Expected " + e + " or greater."
          );
        if (r > n)
          throw Cv(
            "Invalid value for '" + t + "'. Expected " + n + " or less."
          );
      }
      function Kv() {
        return "undefined" != typeof BlobBuilder
          ? BlobBuilder
          : "undefined" != typeof WebKitBlobBuilder
          ? WebKitBlobBuilder
          : void 0;
      }
      function Jv() {
        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
        var n = Kv();
        if (void 0 !== n) {
          for (var r = new n(), i = 0; i < t.length; i++) r.append(t[i]);
          return r.getBlob();
        }
        if (zv()) return new Blob(t);
        throw new _v(
          "unsupported-environment",
          "This browser doesn't seem to support creating Blobs"
        );
      }
      var Qv = (function () {
          function t(t, e) {
            var n = 0,
              r = "";
            Wv(t)
              ? ((this.data_ = t), (n = t.size), (r = t.type))
              : t instanceof ArrayBuffer
              ? (e
                  ? (this.data_ = new Uint8Array(t))
                  : ((this.data_ = new Uint8Array(t.byteLength)),
                    this.data_.set(new Uint8Array(t))),
                (n = this.data_.length))
              : t instanceof Uint8Array &&
                (e
                  ? (this.data_ = t)
                  : ((this.data_ = new Uint8Array(t.length)),
                    this.data_.set(t)),
                (n = t.length)),
              (this.size_ = n),
              (this.type_ = r);
          }
          return (
            (t.prototype.size = function () {
              return this.size_;
            }),
            (t.prototype.type = function () {
              return this.type_;
            }),
            (t.prototype.slice = function (e, n) {
              if (Wv(this.data_)) {
                var r =
                  ((i = this.data_),
                  (o = e),
                  (s = n),
                  i.webkitSlice
                    ? i.webkitSlice(o, s)
                    : i.mozSlice
                    ? i.mozSlice(o, s)
                    : i.slice
                    ? i.slice(o, s)
                    : null);
                return null === r ? null : new t(r);
              }
              var i, o, s;
              return new t(new Uint8Array(this.data_.buffer, e, n - e), !0);
            }),
            (t.getBlob = function () {
              for (var e = [], n = 0; n < arguments.length; n++)
                e[n] = arguments[n];
              if (zv()) {
                var r = e.map(function (e) {
                  return e instanceof t ? e.data_ : e;
                });
                return new t(Jv.apply(null, r));
              }
              var i = e.map(function (t) {
                  return Gv(t) ? Ov(Dv.RAW, t).data : t.data_;
                }),
                o = 0;
              i.forEach(function (t) {
                o += t.byteLength;
              });
              var s = new Uint8Array(o),
                a = 0;
              return (
                i.forEach(function (t) {
                  for (var e = 0; e < t.length; e++) s[a++] = t[e];
                }),
                new t(s, !0)
              );
            }),
            (t.prototype.uploadData = function () {
              return this.data_;
            }),
            t
          );
        })(),
        Yv = (function () {
          function t(t, e) {
            (this.bucket = t), (this.path_ = e);
          }
          return (
            Object.defineProperty(t.prototype, "path", {
              get: function () {
                return this.path_;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "isRoot", {
              get: function () {
                return 0 === this.path.length;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.fullServerUrl = function () {
              var t = encodeURIComponent;
              return "/b/" + t(this.bucket) + "/o/" + t(this.path);
            }),
            (t.prototype.bucketOnlyServerUrl = function () {
              return "/b/" + encodeURIComponent(this.bucket) + "/o";
            }),
            (t.makeFromBucketSpec = function (e) {
              var n;
              try {
                n = t.makeFromUrl(e);
              } catch (n) {
                return new t(e, "");
              }
              if ("" === n.path) return n;
              throw new _v(
                "invalid-default-bucket",
                "Invalid default bucket '" + e + "'."
              );
            }),
            (t.makeFromUrl = function (e) {
              var n = null,
                r = "([A-Za-z0-9.\\-_]+)",
                i = new RegExp("^gs://" + r + "(/(.*))?$", "i");
              function o(t) {
                t.path_ = decodeURIComponent(t.path);
              }
              for (
                var s = wv.replace(/[.]/g, "\\."),
                  a = [
                    {
                      regex: i,
                      indices: { bucket: 1, path: 3 },
                      postModify: function (t) {
                        "/" === t.path.charAt(t.path.length - 1) &&
                          (t.path_ = t.path_.slice(0, -1));
                      },
                    },
                    {
                      regex: new RegExp(
                        "^https?://" +
                          s +
                          "/v[A-Za-z0-9_]+/b/" +
                          r +
                          "/o(/([^?#]*).*)?$",
                        "i"
                      ),
                      indices: { bucket: 1, path: 3 },
                      postModify: o,
                    },
                    {
                      regex: new RegExp(
                        "^https?://(?:storage.googleapis.com|storage.cloud.google.com)/" +
                          r +
                          "/([^?#]*)",
                        "i"
                      ),
                      indices: { bucket: 1, path: 2 },
                      postModify: o,
                    },
                  ],
                  u = 0;
                u < a.length;
                u++
              ) {
                var c = a[u],
                  h = c.regex.exec(e);
                if (h) {
                  var l = h[c.indices.bucket],
                    f = h[c.indices.path];
                  f || (f = ""), (n = new t(l, f)), c.postModify(n);
                  break;
                }
              }
              if (null == n)
                throw (function (t) {
                  return new _v("invalid-url", "Invalid URL '" + t + "'.");
                })(e);
              return n;
            }),
            t
          );
        })();
      function Xv(t) {
        var e;
        try {
          e = JSON.parse(t);
        } catch (t) {
          return null;
        }
        return (function (t) {
          return "object" == typeof t && !Array.isArray(t);
        })(e)
          ? e
          : null;
      }
      function Zv(t) {
        var e = t.lastIndexOf("/", t.length - 2);
        return -1 === e ? t : t.slice(e + 1);
      }
      function $v(t) {
        return "https://" + wv + "/v0" + t;
      }
      function tg(t) {
        var e = encodeURIComponent,
          n = "?";
        for (var r in t)
          t.hasOwnProperty(r) && (n = n + (e(r) + "=") + e(t[r]) + "&");
        return n.slice(0, -1);
      }
      function eg(t, e) {
        return e;
      }
      var ng = function (t, e, n, r) {
          (this.server = t),
            (this.local = e || t),
            (this.writable = !!n),
            (this.xform = r || eg);
        },
        rg = null;
      function ig() {
        if (rg) return rg;
        var t = [];
        t.push(new ng("bucket")),
          t.push(new ng("generation")),
          t.push(new ng("metageneration")),
          t.push(new ng("name", "fullPath", !0));
        var e = new ng("name");
        (e.xform = function (t, e) {
          return (function (t) {
            return !Gv(t) || t.length < 2 ? t : Zv(t);
          })(e);
        }),
          t.push(e);
        var n = new ng("size");
        return (
          (n.xform = function (t, e) {
            return void 0 !== e ? Number(e) : e;
          }),
          t.push(n),
          t.push(new ng("timeCreated")),
          t.push(new ng("updated")),
          t.push(new ng("md5Hash", null, !0)),
          t.push(new ng("cacheControl", null, !0)),
          t.push(new ng("contentDisposition", null, !0)),
          t.push(new ng("contentEncoding", null, !0)),
          t.push(new ng("contentLanguage", null, !0)),
          t.push(new ng("contentType", null, !0)),
          t.push(new ng("metadata", "customMetadata", !0)),
          (rg = t)
        );
      }
      function og(t, e, n) {
        var r = Xv(e);
        return null === r
          ? null
          : (function (t, e, n) {
              for (var r = { type: "file" }, i = n.length, o = 0; o < i; o++) {
                var s = n[o];
                r[s.local] = s.xform(r, e[s.server]);
              }
              return (
                (function (t, e) {
                  Object.defineProperty(t, "ref", {
                    get: function () {
                      var n = t.bucket,
                        r = t.fullPath,
                        i = new Yv(n, r);
                      return e._makeStorageReference(i);
                    },
                  });
                })(r, t),
                r
              );
            })(t, r, n);
      }
      function sg(t, e) {
        for (var n = {}, r = e.length, i = 0; i < r; i++) {
          var o = e[i];
          o.writable && (n[o.server] = t[o.local]);
        }
        return JSON.stringify(n);
      }
      var ag = function (t, e, n, r) {
        (this.url = t),
          (this.method = e),
          (this.handler = n),
          (this.timeout = r),
          (this.urlParams = {}),
          (this.headers = {}),
          (this.body = null),
          (this.errorHandler = null),
          (this.progressCallback = null),
          (this.successCodes = [200]),
          (this.additionalRetryCodes = []);
      };
      function ug(t) {
        if (!t) throw Ev();
      }
      function cg(t, e) {
        return function (n, r) {
          var i = og(t, r, e);
          return ug(null !== i), i;
        };
      }
      function hg(t) {
        return function (e, n) {
          var r, i, o;
          return (
            401 === e.getStatus()
              ? (r = new _v(
                  "unauthenticated",
                  "User is not authenticated, please authenticate using Firebase Authentication and try again."
                ))
              : 402 === e.getStatus()
              ? ((o = t.bucket),
                (r = new _v(
                  "quota-exceeded",
                  "Quota for bucket '" +
                    o +
                    "' exceeded, please view quota on https://firebase.google.com/pricing/."
                )))
              : 403 === e.getStatus()
              ? ((i = t.path),
                (r = new _v(
                  "unauthorized",
                  "User does not have permission to access '" + i + "'."
                )))
              : (r = n),
            (r.serverResponse = n.serverResponse),
            r
          );
        };
      }
      function lg(t) {
        var e = hg(t);
        return function (n, r) {
          var i,
            o = e(n, r);
          return (
            404 === n.getStatus() &&
              ((i = t.path),
              (o = new _v(
                "object-not-found",
                "Object '" + i + "' does not exist."
              ))),
            (o.serverResponse = r.serverResponse),
            o
          );
        };
      }
      function fg(t, e, n) {
        var r = $v(e.fullServerUrl()),
          i = t.maxOperationRetryTime,
          o = new ag(r, "GET", cg(t, n), i);
        return (o.errorHandler = lg(e)), o;
      }
      function pg(t, e, n, r, i) {
        var o = {};
        e.isRoot ? (o.prefix = "") : (o.prefix = e.path + "/"),
          n && n.length > 0 && (o.delimiter = n),
          r && (o.pageToken = r),
          i && (o.maxResults = i);
        var s = $v(e.bucketOnlyServerUrl()),
          a = t.maxOperationRetryTime,
          u = new ag(
            s,
            "GET",
            (function (t, e) {
              return function (n, r) {
                var i = (function (t, e, n) {
                  var r = Xv(n);
                  return null === r
                    ? null
                    : (function (t, e, n) {
                        var r = {
                          prefixes: [],
                          items: [],
                          nextPageToken: n.nextPageToken,
                        };
                        if (n.prefixes)
                          for (var i = 0, o = n.prefixes; i < o.length; i++) {
                            var s = o[i].replace(/\/$/, ""),
                              a = t._makeStorageReference(new Yv(e, s));
                            r.prefixes.push(a);
                          }
                        if (n.items)
                          for (var u = 0, c = n.items; u < c.length; u++) {
                            var h = c[u];
                            (a = t._makeStorageReference(new Yv(e, h.name))),
                              r.items.push(a);
                          }
                        return r;
                      })(t, e, r);
                })(t, e, r);
                return ug(null !== i), i;
              };
            })(t, e.bucket),
            a
          );
        return (u.urlParams = o), (u.errorHandler = hg(e)), u;
      }
      function dg(t, e, n) {
        var r = Object.assign({}, n);
        return (
          (r.fullPath = t.path),
          (r.size = e.size()),
          r.contentType ||
            (r.contentType = (function (t, e) {
              return (e && e.type()) || "application/octet-stream";
            })(0, e)),
          r
        );
      }
      var vg = function (t, e, n, r) {
        (this.current = t),
          (this.total = e),
          (this.finalized = !!n),
          (this.metadata = r || null);
      };
      function gg(t, e) {
        var n = null;
        try {
          n = t.getResponseHeader("X-Goog-Upload-Status");
        } catch (t) {
          ug(!1);
        }
        return ug(!!n && -1 !== (e || ["active"]).indexOf(n)), n;
      }
      var mg = 262144;
      var yg = function (t, e, n) {
        if (
          (function (t) {
            return "function" == typeof t;
          })(t) ||
          null != e ||
          null != n
        )
          (this.next = t), (this.error = e), (this.complete = n);
        else {
          var r = t;
          (this.next = r.next),
            (this.error = r.error),
            (this.complete = r.complete);
        }
      };
      function bg(t) {
        return function () {
          for (var e = [], n = 0; n < arguments.length; n++)
            e[n] = arguments[n];
          Promise.resolve().then(function () {
            return t.apply(void 0, e);
          });
        };
      }
      var wg = (function () {
          function t(t, e, n) {
            var r = this;
            void 0 === n && (n = null),
              (this._transferred = 0),
              (this._needToFetchStatus = !1),
              (this._needToFetchMetadata = !1),
              (this._observers = []),
              (this._error = void 0),
              (this._uploadUrl = void 0),
              (this._request = void 0),
              (this._chunkMultiplier = 1),
              (this._resolve = void 0),
              (this._reject = void 0),
              (this._ref = t),
              (this._blob = e),
              (this._metadata = n),
              (this._mappings = ig()),
              (this._resumable = this._shouldDoResumable(this._blob)),
              (this._state = "running"),
              (this._errorHandler = function (t) {
                (r._request = void 0),
                  (r._chunkMultiplier = 1),
                  t._codeEquals("canceled")
                    ? ((r._needToFetchStatus = !0), r.completeTransitions_())
                    : ((r._error = t), r._transition("error"));
              }),
              (this._metadataErrorHandler = function (t) {
                (r._request = void 0),
                  t._codeEquals("canceled")
                    ? r.completeTransitions_()
                    : ((r._error = t), r._transition("error"));
              }),
              (this._promise = new Promise(function (t, e) {
                (r._resolve = t), (r._reject = e), r._start();
              })),
              this._promise.then(null, function () {});
          }
          return (
            (t.prototype._makeProgressCallback = function () {
              var t = this,
                e = this._transferred;
              return function (n) {
                return t._updateProgress(e + n);
              };
            }),
            (t.prototype._shouldDoResumable = function (t) {
              return t.size() > 262144;
            }),
            (t.prototype._start = function () {
              "running" === this._state &&
                void 0 === this._request &&
                (this._resumable
                  ? void 0 === this._uploadUrl
                    ? this._createResumable()
                    : this._needToFetchStatus
                    ? this._fetchStatus()
                    : this._needToFetchMetadata
                    ? this._fetchMetadata()
                    : this._continueUpload()
                  : this._oneShotUpload());
            }),
            (t.prototype._resolveToken = function (t) {
              var e = this;
              this._ref.storage._getAuthToken().then(function (n) {
                switch (e._state) {
                  case "running":
                    t(n);
                    break;
                  case "canceling":
                    e._transition("canceled");
                    break;
                  case "pausing":
                    e._transition("paused");
                }
              });
            }),
            (t.prototype._createResumable = function () {
              var t = this;
              this._resolveToken(function (e) {
                var n = (function (t, e, n, r, i) {
                    var o = e.bucketOnlyServerUrl(),
                      s = dg(e, r, i),
                      a = { name: s.fullPath },
                      u = $v(o),
                      c = {
                        "X-Goog-Upload-Protocol": "resumable",
                        "X-Goog-Upload-Command": "start",
                        "X-Goog-Upload-Header-Content-Length": r.size(),
                        "X-Goog-Upload-Header-Content-Type": s.contentType,
                        "Content-Type": "application/json; charset=utf-8",
                      },
                      h = sg(s, n),
                      l = t.maxUploadRetryTime,
                      f = new ag(
                        u,
                        "POST",
                        function (t) {
                          var e;
                          gg(t);
                          try {
                            e = t.getResponseHeader("X-Goog-Upload-URL");
                          } catch (t) {
                            ug(!1);
                          }
                          return ug(Gv(e)), e;
                        },
                        l
                      );
                    return (
                      (f.urlParams = a),
                      (f.headers = c),
                      (f.body = h),
                      (f.errorHandler = hg(e)),
                      f
                    );
                  })(
                    t._ref.storage,
                    t._ref._location,
                    t._mappings,
                    t._blob,
                    t._metadata
                  ),
                  r = t._ref.storage._makeRequest(n, e);
                (t._request = r),
                  r.getPromise().then(function (e) {
                    (t._request = void 0),
                      (t._uploadUrl = e),
                      (t._needToFetchStatus = !1),
                      t.completeTransitions_();
                  }, t._errorHandler);
              });
            }),
            (t.prototype._fetchStatus = function () {
              var t = this,
                e = this._uploadUrl;
              this._resolveToken(function (n) {
                var r = (function (t, e, n, r) {
                    var i = t.maxUploadRetryTime,
                      o = new ag(
                        n,
                        "POST",
                        function (t) {
                          var e = gg(t, ["active", "final"]),
                            n = null;
                          try {
                            n = t.getResponseHeader(
                              "X-Goog-Upload-Size-Received"
                            );
                          } catch (t) {
                            ug(!1);
                          }
                          n || ug(!1);
                          var i = Number(n);
                          return (
                            ug(!isNaN(i)), new vg(i, r.size(), "final" === e)
                          );
                        },
                        i
                      );
                    return (
                      (o.headers = { "X-Goog-Upload-Command": "query" }),
                      (o.errorHandler = hg(e)),
                      o
                    );
                  })(t._ref.storage, t._ref._location, e, t._blob),
                  i = t._ref.storage._makeRequest(r, n);
                (t._request = i),
                  i.getPromise().then(function (e) {
                    (e = e),
                      (t._request = void 0),
                      t._updateProgress(e.current),
                      (t._needToFetchStatus = !1),
                      e.finalized && (t._needToFetchMetadata = !0),
                      t.completeTransitions_();
                  }, t._errorHandler);
              });
            }),
            (t.prototype._continueUpload = function () {
              var t = this,
                e = mg * this._chunkMultiplier,
                n = new vg(this._transferred, this._blob.size()),
                r = this._uploadUrl;
              this._resolveToken(function (i) {
                var o;
                try {
                  o = (function (t, e, n, r, i, o, s, a) {
                    var u = new vg(0, 0);
                    if (
                      (s
                        ? ((u.current = s.current), (u.total = s.total))
                        : ((u.current = 0), (u.total = r.size())),
                      r.size() !== u.total)
                    )
                      throw new _v(
                        "server-file-wrong-size",
                        "Server recorded incorrect upload file size, please retry the upload."
                      );
                    var c = u.total - u.current,
                      h = c;
                    i > 0 && (h = Math.min(h, i));
                    var l = u.current,
                      f = l + h,
                      p = {
                        "X-Goog-Upload-Command":
                          h === c ? "upload, finalize" : "upload",
                        "X-Goog-Upload-Offset": u.current,
                      },
                      d = r.slice(l, f);
                    if (null === d) throw Sv();
                    var v = e.maxUploadRetryTime,
                      g = new ag(
                        n,
                        "POST",
                        function (t, n) {
                          var i,
                            s = gg(t, ["active", "final"]),
                            a = u.current + h,
                            c = r.size();
                          return (
                            (i = "final" === s ? cg(e, o)(t, n) : null),
                            new vg(a, c, "final" === s, i)
                          );
                        },
                        v
                      );
                    return (
                      (g.headers = p),
                      (g.body = d.uploadData()),
                      (g.progressCallback = a || null),
                      (g.errorHandler = hg(t)),
                      g
                    );
                  })(
                    t._ref._location,
                    t._ref.storage,
                    r,
                    t._blob,
                    e,
                    t._mappings,
                    n,
                    t._makeProgressCallback()
                  );
                } catch (e) {
                  return (t._error = e), void t._transition("error");
                }
                var s = t._ref.storage._makeRequest(o, i);
                (t._request = s),
                  s.getPromise().then(function (e) {
                    t._increaseMultiplier(),
                      (t._request = void 0),
                      t._updateProgress(e.current),
                      e.finalized
                        ? ((t._metadata = e.metadata), t._transition("success"))
                        : t.completeTransitions_();
                  }, t._errorHandler);
              });
            }),
            (t.prototype._increaseMultiplier = function () {
              mg * this._chunkMultiplier < 33554432 &&
                (this._chunkMultiplier *= 2);
            }),
            (t.prototype._fetchMetadata = function () {
              var t = this;
              this._resolveToken(function (e) {
                var n = fg(t._ref.storage, t._ref._location, t._mappings),
                  r = t._ref.storage._makeRequest(n, e);
                (t._request = r),
                  r.getPromise().then(function (e) {
                    (t._request = void 0),
                      (t._metadata = e),
                      t._transition("success");
                  }, t._metadataErrorHandler);
              });
            }),
            (t.prototype._oneShotUpload = function () {
              var t = this;
              this._resolveToken(function (e) {
                var n = (function (t, e, n, r, i) {
                    var o = e.bucketOnlyServerUrl(),
                      s = { "X-Goog-Upload-Protocol": "multipart" },
                      a = (function () {
                        for (var t = "", e = 0; e < 2; e++)
                          t += Math.random().toString().slice(2);
                        return t;
                      })();
                    s["Content-Type"] = "multipart/related; boundary=" + a;
                    var u = dg(e, r, i),
                      c =
                        "--" +
                        a +
                        "\r\nContent-Type: application/json; charset=utf-8\r\n\r\n" +
                        sg(u, n) +
                        "\r\n--" +
                        a +
                        "\r\nContent-Type: " +
                        u.contentType +
                        "\r\n\r\n",
                      h = "\r\n--" + a + "--",
                      l = Qv.getBlob(c, r, h);
                    if (null === l) throw Sv();
                    var f = { name: u.fullPath },
                      p = $v(o),
                      d = t.maxUploadRetryTime,
                      v = new ag(p, "POST", cg(t, n), d);
                    return (
                      (v.urlParams = f),
                      (v.headers = s),
                      (v.body = l.uploadData()),
                      (v.errorHandler = hg(e)),
                      v
                    );
                  })(
                    t._ref.storage,
                    t._ref._location,
                    t._mappings,
                    t._blob,
                    t._metadata
                  ),
                  r = t._ref.storage._makeRequest(n, e);
                (t._request = r),
                  r.getPromise().then(function (e) {
                    (t._request = void 0),
                      (t._metadata = e),
                      t._updateProgress(t._blob.size()),
                      t._transition("success");
                  }, t._errorHandler);
              });
            }),
            (t.prototype._updateProgress = function (t) {
              var e = this._transferred;
              (this._transferred = t),
                this._transferred !== e && this._notifyObservers();
            }),
            (t.prototype._transition = function (t) {
              if (this._state !== t)
                switch (t) {
                  case "canceling":
                  case "pausing":
                    (this._state = t),
                      void 0 !== this._request && this._request.cancel();
                    break;
                  case "running":
                    var e = "paused" === this._state;
                    (this._state = t),
                      e && (this._notifyObservers(), this._start());
                    break;
                  case "paused":
                    (this._state = t), this._notifyObservers();
                    break;
                  case "canceled":
                    (this._error = Tv()),
                      (this._state = t),
                      this._notifyObservers();
                    break;
                  case "error":
                  case "success":
                    (this._state = t), this._notifyObservers();
                }
            }),
            (t.prototype.completeTransitions_ = function () {
              switch (this._state) {
                case "pausing":
                  this._transition("paused");
                  break;
                case "canceling":
                  this._transition("canceled");
                  break;
                case "running":
                  this._start();
              }
            }),
            Object.defineProperty(t.prototype, "snapshot", {
              get: function () {
                var t = Vv(this._state);
                return {
                  bytesTransferred: this._transferred,
                  totalBytes: this._blob.size(),
                  state: t,
                  metadata: this._metadata,
                  task: this,
                  ref: this._ref,
                };
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.on = function (t, e, n, r) {
              var i = this,
                o = new yg(e, n, r);
              return (
                this._addObserver(o),
                function () {
                  i._removeObserver(o);
                }
              );
            }),
            (t.prototype.then = function (t, e) {
              return this._promise.then(t, e);
            }),
            (t.prototype.catch = function (t) {
              return this.then(null, t);
            }),
            (t.prototype._addObserver = function (t) {
              this._observers.push(t), this._notifyObserver(t);
            }),
            (t.prototype._removeObserver = function (t) {
              var e = this._observers.indexOf(t);
              -1 !== e && this._observers.splice(e, 1);
            }),
            (t.prototype._notifyObservers = function () {
              var t = this;
              this._finishPromise(),
                this._observers.slice().forEach(function (e) {
                  t._notifyObserver(e);
                });
            }),
            (t.prototype._finishPromise = function () {
              if (void 0 !== this._resolve) {
                var t = !0;
                switch (Vv(this._state)) {
                  case Uv.SUCCESS:
                    bg(this._resolve.bind(null, this.snapshot))();
                    break;
                  case Uv.CANCELED:
                  case Uv.ERROR:
                    bg(this._reject.bind(null, this._error))();
                    break;
                  default:
                    t = !1;
                }
                t && ((this._resolve = void 0), (this._reject = void 0));
              }
            }),
            (t.prototype._notifyObserver = function (t) {
              switch (Vv(this._state)) {
                case Uv.RUNNING:
                case Uv.PAUSED:
                  t.next && bg(t.next.bind(t, this.snapshot))();
                  break;
                case Uv.SUCCESS:
                  t.complete && bg(t.complete.bind(t))();
                  break;
                case Uv.CANCELED:
                case Uv.ERROR:
                  t.error && bg(t.error.bind(t, this._error))();
                  break;
                default:
                  t.error && bg(t.error.bind(t, this._error))();
              }
            }),
            (t.prototype.resume = function () {
              var t = "paused" === this._state || "pausing" === this._state;
              return t && this._transition("running"), t;
            }),
            (t.prototype.pause = function () {
              var t = "running" === this._state;
              return t && this._transition("pausing"), t;
            }),
            (t.prototype.cancel = function () {
              var t = "running" === this._state || "pausing" === this._state;
              return t && this._transition("canceling"), t;
            }),
            t
          );
        })(),
        _g = (function () {
          function t(t, e) {
            (this._service = t),
              (this._location = e instanceof Yv ? e : Yv.makeFromUrl(e));
          }
          return (
            (t.prototype.toString = function () {
              return (
                "gs://" + this._location.bucket + "/" + this._location.path
              );
            }),
            (t.prototype._newRef = function (e, n) {
              return new t(e, n);
            }),
            Object.defineProperty(t.prototype, "root", {
              get: function () {
                var t = new Yv(this._location.bucket, "");
                return this._newRef(this._service, t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "bucket", {
              get: function () {
                return this._location.bucket;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fullPath", {
              get: function () {
                return this._location.path;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "name", {
              get: function () {
                return Zv(this._location.path);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "storage", {
              get: function () {
                return this._service;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "parent", {
              get: function () {
                var e = (function (t) {
                  if (0 === t.length) return null;
                  var e = t.lastIndexOf("/");
                  return -1 === e ? "" : t.slice(0, e);
                })(this._location.path);
                if (null === e) return null;
                var n = new Yv(this._location.bucket, e);
                return new t(this._service, n);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype._throwIfRoot = function (t) {
              if ("" === this._location.path) throw Nv(t);
            }),
            t
          );
        })();
      function Ig(t) {
        var e = { prefixes: [], items: [] };
        return Eg(t, e).then(function () {
          return e;
        });
      }
      function Eg(t, e, n) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var r, i, o;
          return (0, lr.Jh)(this, function (s) {
            switch (s.label) {
              case 0:
                return [4, Tg(t, { pageToken: n })];
              case 1:
                return (
                  (r = s.sent()),
                  (i = e.prefixes).push.apply(i, r.prefixes),
                  (o = e.items).push.apply(o, r.items),
                  null == r.nextPageToken
                    ? [3, 3]
                    : [4, Eg(t, e, r.nextPageToken)]
                );
              case 2:
                s.sent(), (s.label = 3);
              case 3:
                return [2];
            }
          });
        });
      }
      function Tg(t, e) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i;
          return (0, lr.Jh)(this, function (o) {
            switch (o.label) {
              case 0:
                return (
                  null != e &&
                    "number" == typeof e.maxResults &&
                    Hv("options.maxResults", 1, 1e3, e.maxResults),
                  [4, t.storage._getAuthToken()]
                );
              case 1:
                return (
                  (n = o.sent()),
                  (r = e || {}),
                  (i = pg(
                    t.storage,
                    t._location,
                    "/",
                    r.pageToken,
                    r.maxResults
                  )),
                  [2, t.storage._makeRequest(i, n).getPromise()]
                );
            }
          });
        });
      }
      function Sg(t) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var e, n;
          return (0, lr.Jh)(this, function (r) {
            switch (r.label) {
              case 0:
                return (
                  t._throwIfRoot("getDownloadURL"),
                  [4, t.storage._getAuthToken()]
                );
              case 1:
                return (
                  (e = r.sent()),
                  (n = (function (t, e, n) {
                    var r = $v(e.fullServerUrl()),
                      i = t.maxOperationRetryTime,
                      o = new ag(
                        r,
                        "GET",
                        (function (t, e) {
                          return function (n, r) {
                            var i = og(t, r, e);
                            return (
                              ug(null !== i),
                              (function (t, e) {
                                var n = Xv(e);
                                if (null === n) return null;
                                if (!Gv(n.downloadTokens)) return null;
                                var r = n.downloadTokens;
                                if (0 === r.length) return null;
                                var i = encodeURIComponent;
                                return r.split(",").map(function (e) {
                                  var n = t.bucket,
                                    r = t.fullPath;
                                  return (
                                    $v("/b/" + i(n) + "/o/" + i(r)) +
                                    tg({ alt: "media", token: e })
                                  );
                                })[0];
                              })(i, r)
                            );
                          };
                        })(t, n),
                        i
                      );
                    return (o.errorHandler = lg(e)), o;
                  })(t.storage, t._location, ig())),
                  [
                    2,
                    t.storage
                      ._makeRequest(n, e)
                      .getPromise()
                      .then(function (t) {
                        if (null === t)
                          throw new _v(
                            "no-download-url",
                            "The given file does not have any download URLs."
                          );
                        return t;
                      }),
                  ]
                );
            }
          });
        });
      }
      function Cg(t, e) {
        var n = (function (t, e) {
            var n = e
              .split("/")
              .filter(function (t) {
                return t.length > 0;
              })
              .join("/");
            return 0 === t.length ? n : t + "/" + n;
          })(t._location.path, e),
          r = new Yv(t._location.bucket, n);
        return new _g(t.storage, r);
      }
      var kg = (function () {
          function t(t, e, n) {
            (this._delegate = t), (this.task = e), (this.ref = n);
          }
          return (
            Object.defineProperty(t.prototype, "bytesTransferred", {
              get: function () {
                return this._delegate.bytesTransferred;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "metadata", {
              get: function () {
                return this._delegate.metadata;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "state", {
              get: function () {
                return this._delegate.state;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "totalBytes", {
              get: function () {
                return this._delegate.totalBytes;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        Ng = (function () {
          function t(t, e) {
            (this._delegate = t),
              (this._ref = e),
              (this.cancel = this._delegate.cancel.bind(this._delegate)),
              (this.catch = this._delegate.catch.bind(this._delegate)),
              (this.pause = this._delegate.pause.bind(this._delegate)),
              (this.resume = this._delegate.resume.bind(this._delegate));
          }
          return (
            Object.defineProperty(t.prototype, "snapshot", {
              get: function () {
                return new kg(this._delegate.snapshot, this, this._ref);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.then = function (t, e) {
              var n = this;
              return this._delegate.then(function (e) {
                if (t) return t(new kg(e, n, n._ref));
              }, e);
            }),
            (t.prototype.on = function (t, e, n, r) {
              var i = this,
                o = void 0;
              return (
                e &&
                  (o =
                    "function" == typeof e
                      ? function (t) {
                          return e(new kg(t, i, i._ref));
                        }
                      : {
                          next: e.next
                            ? function (t) {
                                return e.next(new kg(t, i, i._ref));
                              }
                            : void 0,
                          complete: e.complete || void 0,
                          error: e.error || void 0,
                        }),
                this._delegate.on(t, o, n || void 0, r || void 0)
              );
            }),
            t
          );
        })(),
        Ag = (function () {
          function t(t, e) {
            (this._delegate = t), (this._service = e);
          }
          return (
            Object.defineProperty(t.prototype, "prefixes", {
              get: function () {
                var t = this;
                return this._delegate.prefixes.map(function (e) {
                  return new Pg(e, t._service);
                });
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "items", {
              get: function () {
                var t = this;
                return this._delegate.items.map(function (e) {
                  return new Pg(e, t._service);
                });
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "nextPageToken", {
              get: function () {
                return this._delegate.nextPageToken || null;
              },
              enumerable: !1,
              configurable: !0,
            }),
            t
          );
        })(),
        Pg = (function () {
          function t(t, e) {
            (this._delegate = t), (this.storage = e);
          }
          return (
            Object.defineProperty(t.prototype, "name", {
              get: function () {
                return this._delegate.name;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "bucket", {
              get: function () {
                return this._delegate.bucket;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "fullPath", {
              get: function () {
                return this._delegate.fullPath;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.toString = function () {
              return this._delegate.toString();
            }),
            (t.prototype.child = function (e) {
              return new t(Cg(this._delegate, e), this.storage);
            }),
            Object.defineProperty(t.prototype, "root", {
              get: function () {
                return new t(this._delegate.root, this.storage);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "parent", {
              get: function () {
                var e = this._delegate.parent;
                return null == e ? null : new t(e, this.storage);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.put = function (t, e) {
              return (
                this._throwIfRoot("put"),
                new Ng(
                  (function (t, e, n) {
                    return (
                      t._throwIfRoot("uploadBytesResumable"),
                      new wg(t, new Qv(e), n)
                    );
                  })(this._delegate, t, e),
                  this
                )
              );
            }),
            (t.prototype.putString = function (t, e, n) {
              void 0 === e && (e = Dv.RAW), this._throwIfRoot("putString");
              var r = Ov(e, t),
                i = (0, lr.pi)({}, n);
              return (
                null == i.contentType &&
                  null != r.contentType &&
                  (i.contentType = r.contentType),
                new Ng(new wg(this._delegate, new Qv(r.data, !0), i), this)
              );
            }),
            (t.prototype.listAll = function () {
              var t = this;
              return Ig(this._delegate).then(function (e) {
                return new Ag(e, t.storage);
              });
            }),
            (t.prototype.list = function (t) {
              var e = this;
              return Tg(this._delegate, t).then(function (t) {
                return new Ag(t, e.storage);
              });
            }),
            (t.prototype.getMetadata = function () {
              return (function (t) {
                return (0, lr.mG)(this, void 0, void 0, function () {
                  var e, n;
                  return (0, lr.Jh)(this, function (r) {
                    switch (r.label) {
                      case 0:
                        return (
                          t._throwIfRoot("getMetadata"),
                          [4, t.storage._getAuthToken()]
                        );
                      case 1:
                        return (
                          (e = r.sent()),
                          (n = fg(t.storage, t._location, ig())),
                          [2, t.storage._makeRequest(n, e).getPromise()]
                        );
                    }
                  });
                });
              })(this._delegate);
            }),
            (t.prototype.updateMetadata = function (t) {
              return (function (t, e) {
                return (0, lr.mG)(this, void 0, void 0, function () {
                  var n, r;
                  return (0, lr.Jh)(this, function (i) {
                    switch (i.label) {
                      case 0:
                        return (
                          t._throwIfRoot("updateMetadata"),
                          [4, t.storage._getAuthToken()]
                        );
                      case 1:
                        return (
                          (n = i.sent()),
                          (r = (function (t, e, n, r) {
                            var i = $v(e.fullServerUrl()),
                              o = sg(n, r),
                              s = t.maxOperationRetryTime,
                              a = new ag(i, "PATCH", cg(t, r), s);
                            return (
                              (a.headers = {
                                "Content-Type":
                                  "application/json; charset=utf-8",
                              }),
                              (a.body = o),
                              (a.errorHandler = lg(e)),
                              a
                            );
                          })(t.storage, t._location, e, ig())),
                          [2, t.storage._makeRequest(r, n).getPromise()]
                        );
                    }
                  });
                });
              })(this._delegate, t);
            }),
            (t.prototype.getDownloadURL = function () {
              return Sg(this._delegate);
            }),
            (t.prototype.delete = function () {
              return (
                this._throwIfRoot("delete"),
                (function (t) {
                  return (0, lr.mG)(this, void 0, void 0, function () {
                    var e, n;
                    return (0, lr.Jh)(this, function (r) {
                      switch (r.label) {
                        case 0:
                          return (
                            t._throwIfRoot("deleteObject"),
                            [4, t.storage._getAuthToken()]
                          );
                        case 1:
                          return (
                            (e = r.sent()),
                            (n = (function (t, e) {
                              var n = $v(e.fullServerUrl()),
                                r = t.maxOperationRetryTime,
                                i = new ag(n, "DELETE", function (t, e) {}, r);
                              return (
                                (i.successCodes = [200, 204]),
                                (i.errorHandler = lg(e)),
                                i
                              );
                            })(t.storage, t._location)),
                            [2, t.storage._makeRequest(n, e).getPromise()]
                          );
                      }
                    });
                  });
                })(this._delegate)
              );
            }),
            (t.prototype._throwIfRoot = function (t) {
              if ("" === this._delegate._location.path) throw Nv(t);
            }),
            t
          );
        })(),
        Dg = (function () {
          function t(t) {
            this.promise_ = Promise.reject(t);
          }
          return (
            (t.prototype.getPromise = function () {
              return this.promise_;
            }),
            (t.prototype.cancel = function (t) {}),
            t
          );
        })(),
        xg = (function () {
          function t(t, e, n, r, i, o, s, a, u, c, h) {
            var l = this;
            (this.pendingXhr_ = null),
              (this.backoffId_ = null),
              (this.canceled_ = !1),
              (this.appDelete_ = !1),
              (this.url_ = t),
              (this.method_ = e),
              (this.headers_ = n),
              (this.body_ = r),
              (this.successCodes_ = i.slice()),
              (this.additionalRetryCodes_ = o.slice()),
              (this.callback_ = s),
              (this.errorCallback_ = a),
              (this.progressCallback_ = c),
              (this.timeout_ = u),
              (this.pool_ = h),
              (this.promise_ = new Promise(function (t, e) {
                (l.resolve_ = t), (l.reject_ = e), l.start_();
              }));
          }
          return (
            (t.prototype.start_ = function () {
              var t = this;
              function e(e, n) {
                var r,
                  i = t.resolve_,
                  o = t.reject_,
                  s = n.xhr;
                if (n.wasSuccessCode)
                  try {
                    var a = t.callback_(s, s.getResponseText());
                    !(function (t) {
                      return void 0 !== t;
                    })(a)
                      ? i()
                      : i(a);
                  } catch (t) {
                    o(t);
                  }
                else
                  null !== s
                    ? (((r = Ev()).serverResponse = s.getResponseText()),
                      t.errorCallback_ ? o(t.errorCallback_(s, r)) : o(r))
                    : n.canceled
                    ? o((r = t.appDelete_ ? kv() : Tv()))
                    : o(
                        (r = new _v(
                          "retry-limit-exceeded",
                          "Max retry time for operation exceeded, please try again."
                        ))
                      );
              }
              this.canceled_
                ? e(0, new Og(!1, null, !0))
                : (this.backoffId_ = (function (e, n, r) {
                    var i = 1,
                      o = null,
                      s = !1,
                      a = 0;
                    function u() {
                      return 2 === a;
                    }
                    var c = !1;
                    function h() {
                      for (var t = [], e = 0; e < arguments.length; e++)
                        t[e] = arguments[e];
                      c || ((c = !0), n.apply(null, t));
                    }
                    function l(e) {
                      o = setTimeout(function () {
                        (o = null),
                          (function (e, n) {
                            if (n) e(!1, new Og(!1, null, !0));
                            else {
                              var r = t.pool_.createXhrIo();
                              (t.pendingXhr_ = r),
                                null !== t.progressCallback_ &&
                                  r.addUploadProgressListener(i),
                                r
                                  .send(t.url_, t.method_, t.body_, t.headers_)
                                  .then(function (n) {
                                    null !== t.progressCallback_ &&
                                      n.removeUploadProgressListener(i),
                                      (t.pendingXhr_ = null);
                                    var r =
                                        (n = n).getErrorCode() === Lv.NO_ERROR,
                                      o = n.getStatus();
                                    if (r && !t.isRetryStatusCode_(o)) {
                                      var s = -1 !== t.successCodes_.indexOf(o);
                                      e(!0, new Og(s, n));
                                    } else {
                                      var a = n.getErrorCode() === Lv.ABORT;
                                      e(!1, new Og(!1, null, a));
                                    }
                                  });
                            }
                            function i(e) {
                              var n = e.loaded,
                                r = e.lengthComputable ? e.total : -1;
                              null !== t.progressCallback_ &&
                                t.progressCallback_(n, r);
                            }
                          })(f, u());
                      }, e);
                    }
                    function f(t) {
                      for (var e = [], n = 1; n < arguments.length; n++)
                        e[n - 1] = arguments[n];
                      if (!c)
                        if (t) h.call.apply(h, (0, lr.ev)([null, t], e));
                        else {
                          var r;
                          u() || s
                            ? h.call.apply(h, (0, lr.ev)([null, t], e))
                            : (i < 64 && (i *= 2),
                              1 === a
                                ? ((a = 2), (r = 0))
                                : (r = 1e3 * (i + Math.random())),
                              l(r));
                        }
                    }
                    var p = !1;
                    function d(t) {
                      p ||
                        ((p = !0),
                        c ||
                          (null !== o
                            ? (t || (a = 2), clearTimeout(o), l(0))
                            : t || (a = 1)));
                    }
                    return (
                      l(0),
                      setTimeout(function () {
                        (s = !0), d(!0);
                      }, r),
                      d
                    );
                  })(0, e, this.timeout_));
            }),
            (t.prototype.getPromise = function () {
              return this.promise_;
            }),
            (t.prototype.cancel = function (t) {
              (this.canceled_ = !0),
                (this.appDelete_ = t || !1),
                null !== this.backoffId_ &&
                  (function (t) {
                    t(!1);
                  })(this.backoffId_),
                null !== this.pendingXhr_ && this.pendingXhr_.abort();
            }),
            (t.prototype.isRetryStatusCode_ = function (t) {
              var e = t >= 500 && t < 600,
                n = -1 !== [408, 429].indexOf(t),
                r = -1 !== this.additionalRetryCodes_.indexOf(t);
              return e || n || r;
            }),
            t
          );
        })(),
        Og = function (t, e, n) {
          (this.wasSuccessCode = t), (this.xhr = e), (this.canceled = !!n);
        };
      function Rg(t) {
        return /^[A-Za-z]+:\/\//.test(t);
      }
      function Mg(t, e) {
        if (t instanceof jg) {
          var n = t;
          if (null == n._bucket)
            throw new _v(
              "no-default-bucket",
              "No default bucket found. Did you set the 'storageBucket' property when initializing the app?"
            );
          var r = new _g(n, n._bucket);
          return null != e ? Mg(r, e) : r;
        }
        if (void 0 !== e) {
          if (e.includes("..")) throw Cv('`path` param cannot contain ".."');
          return Cg(t, e);
        }
        return t;
      }
      function Lg(t, e) {
        if (e && Rg(e)) {
          if (t instanceof jg) return new _g(t, e);
          throw Cv(
            "To use ref(service, url), the first argument must be a Storage instance."
          );
        }
        return Mg(t, e);
      }
      var jg = (function () {
          function t(t, e, n, r, i) {
            var o, s;
            (this.app = t),
              (this._authProvider = e),
              (this._pool = n),
              (this._url = r),
              (this._firebaseVersion = i),
              (this._bucket = null),
              (this._appId = null),
              (this._deleted = !1),
              (this._maxOperationRetryTime = 12e4),
              (this._maxUploadRetryTime = 6e5),
              (this._requests = new Set()),
              (this._bucket =
                null != r
                  ? Yv.makeFromBucketSpec(r)
                  : null ==
                    (s =
                      null == (o = this.app.options) ? void 0 : o.storageBucket)
                  ? null
                  : Yv.makeFromBucketSpec(s));
          }
          return (
            Object.defineProperty(t.prototype, "maxUploadRetryTime", {
              get: function () {
                return this._maxUploadRetryTime;
              },
              set: function (t) {
                Hv("time", 0, Number.POSITIVE_INFINITY, t),
                  (this._maxUploadRetryTime = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "maxOperationRetryTime", {
              get: function () {
                return this._maxOperationRetryTime;
              },
              set: function (t) {
                Hv("time", 0, Number.POSITIVE_INFINITY, t),
                  (this._maxOperationRetryTime = t);
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype._getAuthToken = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t, e;
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return (t = this._authProvider.getImmediate({
                        optional: !0,
                      }))
                        ? [4, t.getToken()]
                        : [3, 2];
                    case 1:
                      if (null !== (e = n.sent())) return [2, e.accessToken];
                      n.label = 2;
                    case 2:
                      return [2, null];
                  }
                });
              });
            }),
            (t.prototype._delete = function () {
              return (
                (this._deleted = !0),
                this._requests.forEach(function (t) {
                  return t.cancel();
                }),
                this._requests.clear(),
                Promise.resolve()
              );
            }),
            (t.prototype._makeStorageReference = function (t) {
              return new _g(this, t);
            }),
            (t.prototype._makeRequest = function (t, e) {
              var n = this;
              if (this._deleted) return new Dg(kv());
              var r = (function (t, e, n, r, i) {
                var o = tg(t.urlParams),
                  s = t.url + o,
                  a = Object.assign({}, t.headers);
                return (
                  (function (t, e) {
                    e && (t["X-Firebase-GMPID"] = e);
                  })(a, e),
                  (function (t, e) {
                    null !== e &&
                      e.length > 0 &&
                      (t.Authorization = "Firebase " + e);
                  })(a, n),
                  (function (t, e) {
                    t["X-Firebase-Storage-Version"] =
                      "webjs/" + (null != e ? e : "AppManager");
                  })(a, i),
                  new xg(
                    s,
                    t.method,
                    a,
                    t.body,
                    t.successCodes,
                    t.additionalRetryCodes,
                    t.handler,
                    t.errorHandler,
                    t.timeout,
                    t.progressCallback,
                    r
                  )
                );
              })(t, this._appId, e, this._pool, this._firebaseVersion);
              return (
                this._requests.add(r),
                r.getPromise().then(
                  function () {
                    return n._requests.delete(r);
                  },
                  function () {
                    return n._requests.delete(r);
                  }
                ),
                r
              );
            }),
            t
          );
        })(),
        Fg = (function () {
          function t(t, e) {
            var n = this;
            (this.app = t),
              (this._delegate = e),
              (this.INTERNAL = {
                delete: function () {
                  return n._delegate._delete();
                },
              });
          }
          return (
            Object.defineProperty(t.prototype, "maxOperationRetryTime", {
              get: function () {
                return this._delegate.maxOperationRetryTime;
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "maxUploadRetryTime", {
              get: function () {
                return this._delegate.maxUploadRetryTime;
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.ref = function (t) {
              if (Rg(t))
                throw Cv(
                  "ref() expected a child path but got a URL, use refFromURL instead."
                );
              return new Pg(Lg(this._delegate, t), this);
            }),
            (t.prototype.refFromURL = function (t) {
              if (!Rg(t))
                throw Cv(
                  "refFromURL() expected a full URL but got a child path, use ref() instead."
                );
              try {
                Yv.makeFromUrl(t);
              } catch (t) {
                throw Cv(
                  "refFromUrl() expected a valid full URL but got an invalid one."
                );
              }
              return new Pg(Lg(this._delegate, t), this);
            }),
            (t.prototype.setMaxUploadRetryTime = function (t) {
              this._delegate.maxUploadRetryTime = t;
            }),
            (t.prototype.setMaxOperationRetryTime = function (t) {
              this._delegate.maxOperationRetryTime = t;
            }),
            t
          );
        })();
      function Ug(t, n) {
        var r = t.getProvider("app").getImmediate(),
          i = t.getProvider("auth-internal");
        return new Fg(r, new jg(r, i, new Bv(), n, e.Z.SDK_VERSION));
      }
      !(function (t) {
        var e = {
          TaskState: Uv,
          TaskEvent: Fv,
          StringFormat: Dv,
          Storage: jg,
          Reference: Pg,
        };
        t.INTERNAL.registerComponent(
          new Mp.wA("storage", Ug, "PUBLIC")
            .setServiceProps(e)
            .setMultipleInstances(!0)
        ),
          t.registerVersion("@firebase/storage", "0.4.4");
      })(e.Z);
      var Vg,
        qg,
        Bg,
        Gg = "0.4.7",
        Wg = Gg,
        zg = "FB-PERF-TRACE-MEASURE",
        Hg = "_wt_",
        Kg = "_fcp",
        Jg = "_fid",
        Qg = "@firebase/performance/config",
        Yg = "@firebase/performance/configexpire",
        Xg = "Performance",
        Zg =
          (((Vg = {})["trace started"] =
            "Trace {$traceName} was started before."),
          (Vg["trace stopped"] = "Trace {$traceName} is not running."),
          (Vg["nonpositive trace startTime"] =
            "Trace {$traceName} startTime should be positive."),
          (Vg["nonpositive trace duration"] =
            "Trace {$traceName} duration should be positive."),
          (Vg["no window"] = "Window is not available."),
          (Vg["no app id"] = "App id is not available."),
          (Vg["no project id"] = "Project id is not available."),
          (Vg["no api key"] = "Api key is not available."),
          (Vg["invalid cc log"] = "Attempted to queue invalid cc event"),
          (Vg["FB not default"] =
            "Performance can only start when Firebase app instance is the default one."),
          (Vg["RC response not ok"] = "RC response is not ok"),
          (Vg["invalid attribute name"] =
            "Attribute name {$attributeName} is invalid."),
          (Vg["invalid attribute value"] =
            "Attribute value {$attributeValue} is invalid."),
          (Vg["invalid custom metric name"] =
            "Custom metric name {$customMetricName} is invalid"),
          (Vg["invalid String merger input"] =
            "Input for String merger is invalid, contact support team to resolve."),
          Vg),
        $g = new i.LL("performance", Xg, Zg),
        tm = new r.Yd(Xg);
      tm.logLevel = r.in.INFO;
      var em,
        nm = (function () {
          function t(t) {
            if (((this.window = t), !t)) throw $g.create("no window");
            (this.performance = t.performance),
              (this.PerformanceObserver = t.PerformanceObserver),
              (this.windowLocation = t.location),
              (this.navigator = t.navigator),
              (this.document = t.document),
              this.navigator &&
                this.navigator.cookieEnabled &&
                (this.localStorage = t.localStorage),
              t.perfMetrics &&
                t.perfMetrics.onFirstInputDelay &&
                (this.onFirstInputDelay = t.perfMetrics.onFirstInputDelay);
          }
          return (
            (t.prototype.getUrl = function () {
              return this.windowLocation.href.split("?")[0];
            }),
            (t.prototype.mark = function (t) {
              this.performance &&
                this.performance.mark &&
                this.performance.mark(t);
            }),
            (t.prototype.measure = function (t, e, n) {
              this.performance &&
                this.performance.measure &&
                this.performance.measure(t, e, n);
            }),
            (t.prototype.getEntriesByType = function (t) {
              return this.performance && this.performance.getEntriesByType
                ? this.performance.getEntriesByType(t)
                : [];
            }),
            (t.prototype.getEntriesByName = function (t) {
              return this.performance && this.performance.getEntriesByName
                ? this.performance.getEntriesByName(t)
                : [];
            }),
            (t.prototype.getTimeOrigin = function () {
              return (
                this.performance &&
                (this.performance.timeOrigin ||
                  this.performance.timing.navigationStart)
              );
            }),
            (t.prototype.requiredApisAvailable = function () {
              return fetch &&
                Promise &&
                this.navigator &&
                this.navigator.cookieEnabled
                ? !!(0, i.hl)() ||
                    (tm.info("IndexedDB is not supported by current browswer"),
                    !1)
                : (tm.info(
                    "Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."
                  ),
                  !1);
            }),
            (t.prototype.setupObserver = function (t, e) {
              this.PerformanceObserver &&
                new this.PerformanceObserver(function (t) {
                  for (var n = 0, r = t.getEntries(); n < r.length; n++) {
                    var i = r[n];
                    e(i);
                  }
                }).observe({ entryTypes: [t] });
            }),
            (t.getInstance = function () {
              return void 0 === qg && (qg = new t(Bg)), qg;
            }),
            t
          );
        })();
      function rm(t, e) {
        var n = t.length - e.length;
        if (n < 0 || n > 1) throw $g.create("invalid String merger input");
        for (var r = [], i = 0; i < t.length; i++)
          r.push(t.charAt(i)), e.length > i && r.push(e.charAt(i));
        return r.join("");
      }
      var im,
        om,
        sm = (function () {
          function t() {
            (this.instrumentationEnabled = !0),
              (this.dataCollectionEnabled = !0),
              (this.loggingEnabled = !1),
              (this.tracesSamplingRate = 1),
              (this.networkRequestsSamplingRate = 1),
              (this.logEndPointUrl =
                "https://firebaselogging.googleapis.com/v0cc/log?format=json_proto"),
              (this.flTransportEndpointUrl = rm(
                "hts/frbslgigp.ogepscmv/ieo/eaylg",
                "tp:/ieaeogn-agolai.o/1frlglgc/o"
              )),
              (this.transportKey = rm(
                "AzSC8r6ReiGqFMyfvgow",
                "Iayx0u-XT3vksVM-pIV"
              )),
              (this.logSource = 462),
              (this.logTraceAfterSampling = !1),
              (this.logNetworkAfterSampling = !1),
              (this.configTimeToLive = 12);
          }
          return (
            (t.prototype.getAppId = function () {
              var t =
                this.firebaseAppInstance &&
                this.firebaseAppInstance.options &&
                this.firebaseAppInstance.options.appId;
              if (!t) throw $g.create("no app id");
              return t;
            }),
            (t.prototype.getProjectId = function () {
              var t =
                this.firebaseAppInstance &&
                this.firebaseAppInstance.options &&
                this.firebaseAppInstance.options.projectId;
              if (!t) throw $g.create("no project id");
              return t;
            }),
            (t.prototype.getApiKey = function () {
              var t =
                this.firebaseAppInstance &&
                this.firebaseAppInstance.options &&
                this.firebaseAppInstance.options.apiKey;
              if (!t) throw $g.create("no api key");
              return t;
            }),
            (t.prototype.getFlTransportFullUrl = function () {
              return this.flTransportEndpointUrl.concat(
                "?key=",
                this.transportKey
              );
            }),
            (t.getInstance = function () {
              return void 0 === em && (em = new t()), em;
            }),
            t
          );
        })();
      function am() {
        return im;
      }
      !(function (t) {
        (t[(t.UNKNOWN = 0)] = "UNKNOWN"),
          (t[(t.VISIBLE = 1)] = "VISIBLE"),
          (t[(t.HIDDEN = 2)] = "HIDDEN");
      })(om || (om = {}));
      var um = ["firebase_", "google_", "ga_"],
        cm = new RegExp("^[a-zA-Z]\\w*$");
      function hm() {
        var t = nm.getInstance().navigator;
        return "serviceWorker" in t ? (t.serviceWorker.controller ? 2 : 3) : 1;
      }
      function lm() {
        switch (nm.getInstance().document.visibilityState) {
          case "visible":
            return om.VISIBLE;
          case "hidden":
            return om.HIDDEN;
          default:
            return om.UNKNOWN;
        }
      }
      function fm() {
        var t = nm.getInstance().navigator.connection;
        switch (t && t.effectiveType) {
          case "slow-2g":
            return 1;
          case "2g":
            return 2;
          case "3g":
            return 3;
          case "4g":
            return 4;
          default:
            return 0;
        }
      }
      var pm = "Could not fetch config, will use default configs";
      function dm(t) {
        if (!t) return t;
        var e = sm.getInstance(),
          n = t.entries || {};
        return (
          void 0 !== n.fpr_enabled
            ? (e.loggingEnabled = "true" === String(n.fpr_enabled))
            : (e.loggingEnabled = true),
          n.fpr_log_source && (e.logSource = Number(n.fpr_log_source)),
          n.fpr_log_endpoint_url && (e.logEndPointUrl = n.fpr_log_endpoint_url),
          n.fpr_log_transport_key && (e.transportKey = n.fpr_log_transport_key),
          void 0 !== n.fpr_vc_network_request_sampling_rate &&
            (e.networkRequestsSamplingRate = Number(
              n.fpr_vc_network_request_sampling_rate
            )),
          void 0 !== n.fpr_vc_trace_sampling_rate &&
            (e.tracesSamplingRate = Number(n.fpr_vc_trace_sampling_rate)),
          (e.logTraceAfterSampling = vm(e.tracesSamplingRate)),
          (e.logNetworkAfterSampling = vm(e.networkRequestsSamplingRate)),
          t
        );
      }
      function vm(t) {
        return Math.random() <= t;
      }
      var gm,
        mm = 1;
      function ym() {
        return (
          (mm = 2),
          (gm =
            gm ||
            (function () {
              var t = nm.getInstance().document;
              return new Promise(function (e) {
                if (t && "complete" !== t.readyState) {
                  var n = function () {
                    "complete" === t.readyState &&
                      (t.removeEventListener("readystatechange", n), e());
                  };
                  t.addEventListener("readystatechange", n);
                } else e();
              });
            })()
              .then(function () {
                return (
                  (t = sm.getInstance().installationsService.getId()).then(
                    function (t) {
                      im = t;
                    }
                  ),
                  t
                );
                var t;
              })
              .then(function (t) {
                return (function (t) {
                  var e = (function () {
                    var t = nm.getInstance().localStorage;
                    if (t) {
                      var e = t.getItem(Yg);
                      if (e && Number(e) > Date.now()) {
                        var n = t.getItem(Qg);
                        if (n)
                          try {
                            return JSON.parse(n);
                          } catch (t) {
                            return;
                          }
                      }
                    }
                  })();
                  return e
                    ? (dm(e), Promise.resolve())
                    : (function (t) {
                        return ((e = sm
                          .getInstance()
                          .installationsService.getToken()),
                        e.then(function (t) {}),
                        e)
                          .then(function (e) {
                            var n =
                                "https://firebaseremoteconfig.googleapis.com/v1/projects/" +
                                sm.getInstance().getProjectId() +
                                "/namespaces/fireperf:fetch?key=" +
                                sm.getInstance().getApiKey(),
                              r = new Request(n, {
                                method: "POST",
                                headers: {
                                  Authorization:
                                    "FIREBASE_INSTALLATIONS_AUTH " + e,
                                },
                                body: JSON.stringify({
                                  app_instance_id: t,
                                  app_instance_id_token: e,
                                  app_id: sm.getInstance().getAppId(),
                                  app_version: Wg,
                                  sdk_version: "0.0.1",
                                }),
                              });
                            return fetch(r).then(function (t) {
                              if (t.ok) return t.json();
                              throw $g.create("RC response not ok");
                            });
                          })
                          .catch(function () {
                            tm.info(pm);
                          });
                        var e;
                      })(t)
                        .then(dm)
                        .then(
                          function (t) {
                            return (function (t) {
                              var e = nm.getInstance().localStorage;
                              t &&
                                e &&
                                (e.setItem(Qg, JSON.stringify(t)),
                                e.setItem(
                                  Yg,
                                  String(
                                    Date.now() +
                                      60 *
                                        sm.getInstance().configTimeToLive *
                                        60 *
                                        1e3
                                  )
                                ));
                            })(t);
                          },
                          function () {}
                        );
                })(t);
              })
              .then(
                function () {
                  return bm();
                },
                function () {
                  return bm();
                }
              ))
        );
      }
      function bm() {
        mm = 3;
      }
      var wm,
        _m = 1e4,
        Im = 3,
        Em = [],
        Tm = !1;
      function Sm(t) {
        setTimeout(function () {
          var t, e;
          if (0 !== Im)
            return Em.length
              ? ((e = (t = Em.splice(0, 1e3)).map(function (t) {
                  return {
                    source_extension_json_proto3: t.message,
                    event_time_ms: String(t.eventTime),
                  };
                })),
                void (function (t, e) {
                  return (function (t) {
                    var e = sm.getInstance().getFlTransportFullUrl();
                    return fetch(e, {
                      method: "POST",
                      body: JSON.stringify(t),
                    });
                  })(t)
                    .then(function (t) {
                      return (
                        t.ok || tm.info("Call to Firebase backend failed."),
                        t.json()
                      );
                    })
                    .then(function (t) {
                      var n = Number(t.nextRequestWaitMillis),
                        r = _m;
                      isNaN(n) || (r = Math.max(n, r));
                      var i = t.logResponseDetails;
                      Array.isArray(i) &&
                        i.length > 0 &&
                        "RETRY_REQUEST_LATER" === i[0].responseAction &&
                        ((Em = (0, lr.ev)((0, lr.ev)([], e), Em)),
                        tm.info("Retry transport request later.")),
                        (Im = 3),
                        Sm(r);
                    });
                })(
                  {
                    request_time_ms: String(Date.now()),
                    client_info: { client_type: 1, js_client_info: {} },
                    log_source: sm.getInstance().logSource,
                    log_event: e,
                  },
                  t
                ).catch(function () {
                  (Em = (0, lr.ev)((0, lr.ev)([], t), Em)),
                    Im--,
                    tm.info("Tries left: " + Im + "."),
                    Sm(_m);
                }))
              : Sm(_m);
        }, t);
      }
      function Cm(t) {
        if (!t.eventTime || !t.message) throw $g.create("invalid cc log");
        Em = (0, lr.ev)((0, lr.ev)([], Em), [t]);
      }
      function km(t, e) {
        wm ||
          (wm = (function (t) {
            return function () {
              for (var e = [], n = 0; n < arguments.length; n++)
                e[n] = arguments[n];
              Cm({ message: t.apply(void 0, e), eventTime: Date.now() });
            };
          })(Pm)),
          wm(t, e);
      }
      function Nm(t) {
        var e = sm.getInstance();
        (!e.instrumentationEnabled && t.isAuto) ||
          ((e.dataCollectionEnabled || t.isAuto) &&
            nm.getInstance().requiredApisAvailable() &&
            ((t.isAuto && lm() !== om.VISIBLE) ||
              (3 === mm
                ? Am(t)
                : ym().then(
                    function () {
                      return Am(t);
                    },
                    function () {
                      return Am(t);
                    }
                  ))));
      }
      function Am(t) {
        if (am()) {
          var e = sm.getInstance();
          e.loggingEnabled &&
            e.logTraceAfterSampling &&
            setTimeout(function () {
              return km(t, 1);
            }, 0);
        }
      }
      function Pm(t, e) {
        return 0 === e
          ? ((r = {
              url: (n = t).url,
              http_method: n.httpMethod || 0,
              http_response_code: 200,
              response_payload_bytes: n.responsePayloadBytes,
              client_start_time_us: n.startTimeUs,
              time_to_response_initiated_us: n.timeToResponseInitiatedUs,
              time_to_response_completed_us: n.timeToResponseCompletedUs,
            }),
            (i = { application_info: Dm(), network_request_metric: r }),
            JSON.stringify(i))
          : (function (t) {
              var e = {
                name: t.name,
                is_auto: t.isAuto,
                client_start_time_us: t.startTimeUs,
                duration_us: t.durationUs,
              };
              0 !== Object.keys(t.counters).length && (e.counters = t.counters);
              var n = t.getAttributes();
              0 !== Object.keys(n).length && (e.custom_attributes = n);
              var r = { application_info: Dm(), trace_metric: e };
              return JSON.stringify(r);
            })(t);
        var n, r, i;
      }
      function Dm() {
        return {
          google_app_id: sm.getInstance().getAppId(),
          app_instance_id: am(),
          web_app_info: {
            sdk_version: Wg,
            page_url: nm.getInstance().getUrl(),
            service_worker_status: hm(),
            visibility_state: lm(),
            effective_connection_type: fm(),
          },
          application_process_state: 0,
        };
      }
      var xm = ["_fp", Kg, Jg],
        Om = (function () {
          function t(t, e, n) {
            void 0 === e && (e = !1),
              (this.name = t),
              (this.isAuto = e),
              (this.state = 1),
              (this.customAttributes = {}),
              (this.counters = {}),
              (this.api = nm.getInstance()),
              (this.randomId = Math.floor(1e6 * Math.random())),
              this.isAuto ||
                ((this.traceStartMark =
                  "FB-PERF-TRACE-START-" + this.randomId + "-" + this.name),
                (this.traceStopMark =
                  "FB-PERF-TRACE-STOP-" + this.randomId + "-" + this.name),
                (this.traceMeasure =
                  n ||
                  "FB-PERF-TRACE-MEASURE-" + this.randomId + "-" + this.name),
                n && this.calculateTraceMetrics());
          }
          return (
            (t.prototype.start = function () {
              if (1 !== this.state)
                throw $g.create("trace started", { traceName: this.name });
              this.api.mark(this.traceStartMark), (this.state = 2);
            }),
            (t.prototype.stop = function () {
              if (2 !== this.state)
                throw $g.create("trace stopped", { traceName: this.name });
              (this.state = 3),
                this.api.mark(this.traceStopMark),
                this.api.measure(
                  this.traceMeasure,
                  this.traceStartMark,
                  this.traceStopMark
                ),
                this.calculateTraceMetrics(),
                Nm(this);
            }),
            (t.prototype.record = function (t, e, n) {
              if (t <= 0)
                throw $g.create("nonpositive trace startTime", {
                  traceName: this.name,
                });
              if (e <= 0)
                throw $g.create("nonpositive trace duration", {
                  traceName: this.name,
                });
              if (
                ((this.durationUs = Math.floor(1e3 * e)),
                (this.startTimeUs = Math.floor(1e3 * t)),
                n &&
                  n.attributes &&
                  (this.customAttributes = (0, lr.pi)({}, n.attributes)),
                n && n.metrics)
              )
                for (var r = 0, i = Object.keys(n.metrics); r < i.length; r++) {
                  var o = i[r];
                  isNaN(Number(n.metrics[o])) ||
                    (this.counters[o] = Number(Math.floor(n.metrics[o])));
                }
              Nm(this);
            }),
            (t.prototype.incrementMetric = function (t, e) {
              void 0 === e && (e = 1),
                void 0 === this.counters[t]
                  ? this.putMetric(t, e)
                  : this.putMetric(t, this.counters[t] + e);
            }),
            (t.prototype.putMetric = function (t, e) {
              if (
                ((i = t),
                (o = this.name),
                0 === i.length ||
                  i.length > 100 ||
                  (!(o && o.startsWith(Hg) && xm.indexOf(i) > -1) &&
                    i.startsWith("_")))
              )
                throw $g.create("invalid custom metric name", {
                  customMetricName: t,
                });
              var n, r, i, o;
              this.counters[t] =
                ((n = e),
                (r = Math.floor(n)) < n &&
                  tm.info(
                    "Metric value should be an Integer, setting the value as : " +
                      r +
                      "."
                  ),
                r);
            }),
            (t.prototype.getMetric = function (t) {
              return this.counters[t] || 0;
            }),
            (t.prototype.putAttribute = function (t, e) {
              var n,
                r = !(
                  0 === (n = t).length ||
                  n.length > 40 ||
                  um.some(function (t) {
                    return n.startsWith(t);
                  }) ||
                  !n.match(cm)
                ),
                i = (function (t) {
                  return 0 !== t.length && t.length <= 100;
                })(e);
              if (r && i) this.customAttributes[t] = e;
              else {
                if (!r)
                  throw $g.create("invalid attribute name", {
                    attributeName: t,
                  });
                if (!i)
                  throw $g.create("invalid attribute value", {
                    attributeValue: e,
                  });
              }
            }),
            (t.prototype.getAttribute = function (t) {
              return this.customAttributes[t];
            }),
            (t.prototype.removeAttribute = function (t) {
              void 0 !== this.customAttributes[t] &&
                delete this.customAttributes[t];
            }),
            (t.prototype.getAttributes = function () {
              return (0, lr.pi)({}, this.customAttributes);
            }),
            (t.prototype.setStartTime = function (t) {
              this.startTimeUs = t;
            }),
            (t.prototype.setDuration = function (t) {
              this.durationUs = t;
            }),
            (t.prototype.calculateTraceMetrics = function () {
              var t = this.api.getEntriesByName(this.traceMeasure),
                e = t && t[0];
              e &&
                ((this.durationUs = Math.floor(1e3 * e.duration)),
                (this.startTimeUs = Math.floor(
                  1e3 * (e.startTime + this.api.getTimeOrigin())
                )));
            }),
            (t.createOobTrace = function (e, n, r) {
              var i = nm.getInstance().getUrl();
              if (i) {
                var o = new t(Hg + i, !0),
                  s = Math.floor(1e3 * nm.getInstance().getTimeOrigin());
                if (
                  (o.setStartTime(s),
                  e &&
                    e[0] &&
                    (o.setDuration(Math.floor(1e3 * e[0].duration)),
                    o.putMetric(
                      "domInteractive",
                      Math.floor(1e3 * e[0].domInteractive)
                    ),
                    o.putMetric(
                      "domContentLoadedEventEnd",
                      Math.floor(1e3 * e[0].domContentLoadedEventEnd)
                    ),
                    o.putMetric(
                      "loadEventEnd",
                      Math.floor(1e3 * e[0].loadEventEnd)
                    )),
                  n)
                ) {
                  var a = n.find(function (t) {
                    return "first-paint" === t.name;
                  });
                  a &&
                    a.startTime &&
                    o.putMetric("_fp", Math.floor(1e3 * a.startTime));
                  var u = n.find(function (t) {
                    return "first-contentful-paint" === t.name;
                  });
                  u &&
                    u.startTime &&
                    o.putMetric(Kg, Math.floor(1e3 * u.startTime)),
                    r && o.putMetric(Jg, Math.floor(1e3 * r));
                }
                Nm(o);
              }
            }),
            (t.createUserTimingTrace = function (e) {
              Nm(new t(e, !1, e));
            }),
            t
          );
        })();
      function Rm(t) {
        var e = t;
        if (e && void 0 !== e.responseStart) {
          var n = nm.getInstance().getTimeOrigin(),
            r = Math.floor(1e3 * (e.startTime + n)),
            i = e.responseStart
              ? Math.floor(1e3 * (e.responseStart - e.startTime))
              : void 0,
            o = Math.floor(1e3 * (e.responseEnd - e.startTime));
          !(function (t) {
            var e = sm.getInstance();
            if (e.instrumentationEnabled) {
              var n = t.url,
                r = e.logEndPointUrl.split("?")[0],
                i = e.flTransportEndpointUrl.split("?")[0];
              n !== r &&
                n !== i &&
                e.loggingEnabled &&
                e.logNetworkAfterSampling &&
                setTimeout(function () {
                  return km(t, 0);
                }, 0);
            }
          })({
            url: e.name && e.name.split("?")[0],
            responsePayloadBytes: e.transferSize,
            startTimeUs: r,
            timeToResponseInitiatedUs: i,
            timeToResponseCompletedUs: o,
          });
        }
      }
      function Mm() {
        am() &&
          (setTimeout(function () {
            return (function () {
              var t = nm.getInstance(),
                e = t.getEntriesByType("navigation"),
                n = t.getEntriesByType("paint");
              if (t.onFirstInputDelay) {
                var r = setTimeout(function () {
                  Om.createOobTrace(e, n), (r = void 0);
                }, 5e3);
                t.onFirstInputDelay(function (t) {
                  r && (clearTimeout(r), Om.createOobTrace(e, n, t));
                });
              } else Om.createOobTrace(e, n);
            })();
          }, 0),
          setTimeout(function () {
            return (function () {
              for (
                var t = nm.getInstance(),
                  e = 0,
                  n = t.getEntriesByType("resource");
                e < n.length;
                e++
              )
                Rm(n[e]);
              t.setupObserver("resource", Rm);
            })();
          }, 0),
          setTimeout(function () {
            return (function () {
              for (
                var t = nm.getInstance(),
                  e = 0,
                  n = t.getEntriesByType("measure");
                e < n.length;
                e++
              )
                Lm(n[e]);
              t.setupObserver("measure", Lm);
            })();
          }, 0));
      }
      function Lm(t) {
        var e = t.name;
        e.substring(0, zg.length) !== zg && Om.createUserTimingTrace(e);
      }
      var jm = (function () {
        function t(t) {
          (this.app = t),
            nm.getInstance().requiredApisAvailable() &&
              (0, i.eu)()
                .then(function (t) {
                  t && (Tm || (Sm(5500), (Tm = !0)), ym().then(Mm, Mm));
                })
                .catch(function (t) {
                  tm.info("Environment doesn't support IndexedDB: " + t);
                });
        }
        return (
          (t.prototype.trace = function (t) {
            return new Om(t);
          }),
          Object.defineProperty(t.prototype, "instrumentationEnabled", {
            get: function () {
              return sm.getInstance().instrumentationEnabled;
            },
            set: function (t) {
              sm.getInstance().instrumentationEnabled = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          Object.defineProperty(t.prototype, "dataCollectionEnabled", {
            get: function () {
              return sm.getInstance().dataCollectionEnabled;
            },
            set: function (t) {
              sm.getInstance().dataCollectionEnabled = t;
            },
            enumerable: !1,
            configurable: !0,
          }),
          t
        );
      })();
      !(function (t) {
        t.INTERNAL.registerComponent(
          new Mp.wA(
            "performance",
            function (t) {
              return (function (t, e) {
                if ("[DEFAULT]" !== t.name) throw $g.create("FB not default");
                if ("undefined" == typeof window) throw $g.create("no window");
                return (
                  (function (t) {
                    Bg = t;
                  })(window),
                  (sm.getInstance().firebaseAppInstance = t),
                  (sm.getInstance().installationsService = e),
                  new jm(t)
                );
              })(
                t.getProvider("app").getImmediate(),
                t.getProvider("installations").getImmediate()
              );
            },
            "PUBLIC"
          )
        ),
          t.registerVersion("@firebase/performance", Gg);
      })(e.Z);
      var Fm,
        Um,
        Vm = "https://www.googletagmanager.com/gtag/js";
      !(function (t) {
        (t.EVENT = "event"), (t.SET = "set"), (t.CONFIG = "config");
      })(Fm || (Fm = {})),
        (function (t) {
          (t.ADD_SHIPPING_INFO = "add_shipping_info"),
            (t.ADD_PAYMENT_INFO = "add_payment_info"),
            (t.ADD_TO_CART = "add_to_cart"),
            (t.ADD_TO_WISHLIST = "add_to_wishlist"),
            (t.BEGIN_CHECKOUT = "begin_checkout"),
            (t.CHECKOUT_PROGRESS = "checkout_progress"),
            (t.EXCEPTION = "exception"),
            (t.GENERATE_LEAD = "generate_lead"),
            (t.LOGIN = "login"),
            (t.PAGE_VIEW = "page_view"),
            (t.PURCHASE = "purchase"),
            (t.REFUND = "refund"),
            (t.REMOVE_FROM_CART = "remove_from_cart"),
            (t.SCREEN_VIEW = "screen_view"),
            (t.SEARCH = "search"),
            (t.SELECT_CONTENT = "select_content"),
            (t.SELECT_ITEM = "select_item"),
            (t.SELECT_PROMOTION = "select_promotion"),
            (t.SET_CHECKOUT_OPTION = "set_checkout_option"),
            (t.SHARE = "share"),
            (t.SIGN_UP = "sign_up"),
            (t.TIMING_COMPLETE = "timing_complete"),
            (t.VIEW_CART = "view_cart"),
            (t.VIEW_ITEM = "view_item"),
            (t.VIEW_ITEM_LIST = "view_item_list"),
            (t.VIEW_PROMOTION = "view_promotion"),
            (t.VIEW_SEARCH_RESULTS = "view_search_results");
        })(Um || (Um = {}));
      var qm,
        Bm = new r.Yd("@firebase/analytics");
      function Gm(t, e, n, r, i, o) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var s, a, u, c;
          return (0, lr.Jh)(this, function (h) {
            switch (h.label) {
              case 0:
                (s = r[i]), (h.label = 1);
              case 1:
                return h.trys.push([1, 7, , 8]), s ? [4, e[s]] : [3, 3];
              case 2:
                return h.sent(), [3, 6];
              case 3:
                return [4, Promise.all(n)];
              case 4:
                return (
                  (a = h.sent()),
                  (u = a.find(function (t) {
                    return t.measurementId === i;
                  }))
                    ? [4, e[u.appId]]
                    : [3, 6]
                );
              case 5:
                h.sent(), (h.label = 6);
              case 6:
                return [3, 8];
              case 7:
                return (c = h.sent()), Bm.error(c), [3, 8];
              case 8:
                return t(Fm.CONFIG, i, o), [2];
            }
          });
        });
      }
      function Wm(t, e, n, r, i) {
        return (0, lr.mG)(this, void 0, void 0, function () {
          var o, s, a, u, c, h, l, f;
          return (0, lr.Jh)(this, function (p) {
            switch (p.label) {
              case 0:
                return (
                  p.trys.push([0, 4, , 5]),
                  (o = []),
                  i && i.send_to
                    ? ((s = i.send_to),
                      Array.isArray(s) || (s = [s]),
                      [4, Promise.all(n)])
                    : [3, 2]
                );
              case 1:
                for (
                  a = p.sent(),
                    u = function (t) {
                      var n = a.find(function (e) {
                          return e.measurementId === t;
                        }),
                        r = n && e[n.appId];
                      if (!r) return (o = []), "break";
                      o.push(r);
                    },
                    c = 0,
                    h = s;
                  c < h.length && ((l = h[c]), "break" !== u(l));
                  c++
                );
                p.label = 2;
              case 2:
                return (
                  0 === o.length && (o = Object.values(e)), [4, Promise.all(o)]
                );
              case 3:
                return p.sent(), t(Fm.EVENT, r, i || {}), [3, 5];
              case 4:
                return (f = p.sent()), Bm.error(f), [3, 5];
              case 5:
                return [2];
            }
          });
        });
      }
      var zm =
          (((qm = {})["already-exists"] =
            "A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),
          (qm["already-initialized"] =
            "Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),
          (qm["interop-component-reg-failed"] =
            "Firebase Analytics Interop Component failed to instantiate: {$reason}"),
          (qm["invalid-analytics-context"] =
            "Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),
          (qm["indexeddb-unavailable"] =
            "IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),
          (qm["fetch-throttle"] =
            "The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),
          (qm["config-fetch-failed"] =
            "Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),
          (qm["no-api-key"] =
            'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),
          (qm["no-app-id"] =
            'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),
          qm),
        Hm = new i.LL("analytics", "Analytics", zm),
        Km = new ((function () {
          function t(t, e) {
            void 0 === t && (t = {}),
              void 0 === e && (e = 1e3),
              (this.throttleMetadata = t),
              (this.intervalMillis = e);
          }
          return (
            (t.prototype.getThrottleMetadata = function (t) {
              return this.throttleMetadata[t];
            }),
            (t.prototype.setThrottleMetadata = function (t, e) {
              this.throttleMetadata[t] = e;
            }),
            (t.prototype.deleteThrottleMetadata = function (t) {
              delete this.throttleMetadata[t];
            }),
            t
          );
        })())();
      function Jm(t) {
        return new Headers({ Accept: "application/json", "x-goog-api-key": t });
      }
      function Qm(t) {
        var e;
        return (0, lr.mG)(this, void 0, void 0, function () {
          var n, r, i, o, s, a, u;
          return (0, lr.Jh)(this, function (c) {
            switch (c.label) {
              case 0:
                return (
                  (n = t.appId),
                  (r = t.apiKey),
                  (i = { method: "GET", headers: Jm(r) }),
                  (o =
                    "https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace(
                      "{app-id}",
                      n
                    )),
                  [4, fetch(o, i)]
                );
              case 1:
                if (200 === (s = c.sent()).status || 304 === s.status)
                  return [3, 6];
                (a = ""), (c.label = 2);
              case 2:
                return c.trys.push([2, 4, , 5]), [4, s.json()];
              case 3:
                return (
                  (u = c.sent()),
                  (null === (e = u.error) || void 0 === e
                    ? void 0
                    : e.message) && (a = u.error.message),
                  [3, 5]
                );
              case 4:
                return c.sent(), [3, 5];
              case 5:
                throw Hm.create("config-fetch-failed", {
                  httpStatus: s.status,
                  responseMessage: a,
                });
              case 6:
                return [2, s.json()];
            }
          });
        });
      }
      function Ym(t, e, n, r) {
        var o = e.throttleEndTimeMillis,
          s = e.backoffCount;
        return (
          void 0 === r && (r = Km),
          (0, lr.mG)(this, void 0, void 0, function () {
            var e, a, u, c, h, l, f;
            return (0, lr.Jh)(this, function (p) {
              switch (p.label) {
                case 0:
                  (e = t.appId), (a = t.measurementId), (p.label = 1);
                case 1:
                  return p.trys.push([1, 3, , 4]), [4, Xm(n, o)];
                case 2:
                  return p.sent(), [3, 4];
                case 3:
                  if (((u = p.sent()), a))
                    return (
                      Bm.warn(
                        "Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID " +
                          a +
                          ' provided in the "measurementId" field in the local Firebase config. [' +
                          u.message +
                          "]"
                      ),
                      [2, { appId: e, measurementId: a }]
                    );
                  throw u;
                case 4:
                  return p.trys.push([4, 6, , 7]), [4, Qm(t)];
                case 5:
                  return (c = p.sent()), r.deleteThrottleMetadata(e), [2, c];
                case 6:
                  if (
                    !(function (t) {
                      if (!(t instanceof i.ZR && t.customData)) return !1;
                      var e = Number(t.customData.httpStatus);
                      return 429 === e || 500 === e || 503 === e || 504 === e;
                    })((h = p.sent()))
                  ) {
                    if ((r.deleteThrottleMetadata(e), a))
                      return (
                        Bm.warn(
                          "Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID " +
                            a +
                            ' provided in the "measurementId" field in the local Firebase config. [' +
                            h.message +
                            "]"
                        ),
                        [2, { appId: e, measurementId: a }]
                      );
                    throw h;
                  }
                  return (
                    (l =
                      503 === Number(h.customData.httpStatus)
                        ? (0, i.$s)(s, r.intervalMillis, 30)
                        : (0, i.$s)(s, r.intervalMillis)),
                    (f = {
                      throttleEndTimeMillis: Date.now() + l,
                      backoffCount: s + 1,
                    }),
                    r.setThrottleMetadata(e, f),
                    Bm.debug("Calling attemptFetch again in " + l + " millis"),
                    [2, Ym(t, f, n, r)]
                  );
                case 7:
                  return [2];
              }
            });
          })
        );
      }
      function Xm(t, e) {
        return new Promise(function (n, r) {
          var i = Math.max(e - Date.now(), 0),
            o = setTimeout(n, i);
          t.addEventListener(function () {
            clearTimeout(o),
              r(Hm.create("fetch-throttle", { throttleEndTimeMillis: e }));
          });
        });
      }
      var Zm = (function () {
        function t() {
          this.listeners = [];
        }
        return (
          (t.prototype.addEventListener = function (t) {
            this.listeners.push(t);
          }),
          (t.prototype.abort = function () {
            this.listeners.forEach(function (t) {
              return t();
            });
          }),
          t
        );
      })();
      var $m,
        ty,
        ey = {},
        ny = [],
        ry = {},
        iy = "dataLayer",
        oy = "gtag",
        sy = !1;
      function ay(t) {
        if (sy) throw Hm.create("already-initialized");
        t.dataLayerName && (iy = t.dataLayerName),
          t.gtagName && (oy = t.gtagName);
      }
      function uy(t, e) {
        !(function () {
          var t = [];
          if (
            ((0, i.ru)() && t.push("This is a browser extension environment."),
            (0, i.zI)() || t.push("Cookies are not available."),
            t.length > 0)
          ) {
            var e = t
                .map(function (t, e) {
                  return "(" + (e + 1) + ") " + t;
                })
                .join(" "),
              n = Hm.create("invalid-analytics-context", { errorInfo: e });
            Bm.warn(n.message);
          }
        })();
        var n = t.options.appId;
        if (!n) throw Hm.create("no-app-id");
        if (!t.options.apiKey) {
          if (!t.options.measurementId) throw Hm.create("no-api-key");
          Bm.warn(
            'The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ' +
              t.options.measurementId +
              ' provided in the "measurementId" field in the local Firebase config.'
          );
        }
        if (null != ey[n]) throw Hm.create("already-exists", { id: n });
        if (!sy) {
          !(function (t) {
            var e = [];
            Array.isArray(window[t]) ? (e = window[t]) : (window[t] = e);
          })(iy);
          var r = (function (t, e, n, r, i) {
              var o = function () {
                for (var t = [], e = 0; e < arguments.length; e++)
                  t[e] = arguments[e];
                window[r].push(arguments);
              };
              return (
                window[i] && "function" == typeof window[i] && (o = window[i]),
                (window[i] = (function (t, e, n, r) {
                  return function (i, o, s) {
                    return (0, lr.mG)(this, void 0, void 0, function () {
                      var a;
                      return (0, lr.Jh)(this, function (u) {
                        switch (u.label) {
                          case 0:
                            return (
                              u.trys.push([0, 6, , 7]),
                              i !== Fm.EVENT ? [3, 2] : [4, Wm(t, e, n, o, s)]
                            );
                          case 1:
                            return u.sent(), [3, 5];
                          case 2:
                            return i !== Fm.CONFIG
                              ? [3, 4]
                              : [4, Gm(t, e, n, r, o, s)];
                          case 3:
                            return u.sent(), [3, 5];
                          case 4:
                            t(Fm.SET, o), (u.label = 5);
                          case 5:
                            return [3, 7];
                          case 6:
                            return (a = u.sent()), Bm.error(a), [3, 7];
                          case 7:
                            return [2];
                        }
                      });
                    });
                  };
                })(o, t, e, n)),
                { gtagCore: o, wrappedGtag: window[i] }
              );
            })(ey, ny, ry, iy, oy),
            o = r.wrappedGtag,
            s = r.gtagCore;
          (ty = o), ($m = s), (sy = !0);
        }
        return (
          (ey[n] = (function (t, e, n, r, o, s) {
            return (0, lr.mG)(this, void 0, void 0, function () {
              var a, u, c, h, l, f, p;
              return (0, lr.Jh)(this, function (d) {
                switch (d.label) {
                  case 0:
                    return (
                      (a = (function (t, e, n) {
                        return (
                          void 0 === e && (e = Km),
                          (0, lr.mG)(this, void 0, void 0, function () {
                            var n,
                              r,
                              i,
                              o,
                              s,
                              a,
                              u = this;
                            return (0, lr.Jh)(this, function (c) {
                              if (
                                ((n = t.options),
                                (r = n.appId),
                                (i = n.apiKey),
                                (o = n.measurementId),
                                !r)
                              )
                                throw Hm.create("no-app-id");
                              if (!i) {
                                if (o)
                                  return [2, { measurementId: o, appId: r }];
                                throw Hm.create("no-api-key");
                              }
                              return (
                                (s = e.getThrottleMetadata(r) || {
                                  backoffCount: 0,
                                  throttleEndTimeMillis: Date.now(),
                                }),
                                (a = new Zm()),
                                setTimeout(function () {
                                  return (0,
                                  lr.mG)(u, void 0, void 0, function () {
                                    return (0, lr.Jh)(this, function (t) {
                                      return a.abort(), [2];
                                    });
                                  });
                                }, 6e4),
                                [
                                  2,
                                  Ym(
                                    { appId: r, apiKey: i, measurementId: o },
                                    s,
                                    a,
                                    e
                                  ),
                                ]
                              );
                            });
                          })
                        );
                      })(t))
                        .then(function (e) {
                          (n[e.measurementId] = e.appId),
                            t.options.measurementId &&
                              e.measurementId !== t.options.measurementId &&
                              Bm.warn(
                                "The measurement ID in the local Firebase config (" +
                                  t.options.measurementId +
                                  ") does not match the measurement ID fetched from the server (" +
                                  e.measurementId +
                                  "). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config."
                              );
                        })
                        .catch(function (t) {
                          return Bm.error(t);
                        }),
                      e.push(a),
                      (u = (function () {
                        return (0, lr.mG)(this, void 0, void 0, function () {
                          var t;
                          return (0, lr.Jh)(this, function (e) {
                            switch (e.label) {
                              case 0:
                                return (0, i.hl)()
                                  ? [3, 1]
                                  : (Bm.warn(
                                      Hm.create("indexeddb-unavailable", {
                                        errorInfo:
                                          "IndexedDB is not available in this environment.",
                                      }).message
                                    ),
                                    [2, !1]);
                              case 1:
                                return (
                                  e.trys.push([1, 3, , 4]), [4, (0, i.eu)()]
                                );
                              case 2:
                                return e.sent(), [3, 4];
                              case 3:
                                return (
                                  (t = e.sent()),
                                  Bm.warn(
                                    Hm.create("indexeddb-unavailable", {
                                      errorInfo: t,
                                    }).message
                                  ),
                                  [2, !1]
                                );
                              case 4:
                                return [2, !0];
                            }
                          });
                        });
                      })().then(function (t) {
                        return t ? r.getId() : void 0;
                      })),
                      [4, Promise.all([a, u])]
                    );
                  case 1:
                    return (
                      (c = d.sent()),
                      (h = c[0]),
                      (l = c[1]),
                      (function () {
                        for (
                          var t =
                              window.document.getElementsByTagName("script"),
                            e = 0,
                            n = Object.values(t);
                          e < n.length;
                          e++
                        ) {
                          var r = n[e];
                          if (r.src && r.src.includes(Vm)) return r;
                        }
                        return null;
                      })() ||
                        (function (t, e) {
                          var n = document.createElement("script");
                          (n.src = Vm + "?l=" + t + "&id=" + e),
                            (n.async = !0),
                            document.head.appendChild(n);
                        })(s, h.measurementId),
                      o("js", new Date()),
                      ((p = {}).origin = "firebase"),
                      (p.update = !0),
                      (f = p),
                      null != l && (f.firebase_id = l),
                      o(Fm.CONFIG, h.measurementId, f),
                      [2, h.measurementId]
                    );
                }
              });
            });
          })(t, ny, ry, e, $m, iy)),
          {
            app: t,
            logEvent: function (t, e, r) {
              (function (t, e, n, r, i) {
                return (0, lr.mG)(this, void 0, void 0, function () {
                  var o, s;
                  return (0, lr.Jh)(this, function (a) {
                    switch (a.label) {
                      case 0:
                        return i && i.global
                          ? (t(Fm.EVENT, n, r), [2])
                          : [3, 1];
                      case 1:
                        return [4, e];
                      case 2:
                        (o = a.sent()),
                          (s = (0, lr.pi)((0, lr.pi)({}, r), { send_to: o })),
                          t(Fm.EVENT, n, s),
                          (a.label = 3);
                      case 3:
                        return [2];
                    }
                  });
                });
              })(ty, ey[n], t, e, r).catch(function (t) {
                return Bm.error(t);
              });
            },
            setCurrentScreen: function (t, e) {
              (function (t, e, n, r) {
                return (0, lr.mG)(this, void 0, void 0, function () {
                  var i;
                  return (0, lr.Jh)(this, function (o) {
                    switch (o.label) {
                      case 0:
                        return r && r.global
                          ? (t(Fm.SET, { screen_name: n }),
                            [2, Promise.resolve()])
                          : [3, 1];
                      case 1:
                        return [4, e];
                      case 2:
                        (i = o.sent()),
                          t(Fm.CONFIG, i, { update: !0, screen_name: n }),
                          (o.label = 3);
                      case 3:
                        return [2];
                    }
                  });
                });
              })(ty, ey[n], t, e).catch(function (t) {
                return Bm.error(t);
              });
            },
            setUserId: function (t, e) {
              (function (t, e, n, r) {
                return (0, lr.mG)(this, void 0, void 0, function () {
                  var i;
                  return (0, lr.Jh)(this, function (o) {
                    switch (o.label) {
                      case 0:
                        return r && r.global
                          ? (t(Fm.SET, { user_id: n }), [2, Promise.resolve()])
                          : [3, 1];
                      case 1:
                        return [4, e];
                      case 2:
                        (i = o.sent()),
                          t(Fm.CONFIG, i, { update: !0, user_id: n }),
                          (o.label = 3);
                      case 3:
                        return [2];
                    }
                  });
                });
              })(ty, ey[n], t, e).catch(function (t) {
                return Bm.error(t);
              });
            },
            setUserProperties: function (t, e) {
              (function (t, e, n, r) {
                return (0, lr.mG)(this, void 0, void 0, function () {
                  var i, o, s, a, u;
                  return (0, lr.Jh)(this, function (c) {
                    switch (c.label) {
                      case 0:
                        if (!r || !r.global) return [3, 1];
                        for (
                          i = {}, o = 0, s = Object.keys(n);
                          o < s.length;
                          o++
                        )
                          (a = s[o]), (i["user_properties." + a] = n[a]);
                        return t(Fm.SET, i), [2, Promise.resolve()];
                      case 1:
                        return [4, e];
                      case 2:
                        (u = c.sent()),
                          t(Fm.CONFIG, u, { update: !0, user_properties: n }),
                          (c.label = 3);
                      case 3:
                        return [2];
                    }
                  });
                });
              })(ty, ey[n], t, e).catch(function (t) {
                return Bm.error(t);
              });
            },
            setAnalyticsCollectionEnabled: function (t) {
              (function (t, e) {
                return (0, lr.mG)(this, void 0, void 0, function () {
                  var n;
                  return (0, lr.Jh)(this, function (r) {
                    switch (r.label) {
                      case 0:
                        return [4, t];
                      case 1:
                        return (
                          (n = r.sent()), (window["ga-disable-" + n] = !e), [2]
                        );
                    }
                  });
                });
              })(ey[n], t).catch(function (t) {
                return Bm.error(t);
              });
            },
            INTERNAL: {
              delete: function () {
                return delete ey[n], Promise.resolve();
              },
            },
          }
        );
      }
      var cy = "analytics";
      function hy() {
        return (0, lr.mG)(this, void 0, void 0, function () {
          return (0, lr.Jh)(this, function (t) {
            switch (t.label) {
              case 0:
                if ((0, i.ru)()) return [2, !1];
                if (!(0, i.zI)()) return [2, !1];
                if (!(0, i.hl)()) return [2, !1];
                t.label = 1;
              case 1:
                return t.trys.push([1, 3, , 4]), [4, (0, i.eu)()];
              case 2:
                return [2, t.sent()];
              case 3:
                return t.sent(), [2, !1];
              case 4:
                return [2];
            }
          });
        });
      }
      !(function (t) {
        t.INTERNAL.registerComponent(
          new Mp.wA(
            cy,
            function (t) {
              return uy(
                t.getProvider("app").getImmediate(),
                t.getProvider("installations").getImmediate()
              );
            },
            "PUBLIC"
          ).setServiceProps({ settings: ay, EventName: Um, isSupported: hy })
        ),
          t.INTERNAL.registerComponent(
            new Mp.wA(
              "analytics-internal",
              function (t) {
                try {
                  return {
                    logEvent: t.getProvider(cy).getImmediate().logEvent,
                  };
                } catch (t) {
                  throw Hm.create("interop-component-reg-failed", {
                    reason: t,
                  });
                }
              },
              "PRIVATE"
            )
          ),
          t.registerVersion("@firebase/analytics", "0.6.5");
      })(e.Z);
      var ly,
        fy = (function () {
          function t(t, e, n, r) {
            (this.client = t),
              (this.storage = e),
              (this.storageCache = n),
              (this.logger = r);
          }
          return (
            (t.prototype.isCachedDataFresh = function (t, e) {
              if (!e)
                return (
                  this.logger.debug(
                    "Config fetch cache check. Cache unpopulated."
                  ),
                  !1
                );
              var n = Date.now() - e,
                r = n <= t;
              return (
                this.logger.debug(
                  "Config fetch cache check. Cache age millis: " +
                    n +
                    ". Cache max age millis (minimumFetchIntervalMillis setting): " +
                    t +
                    ". Is cache hit: " +
                    r +
                    "."
                ),
                r
              );
            }),
            (t.prototype.fetch = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var e, n, r, i, o;
                return (0, lr.Jh)(this, function (s) {
                  switch (s.label) {
                    case 0:
                      return [
                        4,
                        Promise.all([
                          this.storage.getLastSuccessfulFetchTimestampMillis(),
                          this.storage.getLastSuccessfulFetchResponse(),
                        ]),
                      ];
                    case 1:
                      return (
                        (e = s.sent()),
                        (n = e[0]),
                        (r = e[1]) &&
                        this.isCachedDataFresh(t.cacheMaxAgeMillis, n)
                          ? [2, r]
                          : ((t.eTag = r && r.eTag), [4, this.client.fetch(t)])
                      );
                    case 2:
                      return (
                        (i = s.sent()),
                        (o = [
                          this.storageCache.setLastSuccessfulFetchTimestampMillis(
                            Date.now()
                          ),
                        ]),
                        200 === i.status &&
                          o.push(
                            this.storage.setLastSuccessfulFetchResponse(i)
                          ),
                        [4, Promise.all(o)]
                      );
                    case 3:
                      return s.sent(), [2, i];
                  }
                });
              });
            }),
            t
          );
        })(),
        py =
          (((ly = {})["registration-window"] =
            "Undefined window object. This SDK only supports usage in a browser environment."),
          (ly["registration-project-id"] =
            "Undefined project identifier. Check Firebase app initialization."),
          (ly["registration-api-key"] =
            "Undefined API key. Check Firebase app initialization."),
          (ly["registration-app-id"] =
            "Undefined app identifier. Check Firebase app initialization."),
          (ly["storage-open"] =
            "Error thrown when opening storage. Original error: {$originalErrorMessage}."),
          (ly["storage-get"] =
            "Error thrown when reading from storage. Original error: {$originalErrorMessage}."),
          (ly["storage-set"] =
            "Error thrown when writing to storage. Original error: {$originalErrorMessage}."),
          (ly["storage-delete"] =
            "Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),
          (ly["fetch-client-network"] =
            "Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),
          (ly["fetch-timeout"] =
            'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.'),
          (ly["fetch-throttle"] =
            'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.'),
          (ly["fetch-client-parse"] =
            "Fetch client could not parse response. Original error: {$originalErrorMessage}."),
          (ly["fetch-status"] =
            "Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),
          ly),
        dy = new i.LL("remoteconfig", "Remote Config", py),
        vy = (function () {
          function t(t, e, n, r, i, o) {
            (this.firebaseInstallations = t),
              (this.sdkVersion = e),
              (this.namespace = n),
              (this.projectId = r),
              (this.apiKey = i),
              (this.appId = o);
          }
          return (
            (t.prototype.fetch = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var e, n, r, i, o, s, a, u, c, h, l, f, p, d, v, g, m, y, b;
                return (0, lr.Jh)(this, function (w) {
                  switch (w.label) {
                    case 0:
                      return [
                        4,
                        Promise.all([
                          this.firebaseInstallations.getId(),
                          this.firebaseInstallations.getToken(),
                        ]),
                      ];
                    case 1:
                      (e = w.sent()),
                        (n = e[0]),
                        (r = e[1]),
                        (i =
                          window.FIREBASE_REMOTE_CONFIG_URL_BASE ||
                          "https://firebaseremoteconfig.googleapis.com"),
                        (o =
                          i +
                          "/v1/projects/" +
                          this.projectId +
                          "/namespaces/" +
                          this.namespace +
                          ":fetch?key=" +
                          this.apiKey),
                        (s = {
                          "Content-Type": "application/json",
                          "Content-Encoding": "gzip",
                          "If-None-Match": t.eTag || "*",
                        }),
                        (a = {
                          sdk_version: this.sdkVersion,
                          app_instance_id: n,
                          app_instance_id_token: r,
                          app_id: this.appId,
                          language_code:
                            (void 0 === _ && (_ = navigator),
                            (_.languages && _.languages[0]) || _.language),
                        }),
                        (u = {
                          method: "POST",
                          headers: s,
                          body: JSON.stringify(a),
                        }),
                        (c = fetch(o, u)),
                        (h = new Promise(function (e, n) {
                          t.signal.addEventListener(function () {
                            var t = new Error("The operation was aborted.");
                            (t.name = "AbortError"), n(t);
                          });
                        })),
                        (w.label = 2);
                    case 2:
                      return (
                        w.trys.push([2, 5, , 6]), [4, Promise.race([c, h])]
                      );
                    case 3:
                      return w.sent(), [4, c];
                    case 4:
                      return (l = w.sent()), [3, 6];
                    case 5:
                      throw (
                        ((f = w.sent()),
                        (p = "fetch-client-network"),
                        "AbortError" === f.name && (p = "fetch-timeout"),
                        dy.create(p, { originalErrorMessage: f.message }))
                      );
                    case 6:
                      if (
                        ((d = l.status),
                        (v = l.headers.get("ETag") || void 0),
                        200 !== l.status)
                      )
                        return [3, 11];
                      (y = void 0), (w.label = 7);
                    case 7:
                      return w.trys.push([7, 9, , 10]), [4, l.json()];
                    case 8:
                      return (y = w.sent()), [3, 10];
                    case 9:
                      throw (
                        ((b = w.sent()),
                        dy.create("fetch-client-parse", {
                          originalErrorMessage: b.message,
                        }))
                      );
                    case 10:
                      (g = y.entries), (m = y.state), (w.label = 11);
                    case 11:
                      if (
                        ("INSTANCE_STATE_UNSPECIFIED" === m
                          ? (d = 500)
                          : "NO_CHANGE" === m
                          ? (d = 304)
                          : ("NO_TEMPLATE" !== m && "EMPTY_CONFIG" !== m) ||
                            (g = {}),
                        304 !== d && 200 !== d)
                      )
                        throw dy.create("fetch-status", { httpStatus: d });
                      return [2, { status: d, eTag: v, config: g }];
                  }
                  var _;
                });
              });
            }),
            t
          );
        })(),
        gy = (function () {
          function t() {
            this.listeners = [];
          }
          return (
            (t.prototype.addEventListener = function (t) {
              this.listeners.push(t);
            }),
            (t.prototype.abort = function () {
              this.listeners.forEach(function (t) {
                return t();
              });
            }),
            t
          );
        })(),
        my = ["1", "true", "t", "yes", "y", "on"],
        yy = (function () {
          function t(t, e) {
            void 0 === e && (e = ""), (this._source = t), (this._value = e);
          }
          return (
            (t.prototype.asString = function () {
              return this._value;
            }),
            (t.prototype.asBoolean = function () {
              return (
                "static" !== this._source &&
                my.indexOf(this._value.toLowerCase()) >= 0
              );
            }),
            (t.prototype.asNumber = function () {
              if ("static" === this._source) return 0;
              var t = Number(this._value);
              return isNaN(t) && (t = 0), t;
            }),
            (t.prototype.getSource = function () {
              return this._source;
            }),
            t
          );
        })(),
        by = (function () {
          function t(t, e, n, r, i) {
            (this.app = t),
              (this._client = e),
              (this._storageCache = n),
              (this._storage = r),
              (this._logger = i),
              (this._isInitializationComplete = !1),
              (this.settings = {
                fetchTimeoutMillis: 6e4,
                minimumFetchIntervalMillis: 432e5,
              }),
              (this.defaultConfig = {});
          }
          return (
            (t.prototype.setLogLevel = function (t) {
              switch (t) {
                case "debug":
                  this._logger.logLevel = r.in.DEBUG;
                  break;
                case "silent":
                  this._logger.logLevel = r.in.SILENT;
                  break;
                default:
                  this._logger.logLevel = r.in.ERROR;
              }
            }),
            Object.defineProperty(t.prototype, "fetchTimeMillis", {
              get: function () {
                return (
                  this._storageCache.getLastSuccessfulFetchTimestampMillis() ||
                  -1
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            Object.defineProperty(t.prototype, "lastFetchStatus", {
              get: function () {
                return (
                  this._storageCache.getLastFetchStatus() || "no-fetch-yet"
                );
              },
              enumerable: !1,
              configurable: !0,
            }),
            (t.prototype.activate = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t, e, n;
                return (0, lr.Jh)(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return [
                        4,
                        Promise.all([
                          this._storage.getLastSuccessfulFetchResponse(),
                          this._storage.getActiveConfigEtag(),
                        ]),
                      ];
                    case 1:
                      return (
                        (t = r.sent()),
                        (e = t[0]),
                        (n = t[1]),
                        e && e.config && e.eTag && e.eTag !== n
                          ? [
                              4,
                              Promise.all([
                                this._storageCache.setActiveConfig(e.config),
                                this._storage.setActiveConfigEtag(e.eTag),
                              ]),
                            ]
                          : [2, !1]
                      );
                    case 2:
                      return r.sent(), [2, !0];
                  }
                });
              });
            }),
            (t.prototype.ensureInitialized = function () {
              var t = this;
              return (
                this._initializePromise ||
                  (this._initializePromise = this._storageCache
                    .loadFromStorage()
                    .then(function () {
                      t._isInitializationComplete = !0;
                    })),
                this._initializePromise
              );
            }),
            (t.prototype.fetch = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t,
                  e,
                  n,
                  r = this;
                return (0, lr.Jh)(this, function (o) {
                  switch (o.label) {
                    case 0:
                      (t = new gy()),
                        setTimeout(function () {
                          return (0, lr.mG)(r, void 0, void 0, function () {
                            return (0, lr.Jh)(this, function (e) {
                              return t.abort(), [2];
                            });
                          });
                        }, this.settings.fetchTimeoutMillis),
                        (o.label = 1);
                    case 1:
                      return (
                        o.trys.push([1, 4, , 6]),
                        [
                          4,
                          this._client.fetch({
                            cacheMaxAgeMillis:
                              this.settings.minimumFetchIntervalMillis,
                            signal: t,
                          }),
                        ]
                      );
                    case 2:
                      return (
                        o.sent(),
                        [4, this._storageCache.setLastFetchStatus("success")]
                      );
                    case 3:
                      return o.sent(), [3, 6];
                    case 4:
                      return (
                        (e = o.sent()),
                        (n = (function (t, e) {
                          return (
                            t instanceof i.ZR &&
                            -1 !== t.code.indexOf("fetch-throttle")
                          );
                        })(e)
                          ? "throttle"
                          : "failure"),
                        [4, this._storageCache.setLastFetchStatus(n)]
                      );
                    case 5:
                      throw (o.sent(), e);
                    case 6:
                      return [2];
                  }
                });
              });
            }),
            (t.prototype.fetchAndActivate = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                return (0, lr.Jh)(this, function (t) {
                  switch (t.label) {
                    case 0:
                      return [4, this.fetch()];
                    case 1:
                      return t.sent(), [2, this.activate()];
                  }
                });
              });
            }),
            (t.prototype.getAll = function () {
              var t,
                e,
                n = this;
              return ((t = this._storageCache.getActiveConfig()),
              (e = this.defaultConfig),
              void 0 === t && (t = {}),
              void 0 === e && (e = {}),
              Object.keys((0, lr.pi)((0, lr.pi)({}, t), e))).reduce(function (
                t,
                e
              ) {
                return (t[e] = n.getValue(e)), t;
              },
              {});
            }),
            (t.prototype.getBoolean = function (t) {
              return this.getValue(t).asBoolean();
            }),
            (t.prototype.getNumber = function (t) {
              return this.getValue(t).asNumber();
            }),
            (t.prototype.getString = function (t) {
              return this.getValue(t).asString();
            }),
            (t.prototype.getValue = function (t) {
              this._isInitializationComplete ||
                this._logger.debug(
                  'A value was requested for key "' +
                    t +
                    '" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.'
                );
              var e = this._storageCache.getActiveConfig();
              return e && void 0 !== e[t]
                ? new yy("remote", e[t])
                : this.defaultConfig && void 0 !== this.defaultConfig[t]
                ? new yy("default", String(this.defaultConfig[t]))
                : (this._logger.debug(
                    'Returning static value for key "' +
                      t +
                      '". Define a default or remote value if this is unintentional.'
                  ),
                  new yy("static"));
            }),
            t
          );
        })();
      function wy(t, e) {
        var n = t.target.error || void 0;
        return dy.create(e, { originalErrorMessage: n && n.message });
      }
      var _y = "app_namespace_store",
        Iy = (function () {
          function t(t, e, n, r) {
            void 0 === r &&
              (r = new Promise(function (t, e) {
                var n = indexedDB.open("firebase_remote_config", 1);
                (n.onerror = function (t) {
                  e(wy(t, "storage-open"));
                }),
                  (n.onsuccess = function (e) {
                    t(e.target.result);
                  }),
                  (n.onupgradeneeded = function (t) {
                    var e = t.target.result;
                    switch (t.oldVersion) {
                      case 0:
                        e.createObjectStore(_y, { keyPath: "compositeKey" });
                    }
                  });
              })),
              (this.appId = t),
              (this.appName = e),
              (this.namespace = n),
              (this.openDbPromise = r);
          }
          return (
            (t.prototype.getLastFetchStatus = function () {
              return this.get("last_fetch_status");
            }),
            (t.prototype.setLastFetchStatus = function (t) {
              return this.set("last_fetch_status", t);
            }),
            (t.prototype.getLastSuccessfulFetchTimestampMillis = function () {
              return this.get("last_successful_fetch_timestamp_millis");
            }),
            (t.prototype.setLastSuccessfulFetchTimestampMillis = function (t) {
              return this.set("last_successful_fetch_timestamp_millis", t);
            }),
            (t.prototype.getLastSuccessfulFetchResponse = function () {
              return this.get("last_successful_fetch_response");
            }),
            (t.prototype.setLastSuccessfulFetchResponse = function (t) {
              return this.set("last_successful_fetch_response", t);
            }),
            (t.prototype.getActiveConfig = function () {
              return this.get("active_config");
            }),
            (t.prototype.setActiveConfig = function (t) {
              return this.set("active_config", t);
            }),
            (t.prototype.getActiveConfigEtag = function () {
              return this.get("active_config_etag");
            }),
            (t.prototype.setActiveConfigEtag = function (t) {
              return this.set("active_config_etag", t);
            }),
            (t.prototype.getThrottleMetadata = function () {
              return this.get("throttle_metadata");
            }),
            (t.prototype.setThrottleMetadata = function (t) {
              return this.set("throttle_metadata", t);
            }),
            (t.prototype.deleteThrottleMetadata = function () {
              return this.delete("throttle_metadata");
            }),
            (t.prototype.get = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var e,
                  n = this;
                return (0, lr.Jh)(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return [4, this.openDbPromise];
                    case 1:
                      return (
                        (e = r.sent()),
                        [
                          2,
                          new Promise(function (r, i) {
                            var o = e
                                .transaction([_y], "readonly")
                                .objectStore(_y),
                              s = n.createCompositeKey(t);
                            try {
                              var a = o.get(s);
                              (a.onerror = function (t) {
                                i(wy(t, "storage-get"));
                              }),
                                (a.onsuccess = function (t) {
                                  var e = t.target.result;
                                  r(e ? e.value : void 0);
                                });
                            } catch (t) {
                              i(
                                dy.create("storage-get", {
                                  originalErrorMessage: t && t.message,
                                })
                              );
                            }
                          }),
                        ]
                      );
                  }
                });
              });
            }),
            (t.prototype.set = function (t, e) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var n,
                  r = this;
                return (0, lr.Jh)(this, function (i) {
                  switch (i.label) {
                    case 0:
                      return [4, this.openDbPromise];
                    case 1:
                      return (
                        (n = i.sent()),
                        [
                          2,
                          new Promise(function (i, o) {
                            var s = n
                                .transaction([_y], "readwrite")
                                .objectStore(_y),
                              a = r.createCompositeKey(t);
                            try {
                              var u = s.put({ compositeKey: a, value: e });
                              (u.onerror = function (t) {
                                o(wy(t, "storage-set"));
                              }),
                                (u.onsuccess = function () {
                                  i();
                                });
                            } catch (t) {
                              o(
                                dy.create("storage-set", {
                                  originalErrorMessage: t && t.message,
                                })
                              );
                            }
                          }),
                        ]
                      );
                  }
                });
              });
            }),
            (t.prototype.delete = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var e,
                  n = this;
                return (0, lr.Jh)(this, function (r) {
                  switch (r.label) {
                    case 0:
                      return [4, this.openDbPromise];
                    case 1:
                      return (
                        (e = r.sent()),
                        [
                          2,
                          new Promise(function (r, i) {
                            var o = e
                                .transaction([_y], "readwrite")
                                .objectStore(_y),
                              s = n.createCompositeKey(t);
                            try {
                              var a = o.delete(s);
                              (a.onerror = function (t) {
                                i(wy(t, "storage-delete"));
                              }),
                                (a.onsuccess = function () {
                                  r();
                                });
                            } catch (t) {
                              i(
                                dy.create("storage-delete", {
                                  originalErrorMessage: t && t.message,
                                })
                              );
                            }
                          }),
                        ]
                      );
                  }
                });
              });
            }),
            (t.prototype.createCompositeKey = function (t) {
              return [this.appId, this.appName, this.namespace, t].join();
            }),
            t
          );
        })(),
        Ey = (function () {
          function t(t) {
            this.storage = t;
          }
          return (
            (t.prototype.getLastFetchStatus = function () {
              return this.lastFetchStatus;
            }),
            (t.prototype.getLastSuccessfulFetchTimestampMillis = function () {
              return this.lastSuccessfulFetchTimestampMillis;
            }),
            (t.prototype.getActiveConfig = function () {
              return this.activeConfig;
            }),
            (t.prototype.loadFromStorage = function () {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var t, e, n, r, i, o;
                return (0, lr.Jh)(this, function (s) {
                  switch (s.label) {
                    case 0:
                      return (
                        (t = this.storage.getLastFetchStatus()),
                        (e =
                          this.storage.getLastSuccessfulFetchTimestampMillis()),
                        (n = this.storage.getActiveConfig()),
                        [4, t]
                      );
                    case 1:
                      return (
                        (r = s.sent()) && (this.lastFetchStatus = r), [4, e]
                      );
                    case 2:
                      return (
                        (i = s.sent()) &&
                          (this.lastSuccessfulFetchTimestampMillis = i),
                        [4, n]
                      );
                    case 3:
                      return (o = s.sent()) && (this.activeConfig = o), [2];
                  }
                });
              });
            }),
            (t.prototype.setLastFetchStatus = function (t) {
              return (
                (this.lastFetchStatus = t), this.storage.setLastFetchStatus(t)
              );
            }),
            (t.prototype.setLastSuccessfulFetchTimestampMillis = function (t) {
              return (
                (this.lastSuccessfulFetchTimestampMillis = t),
                this.storage.setLastSuccessfulFetchTimestampMillis(t)
              );
            }),
            (t.prototype.setActiveConfig = function (t) {
              return (this.activeConfig = t), this.storage.setActiveConfig(t);
            }),
            t
          );
        })();
      function Ty(t, e) {
        return new Promise(function (n, r) {
          var i = Math.max(e - Date.now(), 0),
            o = setTimeout(n, i);
          t.addEventListener(function () {
            clearTimeout(o),
              r(dy.create("fetch-throttle", { throttleEndTimeMillis: e }));
          });
        });
      }
      var Sy,
        Cy = (function () {
          function t(t, e) {
            (this.client = t), (this.storage = e);
          }
          return (
            (t.prototype.fetch = function (t) {
              return (0, lr.mG)(this, void 0, void 0, function () {
                var e;
                return (0, lr.Jh)(this, function (n) {
                  switch (n.label) {
                    case 0:
                      return [4, this.storage.getThrottleMetadata()];
                    case 1:
                      return (
                        (e = n.sent() || {
                          backoffCount: 0,
                          throttleEndTimeMillis: Date.now(),
                        }),
                        [2, this.attemptFetch(t, e)]
                      );
                  }
                });
              });
            }),
            (t.prototype.attemptFetch = function (t, e) {
              var n = e.throttleEndTimeMillis,
                r = e.backoffCount;
              return (0, lr.mG)(this, void 0, void 0, function () {
                var e, o, s;
                return (0, lr.Jh)(this, function (a) {
                  switch (a.label) {
                    case 0:
                      return [4, Ty(t.signal, n)];
                    case 1:
                      a.sent(), (a.label = 2);
                    case 2:
                      return (
                        a.trys.push([2, 5, , 7]), [4, this.client.fetch(t)]
                      );
                    case 3:
                      return (
                        (e = a.sent()),
                        [4, this.storage.deleteThrottleMetadata()]
                      );
                    case 4:
                      return a.sent(), [2, e];
                    case 5:
                      if (
                        !(function (t) {
                          if (!(t instanceof i.ZR && t.customData)) return !1;
                          var e = Number(t.customData.httpStatus);
                          return (
                            429 === e || 500 === e || 503 === e || 504 === e
                          );
                        })((o = a.sent()))
                      )
                        throw o;
                      return (
                        (s = {
                          throttleEndTimeMillis: Date.now() + (0, i.$s)(r),
                          backoffCount: r + 1,
                        }),
                        [4, this.storage.setThrottleMetadata(s)]
                      );
                    case 6:
                      return a.sent(), [2, this.attemptFetch(t, s)];
                    case 7:
                      return [2];
                  }
                });
              });
            }),
            t
          );
        })(),
        ky = "@firebase/remote-config";
      function Ny(t, e) {
        if (e.length < t)
          throw new TypeError(
            t +
              " argument" +
              (t > 1 ? "s" : "") +
              " required, but only " +
              e.length +
              " present"
          );
      }
      function Ay(t) {
        Ny(1, arguments);
        var e = Object.prototype.toString.call(t);
        return t instanceof Date ||
          ("object" == typeof t && "[object Date]" === e)
          ? new Date(t.getTime())
          : "number" == typeof t || "[object Number]" === e
          ? new Date(t)
          : (("string" != typeof t && "[object String]" !== e) ||
              "undefined" == typeof console ||
              (console.warn(
                "Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"
              ),
              console.warn(new Error().stack)),
            new Date(NaN));
      }
      function Py(t) {
        Ny(1, arguments);
        var e = Ay(t);
        return !isNaN(e);
      }
      (Sy = e.Z).INTERNAL.registerComponent(
        new Mp.wA(
          "remoteConfig",
          function (t, e) {
            var n = t.getProvider("app").getImmediate(),
              i = t.getProvider("installations").getImmediate();
            if ("undefined" == typeof window)
              throw dy.create("registration-window");
            var o = n.options,
              s = o.projectId,
              a = o.apiKey,
              u = o.appId;
            if (!s) throw dy.create("registration-project-id");
            if (!a) throw dy.create("registration-api-key");
            if (!u) throw dy.create("registration-app-id");
            e = e || "firebase";
            var c = new Iy(u, n.name, e),
              h = new Ey(c),
              l = new r.Yd(ky);
            l.logLevel = r.in.ERROR;
            var f = new vy(i, Sy.SDK_VERSION, e, s, a, u),
              p = new Cy(f, c),
              d = new fy(p, c, h, l),
              v = new by(n, d, h, c, l);
            return v.ensureInitialized(), v;
          },
          "PUBLIC"
        ).setMultipleInstances(!0)
      ),
        Sy.registerVersion(ky, "0.1.32"),
        e.Z.registerVersion("firebase", "8.3.0", "app"),
        console.warn(
          "\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"
        ),
        e.Z.registerVersion("firebase", "8.3.0");
      var Dy = {
        lessThanXSeconds: {
          one: "less than a second",
          other: "less than {{count}} seconds",
        },
        xSeconds: { one: "1 second", other: "{{count}} seconds" },
        halfAMinute: "half a minute",
        lessThanXMinutes: {
          one: "less than a minute",
          other: "less than {{count}} minutes",
        },
        xMinutes: { one: "1 minute", other: "{{count}} minutes" },
        aboutXHours: { one: "about 1 hour", other: "about {{count}} hours" },
        xHours: { one: "1 hour", other: "{{count}} hours" },
        xDays: { one: "1 day", other: "{{count}} days" },
        aboutXWeeks: { one: "about 1 week", other: "about {{count}} weeks" },
        xWeeks: { one: "1 week", other: "{{count}} weeks" },
        aboutXMonths: { one: "about 1 month", other: "about {{count}} months" },
        xMonths: { one: "1 month", other: "{{count}} months" },
        aboutXYears: { one: "about 1 year", other: "about {{count}} years" },
        xYears: { one: "1 year", other: "{{count}} years" },
        overXYears: { one: "over 1 year", other: "over {{count}} years" },
        almostXYears: { one: "almost 1 year", other: "almost {{count}} years" },
      };
      function xy(t) {
        return function (e) {
          var n = e || {},
            r = n.width ? String(n.width) : t.defaultWidth;
          return t.formats[r] || t.formats[t.defaultWidth];
        };
      }
      var Oy,
        Ry = {
          date: xy({
            formats: {
              full: "EEEE, MMMM do, y",
              long: "MMMM do, y",
              medium: "MMM d, y",
              short: "MM/dd/yyyy",
            },
            defaultWidth: "full",
          }),
          time: xy({
            formats: {
              full: "h:mm:ss a zzzz",
              long: "h:mm:ss a z",
              medium: "h:mm:ss a",
              short: "h:mm a",
            },
            defaultWidth: "full",
          }),
          dateTime: xy({
            formats: {
              full: "{{date}} 'at' {{time}}",
              long: "{{date}} 'at' {{time}}",
              medium: "{{date}}, {{time}}",
              short: "{{date}}, {{time}}",
            },
            defaultWidth: "full",
          }),
        },
        My = {
          lastWeek: "'last' eeee 'at' p",
          yesterday: "'yesterday at' p",
          today: "'today at' p",
          tomorrow: "'tomorrow at' p",
          nextWeek: "eeee 'at' p",
          other: "P",
        };
      function Ly(t) {
        return function (e, n) {
          var r,
            i = n || {};
          if (
            "formatting" === (i.context ? String(i.context) : "standalone") &&
            t.formattingValues
          ) {
            var o = t.defaultFormattingWidth || t.defaultWidth,
              s = i.width ? String(i.width) : o;
            r = t.formattingValues[s] || t.formattingValues[o];
          } else {
            var a = t.defaultWidth,
              u = i.width ? String(i.width) : t.defaultWidth;
            r = t.values[u] || t.values[a];
          }
          return r[t.argumentCallback ? t.argumentCallback(e) : e];
        };
      }
      function jy(t) {
        return function (e, n) {
          var r = String(e),
            i = n || {},
            o = i.width,
            s =
              (o && t.matchPatterns[o]) || t.matchPatterns[t.defaultMatchWidth],
            a = r.match(s);
          if (!a) return null;
          var u,
            c = a[0],
            h =
              (o && t.parsePatterns[o]) || t.parsePatterns[t.defaultParseWidth];
          return (
            (u =
              "[object Array]" === Object.prototype.toString.call(h)
                ? (function (t, e) {
                    for (var n = 0; n < t.length; n++)
                      if (t[n].test(c)) return n;
                  })(h)
                : (function (t, e) {
                    for (var n in t)
                      if (t.hasOwnProperty(n) && t[n].test(c)) return n;
                  })(h)),
            (u = t.valueCallback ? t.valueCallback(u) : u),
            {
              value: (u = i.valueCallback ? i.valueCallback(u) : u),
              rest: r.slice(c.length),
            }
          );
        };
      }
      const Fy = {
        code: "en-US",
        formatDistance: function (t, e, n) {
          var r;
          return (
            (n = n || {}),
            (r =
              "string" == typeof Dy[t]
                ? Dy[t]
                : 1 === e
                ? Dy[t].one
                : Dy[t].other.replace("{{count}}", e)),
            n.addSuffix ? (n.comparison > 0 ? "in " + r : r + " ago") : r
          );
        },
        formatLong: Ry,
        formatRelative: function (t, e, n, r) {
          return My[t];
        },
        localize: {
          ordinalNumber: function (t, e) {
            var n = Number(t),
              r = n % 100;
            if (r > 20 || r < 10)
              switch (r % 10) {
                case 1:
                  return n + "st";
                case 2:
                  return n + "nd";
                case 3:
                  return n + "rd";
              }
            return n + "th";
          },
          era: Ly({
            values: {
              narrow: ["B", "A"],
              abbreviated: ["BC", "AD"],
              wide: ["Before Christ", "Anno Domini"],
            },
            defaultWidth: "wide",
          }),
          quarter: Ly({
            values: {
              narrow: ["1", "2", "3", "4"],
              abbreviated: ["Q1", "Q2", "Q3", "Q4"],
              wide: [
                "1st quarter",
                "2nd quarter",
                "3rd quarter",
                "4th quarter",
              ],
            },
            defaultWidth: "wide",
            argumentCallback: function (t) {
              return Number(t) - 1;
            },
          }),
          month: Ly({
            values: {
              narrow: [
                "J",
                "F",
                "M",
                "A",
                "M",
                "J",
                "J",
                "A",
                "S",
                "O",
                "N",
                "D",
              ],
              abbreviated: [
                "Jan",
                "Feb",
                "Mar",
                "Apr",
                "May",
                "Jun",
                "Jul",
                "Aug",
                "Sep",
                "Oct",
                "Nov",
                "Dec",
              ],
              wide: [
                "January",
                "February",
                "March",
                "April",
                "May",
                "June",
                "July",
                "August",
                "September",
                "October",
                "November",
                "December",
              ],
            },
            defaultWidth: "wide",
          }),
          day: Ly({
            values: {
              narrow: ["S", "M", "T", "W", "T", "F", "S"],
              short: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
              abbreviated: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
              wide: [
                "Sunday",
                "Monday",
                "Tuesday",
                "Wednesday",
                "Thursday",
                "Friday",
                "Saturday",
              ],
            },
            defaultWidth: "wide",
          }),
          dayPeriod: Ly({
            values: {
              narrow: {
                am: "a",
                pm: "p",
                midnight: "mi",
                noon: "n",
                morning: "morning",
                afternoon: "afternoon",
                evening: "evening",
                night: "night",
              },
              abbreviated: {
                am: "AM",
                pm: "PM",
                midnight: "midnight",
                noon: "noon",
                morning: "morning",
                afternoon: "afternoon",
                evening: "evening",
                night: "night",
              },
              wide: {
                am: "a.m.",
                pm: "p.m.",
                midnight: "midnight",
                noon: "noon",
                morning: "morning",
                afternoon: "afternoon",
                evening: "evening",
                night: "night",
              },
            },
            defaultWidth: "wide",
            formattingValues: {
              narrow: {
                am: "a",
                pm: "p",
                midnight: "mi",
                noon: "n",
                morning: "in the morning",
                afternoon: "in the afternoon",
                evening: "in the evening",
                night: "at night",
              },
              abbreviated: {
                am: "AM",
                pm: "PM",
                midnight: "midnight",
                noon: "noon",
                morning: "in the morning",
                afternoon: "in the afternoon",
                evening: "in the evening",
                night: "at night",
              },
              wide: {
                am: "a.m.",
                pm: "p.m.",
                midnight: "midnight",
                noon: "noon",
                morning: "in the morning",
                afternoon: "in the afternoon",
                evening: "in the evening",
                night: "at night",
              },
            },
            defaultFormattingWidth: "wide",
          }),
        },
        match: {
          ordinalNumber:
            ((Oy = {
              matchPattern: /^(\d+)(th|st|nd|rd)?/i,
              parsePattern: /\d+/i,
              valueCallback: function (t) {
                return parseInt(t, 10);
              },
            }),
            function (t, e) {
              var n = String(t),
                r = e || {},
                i = n.match(Oy.matchPattern);
              if (!i) return null;
              var o = i[0],
                s = n.match(Oy.parsePattern);
              if (!s) return null;
              var a = Oy.valueCallback ? Oy.valueCallback(s[0]) : s[0];
              return {
                value: (a = r.valueCallback ? r.valueCallback(a) : a),
                rest: n.slice(o.length),
              };
            }),
          era: jy({
            matchPatterns: {
              narrow: /^(b|a)/i,
              abbreviated:
                /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
              wide: /^(before christ|before common era|anno domini|common era)/i,
            },
            defaultMatchWidth: "wide",
            parsePatterns: { any: [/^b/i, /^(a|c)/i] },
            defaultParseWidth: "any",
          }),
          quarter: jy({
            matchPatterns: {
              narrow: /^[1234]/i,
              abbreviated: /^q[1234]/i,
              wide: /^[1234](th|st|nd|rd)? quarter/i,
            },
            defaultMatchWidth: "wide",
            parsePatterns: { any: [/1/i, /2/i, /3/i, /4/i] },
            defaultParseWidth: "any",
            valueCallback: function (t) {
              return t + 1;
            },
          }),
          month: jy({
            matchPatterns: {
              narrow: /^[jfmasond]/i,
              abbreviated:
                /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
              wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i,
            },
            defaultMatchWidth: "wide",
            parsePatterns: {
              narrow: [
                /^j/i,
                /^f/i,
                /^m/i,
                /^a/i,
                /^m/i,
                /^j/i,
                /^j/i,
                /^a/i,
                /^s/i,
                /^o/i,
                /^n/i,
                /^d/i,
              ],
              any: [
                /^ja/i,
                /^f/i,
                /^mar/i,
                /^ap/i,
                /^may/i,
                /^jun/i,
                /^jul/i,
                /^au/i,
                /^s/i,
                /^o/i,
                /^n/i,
                /^d/i,
              ],
            },
            defaultParseWidth: "any",
          }),
          day: jy({
            matchPatterns: {
              narrow: /^[smtwf]/i,
              short: /^(su|mo|tu|we|th|fr|sa)/i,
              abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
              wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i,
            },
            defaultMatchWidth: "wide",
            parsePatterns: {
              narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
              any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i],
            },
            defaultParseWidth: "any",
          }),
          dayPeriod: jy({
            matchPatterns: {
              narrow:
                /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
              any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i,
            },
            defaultMatchWidth: "any",
            parsePatterns: {
              any: {
                am: /^a/i,
                pm: /^p/i,
                midnight: /^mi/i,
                noon: /^no/i,
                morning: /morning/i,
                afternoon: /afternoon/i,
                evening: /evening/i,
                night: /night/i,
              },
            },
            defaultParseWidth: "any",
          }),
        },
        options: { weekStartsOn: 0, firstWeekContainsDate: 1 },
      };
      function Uy(t) {
        if (null === t || !0 === t || !1 === t) return NaN;
        var e = Number(t);
        return isNaN(e) ? e : e < 0 ? Math.ceil(e) : Math.floor(e);
      }
      function Vy(t, e) {
        Ny(2, arguments);
        var n = Ay(t).getTime(),
          r = Uy(e);
        return new Date(n + r);
      }
      function qy(t, e) {
        Ny(2, arguments);
        var n = Uy(e);
        return Vy(t, -n);
      }
      function By(t, e) {
        for (
          var n = t < 0 ? "-" : "", r = Math.abs(t).toString();
          r.length < e;

        )
          r = "0" + r;
        return n + r;
      }
      const Gy = function (t, e) {
          var n = t.getUTCFullYear(),
            r = n > 0 ? n : 1 - n;
          return By("yy" === e ? r % 100 : r, e.length);
        },
        Wy = function (t, e) {
          var n = t.getUTCMonth();
          return "M" === e ? String(n + 1) : By(n + 1, 2);
        },
        zy = function (t, e) {
          return By(t.getUTCDate(), e.length);
        },
        Hy = function (t, e) {
          return By(t.getUTCHours() % 12 || 12, e.length);
        },
        Ky = function (t, e) {
          return By(t.getUTCHours(), e.length);
        },
        Jy = function (t, e) {
          return By(t.getUTCMinutes(), e.length);
        },
        Qy = function (t, e) {
          return By(t.getUTCSeconds(), e.length);
        },
        Yy = function (t, e) {
          var n = e.length,
            r = t.getUTCMilliseconds();
          return By(Math.floor(r * Math.pow(10, n - 3)), e.length);
        };
      var Xy = 864e5;
      function Zy(t) {
        Ny(1, arguments);
        var e = 1,
          n = Ay(t),
          r = n.getUTCDay(),
          i = (r < e ? 7 : 0) + r - e;
        return n.setUTCDate(n.getUTCDate() - i), n.setUTCHours(0, 0, 0, 0), n;
      }
      function $y(t) {
        Ny(1, arguments);
        var e = Ay(t),
          n = e.getUTCFullYear(),
          r = new Date(0);
        r.setUTCFullYear(n + 1, 0, 4), r.setUTCHours(0, 0, 0, 0);
        var i = Zy(r),
          o = new Date(0);
        o.setUTCFullYear(n, 0, 4), o.setUTCHours(0, 0, 0, 0);
        var s = Zy(o);
        return e.getTime() >= i.getTime()
          ? n + 1
          : e.getTime() >= s.getTime()
          ? n
          : n - 1;
      }
      function tb(t) {
        Ny(1, arguments);
        var e = $y(t),
          n = new Date(0);
        n.setUTCFullYear(e, 0, 4), n.setUTCHours(0, 0, 0, 0);
        var r = Zy(n);
        return r;
      }
      var eb = 6048e5;
      function nb(t, e) {
        Ny(1, arguments);
        var n = e || {},
          r = n.locale,
          i = r && r.options && r.options.weekStartsOn,
          o = null == i ? 0 : Uy(i),
          s = null == n.weekStartsOn ? o : Uy(n.weekStartsOn);
        if (!(s >= 0 && s <= 6))
          throw new RangeError(
            "weekStartsOn must be between 0 and 6 inclusively"
          );
        var a = Ay(t),
          u = a.getUTCDay(),
          c = (u < s ? 7 : 0) + u - s;
        return a.setUTCDate(a.getUTCDate() - c), a.setUTCHours(0, 0, 0, 0), a;
      }
      function rb(t, e) {
        Ny(1, arguments);
        var n = Ay(t, e),
          r = n.getUTCFullYear(),
          i = e || {},
          o = i.locale,
          s = o && o.options && o.options.firstWeekContainsDate,
          a = null == s ? 1 : Uy(s),
          u = null == i.firstWeekContainsDate ? a : Uy(i.firstWeekContainsDate);
        if (!(u >= 1 && u <= 7))
          throw new RangeError(
            "firstWeekContainsDate must be between 1 and 7 inclusively"
          );
        var c = new Date(0);
        c.setUTCFullYear(r + 1, 0, u), c.setUTCHours(0, 0, 0, 0);
        var h = nb(c, e),
          l = new Date(0);
        l.setUTCFullYear(r, 0, u), l.setUTCHours(0, 0, 0, 0);
        var f = nb(l, e);
        return n.getTime() >= h.getTime()
          ? r + 1
          : n.getTime() >= f.getTime()
          ? r
          : r - 1;
      }
      function ib(t, e) {
        Ny(1, arguments);
        var n = e || {},
          r = n.locale,
          i = r && r.options && r.options.firstWeekContainsDate,
          o = null == i ? 1 : Uy(i),
          s = null == n.firstWeekContainsDate ? o : Uy(n.firstWeekContainsDate),
          a = rb(t, e),
          u = new Date(0);
        u.setUTCFullYear(a, 0, s), u.setUTCHours(0, 0, 0, 0);
        var c = nb(u, e);
        return c;
      }
      var ob = 6048e5;
      function sb(t, e) {
        var n = t > 0 ? "-" : "+",
          r = Math.abs(t),
          i = Math.floor(r / 60),
          o = r % 60;
        if (0 === o) return n + String(i);
        var s = e || "";
        return n + String(i) + s + By(o, 2);
      }
      function ab(t, e) {
        return t % 60 == 0
          ? (t > 0 ? "-" : "+") + By(Math.abs(t) / 60, 2)
          : ub(t, e);
      }
      function ub(t, e) {
        var n = e || "",
          r = t > 0 ? "-" : "+",
          i = Math.abs(t);
        return r + By(Math.floor(i / 60), 2) + n + By(i % 60, 2);
      }
      const cb = {
        G: function (t, e, n) {
          var r = t.getUTCFullYear() > 0 ? 1 : 0;
          switch (e) {
            case "G":
            case "GG":
            case "GGG":
              return n.era(r, { width: "abbreviated" });
            case "GGGGG":
              return n.era(r, { width: "narrow" });
            case "GGGG":
            default:
              return n.era(r, { width: "wide" });
          }
        },
        y: function (t, e, n) {
          if ("yo" === e) {
            var r = t.getUTCFullYear(),
              i = r > 0 ? r : 1 - r;
            return n.ordinalNumber(i, { unit: "year" });
          }
          return Gy(t, e);
        },
        Y: function (t, e, n, r) {
          var i = rb(t, r),
            o = i > 0 ? i : 1 - i;
          return "YY" === e
            ? By(o % 100, 2)
            : "Yo" === e
            ? n.ordinalNumber(o, { unit: "year" })
            : By(o, e.length);
        },
        R: function (t, e) {
          return By($y(t), e.length);
        },
        u: function (t, e) {
          return By(t.getUTCFullYear(), e.length);
        },
        Q: function (t, e, n) {
          var r = Math.ceil((t.getUTCMonth() + 1) / 3);
          switch (e) {
            case "Q":
              return String(r);
            case "QQ":
              return By(r, 2);
            case "Qo":
              return n.ordinalNumber(r, { unit: "quarter" });
            case "QQQ":
              return n.quarter(r, {
                width: "abbreviated",
                context: "formatting",
              });
            case "QQQQQ":
              return n.quarter(r, { width: "narrow", context: "formatting" });
            case "QQQQ":
            default:
              return n.quarter(r, { width: "wide", context: "formatting" });
          }
        },
        q: function (t, e, n) {
          var r = Math.ceil((t.getUTCMonth() + 1) / 3);
          switch (e) {
            case "q":
              return String(r);
            case "qq":
              return By(r, 2);
            case "qo":
              return n.ordinalNumber(r, { unit: "quarter" });
            case "qqq":
              return n.quarter(r, {
                width: "abbreviated",
                context: "standalone",
              });
            case "qqqqq":
              return n.quarter(r, { width: "narrow", context: "standalone" });
            case "qqqq":
            default:
              return n.quarter(r, { width: "wide", context: "standalone" });
          }
        },
        M: function (t, e, n) {
          var r = t.getUTCMonth();
          switch (e) {
            case "M":
            case "MM":
              return Wy(t, e);
            case "Mo":
              return n.ordinalNumber(r + 1, { unit: "month" });
            case "MMM":
              return n.month(r, {
                width: "abbreviated",
                context: "formatting",
              });
            case "MMMMM":
              return n.month(r, { width: "narrow", context: "formatting" });
            case "MMMM":
            default:
              return n.month(r, { width: "wide", context: "formatting" });
          }
        },
        L: function (t, e, n) {
          var r = t.getUTCMonth();
          switch (e) {
            case "L":
              return String(r + 1);
            case "LL":
              return By(r + 1, 2);
            case "Lo":
              return n.ordinalNumber(r + 1, { unit: "month" });
            case "LLL":
              return n.month(r, {
                width: "abbreviated",
                context: "standalone",
              });
            case "LLLLL":
              return n.month(r, { width: "narrow", context: "standalone" });
            case "LLLL":
            default:
              return n.month(r, { width: "wide", context: "standalone" });
          }
        },
        w: function (t, e, n, r) {
          var i = (function (t, e) {
            Ny(1, arguments);
            var n = Ay(t),
              r = nb(n, e).getTime() - ib(n, e).getTime();
            return Math.round(r / ob) + 1;
          })(t, r);
          return "wo" === e
            ? n.ordinalNumber(i, { unit: "week" })
            : By(i, e.length);
        },
        I: function (t, e, n) {
          var r = (function (t) {
            Ny(1, arguments);
            var e = Ay(t),
              n = Zy(e).getTime() - tb(e).getTime();
            return Math.round(n / eb) + 1;
          })(t);
          return "Io" === e
            ? n.ordinalNumber(r, { unit: "week" })
            : By(r, e.length);
        },
        d: function (t, e, n) {
          return "do" === e
            ? n.ordinalNumber(t.getUTCDate(), { unit: "date" })
            : zy(t, e);
        },
        D: function (t, e, n) {
          var r = (function (t) {
            Ny(1, arguments);
            var e = Ay(t),
              n = e.getTime();
            e.setUTCMonth(0, 1), e.setUTCHours(0, 0, 0, 0);
            var r = e.getTime(),
              i = n - r;
            return Math.floor(i / Xy) + 1;
          })(t);
          return "Do" === e
            ? n.ordinalNumber(r, { unit: "dayOfYear" })
            : By(r, e.length);
        },
        E: function (t, e, n) {
          var r = t.getUTCDay();
          switch (e) {
            case "E":
            case "EE":
            case "EEE":
              return n.day(r, { width: "abbreviated", context: "formatting" });
            case "EEEEE":
              return n.day(r, { width: "narrow", context: "formatting" });
            case "EEEEEE":
              return n.day(r, { width: "short", context: "formatting" });
            case "EEEE":
            default:
              return n.day(r, { width: "wide", context: "formatting" });
          }
        },
        e: function (t, e, n, r) {
          var i = t.getUTCDay(),
            o = (i - r.weekStartsOn + 8) % 7 || 7;
          switch (e) {
            case "e":
              return String(o);
            case "ee":
              return By(o, 2);
            case "eo":
              return n.ordinalNumber(o, { unit: "day" });
            case "eee":
              return n.day(i, { width: "abbreviated", context: "formatting" });
            case "eeeee":
              return n.day(i, { width: "narrow", context: "formatting" });
            case "eeeeee":
              return n.day(i, { width: "short", context: "formatting" });
            case "eeee":
            default:
              return n.day(i, { width: "wide", context: "formatting" });
          }
        },
        c: function (t, e, n, r) {
          var i = t.getUTCDay(),
            o = (i - r.weekStartsOn + 8) % 7 || 7;
          switch (e) {
            case "c":
              return String(o);
            case "cc":
              return By(o, e.length);
            case "co":
              return n.ordinalNumber(o, { unit: "day" });
            case "ccc":
              return n.day(i, { width: "abbreviated", context: "standalone" });
            case "ccccc":
              return n.day(i, { width: "narrow", context: "standalone" });
            case "cccccc":
              return n.day(i, { width: "short", context: "standalone" });
            case "cccc":
            default:
              return n.day(i, { width: "wide", context: "standalone" });
          }
        },
        i: function (t, e, n) {
          var r = t.getUTCDay(),
            i = 0 === r ? 7 : r;
          switch (e) {
            case "i":
              return String(i);
            case "ii":
              return By(i, e.length);
            case "io":
              return n.ordinalNumber(i, { unit: "day" });
            case "iii":
              return n.day(r, { width: "abbreviated", context: "formatting" });
            case "iiiii":
              return n.day(r, { width: "narrow", context: "formatting" });
            case "iiiiii":
              return n.day(r, { width: "short", context: "formatting" });
            case "iiii":
            default:
              return n.day(r, { width: "wide", context: "formatting" });
          }
        },
        a: function (t, e, n) {
          var r = t.getUTCHours() / 12 >= 1 ? "pm" : "am";
          switch (e) {
            case "a":
            case "aa":
              return n.dayPeriod(r, {
                width: "abbreviated",
                context: "formatting",
              });
            case "aaa":
              return n
                .dayPeriod(r, { width: "abbreviated", context: "formatting" })
                .toLowerCase();
            case "aaaaa":
              return n.dayPeriod(r, { width: "narrow", context: "formatting" });
            case "aaaa":
            default:
              return n.dayPeriod(r, { width: "wide", context: "formatting" });
          }
        },
        b: function (t, e, n) {
          var r,
            i = t.getUTCHours();
          switch (
            ((r =
              12 === i
                ? "noon"
                : 0 === i
                ? "midnight"
                : i / 12 >= 1
                ? "pm"
                : "am"),
            e)
          ) {
            case "b":
            case "bb":
              return n.dayPeriod(r, {
                width: "abbreviated",
                context: "formatting",
              });
            case "bbb":
              return n
                .dayPeriod(r, { width: "abbreviated", context: "formatting" })
                .toLowerCase();
            case "bbbbb":
              return n.dayPeriod(r, { width: "narrow", context: "formatting" });
            case "bbbb":
            default:
              return n.dayPeriod(r, { width: "wide", context: "formatting" });
          }
        },
        B: function (t, e, n) {
          var r,
            i = t.getUTCHours();
          switch (
            ((r =
              i >= 17
                ? "evening"
                : i >= 12
                ? "afternoon"
                : i >= 4
                ? "morning"
                : "night"),
            e)
          ) {
            case "B":
            case "BB":
            case "BBB":
              return n.dayPeriod(r, {
                width: "abbreviated",
                context: "formatting",
              });
            case "BBBBB":
              return n.dayPeriod(r, { width: "narrow", context: "formatting" });
            case "BBBB":
            default:
              return n.dayPeriod(r, { width: "wide", context: "formatting" });
          }
        },
        h: function (t, e, n) {
          if ("ho" === e) {
            var r = t.getUTCHours() % 12;
            return 0 === r && (r = 12), n.ordinalNumber(r, { unit: "hour" });
          }
          return Hy(t, e);
        },
        H: function (t, e, n) {
          return "Ho" === e
            ? n.ordinalNumber(t.getUTCHours(), { unit: "hour" })
            : Ky(t, e);
        },
        K: function (t, e, n) {
          var r = t.getUTCHours() % 12;
          return "Ko" === e
            ? n.ordinalNumber(r, { unit: "hour" })
            : By(r, e.length);
        },
        k: function (t, e, n) {
          var r = t.getUTCHours();
          return (
            0 === r && (r = 24),
            "ko" === e ? n.ordinalNumber(r, { unit: "hour" }) : By(r, e.length)
          );
        },
        m: function (t, e, n) {
          return "mo" === e
            ? n.ordinalNumber(t.getUTCMinutes(), { unit: "minute" })
            : Jy(t, e);
        },
        s: function (t, e, n) {
          return "so" === e
            ? n.ordinalNumber(t.getUTCSeconds(), { unit: "second" })
            : Qy(t, e);
        },
        S: function (t, e) {
          return Yy(t, e);
        },
        X: function (t, e, n, r) {
          var i = (r._originalDate || t).getTimezoneOffset();
          if (0 === i) return "Z";
          switch (e) {
            case "X":
              return ab(i);
            case "XXXX":
            case "XX":
              return ub(i);
            case "XXXXX":
            case "XXX":
            default:
              return ub(i, ":");
          }
        },
        x: function (t, e, n, r) {
          var i = (r._originalDate || t).getTimezoneOffset();
          switch (e) {
            case "x":
              return ab(i);
            case "xxxx":
            case "xx":
              return ub(i);
            case "xxxxx":
            case "xxx":
            default:
              return ub(i, ":");
          }
        },
        O: function (t, e, n, r) {
          var i = (r._originalDate || t).getTimezoneOffset();
          switch (e) {
            case "O":
            case "OO":
            case "OOO":
              return "GMT" + sb(i, ":");
            case "OOOO":
            default:
              return "GMT" + ub(i, ":");
          }
        },
        z: function (t, e, n, r) {
          var i = (r._originalDate || t).getTimezoneOffset();
          switch (e) {
            case "z":
            case "zz":
            case "zzz":
              return "GMT" + sb(i, ":");
            case "zzzz":
            default:
              return "GMT" + ub(i, ":");
          }
        },
        t: function (t, e, n, r) {
          var i = r._originalDate || t;
          return By(Math.floor(i.getTime() / 1e3), e.length);
        },
        T: function (t, e, n, r) {
          return By((r._originalDate || t).getTime(), e.length);
        },
      };
      function hb(t, e) {
        switch (t) {
          case "P":
            return e.date({ width: "short" });
          case "PP":
            return e.date({ width: "medium" });
          case "PPP":
            return e.date({ width: "long" });
          case "PPPP":
          default:
            return e.date({ width: "full" });
        }
      }
      function lb(t, e) {
        switch (t) {
          case "p":
            return e.time({ width: "short" });
          case "pp":
            return e.time({ width: "medium" });
          case "ppp":
            return e.time({ width: "long" });
          case "pppp":
          default:
            return e.time({ width: "full" });
        }
      }
      const fb = {
        p: lb,
        P: function (t, e) {
          var n,
            r = t.match(/(P+)(p+)?/),
            i = r[1],
            o = r[2];
          if (!o) return hb(t, e);
          switch (i) {
            case "P":
              n = e.dateTime({ width: "short" });
              break;
            case "PP":
              n = e.dateTime({ width: "medium" });
              break;
            case "PPP":
              n = e.dateTime({ width: "long" });
              break;
            case "PPPP":
            default:
              n = e.dateTime({ width: "full" });
          }
          return n.replace("{{date}}", hb(i, e)).replace("{{time}}", lb(o, e));
        },
      };
      function pb(t) {
        var e = new Date(
          Date.UTC(
            t.getFullYear(),
            t.getMonth(),
            t.getDate(),
            t.getHours(),
            t.getMinutes(),
            t.getSeconds(),
            t.getMilliseconds()
          )
        );
        return e.setUTCFullYear(t.getFullYear()), t.getTime() - e.getTime();
      }
      var db = ["D", "DD"],
        vb = ["YY", "YYYY"];
      function gb(t) {
        return -1 !== db.indexOf(t);
      }
      function mb(t) {
        return -1 !== vb.indexOf(t);
      }
      function yb(t, e, n) {
        if ("YYYY" === t)
          throw new RangeError(
            "Use `yyyy` instead of `YYYY` (in `"
              .concat(e, "`) for formatting years to the input `")
              .concat(n, "`; see: https://git.io/fxCyr")
          );
        if ("YY" === t)
          throw new RangeError(
            "Use `yy` instead of `YY` (in `"
              .concat(e, "`) for formatting years to the input `")
              .concat(n, "`; see: https://git.io/fxCyr")
          );
        if ("D" === t)
          throw new RangeError(
            "Use `d` instead of `D` (in `"
              .concat(e, "`) for formatting days of the month to the input `")
              .concat(n, "`; see: https://git.io/fxCyr")
          );
        if ("DD" === t)
          throw new RangeError(
            "Use `dd` instead of `DD` (in `"
              .concat(e, "`) for formatting days of the month to the input `")
              .concat(n, "`; see: https://git.io/fxCyr")
          );
      }
      var bb = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,
        wb = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,
        _b = /^'([^]*?)'?$/,
        Ib = /''/g,
        Eb = /[a-zA-Z]/;
      function Tb(t) {
        return t.match(_b)[1].replace(Ib, "'");
      }
      class Sb {
        constructor(t, e) {
          (this.name = t), (this.date = e), (this.tasks = []);
        }
        setName(t) {
          this.name = t;
        }
        setDate(t) {
          this.date = t;
        }
        addTask(t) {
          this.tasks.push(t);
        }
      }
      class Cb {
        constructor() {
          (this.projects = []),
            this.projects.push(new Sb("Daily", "")),
            this.projects.push(new Sb("Weekly", "")),
            this.projects.push(new Sb("Monthly", "")),
            this.projects.push(new Sb("Yearly", ""));
        }
        setProjects(t) {
          this.projects = t;
        }
        addProject(t) {
          this.projects.push(t);
        }
      }
      class kb {
        constructor(t) {
          (this.text = t), (this.done = !1);
        }
        setTask(t) {
          this.text = t;
        }
        toggleDone() {
          this.checked ? (this.checked = !1) : (this.checked = !0);
        }
      }
      const Nb = t.firestore().collection("collection");
      class Ab {
        static initCollection(t) {
          const e = t.uid;
          Nb.doc(e)
            .get()
            .then((t) => {
              if (!t.exists) {
                const t = JSON.stringify(new Cb());
                Nb.doc(e).set({ myData: t }),
                  console.log(`Initialized new firestore collection for ${e}`);
              }
            })
            .catch((t) => {
              console.log(
                "Error getting cloud data, likely due to new user:",
                t
              );
            });
        }
        static getMyData() {
          const e = t.auth().currentUser.uid;
          return Nb.doc(e)
            .get()
            .then((t) => t.data().myData)
            .catch((t) => {
              console.log(
                "Error getting cloud data, likely due to new user:",
                t
              );
            });
        }
        static saveMyData(e) {
          const n = JSON.stringify(e),
            r = t.auth().currentUser.uid;
          return Nb.doc(r).set({ myData: n });
        }
        static addProject(t, e) {
          const n = document.querySelectorAll(".projNavBtn");
          let r = !1;
          for (let e of n)
            if (e.textContent === t) {
              (r = !0), alert("Error: Cannot create duplicate project");
              break;
            }
          r ||
            Ab.getMyData().then((n) => {
              const r = JSON.parse(n),
                i = r.projects,
                o = new Sb(t, e);
              i.push(o), (r.projects = i), Ab.saveMyData(r);
            });
        }
        static addTask(t, e) {
          Ab.getMyData().then((n) => {
            const r = JSON.parse(n),
              i = r.projects;
            i.forEach((n) => {
              if (n.name === e) {
                const e = new kb(t);
                n.tasks.push(e);
              }
            }),
              (r.projects = i),
              Ab.saveMyData(r);
          });
        }
        static editProj(t, e, n) {
          Ab.getMyData().then((r) => {
            const i = JSON.parse(r),
              o = i.projects;
            o.forEach((r) => {
              r.name === t && ((r.name = e), (r.date = n));
            }),
              (i.projects = o),
              Ab.saveMyData(i).then(() => {
                fw.loadProjectBtns();
              });
          });
        }
        static editTask(t, e, n) {
          Ab.getMyData().then((r) => {
            const i = JSON.parse(r),
              o = i.projects;
            for (let r = 0; r < o.length; r++)
              o[r].name === t && (o[r].tasks[e].text = n);
            (i.projects = o),
              Ab.saveMyData(i).then(() => {
                fw.loadProjectTasks(t);
              });
          });
        }
        static toggleTaskDoneStatus(t, e) {
          Ab.getMyData().then((n) => {
            const r = JSON.parse(n),
              i = r.projects;
            for (let n = 0; n < i.length; n++)
              i[n].name === t &&
                (i[n].tasks[e].done
                  ? (i[n].tasks[e].done = !1)
                  : (i[n].tasks[e].done = !0));
            (r.projects = i), Ab.saveMyData(r);
          });
        }
        static deleteProj(t) {
          Ab.getMyData().then((e) => {
            const n = JSON.parse(e),
              r = n.projects;
            for (let e = 0; e < r.length; e++)
              r[e].name === t && r.splice(e, 1);
            (n.projects = r),
              Ab.saveMyData(n).then(() => {
                fw.loadProjectBtns();
              });
          });
        }
        static deleteTask(t, e) {
          Ab.getMyData().then((n) => {
            const r = JSON.parse(n),
              i = r.projects;
            for (let n = 0; n < i.length; n++)
              i[n].name === t && i[n].tasks.splice(e, 1);
            (r.projects = i),
              Ab.saveMyData(r).then(() => {
                fw.loadProjectTasks(t);
              });
          });
        }
      }
      const Pb = document.querySelectorAll(".popup"),
        Db = document.querySelectorAll(".popupCloseBtn"),
        xb = document.querySelectorAll(".popupForm"),
        Ob = document.querySelectorAll(".popupErrMsg"),
        Rb = document.querySelectorAll(".routineProjBtn"),
        Mb = document.getElementById("newProjBtnsContainer"),
        Lb = document.getElementById("addProjBtn"),
        jb = document.getElementById("projCreatorWindow"),
        Fb = document.getElementById("projCreatorForm"),
        Ub = document.getElementById("projCreatorNameInput"),
        Vb = document.getElementById("projCreatorCloseBtn"),
        qb = document.getElementById("projCreatorErrorMsg"),
        Bb = document.getElementById("projEditorWindow"),
        Gb = document.getElementById("projEditorTitle"),
        Wb = document.getElementById("projEditorForm"),
        zb = document.getElementById("projNameEditInput"),
        Hb = document.getElementById("projDateEditInput"),
        Kb = document.getElementById("projEditorCloseBtn"),
        Jb = document.getElementById("projEditorDeleteBtn"),
        Qb = document.getElementById("projEditorErrorMsg"),
        Yb = document.getElementById("currentProjHeading"),
        Xb = document.getElementById("currentProjDate"),
        Zb = document.getElementById("currentProjTasksList"),
        $b = document.getElementById("addTaskBtn"),
        tw = document.getElementById("taskCreatorWindow"),
        ew = document.getElementById("taskCreatorForm"),
        nw = document.getElementById("taskTextArea"),
        rw = document.getElementById("taskCreatorCloseBtn"),
        iw = document.getElementById("taskCreatorErrorMsg"),
        ow = document.getElementById("taskEditorWindow"),
        sw = document.getElementById("taskEditorTitle"),
        aw = document.getElementById("taskEditorForm"),
        uw = document.getElementById("taskEditInput"),
        cw = document.getElementById("taskEditorCloseBtn"),
        hw = document.getElementById("taskEditorDeleteBtn"),
        lw = document.getElementById("taskEditorErrorMsg");
      class fw {
        static initProjCreator() {
          Vb.addEventListener("click", (t) => {
            t.preventDefault(), fw.removePopups();
          }),
            Fb.addEventListener("submit", (t) => {
              t.preventDefault();
              const e = Fb.projCreatorNameInput.value,
                n = Fb.projCreatorDateInput.value;
              e
                ? (Ab.addProject(e, n),
                  fw.insertProjBtn(e, n),
                  fw.displayNewProject(e, n),
                  fw.removePopups())
                : (qb.textContent = "Error: Name field cannot be empty");
            });
        }
        static initTaskCreator() {
          rw.addEventListener("click", (t) => {
            t.preventDefault(), fw.removePopups();
          }),
            ew.addEventListener("submit", (t) => {
              let e;
              t.preventDefault(),
                (e = Zb.hasChildNodes()
                  ? Zb.lastChild.getAttribute("data-taskIndex") + 1
                  : 0);
              const n =
                  document.getElementById("currentProjHeading").textContent,
                r = ew.taskTextArea.value;
              r
                ? (Ab.addTask(r, n),
                  fw.insertTask(r, !1, n, e),
                  fw.removePopups())
                : (iw.textContent = "Error: Cannot create an empty task");
            });
        }
        static initProjEditor() {
          Wb.addEventListener("submit", (t) => {
            t.preventDefault();
            const e = Wb.getAttribute("data-pName"),
              n = zb.value,
              r = Hb.value;
            n
              ? (Ab.editProj(e, n, r), fw.removePopups())
              : (Qb.textContent = "Error: Name field cannot be empty");
          }),
            Jb.addEventListener("click", (t) => {
              t.preventDefault();
              const e = Wb.getAttribute("data-pName");
              Ab.deleteProj(e),
                Yb.textContent === e && fw.loadProjectTasks("Daily"),
                fw.removePopups();
            }),
            Kb.addEventListener("click", (t) => {
              t.preventDefault(), fw.removePopups();
            });
        }
        static initTaskEditor() {
          aw.addEventListener("submit", (t) => {
            t.preventDefault();
            const e = ow.getAttribute("data-pName"),
              n = ow.getAttribute("data-taskIndex"),
              r = uw.value;
            r
              ? (Ab.editTask(e, n, r), fw.removePopups())
              : (lw.textContent = "Error: Cannot create an empty task");
          }),
            hw.addEventListener("click", (t) => {
              t.preventDefault();
              const e = ow.getAttribute("data-pName"),
                n = ow.getAttribute("data-taskIndex");
              Ab.deleteTask(e, n), fw.removePopups();
            }),
            cw.addEventListener("click", (t) => {
              t.preventDefault(), fw.removePopups();
            });
        }
        static loadAdders() {
          Lb.addEventListener("click", fw.openProjCreator),
            $b.addEventListener("click", fw.openTaskCreator);
        }
        static unLoadAdders() {
          Lb.removeEventListener("click", fw.openProjCreator),
            $b.removeEventListener("click", fw.openTaskCreator);
        }
        static initPopupCloser() {
          for (let t of Db)
            t.addEventListener("click", () => {
              fw.removePopups();
            });
        }
        static initRoutineProjBtns() {
          for (let t of Rb) {
            const e = t.getAttribute("data-pName");
            t.addEventListener("click", () => {
              fw.loadProjectTasks(e);
            });
          }
        }
        static loadProjectBtns() {
          Ab.getMyData()
            .then((t) => {
              (Mb.innerHTML = ""),
                JSON.parse(t).projects.forEach((t) => {
                  "Daily" !== t.name &&
                    "Weekly" !== t.name &&
                    "Monthly" !== t.name &&
                    "Yearly" !== t.name &&
                    fw.insertProjBtn(t.name, t.date);
                });
            })
            .catch((t) => {
              console.log("Error getting cloud data:", t);
            });
        }
        static loadProjectTasks(t) {
          (Zb.textContent = ""),
            Ab.getMyData()
              .then((e) => {
                JSON.parse(e).projects.forEach((e) => {
                  if (e.name === t) {
                    (Yb.textContent = `${t}`),
                      (Xb.textContent = ""),
                      e.date &&
                        (Xb.textContent = `Due: ${fw.formatDate(e.date)}`);
                    let n = 0;
                    e.tasks.forEach((e) => {
                      fw.insertTask(e.text, e.done, t, n), n++;
                    });
                  }
                });
              })
              .catch((t) => {
                console.log("Error getting cloud data:", t);
              });
        }
        static insertProjBtn(t, e) {
          const n = document.createElement("div");
          n.setAttribute("class", "projNavBtnEntry");
          const r = document.createElement("div");
          r.classList.add("projNavBtn"), r.setAttribute("data-pName", t);
          const i = document.createElement("div");
          i.classList.add("pNameLabel"), (i.textContent = `${t}`);
          const o = document.createElement("div");
          (o.textContent = `Due: ${e}`),
            r.append(i, o),
            r.addEventListener("click", () => {
              fw.loadProjectTasks(t);
            });
          const s = document.createElement("img");
          s.classList.add("projEditBtn"),
            (s.src = "images/edit.svg"),
            s.addEventListener("click", () => {
              fw.removePopups(),
                (Bb.style.display = "block"),
                Wb.setAttribute("data-pName", t),
                Wb.setAttribute("data-pDate", e),
                (Gb.textContent = `Edit Project: ${t}`),
                (zb.value = t),
                (Hb.value = e),
                zb.focus();
            }),
            n.append(r, s),
            Mb.append(n);
        }
        static insertTask(t, e, n, r) {
          const i = document.createElement("div");
          i.setAttribute("class", "taskEntry");
          const o = document.createElement("div");
          (o.textContent = `${t}`),
            o.setAttribute("class", "taskText"),
            o.addEventListener("click", () => {
              fw.populateTaskEditor(r, n, t);
            });
          const s = document.createElement("img");
          s.setAttribute("class", "checkBox"),
            e
              ? ((s.src = "images/boxChecked.svg"),
                (o.style.textDecoration = "line-through"))
              : ((s.src = "images/boxUnchecked.svg"),
                (o.style.textDecoration = "")),
            s.addEventListener("click", (t) => {
              e
                ? ((e = !1),
                  t.target.setAttribute("src", "images/boxUnchecked.svg"),
                  (o.style.textDecoration = ""),
                  Ab.toggleTaskDoneStatus(n, r))
                : ((e = !0),
                  t.target.setAttribute("src", "images/boxChecked.svg"),
                  (o.style.textDecoration = "line-through"),
                  Ab.toggleTaskDoneStatus(n, r));
            });
          const a = document.createElement("img");
          (a.src = "images/edit.svg"),
            a.setAttribute("class", "taskEditBtn"),
            a.setAttribute("data-taskIndex", `${r}`),
            a.addEventListener("click", () => {
              fw.removePopups(), fw.populateTaskEditor(r, n, t);
            }),
            i.append(s, o, a),
            Zb.append(i);
        }
        static unLoadProjectBtns() {
          Mb.innerHTML = "";
        }
        static unLoadProjectTasks() {
          Zb.innerHTML = "";
        }
        static openProjCreator() {
          fw.removePopups(), (jb.style.display = "block"), Ub.focus();
        }
        static openTaskCreator() {
          fw.removePopups(), (tw.style.display = "block"), nw.focus();
        }
        static removePopups() {
          for (let t of Pb) t.style.display = "none";
          for (let t of xb) t.reset();
          for (let t of Ob) t.textContent = "";
        }
        static populateTaskEditor(t, e, n) {
          (ow.style.display = "block"),
            ow.setAttribute("data-taskIndex", t),
            ow.setAttribute("data-pName", e),
            (sw.textContent = `Edit Task ${t + 1}`),
            (uw.value = n),
            uw.focus();
        }
        static displayNewProject(t, e) {
          (Yb.textContent = `${t}`),
            (Zb.innerHTML = ""),
            (Xb.textContent = ""),
            e && (Xb.textContent = `Due: ${fw.formatDate(e)}`);
        }
        static formatDate(t) {
          const e = t.split("-"),
            n = Number(e[0]),
            r = Number(e[1]) - 1,
            i = Number(e[2]);
          return (function (t, e, n) {
            Ny(2, arguments);
            var r = String(e),
              i = n || {},
              o = i.locale || Fy,
              s = o.options && o.options.firstWeekContainsDate,
              a = null == s ? 1 : Uy(s),
              u =
                null == i.firstWeekContainsDate
                  ? a
                  : Uy(i.firstWeekContainsDate);
            if (!(u >= 1 && u <= 7))
              throw new RangeError(
                "firstWeekContainsDate must be between 1 and 7 inclusively"
              );
            var c = o.options && o.options.weekStartsOn,
              h = null == c ? 0 : Uy(c),
              l = null == i.weekStartsOn ? h : Uy(i.weekStartsOn);
            if (!(l >= 0 && l <= 6))
              throw new RangeError(
                "weekStartsOn must be between 0 and 6 inclusively"
              );
            if (!o.localize)
              throw new RangeError("locale must contain localize property");
            if (!o.formatLong)
              throw new RangeError("locale must contain formatLong property");
            var f = Ay(t);
            if (!Py(f)) throw new RangeError("Invalid time value");
            var p = pb(f),
              d = qy(f, p),
              v = {
                firstWeekContainsDate: u,
                weekStartsOn: l,
                locale: o,
                _originalDate: f,
              };
            return r
              .match(wb)
              .map(function (t) {
                var e = t[0];
                return "p" === e || "P" === e
                  ? (0, fb[e])(t, o.formatLong, v)
                  : t;
              })
              .join("")
              .match(bb)
              .map(function (n) {
                if ("''" === n) return "'";
                var r = n[0];
                if ("'" === r) return Tb(n);
                var s = cb[r];
                if (s)
                  return (
                    !i.useAdditionalWeekYearTokens && mb(n) && yb(n, e, t),
                    !i.useAdditionalDayOfYearTokens && gb(n) && yb(n, e, t),
                    s(d, n, o.localize, v)
                  );
                if (r.match(Eb))
                  throw new RangeError(
                    "Format string contains an unescaped latin alphabet character `" +
                      r +
                      "`"
                  );
                return n;
              })
              .join("");
          })(new Date(n, r, i), "yyyy/MMM/dd");
        }
      }
      const pw = document.getElementById("topHeader"),
        dw = document.getElementById("headerAuthBtn"),
        vw = document.getElementById("accountProvider"),
        gw = document.getElementById("accountDisplayName"),
        mw = document.getElementById("accountDetailsImage"),
        yw = document.getElementById("appBody"),
        bw = document.getElementById("loginModal"),
        ww = document.getElementById("loginForm"),
        _w = document.getElementById("loginEmailInput"),
        Iw = document.getElementById("loginFormSignupBtn"),
        Ew = document.getElementById("signupModal"),
        Tw = document.getElementById("signupForm"),
        Sw = document.getElementById("signupEmailInput"),
        Cw = document.getElementById("signupCancelBtn"),
        kw = document.getElementById("logoutBtn"),
        Nw = document.getElementById("accountModal"),
        Aw = document.getElementById("loginErrorMsg"),
        Pw = document.getElementById("signupErrorMsg"),
        Dw = document.getElementById("googleAuthBtn"),
        xw = document.getElementById("facebookAuthBtn"),
        Ow = document.getElementById("githubAuthBtn"),
        Rw = new t.auth.GoogleAuthProvider(),
        Mw = new t.auth.FacebookAuthProvider(),
        Lw = new t.auth.GithubAuthProvider();
      class jw {
        static initAuth() {
          ww.addEventListener("submit", (t) => {
            t.preventDefault(), jw.signInWithEmailAndPassword();
          }),
            Tw.addEventListener("submit", (t) => {
              t.preventDefault(), jw.createUserWithEmailAndPassword();
            }),
            Iw.addEventListener("click", (t) => {
              t.preventDefault(), (Ew.style.display = "flex"), Sw.focus();
            }),
            Cw.addEventListener("click", (t) => {
              t.preventDefault(),
                Tw.reset(),
                (Ew.style.display = "none"),
                _w.focus();
            }),
            dw.addEventListener("click", () => {
              fw.removePopups(), (Nw.style.display = "block");
            }),
            kw.addEventListener("click", (t) => {
              t.preventDefault(), jw.signOut(), (Nw.style.display = "none");
            }),
            Dw.addEventListener("click", (t) => {
              t.preventDefault(), jw.signInWithGoogle();
            }),
            xw.addEventListener("click", (t) => {
              t.preventDefault(), jw.signInWithFacebook();
            }),
            Ow.addEventListener("click", (t) => {
              t.preventDefault(), jw.signInWithGithub();
            });
        }
        static signInWithGoogle() {
          t.auth()
            .signInWithPopup(Rw)
            .then((t) => {
              console.log(
                `Logged in using Google with firebase uid ${t.user.uid}`
              );
            })
            .catch((t) => {
              Aw.innerHTML = t;
            });
        }
        static signInWithFacebook() {
          t.auth()
            .signInWithPopup(Mw)
            .then((t) => {
              console.log(
                `Logged in using Facebook with firebase uid ${t.user.uid}`
              );
            })
            .catch((t) => {
              Aw.innerHTML = t;
            });
        }
        static signInWithGithub() {
          t.auth()
            .signInWithPopup(Lw)
            .then((t) => {
              console.log(
                `Logged in using Github with firebase uid ${t.user.uid}`
              );
            })
            .catch((t) => {
              Aw.innerHTML = t;
            });
        }
        static signInWithEmailAndPassword() {
          const e = ww.loginEmailInput.value,
            n = ww.loginPasswordInput.value;
          t.auth()
            .signInWithEmailAndPassword(e, n)
            .then((t) => {
              console.log(`Logged in using email and password ${t.user.uid}`),
                (Aw.innerHTML = "");
            })
            .catch((t) => {
              Aw.innerHTML = t;
            });
        }
        static createUserWithEmailAndPassword() {
          const e = Tw.signupEmailInput.value,
            n = Tw.signupPasswordInput.value;
          t.auth()
            .createUserWithEmailAndPassword(e, n)
            .then((t) => {
              console.log(
                `Signed up with email: ${t.user.email} and uid: ${t.user.uid}`
              ),
                (Aw.innerHTML = "");
            })
            .catch((t) => {
              Pw.innerHTML = t.message;
            });
        }
        static signOut() {
          t.auth().signOut();
        }
        static showLoginWindow() {
          (pw.style.display = "none"),
            (yw.style.display = "none"),
            (bw.style.display = "flex"),
            _w.focus();
        }
        static hideLoginWindow() {
          (pw.style.display = ""),
            (yw.style.display = ""),
            (bw.style.display = "none"),
            (Ew.style.display = "none");
        }
        static loadAuthData(t) {
          const e = t.providerData;
          console.log(
            `Provider Data:\n      displayName: ${e[0].displayName}, \n      email: ${e[0].email},\n      phoneNumber: ${e[0].phoneNumber}, \n      photoURL: ${e[0].photoURL}, \n      providerId: ${e[0].providerId}, \n      provider uid: ${e[0].uid},\n      firebase auth uid: ${t.uid}`
          );
          const n = e[0].email,
            r = e[0].providerId,
            i = e[0].displayName,
            o = e[0].photoURL;
          (vw.textContent = "password" != r ? r : ""),
            (dw.textContent = n || i),
            (gw.textContent = i || n),
            mw.setAttribute("src", o);
        }
      }
      document.addEventListener("DOMContentLoaded", () => {
        jw.initAuth(),
          fw.initProjCreator(),
          fw.initTaskCreator(),
          fw.initProjEditor(),
          fw.initTaskEditor(),
          fw.initPopupCloser(),
          fw.initRoutineProjBtns();
      }),
        t.auth().onAuthStateChanged((t) => {
          t
            ? (Ab.initCollection(t),
              jw.loadAuthData(t),
              jw.hideLoginWindow(),
              fw.loadAdders(),
              fw.loadProjectBtns(),
              fw.loadProjectTasks("Daily"))
            : (jw.showLoginWindow(),
              fw.unLoadAdders(),
              fw.unLoadProjectBtns(),
              fw.unLoadProjectTasks());
        });
    })();
})();
